Released SR*3*153 SEQ #152
Extracted from mail message
**KIDS**:SR*3.0*153^

**INSTALL NAME**
SR*3.0*153
"BLD",5583,0)
SR*3.0*153^SURGERY^0^3060717^y
"BLD",5583,1,0)
^^123^123^3060516^
"BLD",5583,1,1,0)
his patch updates the Surgery Risk Assessment software of the Veterans
"BLD",5583,1,2,0)
Health Information Systems and Technology Architecture (VistA)
"BLD",5583,1,3,0)
Surgery application as requested by the Executive Board of the National
"BLD",5583,1,4,0)
Surgical Quality Improvement Program (NSQIP) and by the Cardiac Surgery
"BLD",5583,1,5,0)
Consultants Board of the Continuous Improvement in Cardiac Surgery
"BLD",5583,1,6,0)
Program (CICSP). These updates include the addition of new data fields,
"BLD",5583,1,7,0)
changes to existing data fields, changes to data entry screens, changes
"BLD",5583,1,8,0)
to reports used in Surgery Risk Assessment management process and changes
"BLD",5583,1,9,0)
to the Surgery Risk Assessment transmissions.
"BLD",5583,1,10,0)
 
"BLD",5583,1,11,0)
NOTE: All fields listed below are in the SURGERY file (#130) unless
"BLD",5583,1,12,0)
otherwise indicated.
"BLD",5583,1,13,0)
 
"BLD",5583,1,14,0)
Cardiac Risk Assessment Modifications
"BLD",5583,1,15,0)
-------------------------------------
"BLD",5583,1,16,0)
 o Modifications to the Clinical Information (Enter/Edit) [SROA CLINICAL
"BLD",5583,1,17,0)
   INFORMATION] option
"BLD",5583,1,18,0)
  - The software is modified to auto-populate the HEIGHT field (#236) and
"BLD",5583,1,19,0)
    the WEIGHT field (#237) as documented in the Vitals software.
"BLD",5583,1,20,0)
  - The Current Smoker item under this option is modified to reference to
"BLD",5583,1,21,0)
    the new CURRENT SMOKER (CARDIAC) field (#510) instead of the old field
"BLD",5583,1,22,0)
    CURRENT SMOKER field (#202), which will be utilized by the NSQIP
"BLD",5583,1,23,0)
    options.
"BLD",5583,1,24,0)
 
"BLD",5583,1,25,0)
 o Modifications to the Laboratory Test Results (Enter/Edit) [SROA
"BLD",5583,1,26,0)
   LAB-CARDIAC] option
"BLD",5583,1,27,0)
  - The HEMOGLOBIN A1C field (#504) and the HEMOGLOBIN A1C, DATE field
"BLD",5583,1,28,0)
    (#504.1) are added to the list of preoperative lab results.
"BLD",5583,1,29,0)
  - The software is modified to use a date range of 1000 days prior to the
"BLD",5583,1,30,0)
    date of operation when searching for the most recent preoperative lab
"BLD",5583,1,31,0)
    test result for the HDL (CARDIAC) field (#457), the LDL (CARDIAC)
"BLD",5583,1,32,0)
    field (#461), the TOTAL CHOLESTEROL (CARDIAC) field (#462), the SERUM
"BLD",5583,1,33,0)
    TRIGLYCERIDE (CARDIAC) field (#458), and the HEMOGLOBIN A1C field
"BLD",5583,1,34,0)
    (#504).
"BLD",5583,1,35,0)
 
"BLD",5583,1,36,0)
 o The Enter Cardiac Catheterization & Angiographic Data [SROA CARDIAC
"BLD",5583,1,37,0)
   PROCEDURES] option is modified to allow all fields to be
"BLD",5583,1,38,0)
   auto-populated with 'NS' (NO STUDY) when 'NS' is entered in the
"BLD",5583,1,39,0)
   PROCEDURE TYPE field (#476).
"BLD",5583,1,40,0)
 
"BLD",5583,1,41,0)
 o Modifications to the Cardiac Procedures Operative Data (Enter/Edit)
"BLD",5583,1,42,0)
   [SROA CARDIAC PROCEDURES] option
"BLD",5583,1,43,0)
  - The GREAT VESSEL REPAIR (Y/N) field (#372) is moved to screen #1 under
"BLD",5583,1,44,0)
    this option as item #20.
"BLD",5583,1,45,0)
  - The ENDOVASCULAR REPAIR field (#505) is added in screen #1 as item
"BLD",5583,1,46,0)
    #21.
"BLD",5583,1,47,0)
  - The OTHER CT PROCEDURE field (#484) in the first screen is now
"BLD",5583,1,48,0)
    replaced by the OTHER CARDIAC PROCEDURES (Y/N) field (#502). If this
"BLD",5583,1,49,0)
    field value is "YES" the software will prompt the user for the OTHER
"BLD",5583,1,50,0)
    CARDIAC PROCEDURES-LIST field (#484).
"BLD",5583,1,51,0)
  - The OTHER NON-CT PROCEDURES field (#491) is removed from the second
"BLD",5583,1,52,0)
    screen and a blank line is added before "Other Operative Data
"BLD",5583,1,53,0)
    details" header.
"BLD",5583,1,54,0)
  - The software is modified so that entering "N" for the VALVE REPAIR
"BLD",5583,1,55,0)
    field (#370) shall result in "5. None". The existing N's will be
"BLD",5583,1,56,0)
    converted to '5' upon patch installation.
"BLD",5583,1,57,0)
  - This option is updated to reference the new MAZE PROCEDURE field
"BLD",5583,1,58,0)
    (#512) as item 13 in the first data entry screen.
"BLD",5583,1,59,0)
 
"BLD",5583,1,60,0)
 o A new occurrence category REPEAT VENTILATOR SUPPORT W/IN 30 DAYS is
"BLD",5583,1,61,0)
   created in the PERIOPERATIVE OCCURRENCE CATEGORY file (#136.5). This
"BLD",5583,1,62,0)
   occurrence category will be selectable only for cardiac assessed cases.
"BLD",5583,1,63,0)
 
"BLD",5583,1,64,0)
 o The following fields on the Resource Data [SROA CARDIAC RESOURCE]
"BLD",5583,1,65,0)
   option are modified to assume a default of "past date" when no year is
"BLD",5583,1,66,0)
   specified:
"BLD",5583,1,67,0)
  - ESTIMATE OF MORTALITY, DATE field (#364.1)
"BLD",5583,1,68,0)
  - D/T PATIENT EXTUBATED field (#470)
"BLD",5583,1,69,0)
  - D/T PATIENT DISCH FROM ICU field (#471)
"BLD",5583,1,70,0)
 
"BLD",5583,1,71,0)
 o This patch will allow the retransmission of a cardiac risk assessment.
"BLD",5583,1,72,0)
 
"BLD",5583,1,73,0)
Non-Cardiac Assessment Modifications
"BLD",5583,1,74,0)
------------------------------------
"BLD",5583,1,75,0)
 o Modifications to the Preoperative Information (Enter/Edit) [SROA PREOP
"BLD",5583,1,76,0)
   DATA] option
"BLD",5583,1,77,0)
  - The software is modified to auto-populate the HEIGHT field (#236) and
"BLD",5583,1,78,0)
    the WEIGHT field (#237) as documented in the Vitals software.
"BLD",5583,1,79,0)
  - The PREGNANCY field (#269) is added to the NUTRITIONAL/IMMUNE/OTHER
"BLD",5583,1,80,0)
    section.
"BLD",5583,1,81,0)
 
"BLD",5583,1,82,0)
 o Modifications to the Laboratory Test Results (Enter/Edit) [SROA LAB]
"BLD",5583,1,83,0)
   option
"BLD",5583,1,84,0)
  - The PREOPERATIVE ANION GAP field (#444) and the PREOP ANION GAP, DATE
"BLD",5583,1,85,0)
    field (#444.1) are added to the list of preoperative lab results.
"BLD",5583,1,86,0)
  - The HIGHEST ANION GAP field (#445) and the HIGH ANION GAP, DATE field
"BLD",5583,1,87,0)
    (445.1) are added to the list of postoperative lab results.
"BLD",5583,1,88,0)
 
"BLD",5583,1,89,0)
 o The Operation Information (Enter/Edit) [SROA OPERATION DATA] option is
"BLD",5583,1,90,0)
   modified to add the INTRAOP DISSEMINATED CANCER field (#443).
"BLD",5583,1,91,0)
 
"BLD",5583,1,92,0)
Other Risk Assessment Modifications
"BLD",5583,1,93,0)
-----------------------------------
"BLD",5583,1,94,0)
 o The Print a Surgery Risk Assessment [SROA Print Assessment] option is
"BLD",5583,1,95,0)
   modified to include the new data elements.
"BLD",5583,1,96,0)
 
"BLD",5583,1,97,0)
 o The transmissions to the national databases are modified to include the
"BLD",5583,1,98,0)
   new fields.
"BLD",5583,1,99,0)
 
"BLD",5583,1,100,0)
 o Modification to some of the user entries of fields that allow text to
"BLD",5583,1,101,0)
   be entered to accept lower case or all CAPS
"BLD",5583,1,102,0)
  - The NUM OF PRIOR HEART SURGERIES field (#352) is modified to allow the
"BLD",5583,1,103,0)
    entry of lowercase letter "N" to represent "0 - NONE". Any existing
"BLD",5583,1,104,0)
    N's will be converted to '0' for NONE by he post install routine.
"BLD",5583,1,105,0)
  - The ESTIMATE OF MORTALITY field (#364) is modified to allow the entry
"BLD",5583,1,106,0)
    of lowercase letter "ns" to represent "NO STUDY".
"BLD",5583,1,107,0)
 
"BLD",5583,1,108,0)
 o Modifications to the List of Surgery Risk Assessments [SROA ASSESSMENT
"BLD",5583,1,109,0)
   LIST] option
"BLD",5583,1,110,0)
  - Each report is modified to display the final CPT codes from the case
"BLD",5583,1,111,0)
    coding record in the SURGERY PROCEDURE/DIAGNOSIS CODES file (#136).
"BLD",5583,1,112,0)
  - List of 1-Liner Cases Missing Information (list #8) is added.
"BLD",5583,1,113,0)
 
"BLD",5583,1,114,0)
General Surgery Items
"BLD",5583,1,115,0)
---------------------
"BLD",5583,1,116,0)
 o The PREOP HAIR CLIPPING BY field (#.12) is renamed HAIR REMOVAL BY.
"BLD",5583,1,117,0)
 
"BLD",5583,1,118,0)
 o The HAIR REMOVAL METHOD field (#506) and the HAIR REMOVAL COMMENTS
"BLD",5583,1,119,0)
   field (#508) are added to the Operation Startup [SROMEN-START] option
"BLD",5583,1,120,0)
   and the Operation (Short Screen) [SROMEN-OUT] option. Those two fields
"BLD",5583,1,121,0)
   and the HAIR REMOVAL BY field (#.12) are added to the Nurse
"BLD",5583,1,122,0)
   Intraoperative Report and became a mandatory documentation field to
"BLD",5583,1,123,0)
   satisfy the record review process for quality measurement purposes.
"BLD",5583,4,0)
^9.64PA^130^2
"BLD",5583,4,130,0)
130
"BLD",5583,4,130,2,0)
^9.641^130.22^2
"BLD",5583,4,130,2,130,0)
SURGERY  (File-top level)
"BLD",5583,4,130,2,130,1,0)
^9.6411^218.1^54
"BLD",5583,4,130,2,130,1,.12,0)
PREOP HAIR REMOVAL BY
"BLD",5583,4,130,2,130,1,1.09,0)
WOUND CLASSIFICATION
"BLD",5583,4,130,2,130,1,102,0)
REASON FOR NO ASSESSMENT
"BLD",5583,4,130,2,130,1,202,0)
CURRENT SMOKER
"BLD",5583,4,130,2,130,1,211,0)
CURRENTLY ON DIALYSIS
"BLD",5583,4,130,2,130,1,216,0)
BLEEDING DISORDERS
"BLD",5583,4,130,2,130,1,218.1,0)
PREOPERATIVE SEPSIS
"BLD",5583,4,130,2,130,1,220,0)
PREVIOUS PCI
"BLD",5583,4,130,2,130,1,250,0)
SYSTEMIC SEPSIS
"BLD",5583,4,130,2,130,1,254,0)
ACUTE RENAL FAILURE
"BLD",5583,4,130,2,130,1,266,0)
PREVIOUS CARDIAC SURGERY
"BLD",5583,4,130,2,130,1,269,0)
PREGNANCY
"BLD",5583,4,130,2,130,1,285,0)
ON VENTILATOR >48 HOURS
"BLD",5583,4,130,2,130,1,352,0)
NUM OF PRIOR HEART SURGERIES
"BLD",5583,4,130,2,130,1,364,0)
ESTIMATE OF MORTALITY
"BLD",5583,4,130,2,130,1,364.1,0)
ESTIMATE OF MORTALITY, DATE
"BLD",5583,4,130,2,130,1,370,0)
VALVE REPAIR
"BLD",5583,4,130,2,130,1,372,0)
GREAT VESSEL REPAIR (Y/N)
"BLD",5583,4,130,2,130,1,373,0)
CARDIAC TRANSPLANT
"BLD",5583,4,130,2,130,1,384,0)
OPERATIVE DEATH
"BLD",5583,4,130,2,130,1,401,0)
TUMOR INVOLVING CNS (Y/N)
"BLD",5583,4,130,2,130,1,410,0)
COMA > 24 HOURS POSTOP
"BLD",5583,4,130,2,130,1,411,0)
CARDIAC ARREST REQ CPR
"BLD",5583,4,130,2,130,1,430,0)
CARDIAC RISK PREOP COMMENTS
"BLD",5583,4,130,2,130,1,431,0)
CARDIAC RESOURCE DATA COMMENTS
"BLD",5583,4,130,2,130,1,443,0)
INTRAOP DISSEMINATED CANCER
"BLD",5583,4,130,2,130,1,444,0)
PREOPERATIVE ANION GAP
"BLD",5583,4,130,2,130,1,444.1,0)
PREOP ANION GAP, DATE
"BLD",5583,4,130,2,130,1,445,0)
HIGHEST ANION GAP
"BLD",5583,4,130,2,130,1,445.1,0)
HIGH ANION GAP, DATE
"BLD",5583,4,130,2,130,1,457,0)
HDL (CARDIAC)
"BLD",5583,4,130,2,130,1,457.1,0)
HDL, DATE
"BLD",5583,4,130,2,130,1,458,0)
SERUM TRIGLYCERIDE (CARDIAC)
"BLD",5583,4,130,2,130,1,458.1,0)
SERUM TRIGLYCERIDE, DATE (CAR)
"BLD",5583,4,130,2,130,1,461,0)
LDL (CARDIAC)
"BLD",5583,4,130,2,130,1,461.1,0)
LDL, DATE (CARDIAC)
"BLD",5583,4,130,2,130,1,462,0)
TOTAL CHOLESTEROL (CARDIAC)
"BLD",5583,4,130,2,130,1,462.1,0)
TOTAL CHOLESTEROL, DATE
"BLD",5583,4,130,2,130,1,470,0)
D/T PATIENT EXTUBATED
"BLD",5583,4,130,2,130,1,471,0)
D/T PATIENT DISCH FROM ICU
"BLD",5583,4,130,2,130,1,475,0)
DIABETES (CARDIAC)
"BLD",5583,4,130,2,130,1,477,0)
AORTIC STENOSIS
"BLD",5583,4,130,2,130,1,481,0)
BRIDGE TO TRANSPLANT/DEVICE
"BLD",5583,4,130,2,130,1,482,0)
*MAZE PROCEDURE
"BLD",5583,4,130,2,130,1,484,0)
OTHER CARDIAC PROCEDURES-LIST
"BLD",5583,4,130,2,130,1,487.1,0)
PREOPERATIVE INR, DATE
"BLD",5583,4,130,2,130,1,502,0)
OTHER CARDIAC PROCEDURES (Y/N)
"BLD",5583,4,130,2,130,1,504,0)
HEMOGLOBIN A1C
"BLD",5583,4,130,2,130,1,504.1,0)
HEMOGLOBIN A1C, DATE
"BLD",5583,4,130,2,130,1,505,0)
ENDOVASCULAR REPAIR
"BLD",5583,4,130,2,130,1,506,0)
HAIR REMOVAL METHOD
"BLD",5583,4,130,2,130,1,508,0)
HAIR REMOVAL COMMENTS
"BLD",5583,4,130,2,130,1,510,0)
CURRENT SMOKER (CARDIAC)
"BLD",5583,4,130,2,130,1,512,0)
MAZE PROCEDURE
"BLD",5583,4,130,2,130.22,0)
POSTOP OCCURRENCE  (sub-file)
"BLD",5583,4,130,2,130.22,1,0)
^9.6411^8^2
"BLD",5583,4,130,2,130.22,1,7,0)
SEPSIS CATEGORY
"BLD",5583,4,130,2,130.22,1,8,0)
CPB STATUS
"BLD",5583,4,130,222)
y^y^p^^^^n^^n
"BLD",5583,4,130,224)

"BLD",5583,4,136.5,0)
136.5
"BLD",5583,4,136.5,222)
y^y^f^^n^^y^o^n
"BLD",5583,4,"APDD",130,130)

"BLD",5583,4,"APDD",130,130,.12)

"BLD",5583,4,"APDD",130,130,1.09)

"BLD",5583,4,"APDD",130,130,102)

"BLD",5583,4,"APDD",130,130,202)

"BLD",5583,4,"APDD",130,130,211)

"BLD",5583,4,"APDD",130,130,216)

"BLD",5583,4,"APDD",130,130,218.1)

"BLD",5583,4,"APDD",130,130,220)

"BLD",5583,4,"APDD",130,130,250)

"BLD",5583,4,"APDD",130,130,254)

"BLD",5583,4,"APDD",130,130,266)

"BLD",5583,4,"APDD",130,130,269)

"BLD",5583,4,"APDD",130,130,285)

"BLD",5583,4,"APDD",130,130,352)

"BLD",5583,4,"APDD",130,130,364)

"BLD",5583,4,"APDD",130,130,364.1)

"BLD",5583,4,"APDD",130,130,370)

"BLD",5583,4,"APDD",130,130,372)

"BLD",5583,4,"APDD",130,130,373)

"BLD",5583,4,"APDD",130,130,384)

"BLD",5583,4,"APDD",130,130,401)

"BLD",5583,4,"APDD",130,130,410)

"BLD",5583,4,"APDD",130,130,411)

"BLD",5583,4,"APDD",130,130,430)

"BLD",5583,4,"APDD",130,130,431)

"BLD",5583,4,"APDD",130,130,443)

"BLD",5583,4,"APDD",130,130,444)

"BLD",5583,4,"APDD",130,130,444.1)

"BLD",5583,4,"APDD",130,130,445)

"BLD",5583,4,"APDD",130,130,445.1)

"BLD",5583,4,"APDD",130,130,457)

"BLD",5583,4,"APDD",130,130,457.1)

"BLD",5583,4,"APDD",130,130,458)

"BLD",5583,4,"APDD",130,130,458.1)

"BLD",5583,4,"APDD",130,130,461)

"BLD",5583,4,"APDD",130,130,461.1)

"BLD",5583,4,"APDD",130,130,462)

"BLD",5583,4,"APDD",130,130,462.1)

"BLD",5583,4,"APDD",130,130,470)

"BLD",5583,4,"APDD",130,130,471)

"BLD",5583,4,"APDD",130,130,475)

"BLD",5583,4,"APDD",130,130,477)

"BLD",5583,4,"APDD",130,130,481)

"BLD",5583,4,"APDD",130,130,482)

"BLD",5583,4,"APDD",130,130,484)

"BLD",5583,4,"APDD",130,130,487.1)

"BLD",5583,4,"APDD",130,130,502)

"BLD",5583,4,"APDD",130,130,504)

"BLD",5583,4,"APDD",130,130,504.1)

"BLD",5583,4,"APDD",130,130,505)

"BLD",5583,4,"APDD",130,130,506)

"BLD",5583,4,"APDD",130,130,508)

"BLD",5583,4,"APDD",130,130,510)

"BLD",5583,4,"APDD",130,130,512)

"BLD",5583,4,"APDD",130,130.22)

"BLD",5583,4,"APDD",130,130.22,7)

"BLD",5583,4,"APDD",130,130.22,8)

"BLD",5583,4,"B",130,130)

"BLD",5583,4,"B",136.5,136.5)

"BLD",5583,6.3)
11
"BLD",5583,"INI")
PRE^SR153UTL
"BLD",5583,"INID")
^y^y
"BLD",5583,"INIT")
POST^SR153UTL
"BLD",5583,"KRN",0)
^9.67PA^8989.52^19
"BLD",5583,"KRN",.4,0)
.4
"BLD",5583,"KRN",.401,0)
.401
"BLD",5583,"KRN",.402,0)
.402
"BLD",5583,"KRN",.402,"NM",0)
^9.68A^4^4
"BLD",5583,"KRN",.402,"NM",1,0)
SRO-NOCOMP    FILE #130^130^0
"BLD",5583,"KRN",.402,"NM",2,0)
SROMEN-OUT    FILE #130^130^0
"BLD",5583,"KRN",.402,"NM",3,0)
SROMEN-START    FILE #130^130^0
"BLD",5583,"KRN",.402,"NM",4,0)
SRONRPT    FILE #130^130^0
"BLD",5583,"KRN",.402,"NM","B","SRO-NOCOMP    FILE #130",1)

"BLD",5583,"KRN",.402,"NM","B","SROMEN-OUT    FILE #130",2)

"BLD",5583,"KRN",.402,"NM","B","SROMEN-START    FILE #130",3)

"BLD",5583,"KRN",.402,"NM","B","SRONRPT    FILE #130",4)

"BLD",5583,"KRN",.403,0)
.403
"BLD",5583,"KRN",.5,0)
.5
"BLD",5583,"KRN",.84,0)
.84
"BLD",5583,"KRN",3.6,0)
3.6
"BLD",5583,"KRN",3.8,0)
3.8
"BLD",5583,"KRN",9.2,0)
9.2
"BLD",5583,"KRN",9.8,0)
9.8
"BLD",5583,"KRN",9.8,"NM",0)
^9.68A^103^100
"BLD",5583,"KRN",9.8,"NM",1,0)
SROAPR2^^0^B10438353
"BLD",5583,"KRN",9.8,"NM",2,0)
SROAPRE2^^0^B8990080
"BLD",5583,"KRN",9.8,"NM",3,0)
SROAPS2^^0^B13745888
"BLD",5583,"KRN",9.8,"NM",4,0)
SROAOP^^0^B18332752
"BLD",5583,"KRN",9.8,"NM",5,0)
SROAOP1^^0^B10623526
"BLD",5583,"KRN",9.8,"NM",6,0)
SROAUTL^^0^B40591108
"BLD",5583,"KRN",9.8,"NM",8,0)
SROAEX^^0^B13592830
"BLD",5583,"KRN",9.8,"NM",9,0)
SROAWL^^0^B32512298
"BLD",5583,"KRN",9.8,"NM",10,0)
SROAWL1^^0^B32202367
"BLD",5583,"KRN",9.8,"NM",11,0)
SROA30^^0^B24202198
"BLD",5583,"KRN",9.8,"NM",12,0)
SROALET^^0^B21039720
"BLD",5583,"KRN",9.8,"NM",13,0)
SROXR4^^0^B6379114
"BLD",5583,"KRN",9.8,"NM",14,0)
SROAL1^^0^B22463945
"BLD",5583,"KRN",9.8,"NM",15,0)
SROAL11^^0^B18235736
"BLD",5583,"KRN",9.8,"NM",16,0)
SROAL2^^0^B18933004
"BLD",5583,"KRN",9.8,"NM",17,0)
SROAL21^^0^B9664688
"BLD",5583,"KRN",9.8,"NM",18,0)
SROALN1^^0^B8424056
"BLD",5583,"KRN",9.8,"NM",19,0)
SROALN2^^0^B9184341
"BLD",5583,"KRN",9.8,"NM",20,0)
SROALN3^^0^B12090037
"BLD",5583,"KRN",9.8,"NM",21,0)
SROALEN^^0^B11769217
"BLD",5583,"KRN",9.8,"NM",22,0)
SROALDP^^0^B3261436
"BLD",5583,"KRN",9.8,"NM",23,0)
SROCMP^^0^B26995986
"BLD",5583,"KRN",9.8,"NM",24,0)
SROCMP1^^0^B17735351
"BLD",5583,"KRN",9.8,"NM",25,0)
SROCMP2^^0^B4362143
"BLD",5583,"KRN",9.8,"NM",27,0)
SROALOG^^0^B16589351
"BLD",5583,"KRN",9.8,"NM",28,0)
SROAUTL2^^0^B32578707
"BLD",5583,"KRN",9.8,"NM",29,0)
SROAUTL1^^0^B18465226
"BLD",5583,"KRN",9.8,"NM",30,0)
SROATMIT^^0^B7128937
"BLD",5583,"KRN",9.8,"NM",31,0)
SROATM1^^0^B23786520
"BLD",5583,"KRN",9.8,"NM",32,0)
SROATM2^^0^B33905156
"BLD",5583,"KRN",9.8,"NM",33,0)
SROATM3^^0^B20814871
"BLD",5583,"KRN",9.8,"NM",34,0)
SROATM4^^0^B8737618
"BLD",5583,"KRN",9.8,"NM",35,0)
SROAPRT1^^0^B15011288
"BLD",5583,"KRN",9.8,"NM",36,0)
SROAPRT2^^0^B11958785
"BLD",5583,"KRN",9.8,"NM",37,0)
SROAPRT3^^0^B15633950
"BLD",5583,"KRN",9.8,"NM",38,0)
SROAPRT4^^0^B5890683
"BLD",5583,"KRN",9.8,"NM",39,0)
SROAPRT5^^0^B5810182
"BLD",5583,"KRN",9.8,"NM",40,0)
SRO1L1^^0^B13673029
"BLD",5583,"KRN",9.8,"NM",41,0)
SROCL1^^0^B10860164
"BLD",5583,"KRN",9.8,"NM",42,0)
SROACAR^^0^B10623143
"BLD",5583,"KRN",9.8,"NM",43,0)
SROACAT^^0^B19181546
"BLD",5583,"KRN",9.8,"NM",44,0)
SROACL1^^0^B26895969
"BLD",5583,"KRN",9.8,"NM",45,0)
SROACPM1^^0^B14126949
"BLD",5583,"KRN",9.8,"NM",46,0)
SROACPM2^^0^B6018806
"BLD",5583,"KRN",9.8,"NM",47,0)
SROACR1^^0^B19934044
"BLD",5583,"KRN",9.8,"NM",48,0)
SROACR2^^0^B15125616
"BLD",5583,"KRN",9.8,"NM",49,0)
SROAMEAS^^0^B451481
"BLD",5583,"KRN",9.8,"NM",50,0)
SROAPCA^^0^B25381788
"BLD",5583,"KRN",9.8,"NM",51,0)
SROAPCA1^^0^B30711274
"BLD",5583,"KRN",9.8,"NM",52,0)
SROAPCA2^^0^B19366840
"BLD",5583,"KRN",9.8,"NM",53,0)
SROAPCA4^^0^B14863488
"BLD",5583,"KRN",9.8,"NM",54,0)
SROATCM^^0^B25329729
"BLD",5583,"KRN",9.8,"NM",55,0)
SROATCM1^^0^B51278524
"BLD",5583,"KRN",9.8,"NM",56,0)
SROAUTL4^^0^B38721061
"BLD",5583,"KRN",9.8,"NM",57,0)
SROAUTLC^^0^B27492049
"BLD",5583,"KRN",9.8,"NM",58,0)
SROCCAT^^0^B16152950
"BLD",5583,"KRN",9.8,"NM",59,0)
SROUTC^^0^B16240379
"BLD",5583,"KRN",9.8,"NM",60,0)
SROQ0^^0^B16257215
"BLD",5583,"KRN",9.8,"NM",61,0)
SROAUTL0^^0^B17506140
"BLD",5583,"KRN",9.8,"NM",63,0)
SROATMNO^^0^B26731177
"BLD",5583,"KRN",9.8,"NM",64,0)
SROCMPED^^0^B27790437
"BLD",5583,"KRN",9.8,"NM",65,0)
SROQT^^0^B29470128
"BLD",5583,"KRN",9.8,"NM",66,0)
SROALSS^^0^B17218994
"BLD",5583,"KRN",9.8,"NM",67,0)
SROALSSP^^0^B17029510
"BLD",5583,"KRN",9.8,"NM",68,0)
SROALST^^0^B13569020
"BLD",5583,"KRN",9.8,"NM",69,0)
SROALSTP^^0^B12052730
"BLD",5583,"KRN",9.8,"NM",70,0)
SRENSCS^^0^B7706764
"BLD",5583,"KRN",9.8,"NM",71,0)
SROAPS1^^0^B19811405
"BLD",5583,"KRN",9.8,"NM",72,0)
SROATCM3^^0^B12262748
"BLD",5583,"KRN",9.8,"NM",73,0)
SROESNR0^^0^B30368515
"BLD",5583,"KRN",9.8,"NM",74,0)
SRONIN^^0^B64007780
"BLD",5583,"KRN",9.8,"NM",75,0)
SRONRPT0^^0^B53211823
"BLD",5583,"KRN",9.8,"NM",76,0)
SROATCM2^^0^B8920384
"BLD",5583,"KRN",9.8,"NM",77,0)
SROQ1^^0^B34164530
"BLD",5583,"KRN",9.8,"NM",78,0)
SROQ2^^0^B33278747
"BLD",5583,"KRN",9.8,"NM",79,0)
SROANT^^0^B10789916
"BLD",5583,"KRN",9.8,"NM",80,0)
SROANTS^^0^B12415292
"BLD",5583,"KRN",9.8,"NM",81,0)
SROANTSP^^0^B12263907
"BLD",5583,"KRN",9.8,"NM",82,0)
SROANTP^^0^B10996883
"BLD",5583,"KRN",9.8,"NM",83,0)
SROALC^^0^B10589627
"BLD",5583,"KRN",9.8,"NM",84,0)
SROALCS^^0^B13891688
"BLD",5583,"KRN",9.8,"NM",85,0)
SROALCSP^^0^B12135710
"BLD",5583,"KRN",9.8,"NM",86,0)
SROALCP^^0^B10000827
"BLD",5583,"KRN",9.8,"NM",87,0)
SROALT^^0^B10482929
"BLD",5583,"KRN",9.8,"NM",88,0)
SROALTS^^0^B12812472
"BLD",5583,"KRN",9.8,"NM",89,0)
SROALTSP^^0^B11921098
"BLD",5583,"KRN",9.8,"NM",90,0)
SROALTP^^0^B9843982
"BLD",5583,"KRN",9.8,"NM",91,0)
SROALL^^0^B13021527
"BLD",5583,"KRN",9.8,"NM",92,0)
SROALLS^^0^B19116558
"BLD",5583,"KRN",9.8,"NM",93,0)
SROALLSP^^0^B20130210
"BLD",5583,"KRN",9.8,"NM",94,0)
SROALLP^^0^B12596044
"BLD",5583,"KRN",9.8,"NM",95,0)
SROALM^^0^B21272239
"BLD",5583,"KRN",9.8,"NM",96,0)
SROALMN^^0^B23578732
"BLD",5583,"KRN",9.8,"NM",97,0)
SROQM^^0^B18303106
"BLD",5583,"KRN",9.8,"NM",98,0)
SROQM1^^0^B25626718
"BLD",5583,"KRN",9.8,"NM",99,0)
SROACOP^^0^B19657223
"BLD",5583,"KRN",9.8,"NM",100,0)
SROQ1A^^0^B30905519
"BLD",5583,"KRN",9.8,"NM",101,0)
SROAPAS^^0^B27516322
"BLD",5583,"KRN",9.8,"NM",102,0)
SROAOTH^^0^B6104912
"BLD",5583,"KRN",9.8,"NM",103,0)
SROES^^0^B26256773
"BLD",5583,"KRN",9.8,"NM","B","SRENSCS",70)

"BLD",5583,"KRN",9.8,"NM","B","SRO1L1",40)

"BLD",5583,"KRN",9.8,"NM","B","SROA30",11)

"BLD",5583,"KRN",9.8,"NM","B","SROACAR",42)

"BLD",5583,"KRN",9.8,"NM","B","SROACAT",43)

"BLD",5583,"KRN",9.8,"NM","B","SROACL1",44)

"BLD",5583,"KRN",9.8,"NM","B","SROACOP",99)

"BLD",5583,"KRN",9.8,"NM","B","SROACPM1",45)

"BLD",5583,"KRN",9.8,"NM","B","SROACPM2",46)

"BLD",5583,"KRN",9.8,"NM","B","SROACR1",47)

"BLD",5583,"KRN",9.8,"NM","B","SROACR2",48)

"BLD",5583,"KRN",9.8,"NM","B","SROAEX",8)

"BLD",5583,"KRN",9.8,"NM","B","SROAL1",14)

"BLD",5583,"KRN",9.8,"NM","B","SROAL11",15)

"BLD",5583,"KRN",9.8,"NM","B","SROAL2",16)

"BLD",5583,"KRN",9.8,"NM","B","SROAL21",17)

"BLD",5583,"KRN",9.8,"NM","B","SROALC",83)

"BLD",5583,"KRN",9.8,"NM","B","SROALCP",86)

"BLD",5583,"KRN",9.8,"NM","B","SROALCS",84)

"BLD",5583,"KRN",9.8,"NM","B","SROALCSP",85)

"BLD",5583,"KRN",9.8,"NM","B","SROALDP",22)

"BLD",5583,"KRN",9.8,"NM","B","SROALEN",21)

"BLD",5583,"KRN",9.8,"NM","B","SROALET",12)

"BLD",5583,"KRN",9.8,"NM","B","SROALL",91)

"BLD",5583,"KRN",9.8,"NM","B","SROALLP",94)

"BLD",5583,"KRN",9.8,"NM","B","SROALLS",92)

"BLD",5583,"KRN",9.8,"NM","B","SROALLSP",93)

"BLD",5583,"KRN",9.8,"NM","B","SROALM",95)

"BLD",5583,"KRN",9.8,"NM","B","SROALMN",96)

"BLD",5583,"KRN",9.8,"NM","B","SROALN1",18)

"BLD",5583,"KRN",9.8,"NM","B","SROALN2",19)

"BLD",5583,"KRN",9.8,"NM","B","SROALN3",20)

"BLD",5583,"KRN",9.8,"NM","B","SROALOG",27)

"BLD",5583,"KRN",9.8,"NM","B","SROALSS",66)

"BLD",5583,"KRN",9.8,"NM","B","SROALSSP",67)

"BLD",5583,"KRN",9.8,"NM","B","SROALST",68)

"BLD",5583,"KRN",9.8,"NM","B","SROALSTP",69)

"BLD",5583,"KRN",9.8,"NM","B","SROALT",87)

"BLD",5583,"KRN",9.8,"NM","B","SROALTP",90)

"BLD",5583,"KRN",9.8,"NM","B","SROALTS",88)

"BLD",5583,"KRN",9.8,"NM","B","SROALTSP",89)

"BLD",5583,"KRN",9.8,"NM","B","SROAMEAS",49)

"BLD",5583,"KRN",9.8,"NM","B","SROANT",79)

"BLD",5583,"KRN",9.8,"NM","B","SROANTP",82)

"BLD",5583,"KRN",9.8,"NM","B","SROANTS",80)

"BLD",5583,"KRN",9.8,"NM","B","SROANTSP",81)

"BLD",5583,"KRN",9.8,"NM","B","SROAOP",4)

"BLD",5583,"KRN",9.8,"NM","B","SROAOP1",5)

"BLD",5583,"KRN",9.8,"NM","B","SROAOTH",102)

"BLD",5583,"KRN",9.8,"NM","B","SROAPAS",101)

"BLD",5583,"KRN",9.8,"NM","B","SROAPCA",50)

"BLD",5583,"KRN",9.8,"NM","B","SROAPCA1",51)

"BLD",5583,"KRN",9.8,"NM","B","SROAPCA2",52)

"BLD",5583,"KRN",9.8,"NM","B","SROAPCA4",53)

"BLD",5583,"KRN",9.8,"NM","B","SROAPR2",1)

"BLD",5583,"KRN",9.8,"NM","B","SROAPRE2",2)

"BLD",5583,"KRN",9.8,"NM","B","SROAPRT1",35)

"BLD",5583,"KRN",9.8,"NM","B","SROAPRT2",36)

"BLD",5583,"KRN",9.8,"NM","B","SROAPRT3",37)

"BLD",5583,"KRN",9.8,"NM","B","SROAPRT4",38)

"BLD",5583,"KRN",9.8,"NM","B","SROAPRT5",39)

"BLD",5583,"KRN",9.8,"NM","B","SROAPS1",71)

"BLD",5583,"KRN",9.8,"NM","B","SROAPS2",3)

"BLD",5583,"KRN",9.8,"NM","B","SROATCM",54)

"BLD",5583,"KRN",9.8,"NM","B","SROATCM1",55)

"BLD",5583,"KRN",9.8,"NM","B","SROATCM2",76)

"BLD",5583,"KRN",9.8,"NM","B","SROATCM3",72)

"BLD",5583,"KRN",9.8,"NM","B","SROATM1",31)

"BLD",5583,"KRN",9.8,"NM","B","SROATM2",32)

"BLD",5583,"KRN",9.8,"NM","B","SROATM3",33)

"BLD",5583,"KRN",9.8,"NM","B","SROATM4",34)

"BLD",5583,"KRN",9.8,"NM","B","SROATMIT",30)

"BLD",5583,"KRN",9.8,"NM","B","SROATMNO",63)

"BLD",5583,"KRN",9.8,"NM","B","SROAUTL",6)

"BLD",5583,"KRN",9.8,"NM","B","SROAUTL0",61)

"BLD",5583,"KRN",9.8,"NM","B","SROAUTL1",29)

"BLD",5583,"KRN",9.8,"NM","B","SROAUTL2",28)

"BLD",5583,"KRN",9.8,"NM","B","SROAUTL4",56)

"BLD",5583,"KRN",9.8,"NM","B","SROAUTLC",57)

"BLD",5583,"KRN",9.8,"NM","B","SROAWL",9)

"BLD",5583,"KRN",9.8,"NM","B","SROAWL1",10)

"BLD",5583,"KRN",9.8,"NM","B","SROCCAT",58)

"BLD",5583,"KRN",9.8,"NM","B","SROCL1",41)

"BLD",5583,"KRN",9.8,"NM","B","SROCMP",23)

"BLD",5583,"KRN",9.8,"NM","B","SROCMP1",24)

"BLD",5583,"KRN",9.8,"NM","B","SROCMP2",25)

"BLD",5583,"KRN",9.8,"NM","B","SROCMPED",64)

"BLD",5583,"KRN",9.8,"NM","B","SROES",103)

"BLD",5583,"KRN",9.8,"NM","B","SROESNR0",73)

"BLD",5583,"KRN",9.8,"NM","B","SRONIN",74)

"BLD",5583,"KRN",9.8,"NM","B","SRONRPT0",75)

"BLD",5583,"KRN",9.8,"NM","B","SROQ0",60)

"BLD",5583,"KRN",9.8,"NM","B","SROQ1",77)

"BLD",5583,"KRN",9.8,"NM","B","SROQ1A",100)

"BLD",5583,"KRN",9.8,"NM","B","SROQ2",78)

"BLD",5583,"KRN",9.8,"NM","B","SROQM",97)

"BLD",5583,"KRN",9.8,"NM","B","SROQM1",98)

"BLD",5583,"KRN",9.8,"NM","B","SROQT",65)

"BLD",5583,"KRN",9.8,"NM","B","SROUTC",59)

"BLD",5583,"KRN",9.8,"NM","B","SROXR4",13)

"BLD",5583,"KRN",19,0)
19
"BLD",5583,"KRN",19,"NM",0)
^9.68A^^
"BLD",5583,"KRN",19.1,0)
19.1
"BLD",5583,"KRN",101,0)
101
"BLD",5583,"KRN",409.61,0)
409.61
"BLD",5583,"KRN",771,0)
771
"BLD",5583,"KRN",870,0)
870
"BLD",5583,"KRN",8989.51,0)
8989.51
"BLD",5583,"KRN",8989.52,0)
8989.52
"BLD",5583,"KRN",8994,0)
8994
"BLD",5583,"KRN","B",.4,.4)

"BLD",5583,"KRN","B",.401,.401)

"BLD",5583,"KRN","B",.402,.402)

"BLD",5583,"KRN","B",.403,.403)

"BLD",5583,"KRN","B",.5,.5)

"BLD",5583,"KRN","B",.84,.84)

"BLD",5583,"KRN","B",3.6,3.6)

"BLD",5583,"KRN","B",3.8,3.8)

"BLD",5583,"KRN","B",9.2,9.2)

"BLD",5583,"KRN","B",9.8,9.8)

"BLD",5583,"KRN","B",19,19)

"BLD",5583,"KRN","B",19.1,19.1)

"BLD",5583,"KRN","B",101,101)

"BLD",5583,"KRN","B",409.61,409.61)

"BLD",5583,"KRN","B",771,771)

"BLD",5583,"KRN","B",870,870)

"BLD",5583,"KRN","B",8989.51,8989.51)

"BLD",5583,"KRN","B",8989.52,8989.52)

"BLD",5583,"KRN","B",8994,8994)

"BLD",5583,"QUES",0)
^9.62^^
"BLD",5583,"REQB",0)
^9.611^8^6
"BLD",5583,"REQB",1,0)
SR*3.0*142^2
"BLD",5583,"REQB",2,0)
SR*3.0*113^2
"BLD",5583,"REQB",3,0)
SR*3.0*137^2
"BLD",5583,"REQB",6,0)
SR*3.0*138^2
"BLD",5583,"REQB",7,0)
SR*3.0*143^2
"BLD",5583,"REQB",8,0)
SR*3.0*147^2
"BLD",5583,"REQB","B","SR*3.0*113",2)

"BLD",5583,"REQB","B","SR*3.0*137",3)

"BLD",5583,"REQB","B","SR*3.0*138",6)

"BLD",5583,"REQB","B","SR*3.0*142",1)

"BLD",5583,"REQB","B","SR*3.0*143",7)

"BLD",5583,"REQB","B","SR*3.0*147",8)

"DATA",136.5,1,0)
SUPERFICIAL INCISIONAL SSI
"DATA",136.5,1,1,0)
^^22^22^3040318^
"DATA",136.5,1,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,1,1,2,0)
Superficial incisional SSI is an infection that occurs within 30 days 
"DATA",136.5,1,1,3,0)
after the operation and infection involves only skin or subcutaneous 
"DATA",136.5,1,1,4,0)
tissue of the incision and at least one of the following:
"DATA",136.5,1,1,5,0)
 
"DATA",136.5,1,1,6,0)
 - Purulent drainage, with or without laboratory confirmation, from the
"DATA",136.5,1,1,7,0)
   superficial incision.
"DATA",136.5,1,1,8,0)
 - Organisms isolated from an aseptically obtained culture of fluid or
"DATA",136.5,1,1,9,0)
   tissue from the superficial incision. 
"DATA",136.5,1,1,10,0)
 - At least one of the following signs or symptoms of infection: pain
"DATA",136.5,1,1,11,0)
   or tenderness, localized swelling, redness, or heat and superficial
"DATA",136.5,1,1,12,0)
   incision is deliberately opened by the surgeon, unless incision is
"DATA",136.5,1,1,13,0)
   culture-negative.  
"DATA",136.5,1,1,14,0)
 - Diagnosis of superficial incisional SSI by the surgeon or attending
"DATA",136.5,1,1,15,0)
   physician.  
"DATA",136.5,1,1,16,0)
 
"DATA",136.5,1,1,17,0)
Do not report the following conditions as SSI:
"DATA",136.5,1,1,18,0)
 - Stitch abscess (minimal inflammation and discharge confined to the
"DATA",136.5,1,1,19,0)
   points of suture penetration).
"DATA",136.5,1,1,20,0)
 - Infected burn wound.
"DATA",136.5,1,1,21,0)
 - Incisional SSI that extends into the fascial and muscle layers (see
"DATA",136.5,1,1,22,0)
   deep incisional SSI).
"DATA",136.5,2,0)
DEEP INCISIONAL SSI
"DATA",136.5,2,1,0)
^^23^23^3040318^
"DATA",136.5,2,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,2,1,2,0)
Deep Incision SSI is an infection that occurs within 30 days after the 
"DATA",136.5,2,1,3,0)
operation and the infection appears to be related to the operation and 
"DATA",136.5,2,1,4,0)
infection involved deep soft tissues (e.g., fascial and muscle layers) 
"DATA",136.5,2,1,5,0)
of the incision and at least one of the following: 
"DATA",136.5,2,1,6,0)
 
"DATA",136.5,2,1,7,0)
 - Purulent drainage from the deep incision but not from the 
"DATA",136.5,2,1,8,0)
   organ/space component of the surgical site.
"DATA",136.5,2,1,9,0)
 - A deep incision spontaneously dehisces or is deliberately opened by
"DATA",136.5,2,1,10,0)
   a surgeon when the patient has at least one of the following signs
"DATA",136.5,2,1,11,0)
   or symptoms: fever (>38 C), localized pain, or tenderness, unless
"DATA",136.5,2,1,12,0)
   site is culture-negative.
"DATA",136.5,2,1,13,0)
 - An abscess or other evidence of infection involving the deep 
"DATA",136.5,2,1,14,0)
   incision is found on direct examination, during reoperation, or by 
"DATA",136.5,2,1,15,0)
   histopathologic or radiologic examination.
"DATA",136.5,2,1,16,0)
 - Diagnosis of a deep incision SSI by a surgeon or attending 
"DATA",136.5,2,1,17,0)
   physician. 
"DATA",136.5,2,1,18,0)
 
"DATA",136.5,2,1,19,0)
Note:  
"DATA",136.5,2,1,20,0)
 - Report infection that involves both superficial and deep incision
"DATA",136.5,2,1,21,0)
   sites as deep incisional SSI.
"DATA",136.5,2,1,22,0)
 - Report an organ/space SSI that drains through the incision as a deep
"DATA",136.5,2,1,23,0)
   incisional SSI.
"DATA",136.5,3,0)
SYSTEMIC SEPSIS
"DATA",136.5,3,1,0)
^^62^62^3060717^
"DATA",136.5,3,1,1,0)
NSQIP Definition (2006):
"DATA",136.5,3,1,2,0)
Sepsis is a vast clinical entity that takes a variety of forms. The 
"DATA",136.5,3,1,3,0)
spectrum of disorders spans from relatively mild physiologic          
"DATA",136.5,3,1,4,0)
abnormalities to septic shock. Please report the most significant level
"DATA",136.5,3,1,5,0)
using the criteria below:
"DATA",136.5,3,1,6,0)
 
"DATA",136.5,3,1,7,0)
1. Sepsis: Sepsis is the systemic response to infection. Report this 
"DATA",136.5,3,1,8,0)
variable if the patient has clinical signs and symptoms of SIRS. SIRS 
"DATA",136.5,3,1,9,0)
is a widespread inflammatory response to a variety of severe clinical
"DATA",136.5,3,1,10,0)
insults. This syndrome is clinically recognized by the presence of two 
"DATA",136.5,3,1,11,0)
or more of the following:
"DATA",136.5,3,1,12,0)
   - Temp >38 degrees C or <36 degrees C
"DATA",136.5,3,1,13,0)
   - HR >90 bpm
"DATA",136.5,3,1,14,0)
   - RR >20 breaths/min or PaCO2 <32 mmHg(<4.3 kPa)
"DATA",136.5,3,1,15,0)
   - WBC >12,000 cell/mm3, <4000 cells/mm3, or >10% immature (band) 
"DATA",136.5,3,1,16,0)
     forms
"DATA",136.5,3,1,17,0)
   - Anion gap acidosis (this is defined by [sodium + potassium] -
"DATA",136.5,3,1,18,0)
     [chloride + CO2]. If this number is greater than 12, then an anion
"DATA",136.5,3,1,19,0)
     gap acidosis is present.
"DATA",136.5,3,1,20,0)
 
"DATA",136.5,3,1,21,0)
 and one of the following:
"DATA",136.5,3,1,22,0)
   - positive blood culture
"DATA",136.5,3,1,23,0)
   - clinical documentation of purulence at any site thought to be 
"DATA",136.5,3,1,24,0)
     causative
"DATA",136.5,3,1,25,0)
 
"DATA",136.5,3,1,26,0)
2. Severe Sepsis/Septic Shock: Sepsis is considered severe when it is 
"DATA",136.5,3,1,27,0)
associated with organ and/or circulatory dysfunction. Report this 
"DATA",136.5,3,1,28,0)
variable if the patient has the clinical signs and symptoms of SIRS or 
"DATA",136.5,3,1,29,0)
sepsis AND documented organ and/or circulatory dysfunction. Examples of
"DATA",136.5,3,1,30,0)
organ dysfunction include: oliguria, acute alteration in mental status,
"DATA",136.5,3,1,31,0)
acute respiratory distress. Examples of circulatory dysfunction 
"DATA",136.5,3,1,32,0)
include: hypotension, requirement of inotropic or vasopressor agents.
"DATA",136.5,3,1,33,0)
 
"DATA",136.5,3,1,34,0)
* For the patient that had sepsis preoperatively, worsening of any of 
"DATA",136.5,3,1,35,0)
the above signs postoperatively would be reported as a postoperative 
"DATA",136.5,3,1,36,0)
sepsis.
"DATA",136.5,3,1,37,0)
 
"DATA",136.5,3,1,38,0)
Examples:
"DATA",136.5,3,1,39,0)
 
"DATA",136.5,3,1,40,0)
A patient comes into the emergency room with signs of sepsis - WBC 31, 
"DATA",136.5,3,1,41,0)
Temperature 104. CT shows an abdominal abscess. He is given antibiotics
"DATA",136.5,3,1,42,0)
and is then taken emergently to the OR to drain the abscess. He 
"DATA",136.5,3,1,43,0)
receives antibiotics intraoperatively. Postoperatively his WBC and
"DATA",136.5,3,1,44,0)
Temperature are trending down.
"DATA",136.5,3,1,45,0)
  POD#1 WBC 24, Temp 102 
"DATA",136.5,3,1,46,0)
  POD#2 WBC 14, Temp 100 
"DATA",136.5,3,1,47,0)
  POD#3 WBC 10, Temp 99 
"DATA",136.5,3,1,48,0)
This patient does not have postoperative sepsis as his WBC and 
"DATA",136.5,3,1,49,0)
Temperature are improving each postoperative day. 
"DATA",136.5,3,1,50,0)
 
"DATA",136.5,3,1,51,0)
Patient comes into the ER with s/s of sepsis - WBC 31, Temp 104. CT 
"DATA",136.5,3,1,52,0)
shows an abdominal abscess. He is given antibiotics and is taken 
"DATA",136.5,3,1,53,0)
emergently to the OR to drain the abscess. He receives antibiotics 
"DATA",136.5,3,1,54,0)
intraoperatively. Postoperatively his WBC and Temp are as follows:  
"DATA",136.5,3,1,55,0)
  POD#1 WBC 28, Temp 103
"DATA",136.5,3,1,56,0)
  POD#2 WBC 24, Temp 102.6 
"DATA",136.5,3,1,57,0)
  POD#3 WBC 22, Temp 102 
"DATA",136.5,3,1,58,0)
  POD#4 WBC 21, Temp 101.6
"DATA",136.5,3,1,59,0)
  POD#5 WBC 30, Temp 104  
"DATA",136.5,3,1,60,0)
This patient does have postoperative sepsis because on postoperative 
"DATA",136.5,3,1,61,0)
day #5, his WBC and Temperature increase. The patient is having
"DATA",136.5,3,1,62,0)
worsening of the defined signs of sepsis.
"DATA",136.5,4,0)
PNEUMONIA
"DATA",136.5,4,1,0)
^136.52^31^31^3040318^^
"DATA",136.5,4,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,4,1,2,0)
Inflammation of the lungs caused primarily by bacteria, viruses, and/or
"DATA",136.5,4,1,3,0)
chemical irritants, usually manifested by chills, fever, pain in the
"DATA",136.5,4,1,4,0)
chest, cough, purulent, bloody sputum. Report as an occurrence if the
"DATA",136.5,4,1,5,0)
patient has pneumonia meeting the definition of pneumonia below AND
"DATA",136.5,4,1,6,0)
pneumonia not present preoperatively.
"DATA",136.5,4,1,7,0)
 
"DATA",136.5,4,1,8,0)
Pneumonia must meet one of the following TWO criteria:
"DATA",136.5,4,1,9,0)
Criterion 1.
"DATA",136.5,4,1,10,0)
  Rales or dullness to percussion on physical examination of chest AND
"DATA",136.5,4,1,11,0)
  any of the following:
"DATA",136.5,4,1,12,0)
  a. New onset of purulent sputum or change in character of sputum
"DATA",136.5,4,1,13,0)
  b. Organism isolate from blood culture
"DATA",136.5,4,1,14,0)
  c. Isolation of pathogen from specimen obtained by transtracheal
"DATA",136.5,4,1,15,0)
     aspirate, bronchial brushing, or biopsy
"DATA",136.5,4,1,16,0)
 
"DATA",136.5,4,1,17,0)
 OR
"DATA",136.5,4,1,18,0)
 
"DATA",136.5,4,1,19,0)
Criterion 2.
"DATA",136.5,4,1,20,0)
  Chest radiographic examination shows new or progressive infiltrate, 
"DATA",136.5,4,1,21,0)
  consolidation, cavitation, or pleural effusion AND any of the 
"DATA",136.5,4,1,22,0)
  following:
"DATA",136.5,4,1,23,0)
  a. New onset of purulent sputum or change in character of sputum
"DATA",136.5,4,1,24,0)
  b. Organism isolated from the blood
"DATA",136.5,4,1,25,0)
  c. Isolation of pathogen from specimen obtained by transtracheal    
"DATA",136.5,4,1,26,0)
     aspirate, bronchial brushing, or biopsy
"DATA",136.5,4,1,27,0)
  d. Isolation of virus or detection of viral antigen in respiratory
"DATA",136.5,4,1,28,0)
     secretions
"DATA",136.5,4,1,29,0)
  e. Diagnostic single antibody titer (IgM) or fourfold increase in
"DATA",136.5,4,1,30,0)
     paired serum samples (IgG) for pathogen
"DATA",136.5,4,1,31,0)
  f. Histopathologic evidence of pneumonia
"DATA",136.5,5,0)
PULMONARY EMBOLISM
"DATA",136.5,5,1,0)
^^11^11^3040318^
"DATA",136.5,5,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,5,1,2,0)
Lodging of a blood clot in a pulmonary artery with subsequent 
"DATA",136.5,5,1,3,0)
obstruction of blood supply to the lung parenchyma. The blood clots 
"DATA",136.5,5,1,4,0)
usually originate from the deep leg veins or the pelvic venous system.
"DATA",136.5,5,1,5,0)
Report as an occurrence if the patient has a V-Q scan interpreted as
"DATA",136.5,5,1,6,0)
high probability of pulmonary embolism or a positive pulmonary
"DATA",136.5,5,1,7,0)
arteriogram or positive CT angiogram. Treatment usually consists of:
"DATA",136.5,5,1,8,0)
 - Initiation of anticoagulation therapy
"DATA",136.5,5,1,9,0)
 - Placement of mechanical interruption (e.g. Greenfield Filter), for
"DATA",136.5,5,1,10,0)
   patients in whom anticoagulation is contraindicated or already 
"DATA",136.5,5,1,11,0)
   instituted.
"DATA",136.5,6,0)
ON VENTILATOR > 48 HOURS
"DATA",136.5,6,1,0)
^^11^11^3060313^
"DATA",136.5,6,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,6,1,2,0)
Total duration of ventilator-assisted respirations during postoperative
"DATA",136.5,6,1,3,0)
hospitalization was >48 hours. This can occur at any time during the
"DATA",136.5,6,1,4,0)
30-day period postoperatively. This time assessment is CUMULATIVE, not
"DATA",136.5,6,1,5,0)
necessarily consecutive. Ventilator-assisted respirations can be via
"DATA",136.5,6,1,6,0)
endotracheal tube, nasotracheal tube, or tracheostomy tube.
"DATA",136.5,6,1,7,0)
 
"DATA",136.5,6,1,8,0)
CICSP Definition (2006)
"DATA",136.5,6,1,9,0)
Indicate if the total duration of ventilator-assisted respiration 
"DATA",136.5,6,1,10,0)
during postoperative hospitalization within 30 days was greater than or
"DATA",136.5,6,1,11,0)
equal to 48 hours.
"DATA",136.5,7,0)
UNPLANNED INTUBATION^^1
"DATA",136.5,7,1,0)
^^9^9^3060313^
"DATA",136.5,7,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,7,1,2,0)
Patient required placement of an endotracheal tube and mechanical or 
"DATA",136.5,7,1,3,0)
assisted ventilation because of the onset of respiratory or cardiac 
"DATA",136.5,7,1,4,0)
failure manifested by severe respiratory distress, hypoxia, 
"DATA",136.5,7,1,5,0)
hypercarbia, or respiratory acidosis. In patients who were intubated 
"DATA",136.5,7,1,6,0)
for their surgery, unplanned intubation occurs after they have been 
"DATA",136.5,7,1,7,0)
extubated after surgery. In patients who were not intubated during 
"DATA",136.5,7,1,8,0)
surgery, intubation at any time after their surgery is considered 
"DATA",136.5,7,1,9,0)
unplanned. 
"DATA",136.5,8,0)
RENAL INSUFFICIENCY
"DATA",136.5,8,1,0)
^^4^4^3040318^
"DATA",136.5,8,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,8,1,2,0)
The reduced capacity of the kidney to perform its function as evidenced
"DATA",136.5,8,1,3,0)
by a rise in creatinine of >2 mg/dl from preoperative value, but with
"DATA",136.5,8,1,4,0)
no requirement for dialysis.
"DATA",136.5,8,2,0)
^136.53^1^1
"DATA",136.5,8,2,1,0)
PROGRESSIVE RENAL INSUFFICIENCY
"DATA",136.5,9,0)
ACUTE RENAL FAILURE
"DATA",136.5,9,1,0)
^^15^15^3060314^
"DATA",136.5,9,1,1,0)
NSQIP Definition (2006):
"DATA",136.5,9,1,2,0)
In a patient who did not require dialysis preoperatively, worsening of
"DATA",136.5,9,1,3,0)
renal dysfunction (increase in serum creatinine to >2.0 and two times
"DATA",136.5,9,1,4,0)
most recent preoperative creatinine level) and postoperatively 
"DATA",136.5,9,1,5,0)
requiring hemodialysis, peritoneal dialysis, hemofiltration,
"DATA",136.5,9,1,6,0)
hemodiafiltration or ultrafiltration.
"DATA",136.5,9,1,7,0)
 
"DATA",136.5,9,1,8,0)
TIP: If the patient refuses dialysis report as an occurrence because
"DATA",136.5,9,1,9,0)
he/she did require dialysis.
"DATA",136.5,9,1,10,0)
 
"DATA",136.5,9,1,11,0)
CICSP Definition (2004):
"DATA",136.5,9,1,12,0)
Indicate if the patient developed new renal failure requiring dialysis 
"DATA",136.5,9,1,13,0)
or experienced an exacerbation of preoperative renal failure requiring 
"DATA",136.5,9,1,14,0)
initiation of dialysis (not on dialysis preoperatively) within 30 days 
"DATA",136.5,9,1,15,0)
postoperatively.
"DATA",136.5,9,2,0)
^136.53^1^1
"DATA",136.5,9,2,1,0)
RENAL FAILURE
"DATA",136.5,10,0)
URINARY TRACT INFECTION
"DATA",136.5,10,1,0)
^^22^22^3040318^
"DATA",136.5,10,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,10,1,2,0)
Postoperative symptomatic urinary tract infection must meet one of the 
"DATA",136.5,10,1,3,0)
following TWO criteria:
"DATA",136.5,10,1,4,0)
 
"DATA",136.5,10,1,5,0)
1. One of the following: fever (>38 degrees C), urgency, frequency,
"DATA",136.5,10,1,6,0)
   dysuria, or suprapubic tenderness AND a urine culture of >100,000
"DATA",136.5,10,1,7,0)
   colonies/ml urine with no more than two species of organisms
"DATA",136.5,10,1,8,0)
 
"DATA",136.5,10,1,9,0)
OR
"DATA",136.5,10,1,10,0)
 
"DATA",136.5,10,1,11,0)
2. Two of the following: fever (>38 degrees C), urgency, frequency,
"DATA",136.5,10,1,12,0)
   dysuria, or suprapubic tenderness AND any of the following:
"DATA",136.5,10,1,13,0)
   - Dipstick test positive for leukocyte esterase and/or nitrate
"DATA",136.5,10,1,14,0)
   - Pyuria (>10 WBCs/cc or >3 WBC/hpf of unspun urine)
"DATA",136.5,10,1,15,0)
   - Organisms seen on Gram stain of unspun urine
"DATA",136.5,10,1,16,0)
   - Two urine cultures with repeated isolation of the same uropathogen
"DATA",136.5,10,1,17,0)
     with >100 colonies/ml urine in non-voided specimen
"DATA",136.5,10,1,18,0)
   - Urine culture with <100,000 colonies/ml urine of single
"DATA",136.5,10,1,19,0)
     uropathogen in patient being treated with appropriate
"DATA",136.5,10,1,20,0)
     antimicrobial therapy
"DATA",136.5,10,1,21,0)
   - Physician's diagnosis
"DATA",136.5,10,1,22,0)
   - Physician institutes appropriate antimicrobial therapy
"DATA",136.5,10,2,0)
^136.53^1^1
"DATA",136.5,10,2,1,0)
UTI
"DATA",136.5,11,0)
PULMONARY EDEMA^1
"DATA",136.5,11,1,0)
^136.52^2^2^3040318^^^^
"DATA",136.5,11,1,1,0)
Postoperative distress requiring treatment and diagnosis of CHF or
"DATA",136.5,11,1,2,0)
pulmonary edema or Adult Respiratory Distress Syndrome.
"DATA",136.5,12,0)
STROKE/CVA
"DATA",136.5,12,1,0)
^^10^10^3040617^
"DATA",136.5,12,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,12,1,2,0)
Patient develops an embolic, thrombotic, or hemorrhagic vascular 
"DATA",136.5,12,1,3,0)
accident or stroke with motor, sensory, or cognitive dysfunction (e.g.,
"DATA",136.5,12,1,4,0)
hemiplegia, hemiparesis, aphasia, sensory deficit, impaired memory) 
"DATA",136.5,12,1,5,0)
that persist for 24 or more hours.
"DATA",136.5,12,1,6,0)
 
"DATA",136.5,12,1,7,0)
CICSP Definition (2004):
"DATA",136.5,12,1,8,0)
Indicate if there was any new objective neurologic deficit lasting >72
"DATA",136.5,12,1,9,0)
hours with onset immediately post-operatively or occurring within the
"DATA",136.5,12,1,10,0)
30 days after surgery.
"DATA",136.5,12,2,0)
^136.53^2^2
"DATA",136.5,12,2,1,0)
CEREBRAL VASCULAR ACCIDENT
"DATA",136.5,12,2,2,0)
CVA
"DATA",136.5,13,0)
COMA > 24 HOURS
"DATA",136.5,13,1,0)
^^12^12^3060321^
"DATA",136.5,13,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,13,1,2,0)
Patient is unconscious, postures to painful stimuli, or is 
"DATA",136.5,13,1,3,0)
unresponsive to all stimuli (exclude transient disorientation or
"DATA",136.5,13,1,4,0)
psychosis) for greater than 24 hours during postoperative
"DATA",136.5,13,1,5,0)
hospitalization. Do not include drug-induced coma (e.g. Propofol
"DATA",136.5,13,1,6,0)
drips, etc.)
"DATA",136.5,13,1,7,0)
 
"DATA",136.5,13,1,8,0)
CICSP Definition (2006):
"DATA",136.5,13,1,9,0)
Indicate if postoperatively within 30 days of surgery there was a 
"DATA",136.5,13,1,10,0)
significantly decreased level of consciousness (exclude transient 
"DATA",136.5,13,1,11,0)
disorientation or psychosis) for greater than or equal to 24 hours
"DATA",136.5,13,1,12,0)
as evidenced by lack of response to deep, painful stimuli.
"DATA",136.5,14,0)
PERIPHERAL NERVE INJURY
"DATA",136.5,14,1,0)
^^6^6^3040318^
"DATA",136.5,14,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,14,1,2,0)
Peripheral nerve damage may result from damage to the nerve fibers, 
"DATA",136.5,14,1,3,0)
cell body, or myelin sheath during surgery. Peripheral nerve injuries 
"DATA",136.5,14,1,4,0)
(e.g., motor, sensory, and mixed motor/sensory injury) to the cervical 
"DATA",136.5,14,1,5,0)
plexus, brachial plexus, ulnar plexus, lumbar-sacral plexus (sciatic 
"DATA",136.5,14,1,6,0)
nerve), peroneal nerve, and/or the femoral nerve should be included.
"DATA",136.5,15,0)
BLEEDING/TRANSFUSIONS
"DATA",136.5,15,1,0)
^^9^9^3040318^
"DATA",136.5,15,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,15,1,2,0)
Any transfusion (including autologous) of packed red blood cells or 
"DATA",136.5,15,1,3,0)
whole blood given from the time the patient leaves the operating room 
"DATA",136.5,15,1,4,0)
up to and including 72 hours postoperatively. Report as an occurrence
"DATA",136.5,15,1,5,0)
for five or more units of packed red blood cell in the postoperative
"DATA",136.5,15,1,6,0)
period including hanging blood from the OR that is finished outside
"DATA",136.5,15,1,7,0)
of the OR. If the patient receives shed blood, autologous blood, cell
"DATA",136.5,15,1,8,0)
saver blood or pleurovac postoperatively, this is counted if greater
"DATA",136.5,15,1,9,0)
than four units. The blood may be given for any reason.
"DATA",136.5,16,0)
CARDIAC ARREST REQUIRING CPR^^1
"DATA",136.5,16,1,0)
^^12^12^3060119^
"DATA",136.5,16,1,1,0)
NSQIP Definition (2006):
"DATA",136.5,16,1,2,0)
The absence of cardiac rhythm or presence of chaotic cardiac rhythm 
"DATA",136.5,16,1,3,0)
that results in loss of consciousness requiring the initiation of any 
"DATA",136.5,16,1,4,0)
component of basic and/or advanced cardiac life support. Patients with 
"DATA",136.5,16,1,5,0)
AICDs that fire but the patient does not lose consciousness should be 
"DATA",136.5,16,1,6,0)
excluded.
"DATA",136.5,16,1,7,0)
 
"DATA",136.5,16,1,8,0)
CICSP Definition (2004):
"DATA",136.5,16,1,9,0)
Indicate if there was any cardiac arrest requiring external or open 
"DATA",136.5,16,1,10,0)
cardiopulmonary resuscitation (CPR) occurring in the operating room, 
"DATA",136.5,16,1,11,0)
ICU, ward, or out-of-hospital after the chest had been completely 
"DATA",136.5,16,1,12,0)
closed and within 30 days of surgery.
"DATA",136.5,17,0)
MYOCARDIAL INFARCTION^^1
"DATA",136.5,17,1,0)
^^33^33^3040617^
"DATA",136.5,17,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,17,1,2,0)
A new transmural acute myocardial infarction occurring during surgery 
"DATA",136.5,17,1,3,0)
or within 30 days following surgery as manifested by new Q-waves on 
"DATA",136.5,17,1,4,0)
ECG. Non-Q-wave infarctions should be entered under "OTHER".
"DATA",136.5,17,1,5,0)
 
"DATA",136.5,17,1,6,0)
CICSP Definition (2004):
"DATA",136.5,17,1,7,0)
Indicate the presence of a peri-operative MI as documented by the 
"DATA",136.5,17,1,8,0)
following criteria: 
"DATA",136.5,17,1,9,0)
 0-24 Hours Post-Op 
"DATA",136.5,17,1,10,0)
  The CK-MB (or CK if MB not available) must be greater than or equal
"DATA",136.5,17,1,11,0)
  to 5-times the upper limit of normal, with or without new Q waves
"DATA",136.5,17,1,12,0)
  present in two or more contiguous ECG leads.  No symptoms required.
"DATA",136.5,17,1,13,0)
  
"DATA",136.5,17,1,14,0)
 >24 Hours Post-Op 
"DATA",136.5,17,1,15,0)
  Indicate the presence of a peri-operative MI (> 24 hours post-op) as
"DATA",136.5,17,1,16,0)
  documented by at least one of the following criteria: 
"DATA",136.5,17,1,17,0)
  1. Evolutionary ST- segment elevations 
"DATA",136.5,17,1,18,0)
  2. Development of new Q-waves in two or more contiguous ECG leads 
"DATA",136.5,17,1,19,0)
  3. New or presumably new LBBB pattern on the ECG
"DATA",136.5,17,1,20,0)
  4. The CK-MB (or CK if MB not available) must be greater than or
"DATA",136.5,17,1,21,0)
     equal to 3 times the upper limit of normal.
"DATA",136.5,17,1,22,0)
  
"DATA",136.5,17,1,23,0)
Because normal limits of certain blood tests may vary, please check
"DATA",136.5,17,1,24,0)
with your lab for normal limits for CK-MB and total CK. Defining
"DATA",136.5,17,1,25,0)
Reference Control Values (Upper Limit of Normal): Reference values must
"DATA",136.5,17,1,26,0)
be determined in each laboratory by studies using specific assays with
"DATA",136.5,17,1,27,0)
appropriate quality control, as reported in peer-reviewed journals.
"DATA",136.5,17,1,28,0)
Acceptable imprecision (coefficient of variation) at the 99th
"DATA",136.5,17,1,29,0)
percentile for each assay should be defined as < or = to 10%. Each
"DATA",136.5,17,1,30,0)
individual laboratory should confirm the range of reference values in
"DATA",136.5,17,1,31,0)
their specific setting. This element should not be coded as an adverse
"DATA",136.5,17,1,32,0)
event for evolving MI's unless their enzymes peak, fall, and then have
"DATA",136.5,17,1,33,0)
a second peak.
"DATA",136.5,18,0)
ILEUS/BOWEL OBSTRUCTION^1
"DATA",136.5,18,1,0)
^136.52^6^6^3040318^^^^
"DATA",136.5,18,1,1,0)
This category includes prolonged ileus or bowel obstruction.  Ileus is
"DATA",136.5,18,1,2,0)
obstruction of the intestines from a variety of causes including
"DATA",136.5,18,1,3,0)
mechanical obstruction, peritonitis, adhesions, or post-surgically as a
"DATA",136.5,18,1,4,0)
result of functional dysmotility by the bowel.  Bowel obstruction is any
"DATA",136.5,18,1,5,0)
hindrance to the passage of the intestinal contents.  Prolonged ileus or
"DATA",136.5,18,1,6,0)
obstruction is defined as longer than 5 days postoperatively.
"DATA",136.5,19,0)
GRAFT/PROSTHESIS/FLAP FAILURE
"DATA",136.5,19,1,0)
^^4^4^3040318^
"DATA",136.5,19,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,19,1,2,0)
Mechanical failure of an extracardiac graft/or prosthesis including 
"DATA",136.5,19,1,3,0)
myocutaneous flaps and skin grafts requiring return to the operating 
"DATA",136.5,19,1,4,0)
room, interventional radiology, or a balloon angioplasty.
"DATA",136.5,20,0)
DVT/THROMBOPHLEBITIS
"DATA",136.5,20,1,0)
^^6^6^3040318^
"DATA",136.5,20,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,20,1,2,0)
The identification of a new blood clot or thrombus within the venous 
"DATA",136.5,20,1,3,0)
system, which may be coupled with inflammation. This diagnosis is 
"DATA",136.5,20,1,4,0)
confirmed by a duplex, venogram or CT scan. The patient must be treated
"DATA",136.5,20,1,5,0)
with anticoagulation therapy, and/or placement of a vena cava filter or
"DATA",136.5,20,1,6,0)
clipping of the vena cava.
"DATA",136.5,20,2,0)
^136.53^2^2
"DATA",136.5,20,2,1,0)
DEEP VEIN THROMBOSIS/THROMBOPHLEBITIS
"DATA",136.5,20,2,2,0)
THROMBOPHLEBITIS
"DATA",136.5,21,0)
OTHER OCCURRENCE^^1
"DATA",136.5,21,1,0)
^^4^4^3040318^
"DATA",136.5,21,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,21,1,2,0)
Enter any other surgical occurrences which you feel to be significant
"DATA",136.5,21,1,3,0)
and that are not covered by the predefined occurrence categories. This 
"DATA",136.5,21,1,4,0)
occurrence category should have an accompanying ICD Diagnosis code.
"DATA",136.5,22,0)
WOUND DISRUPTION
"DATA",136.5,22,1,0)
^^3^3^3040318^
"DATA",136.5,22,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,22,1,2,0)
Separation of the layers of a surgical wound, which may be partial or 
"DATA",136.5,22,1,3,0)
complete, with disruption of the fascia. 
"DATA",136.5,23,0)
ENDOCARDITIS
"DATA",136.5,23,1,0)
^136.52^9^9^3040721^^^
"DATA",136.5,23,1,1,0)
CICSP Definition (2004):
"DATA",136.5,23,1,2,0)
Indicate if the chart documents that active endocarditis was present 
"DATA",136.5,23,1,3,0)
within 30 days postoperatively. Endocarditis is defined as any 
"DATA",136.5,23,1,4,0)
postoperative intracardiac infection (usually on a valve) documented 
"DATA",136.5,23,1,5,0)
by two or more positive blood cultures with the same organism, and/or 
"DATA",136.5,23,1,6,0)
development of vegetations and valve destruction seen by echo or 
"DATA",136.5,23,1,7,0)
repeat surgery, and/or histologic evidence of infection at repeat 
"DATA",136.5,23,1,8,0)
surgery or autopsy. Patients with preoperative endocarditis who have 
"DATA",136.5,23,1,9,0)
the above evidence of persistent infection should be included.
"DATA",136.5,24,0)
LOW CARDIAC OUTPUT > 6 HOURS
"DATA",136.5,24,1,0)
^136.52^4^4^3040318^^^^
"DATA",136.5,24,1,1,0)
This includes patient's that have had a postoperative cardiac index of
"DATA",136.5,24,1,2,0)
less than 2.0 L/min/M2 and/or peripheral manifestations (e.g. oliguria) of
"DATA",136.5,24,1,3,0)
low cardiac output present for 6 or more hours following surgery requiring
"DATA",136.5,24,1,4,0)
inotropic and/or intra-aortic ballon pump support.
"DATA",136.5,25,0)
MEDIASTINITIS
"DATA",136.5,25,1,0)
^^4^4^3040809^
"DATA",136.5,25,1,1,0)
CICSP Definition (2004):
"DATA",136.5,25,1,2,0)
Indicate if the patient developed a bacterial infection involving the 
"DATA",136.5,25,1,3,0)
sternum or deep to the sternum requiring drainage and anti-microbial 
"DATA",136.5,25,1,4,0)
therapy diagnosed within 30 days after surgery.
"DATA",136.5,26,0)
REOPERATION FOR BLEEDING
"DATA",136.5,26,1,0)
^^3^3^3040809^
"DATA",136.5,26,1,1,0)
CICSP Definition (2004):
"DATA",136.5,26,1,2,0)
Indicate if there was any re-exploration of the thorax for suspected 
"DATA",136.5,26,1,3,0)
bleeding within 30 days of surgery.
"DATA",136.5,27,0)
REPEAT CARDIAC SURGICAL PROCEDURE
"DATA",136.5,27,1,0)
^136.52^17^17^3060302^^^
"DATA",136.5,27,1,1,0)
CICSP Definition (2006):
"DATA",136.5,27,1,2,0)
Indicate the CPB status if the patient underwent a repeat operation on 
"DATA",136.5,27,1,3,0)
the heart after the patient had left the operating room from the 
"DATA",136.5,27,1,4,0)
initial operation and within current hospitalization or within 30 days
"DATA",136.5,27,1,5,0)
of the initial operation. Use the same criteria to define a cardiac
"DATA",136.5,27,1,6,0)
surgery as listed on page 1 of the CICSP Instructions/Definitions. 
"DATA",136.5,27,1,7,0)
(Do NOT submit a separate second form for this second cardiac 
"DATA",136.5,27,1,8,0)
procedure if it occurs within 30 days post-operatively.) Indicate 
"DATA",136.5,27,1,9,0)
the one appropriate response:
"DATA",136.5,27,1,10,0)
 
"DATA",136.5,27,1,11,0)
None       - no repeat cardiac surgical procedure post-operatively 
"DATA",136.5,27,1,12,0)
             during index hospitalization or within 30 days of initial
"DATA",136.5,27,1,13,0)
             operation.
"DATA",136.5,27,1,14,0)
On-bypass  - patient underwent a repeat cardiac surgical procedure 
"DATA",136.5,27,1,15,0)
             utilizing CPB.
"DATA",136.5,27,1,16,0)
Off-bypass - patient underwent a repeat cardiac surgical procedure not 
"DATA",136.5,27,1,17,0)
             utilizing CPB.
"DATA",136.5,28,0)
STROKE^1
"DATA",136.5,28,1,0)
^136.52^3^3^3040202^^^^
"DATA",136.5,28,1,1,0)
This includes any new objective neurologic deficit lasting 30 minutes or
"DATA",136.5,28,1,2,0)
more with onset intraoperatively or occurring within 30 days following
"DATA",136.5,28,1,3,0)
surgery.
"DATA",136.5,29,0)
OTHER RESPIRATORY OCCURRENCE
"DATA",136.5,29,1,0)
^^5^5^3040318^
"DATA",136.5,29,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,29,1,2,0)
Enter any other respiratory occurrences that you feel to be significant
"DATA",136.5,29,1,3,0)
and that are not covered by the predefined respiratory occurrence
"DATA",136.5,29,1,4,0)
categories. This occurrence category should have an accompanying ICD 
"DATA",136.5,29,1,5,0)
Diagnosis code.
"DATA",136.5,30,0)
OTHER CNS OCCURRENCE
"DATA",136.5,30,1,0)
^^5^5^3040318^
"DATA",136.5,30,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,30,1,2,0)
Enter any other neurologic related occurrences, which you feel to be 
"DATA",136.5,30,1,3,0)
significant and that are not covered by the predefined CNS occurrence
"DATA",136.5,30,1,4,0)
categories. This occurrence category should have an accompanying ICD 
"DATA",136.5,30,1,5,0)
Diagnosis code.
"DATA",136.5,31,0)
OTHER URINARY TRACT OCCURRENCE
"DATA",136.5,31,1,0)
^^5^5^3040318^
"DATA",136.5,31,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,31,1,2,0)
Enter any other urinary occurrences which you feel to be significant 
"DATA",136.5,31,1,3,0)
and that are not covered by the predefined urinary tract occurrence
"DATA",136.5,31,1,4,0)
categories. This occurrence category should have an accompanying ICD 
"DATA",136.5,31,1,5,0)
Diagnosis code.
"DATA",136.5,32,0)
OTHER CARDIAC OCCURRENCE
"DATA",136.5,32,1,0)
^^5^5^3040318^
"DATA",136.5,32,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,32,1,2,0)
Enter any other cardiac related surgical occurrences which you feel to 
"DATA",136.5,32,1,3,0)
be significant and that are not covered by the predefined cardiac
"DATA",136.5,32,1,4,0)
occurrence categories. This occurrence category should have an 
"DATA",136.5,32,1,5,0)
accompanying ICD Diagnosis code.
"DATA",136.5,33,0)
TRACHEOSTOMY^^^Y
"DATA",136.5,33,1,0)
^^4^4^3040809^
"DATA",136.5,33,1,1,0)
CICSP Definition (2004):
"DATA",136.5,33,1,2,0)
Indicate if a procedure to cut into the trachea and insert a tube to 
"DATA",136.5,33,1,3,0)
overcome tracheal obstruction or to facilitate extended mechanical 
"DATA",136.5,33,1,4,0)
ventilation was performed within 30 days of surgery.
"DATA",136.5,34,0)
NEW MECHANICAL CIRCULATORY SUPPORT^^1^Y
"DATA",136.5,34,1,0)
^^20^20^3040721^
"DATA",136.5,34,1,1,0)
CICSP Definition (2004):
"DATA",136.5,34,1,2,0)
Indicate if the patient left the operating room suite with or required
"DATA",136.5,34,1,3,0)
post-op placement of a new IABP, ECMO, or VAD for circulatory support
"DATA",136.5,34,1,4,0)
within 30 days perioperatively. A "yes" response is appropriate even if
"DATA",136.5,34,1,5,0)
the pump is only used for a short time perioperatively. A "yes"
"DATA",136.5,34,1,6,0)
response, however, is only correct if the patient did not enter the
"DATA",136.5,34,1,7,0)
operating room with this same mechanical circulatory support, and the
"DATA",136.5,34,1,8,0)
device insertion occurred AFTER the induction of anesthesia.
"DATA",136.5,34,1,9,0)
 
"DATA",136.5,34,1,10,0)
If patient had/required new mechanical circulatory support, indicate 
"DATA",136.5,34,1,11,0)
whether the placement occurred intraoperatively or postoperatively.  
"DATA",136.5,34,1,12,0)
Indicate the one appropriate response:
"DATA",136.5,34,1,13,0)
 - intraoperatively: occurring while patient was in the operating room.
"DATA",136.5,34,1,14,0)
 - postoperatively:  occurring after patient left the operating room.
"DATA",136.5,34,1,15,0)
 
"DATA",136.5,34,1,16,0)
A "no" response is appropriate if the circulatory support device was 
"DATA",136.5,34,1,17,0)
placed as a prophylaxis before the induction of anesthesia; however, if
"DATA",136.5,34,1,18,0)
it was placed for any reason after the induction of anesthesia, then a
"DATA",136.5,34,1,19,0)
"yes" response is appropriate. A "no" response is also appropriate if
"DATA",136.5,34,1,20,0)
the primary operation is to insert a ventricular assist device.
"DATA",136.5,35,0)
ORGAN/SPACE SSI
"DATA",136.5,35,1,0)
^^32^32^3040318^
"DATA",136.5,35,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,35,1,2,0)
Organ/Space SSI is an infection that occurs within 30 days after the 
"DATA",136.5,35,1,3,0)
operation and the infection appears to be related to the operation and 
"DATA",136.5,35,1,4,0)
the infection involves any part of the anatomy (e.g., organs or spaces), 
"DATA",136.5,35,1,5,0)
other than the incision, which was opened or manipulated during an 
"DATA",136.5,35,1,6,0)
operation and at least one of the following:
"DATA",136.5,35,1,7,0)
 
"DATA",136.5,35,1,8,0)
  - Purulent drainage from a drain that is placed through a stab wound 
"DATA",136.5,35,1,9,0)
    into the organ/space.  
"DATA",136.5,35,1,10,0)
  - Organisms isolated from an aseptically obtained culture of fluid or 
"DATA",136.5,35,1,11,0)
    tissue in the organ/space.  
"DATA",136.5,35,1,12,0)
  - An abscess or other evidence of infection involving the organ/space 
"DATA",136.5,35,1,13,0)
    that is found on direct examination, during reoperation, or by 
"DATA",136.5,35,1,14,0)
    histopathologic or radiologic examination.  
"DATA",136.5,35,1,15,0)
  - Diagnosis of an organ/space SSI by a surgeon or attending physician.  
"DATA",136.5,35,1,16,0)
   
"DATA",136.5,35,1,17,0)
  Site-Specific Classifications of Organ/Space Surgical Site Infection
"DATA",136.5,35,1,18,0)
  --------------------------------------------------------------------
"DATA",136.5,35,1,19,0)
  Arterial or venous infection        Meningitis or ventriculitis
"DATA",136.5,35,1,20,0)
  Breast abscess or mastitis          Myocarditis or pericarditis
"DATA",136.5,35,1,21,0)
  Disc space                          Oral cavity (mouth, tongue, or
"DATA",136.5,35,1,22,0)
  Ear, mastoid                         gums)
"DATA",136.5,35,1,23,0)
  Endocarditis                        Osteomyelitis
"DATA",136.5,35,1,24,0)
  Endometritis                        Other infections of the lower
"DATA",136.5,35,1,25,0)
  Eye, other than conjunctivitis       respiratory tract (e.g. abscess
"DATA",136.5,35,1,26,0)
  Gastrointestinal tract               or empyema)
"DATA",136.5,35,1,27,0)
  Intra-abdominal, not specified      Other male or female reproductive
"DATA",136.5,35,1,28,0)
   elsewhere                           tract
"DATA",136.5,35,1,29,0)
  Intracranial, brain abscess or      Sinusitis
"DATA",136.5,35,1,30,0)
   dura                               Spinal abscess without meningitis
"DATA",136.5,35,1,31,0)
  Joint or bursa                      Upper respiratory tract
"DATA",136.5,35,1,32,0)
  Mediastinitis                       Vaginal cuff
"DATA",136.5,36,0)
OTHER WOUND OCCURRENCE
"DATA",136.5,36,1,0)
^^5^5^3040318^
"DATA",136.5,36,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,36,1,2,0)
Enter any other wound occurrences that you feel to be significant and 
"DATA",136.5,36,1,3,0)
that are not covered by the predefined wound occurrence categories. 
"DATA",136.5,36,1,4,0)
This occurrence category should have an accompanying ICD Diagnosis 
"DATA",136.5,36,1,5,0)
code.
"DATA",136.5,37,0)
REPEAT VENTILATOR SUPPORT W/IN 30 DAYS^^0^Y
"DATA",136.5,37,1,0)
^136.52^8^8^3060313^^^^
"DATA",136.5,37,1,1,0)
CICSP Definition (2006) 
"DATA",136.5,37,1,2,0)
Indicate if the patient was placed on ventilator support
"DATA",136.5,37,1,3,0)
postoperatively for any reason within 30 days, AND this repeat
"DATA",136.5,37,1,4,0)
ventilator support is related to the index operation AND occurred
"DATA",136.5,37,1,5,0)
during the same admission in-hospital. (For example, the patient is 
"DATA",136.5,37,1,6,0)
on the ventilator intra-op and immediately post-op. Then patient is
"DATA",136.5,37,1,7,0)
weaned and the ventilator is discontinued. Later, the patient gets
"DATA",136.5,37,1,8,0)
into trouble and mechanical ventilation has to be reinstated.)
"FIA",130)
SURGERY
"FIA",130,0)
^SRF(
"FIA",130,0,0)
130IP
"FIA",130,0,1)
y^y^p^^^^n^^n
"FIA",130,0,10)

"FIA",130,0,11)

"FIA",130,0,"RLRO")

"FIA",130,0,"VR")
3.0^SR
"FIA",130,130)
1
"FIA",130,130,.12)

"FIA",130,130,1.09)

"FIA",130,130,102)

"FIA",130,130,202)

"FIA",130,130,211)

"FIA",130,130,216)

"FIA",130,130,218.1)

"FIA",130,130,220)

"FIA",130,130,250)

"FIA",130,130,254)

"FIA",130,130,266)

"FIA",130,130,269)

"FIA",130,130,285)

"FIA",130,130,352)

"FIA",130,130,364)

"FIA",130,130,364.1)

"FIA",130,130,370)

"FIA",130,130,372)

"FIA",130,130,373)

"FIA",130,130,384)

"FIA",130,130,401)

"FIA",130,130,410)

"FIA",130,130,411)

"FIA",130,130,430)

"FIA",130,130,431)

"FIA",130,130,443)

"FIA",130,130,444)

"FIA",130,130,444.1)

"FIA",130,130,445)

"FIA",130,130,445.1)

"FIA",130,130,457)

"FIA",130,130,457.1)

"FIA",130,130,458)

"FIA",130,130,458.1)

"FIA",130,130,461)

"FIA",130,130,461.1)

"FIA",130,130,462)

"FIA",130,130,462.1)

"FIA",130,130,470)

"FIA",130,130,471)

"FIA",130,130,475)

"FIA",130,130,477)

"FIA",130,130,481)

"FIA",130,130,482)

"FIA",130,130,484)

"FIA",130,130,487.1)

"FIA",130,130,502)

"FIA",130,130,504)

"FIA",130,130,504.1)

"FIA",130,130,505)

"FIA",130,130,506)

"FIA",130,130,508)

"FIA",130,130,510)

"FIA",130,130,512)

"FIA",130,130.0508)
0
"FIA",130,130.22)
1
"FIA",130,130.22,7)

"FIA",130,130.22,8)

"FIA",136.5)
PERIOPERATIVE OCCURRENCE CATEGORY
"FIA",136.5,0)
^SRO(136.5,
"FIA",136.5,0,0)
136.5I
"FIA",136.5,0,1)
y^y^f^^n^^y^o^n
"FIA",136.5,0,10)

"FIA",136.5,0,11)

"FIA",136.5,0,"RLRO")

"FIA",136.5,0,"VR")
3.0^SR
"FIA",136.5,136.5)
0
"FIA",136.5,136.52)
0
"FIA",136.5,136.53)
0
"INI")
PRE^SR153UTL
"INIT")
POST^SR153UTL
"KRN",.402,741,-1)
0^2
"KRN",.402,741,0)
SROMEN-OUT^3060316.1036^^130^^^3060316
"KRN",.402,741,"DIAB",1,0,130,0)
.09;T
"KRN",.402,741,"DIAB",1,0,130,1)
1.13;T
"KRN",.402,741,"DIAB",1,1,130.042,0)
.01;T
"KRN",.402,741,"DIAB",1,1,130.06,0)
.01;T
"KRN",.402,741,"DIAB",1,1,130.16,0)
.01;T
"KRN",.402,741,"DIAB",1,1,130.17,0)
.01;T
"KRN",.402,741,"DIAB",1,1,130.213,0)
.01;T
"KRN",.402,741,"DIAB",1,1,130.28,0)
.01;T
"KRN",.402,741,"DIAB",1,1,130.36,0)
.01;T
"KRN",.402,741,"DIAB",1,2,130.29,0)
.01;T
"KRN",.402,741,"DIAB",1,2,130.37,0)
.01;T
"KRN",.402,741,"DIAB",1,2,130.47,0)
.01;T
"KRN",.402,741,"DIAB",2,0,130,0)
.011//OUT;T
"KRN",.402,741,"DIAB",2,0,130,1)
.31;T
"KRN",.402,741,"DIAB",2,1,130.042,0)
1;T
"KRN",.402,741,"DIAB",2,1,130.06,0)
.05//YES;T
"KRN",.402,741,"DIAB",2,1,130.16,0)
3;T
"KRN",.402,741,"DIAB",2,1,130.17,0)
2;T
"KRN",.402,741,"DIAB",2,1,130.213,0)
1;T
"KRN",.402,741,"DIAB",2,1,130.28,0)
2;T
"KRN",.402,741,"DIAB",2,1,130.36,0)
1;T
"KRN",.402,741,"DIAB",2,2,130.29,0)
1;T
"KRN",.402,741,"DIAB",2,2,130.37,0)
1;T
"KRN",.402,741,"DIAB",2,2,130.47,0)
1;T
"KRN",.402,741,"DIAB",3,0,130,0)
.14;T
"KRN",.402,741,"DIAB",3,0,130,1)
.37;T
"KRN",.402,741,"DIAB",3,1,130.042,0)
2;T
"KRN",.402,741,"DIAB",3,1,130.06,0)
24;T
"KRN",.402,741,"DIAB",3,1,130.28,0)
3;T
"KRN",.402,741,"DIAB",3,1,130.36,0)
3;T
"KRN",.402,741,"DIAB",3,2,130.29,0)
2;T
"KRN",.402,741,"DIAB",3,2,130.37,0)
2;T
"KRN",.402,741,"DIAB",4,0,130,0)
32;T
"KRN",.402,741,"DIAB",4,0,130,1)
.213;T
"KRN",.402,741,"DIAB",4,2,130.29,0)
3;T
"KRN",.402,741,"DIAB",4,2,130.37,0)
3;T
"KRN",.402,741,"DIAB",5,0,130,0)
32.5;T
"KRN",.402,741,"DIAB",5,0,130,1)
42;T
"KRN",.402,741,"DIAB",6,0,130,0)
.72;T
"KRN",.402,741,"DIAB",6,0,130,1)
17;T
"KRN",.402,741,"DIAB",7,0,130,0)
26;T
"KRN",.402,741,"DIAB",7,0,130,1)
18;T
"KRN",.402,741,"DIAB",8,0,130,0)
27;T
"KRN",.402,741,"DIAB",9,0,130,0)
.42;T
"KRN",.402,741,"DIAB",10,0,130,0)
.12;T
"KRN",.402,741,"DIAB",11,0,130,0)
506;T
"KRN",.402,741,"DIAB",12,0,130,0)
508;T
"KRN",.402,741,"DIAB",13,0,130,0)
.205;T
"KRN",.402,741,"DIAB",14,0,130,0)
73;T
"KRN",.402,741,"DIAB",15,0,130,0)
72;T
"KRN",.402,741,"DIAB",16,0,130,0)
71;T
"KRN",.402,741,"DIAB",17,0,130,0)
84;T
"KRN",.402,741,"DIAB",18,0,130,0)
83;T
"KRN",.402,741,"DIAB",19,0,130,0)
82;T
"KRN",.402,741,"DIAB",20,0,130,0)
.22;T
"KRN",.402,741,"DIAB",21,0,130,0)
.23;T
"KRN",.402,741,"DIAB",22,0,130,0)
.232;T
"KRN",.402,741,"DIAB",23,0,130,0)
63;T
"KRN",.402,741,"DIAB",24,0,130,0)
.111;T
"KRN",.402,741,"DIAB",25,0,130,0)
.112;T
"KRN",.402,741,"DIAB",26,0,130,0)
.02;T
"KRN",.402,741,"DIAB",27,0,130,0)
.15;T
"KRN",.402,741,"DIAB",28,0,130,0)
44;T
"KRN",.402,741,"DIAB",29,0,130,0)
45;T
"KRN",.402,741,"DIAB",30,0,130,0)
46;T
"KRN",.402,741,"DIAB",31,0,130,0)
47;T
"KRN",.402,741,"DIAB",32,0,130,0)
48;T
"KRN",.402,741,"DIAB",33,0,130,0)
.04;T
"KRN",.402,741,"DIAB",34,0,130,0)
1.09;T
"KRN",.402,741,"DIAB",35,0,130,0)
.164;T
"KRN",.402,741,"DIAB",36,0,130,0)
.166;T
"KRN",.402,741,"DIAB",37,0,130,0)
49;T
"KRN",.402,741,"DIAB",38,0,130,0)
64;T
"KRN",.402,741,"DIAB",39,0,130,0)
.29;T
"KRN",.402,741,"DR",1,130)
.09T~;.011T~//OUT;.14T~;32T~;32.5T~;.72T~;26T~;27T~;.42T~;.12T~;506T~;508T~;.205T~;73T~;72T~;71T~;84T~;83T~;82T~;.22T~;.23T~;.232T~;63T~;.111T~;.112T~;.02T~;.15T~;44T~;45T~;46T~;47T~;48T~;.04T~;1.09T~;.164T~;.166T~;49T~;64T~;.29T~;
"KRN",.402,741,"DR",1,130,1)
1.13T~;.31T~;.37T~;.213T~;42T~;17T~;18T~;
"KRN",.402,741,"DR",2,130.042)
.01T~;1T~;2T~;
"KRN",.402,741,"DR",2,130.06)
.01T~;.05T~//YES;24T~;
"KRN",.402,741,"DR",2,130.16)
.01T~;3T~;
"KRN",.402,741,"DR",2,130.17)
.01T~;2T~;
"KRN",.402,741,"DR",2,130.213)
.01T~;1T~;
"KRN",.402,741,"DR",2,130.28)
.01T~;2T~;3T~;
"KRN",.402,741,"DR",2,130.36)
.01T~;1T~;3T~;
"KRN",.402,741,"DR",3,130.29)
.01T~;1T~;2T~;3T~;
"KRN",.402,741,"DR",3,130.37)
.01T~;1T~;2T~;3T~;
"KRN",.402,741,"DR",3,130.47)
.01T~;1T~;
"KRN",.402,755,-1)
0^3
"KRN",.402,755,0)
SROMEN-START^3060316.1038^^130^^^3060316
"KRN",.402,755,"DIAB",1,0,130,0)
.09;T
"KRN",.402,755,"DIAB",1,1,130.042,0)
.01;T
"KRN",.402,755,"DIAB",1,1,130.065,0)
.01;T
"KRN",.402,755,"DIAB",1,1,130.17,0)
.01;T
"KRN",.402,755,"DIAB",1,1,130.31,0)
.01;T
"KRN",.402,755,"DIAB",2,0,130,0)
32;T
"KRN",.402,755,"DIAB",2,1,130.042,0)
1;T
"KRN",.402,755,"DIAB",2,1,130.065,0)
1;T
"KRN",.402,755,"DIAB",2,1,130.17,0)
3;T
"KRN",.402,755,"DIAB",2,1,130.31,0)
1;T
"KRN",.402,755,"DIAB",3,0,130,0)
32.5;T
"KRN",.402,755,"DIAB",3,1,130.042,0)
2;T
"KRN",.402,755,"DIAB",3,1,130.17,0)
2;T
"KRN",.402,755,"DIAB",4,0,130,0)
.72;T
"KRN",.402,755,"DIAB",5,0,130,0)
.02;T
"KRN",.402,755,"DIAB",6,0,130,0)
.04;T
"KRN",.402,755,"DIAB",7,0,130,0)
.03;T
"KRN",.402,755,"DIAB",8,0,130,0)
.43;T
"KRN",.402,755,"DIAB",9,0,130,0)
.035;T
"KRN",.402,755,"DIAB",10,0,130,0)
1.01;T
"KRN",.402,755,"DIAB",11,0,130,0)
.971;T
"KRN",.402,755,"DIAB",12,0,130,0)
17;T
"KRN",.402,755,"DIAB",13,0,130,0)
18;T
"KRN",.402,755,"DIAB",14,0,130,0)
67;T
"KRN",.402,755,"DIAB",15,0,130,0)
42;T
"KRN",.402,755,"DIAB",16,0,130,0)
.69;T
"KRN",.402,755,"DIAB",17,0,130,0)
73;T
"KRN",.402,755,"DIAB",18,0,130,0)
72;T
"KRN",.402,755,"DIAB",19,0,130,0)
71;T
"KRN",.402,755,"DIAB",20,0,130,0)
84;T
"KRN",.402,755,"DIAB",21,0,130,0)
83;T
"KRN",.402,755,"DIAB",22,0,130,0)
82;T
"KRN",.402,755,"DIAB",23,0,130,0)
1.13;T
"KRN",.402,755,"DIAB",24,0,130,0)
.19;T
"KRN",.402,755,"DIAB",25,0,130,0)
.196;T
"KRN",.402,755,"DIAB",26,0,130,0)
.07;T
"KRN",.402,755,"DIAB",27,0,130,0)
.11;T
"KRN",.402,755,"DIAB",28,0,130,0)
.12;T
"KRN",.402,755,"DIAB",29,0,130,0)
506;T
"KRN",.402,755,"DIAB",30,0,130,0)
508;T
"KRN",.402,755,"DIAB",31,0,130,0)
.18;T
"KRN",.402,755,"DIAB",32,0,130,0)
4;T
"KRN",.402,755,"DIAB",33,0,130,0)
.175;T
"KRN",.402,755,"DIAB",34,0,130,0)
8;T
"KRN",.402,755,"DIAB",35,0,130,0)
65;T
"KRN",.402,755,"DIAB",36,0,130,0)
.13;T
"KRN",.402,755,"DIAB",37,0,130,0)
.55;T
"KRN",.402,755,"DIAB",38,0,130,0)
6;T
"KRN",.402,755,"DR",1,130)
.09T~;32T~;32.5T~;.72T~;.02T~;.04T~;.03T~;.43T~;.035T~;1.01T~;.971T~;17T~;18T~;67T~;42T~;.69T~;73T~;72T~;71T~;84T~;83T~;82T~;1.13T~;.19T~;.196T~;.07T~;.11T~;.12T~;506T~;508T~;.18T~;4T~;.175T~;8T~;65T~;.13T~;.55T~;6T~;
"KRN",.402,755,"DR",2,130.042)
.01T~;1T~;2T~;
"KRN",.402,755,"DR",2,130.065)
.01T~;1T~;
"KRN",.402,755,"DR",2,130.17)
.01T~;3T~;2T~;
"KRN",.402,755,"DR",2,130.31)
.01T~;1T~;
"KRN",.402,1409,-1)
0^1
"KRN",.402,1409,0)
SRO-NOCOMP^3060313.1138^^130^^^3060706
"KRN",.402,1409,"DR",1,130)
403////N;248////N;249////N;404////N;488////N;318////N;251////N;412////N;490////N;252////N;285////N;319////N;409////N;254////N;255////N;320////N;256////N;410////N;287////N;321////N;411////N;258////N;322////N;257////N;261////N;
"KRN",.402,1409,"DR",1,130,1)
263////N;250////N;385////N;386////N;387////N;388////N;389////N;391////N;466////N;467////N;
"KRN",.402,2107,-1)
0^4
"KRN",.402,2107,0)
SRONRPT^3060403.1508^^130^^^3060403
"KRN",.402,2107,"DIAB",1,0,130,0)
44;T
"KRN",.402,2107,"DIAB",1,0,130,1)
.12;T
"KRN",.402,2107,"DIAB",1,1,130.01,0)
.01;T
"KRN",.402,2107,"DIAB",1,1,130.0129,0)
.01;T
"KRN",.402,2107,"DIAB",1,1,130.013,0)
.01;T
"KRN",.402,2107,"DIAB",1,1,130.02,0)
.01;T
"KRN",.402,2107,"DIAB",1,1,130.04,0)
.01;T
"KRN",.402,2107,"DIAB",1,1,130.06,0)
.01;T
"KRN",.402,2107,"DIAB",1,1,130.065,0)
.01;T
"KRN",.402,2107,"DIAB",1,1,130.08,0)
.01;T
"KRN",.402,2107,"DIAB",1,1,130.16,0)
.01;T
"KRN",.402,2107,"DIAB",1,1,130.23,0)
.01;T
"KRN",.402,2107,"DIAB",1,1,130.24,0)
.01;T
"KRN",.402,2107,"DIAB",1,1,130.28,0)
.01;T
"KRN",.402,2107,"DIAB",1,1,130.31,0)
.01;T
"KRN",.402,2107,"DIAB",1,1,130.32,0)
.01;T
"KRN",.402,2107,"DIAB",1,1,130.33,0)
.01;T
"KRN",.402,2107,"DIAB",1,1,130.36,0)
.01;T
"KRN",.402,2107,"DIAB",1,2,130.0134,0)
.01;T
"KRN",.402,2107,"DIAB",1,2,130.34,0)
.01;T
"KRN",.402,2107,"DIAB",1,2,130.39,0)
.01;T
"KRN",.402,2107,"DIAB",2,0,130,0)
45;T
"KRN",.402,2107,"DIAB",2,0,130,1)
506;T
"KRN",.402,2107,"DIAB",2,1,130.01,0)
1;T
"KRN",.402,2107,"DIAB",2,1,130.0129,0)
1;T
"KRN",.402,2107,"DIAB",2,1,130.013,0)
1;T
"KRN",.402,2107,"DIAB",2,1,130.02,0)
3;T
"KRN",.402,2107,"DIAB",2,1,130.04,0)
1;T
"KRN",.402,2107,"DIAB",2,1,130.065,0)
1;T
"KRN",.402,2107,"DIAB",2,1,130.08,0)
1;T
"KRN",.402,2107,"DIAB",2,1,130.23,0)
1;T
"KRN",.402,2107,"DIAB",2,1,130.24,0)
1;T
"KRN",.402,2107,"DIAB",2,1,130.28,0)
3;T
"KRN",.402,2107,"DIAB",2,1,130.31,0)
1;T
"KRN",.402,2107,"DIAB",2,1,130.32,0)
2;T
"KRN",.402,2107,"DIAB",2,1,130.33,0)
1;T
"KRN",.402,2107,"DIAB",2,1,130.36,0)
3;T
"KRN",.402,2107,"DIAB",2,2,130.0134,0)
1;T
"KRN",.402,2107,"DIAB",2,2,130.34,0)
1;T
"KRN",.402,2107,"DIAB",2,2,130.39,0)
1;T
"KRN",.402,2107,"DIAB",3,0,130,0)
46;T
"KRN",.402,2107,"DIAB",3,0,130,1)
508;T
"KRN",.402,2107,"DIAB",3,1,130.01,0)
2;T
"KRN",.402,2107,"DIAB",3,1,130.0129,0)
2;T
"KRN",.402,2107,"DIAB",3,1,130.013,0)
2;T
"KRN",.402,2107,"DIAB",3,1,130.02,0)
1;T
"KRN",.402,2107,"DIAB",3,1,130.04,0)
3;T
"KRN",.402,2107,"DIAB",3,1,130.31,0)
2;T
"KRN",.402,2107,"DIAB",3,1,130.32,0)
1;T
"KRN",.402,2107,"DIAB",3,2,130.0134,0)
2;T
"KRN",.402,2107,"DIAB",3,2,130.34,0)
2;T
"KRN",.402,2107,"DIAB",3,2,130.39,0)
2;T
"KRN",.402,2107,"DIAB",4,0,130,0)
47;T
"KRN",.402,2107,"DIAB",4,0,130,1)
.18;T
"KRN",.402,2107,"DIAB",4,1,130.01,0)
2.5;T
"KRN",.402,2107,"DIAB",4,1,130.0129,0)
4;T
"KRN",.402,2107,"DIAB",4,1,130.013,0)
3;T
"KRN",.402,2107,"DIAB",4,1,130.02,0)
4;T
"KRN",.402,2107,"DIAB",4,1,130.04,0)
4;T
"KRN",.402,2107,"DIAB",4,1,130.32,0)
3;T
"KRN",.402,2107,"DIAB",4,2,130.34,0)
3;T
"KRN",.402,2107,"DIAB",5,0,130,0)
48;T
"KRN",.402,2107,"DIAB",5,0,130,1)
4;T
"KRN",.402,2107,"DIAB",5,1,130.01,0)
5;T
"KRN",.402,2107,"DIAB",5,1,130.0129,0)
3;T
"KRN",.402,2107,"DIAB",5,1,130.013,0)
4;T
"KRN",.402,2107,"DIAB",5,1,130.02,0)
2;T
"KRN",.402,2107,"DIAB",5,1,130.04,0)
5;T
"KRN",.402,2107,"DIAB",5,2,130.34,0)
4;T
"KRN",.402,2107,"DIAB",6,0,130,0)
.203;T
"KRN",.402,2107,"DIAB",6,0,130,1)
.175;T
"KRN",.402,2107,"DIAB",6,1,130.01,0)
6;T
"KRN",.402,2107,"DIAB",6,1,130.0129,0)
5;T
"KRN",.402,2107,"DIAB",6,1,130.013,0)
5;T
"KRN",.402,2107,"DIAB",6,2,130.34,0)
5;T
"KRN",.402,2107,"DIAB",7,0,130,0)
.205;T
"KRN",.402,2107,"DIAB",7,0,130,1)
8;T
"KRN",.402,2107,"DIAB",7,1,130.01,0)
7;T
"KRN",.402,2107,"DIAB",8,0,130,0)
73;T
"KRN",.402,2107,"DIAB",8,0,130,1)
65;T
"KRN",.402,2107,"DIAB",9,0,130,0)
72;T
"KRN",.402,2107,"DIAB",9,0,130,1)
.13;T
"KRN",.402,2107,"DIAB",10,0,130,0)
71;T
"KRN",.402,2107,"DIAB",10,0,130,1)
.75;T
"KRN",.402,2107,"DIAB",11,0,130,0)
84;T
"KRN",.402,2107,"DIAB",11,0,130,1)
57;T
"KRN",.402,2107,"DIAB",12,0,130,0)
83;T
"KRN",.402,2107,"DIAB",12,0,130,1)
58;T
"KRN",.402,2107,"DIAB",13,0,130,0)
82;T
"KRN",.402,2107,"DIAB",13,0,130,1)
.55;T
"KRN",.402,2107,"DIAB",14,0,130,0)
.22;T
"KRN",.402,2107,"DIAB",14,0,130,1)
6;T
"KRN",.402,2107,"DIAB",15,0,130,0)
.23;T
"KRN",.402,2107,"DIAB",15,0,130,1)
49;T
"KRN",.402,2107,"DIAB",16,0,130,0)
.206;T
"KRN",.402,2107,"DIAB",16,0,130,1)
64;T
"KRN",.402,2107,"DIAB",17,0,130,0)
.232;T
"KRN",.402,2107,"DIAB",17,0,130,1)
.37;T
"KRN",.402,2107,"DIAB",18,0,130,0)
26;T
"KRN",.402,2107,"DIAB",18,0,130,1)
22;T
"KRN",.402,2107,"DIAB",19,0,130,0)
.42;T
"KRN",.402,2107,"DIAB",19,0,130,1)
.48;T
"KRN",.402,2107,"DIAB",20,0,130,0)
1.09;T
"KRN",.402,2107,"DIAB",20,0,130,1)
.757;T
"KRN",.402,2107,"DIAB",21,0,130,0)
.46;T
"KRN",.402,2107,"DIAB",21,0,130,1)
.47;T
"KRN",.402,2107,"DIAB",22,0,130,0)
.03;T
"KRN",.402,2107,"DIAB",22,0,130,1)
.375;T
"KRN",.402,2107,"DIAB",23,0,130,0)
.02;T
"KRN",.402,2107,"DIAB",23,0,130,1)
.39;T
"KRN",.402,2107,"DIAB",24,0,130,0)
.035;T
"KRN",.402,2107,"DIAB",24,0,130,1)
.27;T
"KRN",.402,2107,"DIAB",25,0,130,0)
.14;T
"KRN",.402,2107,"DIAB",25,0,130,1)
41;T
"KRN",.402,2107,"DIAB",26,0,130,0)
.164;T
"KRN",.402,2107,"DIAB",26,0,130,1)
.875;T
"KRN",.402,2107,"DIAB",27,0,130,0)
.15;T
"KRN",.402,2107,"DIAB",27,0,130,1)
.25;T
"KRN",.402,2107,"DIAB",28,0,130,0)
.16;T
"KRN",.402,2107,"DIAB",28,0,130,1)
.255;T
"KRN",.402,2107,"DIAB",29,0,130,0)
.31;T
"KRN",.402,2107,"DIAB",29,0,130,1)
.81;T
"KRN",.402,2107,"DIAB",30,0,130,0)
.33;T
"KRN",.402,2107,"DIAB",30,0,130,1)
.821;T
"KRN",.402,2107,"DIAB",31,0,130,0)
30;T
"KRN",.402,2107,"DIAB",31,0,130,1)
.76;T
"KRN",.402,2107,"DIAB",32,0,130,0)
.112;T
"KRN",.402,2107,"DIAB",32,0,130,1)
.77;T
"KRN",.402,2107,"DIAB",33,0,130,0)
.111;T
"KRN",.402,2107,"DIAB",33,0,130,1)
129;T
"KRN",.402,2107,"DIAB",34,0,130,0)
31;T
"KRN",.402,2107,"DIAB",34,0,130,1)
127;T
"KRN",.402,2107,"DIAB",35,0,130,0)
.19;T
"KRN",.402,2107,"DIAB",35,0,130,1)
25;T
"KRN",.402,2107,"DIAB",36,0,130,0)
.196;T
"KRN",.402,2107,"DIAB",36,0,130,1)
130;T
"KRN",.402,2107,"DIAB",37,0,130,0)
.07;T
"KRN",.402,2107,"DIAB",37,0,130,1)
131;T
"KRN",.402,2107,"DIAB",38,0,130,0)
.195;T
"KRN",.402,2107,"DIAB",38,0,130,1)
.29;T
"KRN",.402,2107,"DIAB",39,0,130,0)
.69;T
"KRN",.402,2107,"DR",1,130)
44T~;45T~;46T~;47T~;48T~;.203T~;.205T~;73T~;72T~;71T~;84T~;83T~;82T~;.22T~;.23T~;.206T~;.232T~;26T~;.42T~;1.09T~;.46T~;.03T~;.02T~;.035T~;.14T~;.164T~;.15T~;.16T~;.31T~;.33T~;30T~;.112T~;.111T~;31T~;.19T~;.196T~;.07T~;.195T~;.69T~;
"KRN",.402,2107,"DR",1,130,1)
.12T~;506T~;508T~;.18T~;4T~;.175T~;8T~;65T~;.13T~;.75T~;57T~;58T~;.55T~;6T~;49T~;64T~;.37T~;22T~;.48T~;.757T~;.47T~;.375T~;.39T~;.27T~;41T~;.875T~;.25T~;.255T~;.81T~;.821T~;.76T~;.77T~;129T~;127T~;25T~;130T~;131T~;.29T~;
"KRN",.402,2107,"DR",2,130.01)
.01T~;1T~;2T~;2.5T~;5T~;6T~;7T~;
"KRN",.402,2107,"DR",2,130.0129)
.01T~;1T~;2T~;4T~;3T~;5T~;
"KRN",.402,2107,"DR",2,130.013)
.01T~;1T~;2T~;3T~;4T~;5T~;
"KRN",.402,2107,"DR",2,130.02)
.01T~;3T~;1T~;4T~;2T~;
"KRN",.402,2107,"DR",2,130.04)
.01T~;1T~;3T~;4T~;5T~;
"KRN",.402,2107,"DR",2,130.06)
.01T~;
"KRN",.402,2107,"DR",2,130.065)
.01T~;1T~;
"KRN",.402,2107,"DR",2,130.08)
.01T~;1T~;
"KRN",.402,2107,"DR",2,130.16)
.01T~;
"KRN",.402,2107,"DR",2,130.23)
.01T~;1T~;
"KRN",.402,2107,"DR",2,130.24)
.01T~;1T~;
"KRN",.402,2107,"DR",2,130.28)
.01T~;3T~;
"KRN",.402,2107,"DR",2,130.31)
.01T~;1T~;2T~;
"KRN",.402,2107,"DR",2,130.32)
.01T~;2T~;1T~;3T~;
"KRN",.402,2107,"DR",2,130.33)
.01T~;1T~;
"KRN",.402,2107,"DR",2,130.36)
.01T~;3T~;
"KRN",.402,2107,"DR",3,130.0134)
.01T~;1T~;2T~;
"KRN",.402,2107,"DR",3,130.34)
.01T~;1T~;2T~;3T~;4T~;5T~;
"KRN",.402,2107,"DR",3,130.39)
.01T~;1T~;2T~;
"MBREQ")
0
"ORD",7,.402)
.402;7;;;EDEOUT^DIFROMSO(.402,DA,"",XPDA);FPRE^DIFROMSI(.402,"",XPDA);EPRE^DIFROMSI(.402,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.402,DA,"",XPDA);DEL^DIFROMSK(.402,"",%)
"ORD",7,.402,0)
INPUT TEMPLATE
"PKG",167,-1)
1^1
"PKG",167,0)
SURGERY^SR^SURGICAL DATA COLLECTION AND OPERATIONS SCHEDULING
"PKG",167,20,0)
^9.402P^^
"PKG",167,22,0)
^9.49I^1^1
"PKG",167,22,1,0)
3.0^2930624^2930811
"PKG",167,22,1,"PAH",1,0)
153^3060717
"PKG",167,22,1,"PAH",1,1,0)
^^123^123^3060717
"PKG",167,22,1,"PAH",1,1,1,0)
his patch updates the Surgery Risk Assessment software of the Veterans
"PKG",167,22,1,"PAH",1,1,2,0)
Health Information Systems and Technology Architecture (VistA)
"PKG",167,22,1,"PAH",1,1,3,0)
Surgery application as requested by the Executive Board of the National
"PKG",167,22,1,"PAH",1,1,4,0)
Surgical Quality Improvement Program (NSQIP) and by the Cardiac Surgery
"PKG",167,22,1,"PAH",1,1,5,0)
Consultants Board of the Continuous Improvement in Cardiac Surgery
"PKG",167,22,1,"PAH",1,1,6,0)
Program (CICSP). These updates include the addition of new data fields,
"PKG",167,22,1,"PAH",1,1,7,0)
changes to existing data fields, changes to data entry screens, changes
"PKG",167,22,1,"PAH",1,1,8,0)
to reports used in Surgery Risk Assessment management process and changes
"PKG",167,22,1,"PAH",1,1,9,0)
to the Surgery Risk Assessment transmissions.
"PKG",167,22,1,"PAH",1,1,10,0)
 
"PKG",167,22,1,"PAH",1,1,11,0)
NOTE: All fields listed below are in the SURGERY file (#130) unless
"PKG",167,22,1,"PAH",1,1,12,0)
otherwise indicated.
"PKG",167,22,1,"PAH",1,1,13,0)
 
"PKG",167,22,1,"PAH",1,1,14,0)
Cardiac Risk Assessment Modifications
"PKG",167,22,1,"PAH",1,1,15,0)
-------------------------------------
"PKG",167,22,1,"PAH",1,1,16,0)
 o Modifications to the Clinical Information (Enter/Edit) [SROA CLINICAL
"PKG",167,22,1,"PAH",1,1,17,0)
   INFORMATION] option
"PKG",167,22,1,"PAH",1,1,18,0)
  - The software is modified to auto-populate the HEIGHT field (#236) and
"PKG",167,22,1,"PAH",1,1,19,0)
    the WEIGHT field (#237) as documented in the Vitals software.
"PKG",167,22,1,"PAH",1,1,20,0)
  - The Current Smoker item under this option is modified to reference to
"PKG",167,22,1,"PAH",1,1,21,0)
    the new CURRENT SMOKER (CARDIAC) field (#510) instead of the old field
"PKG",167,22,1,"PAH",1,1,22,0)
    CURRENT SMOKER field (#202), which will be utilized by the NSQIP
"PKG",167,22,1,"PAH",1,1,23,0)
    options.
"PKG",167,22,1,"PAH",1,1,24,0)
 
"PKG",167,22,1,"PAH",1,1,25,0)
 o Modifications to the Laboratory Test Results (Enter/Edit) [SROA
"PKG",167,22,1,"PAH",1,1,26,0)
   LAB-CARDIAC] option
"PKG",167,22,1,"PAH",1,1,27,0)
  - The HEMOGLOBIN A1C field (#504) and the HEMOGLOBIN A1C, DATE field
"PKG",167,22,1,"PAH",1,1,28,0)
    (#504.1) are added to the list of preoperative lab results.
"PKG",167,22,1,"PAH",1,1,29,0)
  - The software is modified to use a date range of 1000 days prior to the
"PKG",167,22,1,"PAH",1,1,30,0)
    date of operation when searching for the most recent preoperative lab
"PKG",167,22,1,"PAH",1,1,31,0)
    test result for the HDL (CARDIAC) field (#457), the LDL (CARDIAC)
"PKG",167,22,1,"PAH",1,1,32,0)
    field (#461), the TOTAL CHOLESTEROL (CARDIAC) field (#462), the SERUM
"PKG",167,22,1,"PAH",1,1,33,0)
    TRIGLYCERIDE (CARDIAC) field (#458), and the HEMOGLOBIN A1C field
"PKG",167,22,1,"PAH",1,1,34,0)
    (#504).
"PKG",167,22,1,"PAH",1,1,35,0)
 
"PKG",167,22,1,"PAH",1,1,36,0)
 o The Enter Cardiac Catheterization & Angiographic Data [SROA CARDIAC
"PKG",167,22,1,"PAH",1,1,37,0)
   PROCEDURES] option is modified to allow all fields to be
"PKG",167,22,1,"PAH",1,1,38,0)
   auto-populated with 'NS' (NO STUDY) when 'NS' is entered in the
"PKG",167,22,1,"PAH",1,1,39,0)
   PROCEDURE TYPE field (#476).
"PKG",167,22,1,"PAH",1,1,40,0)
 
"PKG",167,22,1,"PAH",1,1,41,0)
 o Modifications to the Cardiac Procedures Operative Data (Enter/Edit)
"PKG",167,22,1,"PAH",1,1,42,0)
   [SROA CARDIAC PROCEDURES] option
"PKG",167,22,1,"PAH",1,1,43,0)
  - The GREAT VESSEL REPAIR (Y/N) field (#372) is moved to screen #1 under
"PKG",167,22,1,"PAH",1,1,44,0)
    this option as item #20.
"PKG",167,22,1,"PAH",1,1,45,0)
  - The ENDOVASCULAR REPAIR field (#505) is added in screen #1 as item
"PKG",167,22,1,"PAH",1,1,46,0)
    #21.
"PKG",167,22,1,"PAH",1,1,47,0)
  - The OTHER CT PROCEDURE field (#484) in the first screen is now
"PKG",167,22,1,"PAH",1,1,48,0)
    replaced by the OTHER CARDIAC PROCEDURES (Y/N) field (#502). If this
"PKG",167,22,1,"PAH",1,1,49,0)
    field value is "YES" the software will prompt the user for the OTHER
"PKG",167,22,1,"PAH",1,1,50,0)
    CARDIAC PROCEDURES-LIST field (#484).
"PKG",167,22,1,"PAH",1,1,51,0)
  - The OTHER NON-CT PROCEDURES field (#491) is removed from the second
"PKG",167,22,1,"PAH",1,1,52,0)
    screen and a blank line is added before "Other Operative Data
"PKG",167,22,1,"PAH",1,1,53,0)
    details" header.
"PKG",167,22,1,"PAH",1,1,54,0)
  - The software is modified so that entering "N" for the VALVE REPAIR
"PKG",167,22,1,"PAH",1,1,55,0)
    field (#370) shall result in "5. None". The existing N's will be
"PKG",167,22,1,"PAH",1,1,56,0)
    converted to '5' upon patch installation.
"PKG",167,22,1,"PAH",1,1,57,0)
  - This option is updated to reference the new MAZE PROCEDURE field
"PKG",167,22,1,"PAH",1,1,58,0)
    (#512) as item 13 in the first data entry screen.
"PKG",167,22,1,"PAH",1,1,59,0)
 
"PKG",167,22,1,"PAH",1,1,60,0)
 o A new occurrence category REPEAT VENTILATOR SUPPORT W/IN 30 DAYS is
"PKG",167,22,1,"PAH",1,1,61,0)
   created in the PERIOPERATIVE OCCURRENCE CATEGORY file (#136.5). This
"PKG",167,22,1,"PAH",1,1,62,0)
   occurrence category will be selectable only for cardiac assessed cases.
"PKG",167,22,1,"PAH",1,1,63,0)
 
"PKG",167,22,1,"PAH",1,1,64,0)
 o The following fields on the Resource Data [SROA CARDIAC RESOURCE]
"PKG",167,22,1,"PAH",1,1,65,0)
   option are modified to assume a default of "past date" when no year is
"PKG",167,22,1,"PAH",1,1,66,0)
   specified:
"PKG",167,22,1,"PAH",1,1,67,0)
  - ESTIMATE OF MORTALITY, DATE field (#364.1)
"PKG",167,22,1,"PAH",1,1,68,0)
  - D/T PATIENT EXTUBATED field (#470)
"PKG",167,22,1,"PAH",1,1,69,0)
  - D/T PATIENT DISCH FROM ICU field (#471)
"PKG",167,22,1,"PAH",1,1,70,0)
 
"PKG",167,22,1,"PAH",1,1,71,0)
 o This patch will allow the retransmission of a cardiac risk assessment.
"PKG",167,22,1,"PAH",1,1,72,0)
 
"PKG",167,22,1,"PAH",1,1,73,0)
Non-Cardiac Assessment Modifications
"PKG",167,22,1,"PAH",1,1,74,0)
------------------------------------
"PKG",167,22,1,"PAH",1,1,75,0)
 o Modifications to the Preoperative Information (Enter/Edit) [SROA PREOP
"PKG",167,22,1,"PAH",1,1,76,0)
   DATA] option
"PKG",167,22,1,"PAH",1,1,77,0)
  - The software is modified to auto-populate the HEIGHT field (#236) and
"PKG",167,22,1,"PAH",1,1,78,0)
    the WEIGHT field (#237) as documented in the Vitals software.
"PKG",167,22,1,"PAH",1,1,79,0)
  - The PREGNANCY field (#269) is added to the NUTRITIONAL/IMMUNE/OTHER
"PKG",167,22,1,"PAH",1,1,80,0)
    section.
"PKG",167,22,1,"PAH",1,1,81,0)
 
"PKG",167,22,1,"PAH",1,1,82,0)
 o Modifications to the Laboratory Test Results (Enter/Edit) [SROA LAB]
"PKG",167,22,1,"PAH",1,1,83,0)
   option
"PKG",167,22,1,"PAH",1,1,84,0)
  - The PREOPERATIVE ANION GAP field (#444) and the PREOP ANION GAP, DATE
"PKG",167,22,1,"PAH",1,1,85,0)
    field (#444.1) are added to the list of preoperative lab results.
"PKG",167,22,1,"PAH",1,1,86,0)
  - The HIGHEST ANION GAP field (#445) and the HIGH ANION GAP, DATE field
"PKG",167,22,1,"PAH",1,1,87,0)
    (445.1) are added to the list of postoperative lab results.
"PKG",167,22,1,"PAH",1,1,88,0)
 
"PKG",167,22,1,"PAH",1,1,89,0)
 o The Operation Information (Enter/Edit) [SROA OPERATION DATA] option is
"PKG",167,22,1,"PAH",1,1,90,0)
   modified to add the INTRAOP DISSEMINATED CANCER field (#443).
"PKG",167,22,1,"PAH",1,1,91,0)
 
"PKG",167,22,1,"PAH",1,1,92,0)
Other Risk Assessment Modifications
"PKG",167,22,1,"PAH",1,1,93,0)
-----------------------------------
"PKG",167,22,1,"PAH",1,1,94,0)
 o The Print a Surgery Risk Assessment [SROA Print Assessment] option is
"PKG",167,22,1,"PAH",1,1,95,0)
   modified to include the new data elements.
"PKG",167,22,1,"PAH",1,1,96,0)
 
"PKG",167,22,1,"PAH",1,1,97,0)
 o The transmissions to the national databases are modified to include the
"PKG",167,22,1,"PAH",1,1,98,0)
   new fields.
"PKG",167,22,1,"PAH",1,1,99,0)
 
"PKG",167,22,1,"PAH",1,1,100,0)
 o Modification to some of the user entries of fields that allow text to
"PKG",167,22,1,"PAH",1,1,101,0)
   be entered to accept lower case or all CAPS
"PKG",167,22,1,"PAH",1,1,102,0)
  - The NUM OF PRIOR HEART SURGERIES field (#352) is modified to allow the
"PKG",167,22,1,"PAH",1,1,103,0)
    entry of lowercase letter "N" to represent "0 - NONE". Any existing
"PKG",167,22,1,"PAH",1,1,104,0)
    N's will be converted to '0' for NONE by he post install routine.
"PKG",167,22,1,"PAH",1,1,105,0)
  - The ESTIMATE OF MORTALITY field (#364) is modified to allow the entry
"PKG",167,22,1,"PAH",1,1,106,0)
    of lowercase letter "ns" to represent "NO STUDY".
"PKG",167,22,1,"PAH",1,1,107,0)
 
"PKG",167,22,1,"PAH",1,1,108,0)
 o Modifications to the List of Surgery Risk Assessments [SROA ASSESSMENT
"PKG",167,22,1,"PAH",1,1,109,0)
   LIST] option
"PKG",167,22,1,"PAH",1,1,110,0)
  - Each report is modified to display the final CPT codes from the case
"PKG",167,22,1,"PAH",1,1,111,0)
    coding record in the SURGERY PROCEDURE/DIAGNOSIS CODES file (#136).
"PKG",167,22,1,"PAH",1,1,112,0)
  - List of 1-Liner Cases Missing Information (list #8) is added.
"PKG",167,22,1,"PAH",1,1,113,0)
 
"PKG",167,22,1,"PAH",1,1,114,0)
General Surgery Items
"PKG",167,22,1,"PAH",1,1,115,0)
---------------------
"PKG",167,22,1,"PAH",1,1,116,0)
 o The PREOP HAIR CLIPPING BY field (#.12) is renamed HAIR REMOVAL BY.
"PKG",167,22,1,"PAH",1,1,117,0)
 
"PKG",167,22,1,"PAH",1,1,118,0)
 o The HAIR REMOVAL METHOD field (#506) and the HAIR REMOVAL COMMENTS
"PKG",167,22,1,"PAH",1,1,119,0)
   field (#508) are added to the Operation Startup [SROMEN-START] option
"PKG",167,22,1,"PAH",1,1,120,0)
   and the Operation (Short Screen) [SROMEN-OUT] option. Those two fields
"PKG",167,22,1,"PAH",1,1,121,0)
   and the HAIR REMOVAL BY field (#.12) are added to the Nurse
"PKG",167,22,1,"PAH",1,1,122,0)
   Intraoperative Report and became a mandatory documentation field to
"PKG",167,22,1,"PAH",1,1,123,0)
   satisfy the record review process for quality measurement purposes.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
101
"RTN","SR153UTL")
0^^B2199460^n/a
"RTN","SR153UTL",1,0)
SR153UTL ;BIR/ADM - SR*3*153 UTILITY ROUTINE ;02/24/06
"RTN","SR153UTL",2,0)
 ;;3.0; Surgery ;**153**;24 Jun 93;Build 11
"RTN","SR153UTL",3,0)
 Q
"RTN","SR153UTL",4,0)
PRE ; pre-install action for SR*3*153
"RTN","SR153UTL",5,0)
 ;
"RTN","SR153UTL",6,0)
 ; delete data from file 136.5  and re-initialize file
"RTN","SR153UTL",7,0)
 K ^SRO(136.5) S ^SRO(136.5,0)="PERIOPERATIVE OCCURRENCE CATEGORY^136.5I^^"
"RTN","SR153UTL",8,0)
 ;delete DD for modified field #202
"RTN","SR153UTL",9,0)
 S DIK="^DD(130,",DA=202,DA(1)=130 D ^DIK
"RTN","SR153UTL",10,0)
 Q
"RTN","SR153UTL",11,0)
POST ; add ANION GAP to file 139.2
"RTN","SR153UTL",12,0)
 N SRI
"RTN","SR153UTL",13,0)
 I $G(^SRO(139.2,26,0))'="ANION GAP" D
"RTN","SR153UTL",14,0)
 .S DA=26,DIK="^SRO(139.2," D ^DIK
"RTN","SR153UTL",15,0)
 .S ^SRO(139.2,26,0)="ANION GAP",^SRO(139.2,26,2)=72
"RTN","SR153UTL",16,0)
 .S DIK="^SRO(139.2,",DIK(1)=".01" D ENALL^DIK K DA,DIK
"RTN","SR153UTL",17,0)
 ; add HEMOGLOBIN A1C to file 139.2
"RTN","SR153UTL",18,0)
 I $G(^SRO(139.2,27,0))'="HEMOGLOBIN A1C" D
"RTN","SR153UTL",19,0)
 .S DA=27,DIK="^SRO(139.2," D ^DIK
"RTN","SR153UTL",20,0)
 .S ^SRO(139.2,27,0)="HEMOGLOBIN A1C",^SRO(139.2,27,2)=70
"RTN","SR153UTL",21,0)
 .S DIK="^SRO(139.2,",DIK(1)=".01" D ENALL^DIK K DA,DIK
"RTN","SR153UTL",22,0)
 ;
"RTN","SR153UTL",23,0)
 ;VALVE REPAIR field (#370), convert any existing N's to '5' for NONE
"RTN","SR153UTL",24,0)
 ;NUM OF PRIOR HEART SURGERIES (#352), convert any existing N's to '0' for NONE
"RTN","SR153UTL",25,0)
 ;CURRENT SMOKER field (#202), existing data for CICSP in this field will be placed in CURRENT SMOKER (CARDIAC) field (#510)
"RTN","SR153UTL",26,0)
 S SRTN=0 F  S SRTN=$O(^SRF(SRTN)) Q:'SRTN  D
"RTN","SR153UTL",27,0)
 .I $P($G(^SRF(SRTN,207)),"^",6)="N" S $P(^(207),"^",6)=5
"RTN","SR153UTL",28,0)
 .I $P($G(^SRF(SRTN,206)),"^",15)="N" S $P(^(206),"^",15)=0
"RTN","SR153UTL",29,0)
 .S SRI=$P($G(^SRF(SRTN,200)),"^",3) I SRI>0 S $P(^SRF(SRTN,200.1),"^",5)=SRI,$P(^SRF(SRTN,200),"^",3)=""
"RTN","SR153UTL",30,0)
 Q
"RTN","SRENSCS")
0^70^B7706764^B3397077
"RTN","SRENSCS",1,0)
SRENSCS ;BIR/SJA - ENSURING CORRECT SURGERY ;04/26/04
"RTN","SRENSCS",2,0)
 ;;3.0; Surgery ;**129,153**;24 Jun 93;Build 11
"RTN","SRENSCS",3,0)
 ;
"RTN","SRENSCS",4,0)
 ; entry point called by 'AIN' x-ref of the correct surgery fields
"RTN","SRENSCS",5,0)
IN I X'="N"!(X'=Y) Q
"RTN","SRENSCS",6,0)
 N SRJ,SRK,SRTN1,SRYN S SRTN1=$S($D(SRTN):SRTN,1:DA) Q:'SRTN1
"RTN","SRENSCS",7,0)
 S SRJ=$S(+DI=71:"3;82",+DI=72:"4;83",1:"5;84")
"RTN","SRENSCS",8,0)
ASK D EN^DDIOL("Correct Surgery Comments should be entered when a ""NO"" response is entered.",,"!!")
"RTN","SRENSCS",9,0)
 D FIELD^DID("130.0"_$P(SRJ,";",2),.01,"","TITLE","SRK")
"RTN","SRENSCS",10,0)
 D EN^DDIOL("Do you want to enter "_SRK("TITLE")_" ?  YES// ",,"!")
"RTN","SRENSCS",11,0)
 R SRYN:DTIME I '$T!(SRYN["^") Q
"RTN","SRENSCS",12,0)
 S SRYN=$E(SRYN) S:SRYN="" SRYN="Y" I SRYN["?" D HELP G ASK
"RTN","SRENSCS",13,0)
 I "YyNn"'[SRYN D EN^DDIOL("Enter 'YES' to enter correct surgery comments now, 'NO' to quit, or '?' for more help.",,"!!") G ASK
"RTN","SRENSCS",14,0)
 I "Nn"[SRYN Q
"RTN","SRENSCS",15,0)
 ; edit the associated comments fields
"RTN","SRENSCS",16,0)
 N DR,DIE,DA,DP,DC,DL,DE,DI,DIEL,DIETMP,DIFLD,DIP,DK,DM,DP,DQ,DU,DV,DW
"RTN","SRENSCS",17,0)
 W ! S DIE=130,DA=SRTN1,DR=$P(SRJ,";",2)_"T" D ^DIE
"RTN","SRENSCS",18,0)
 Q
"RTN","SRENSCS",19,0)
HELP D EN^DDIOL("Enter 'YES' to enter correct surgery comments.  Enter 'NO' to quit without entering correct surgery comments.",,"!!")
"RTN","SRENSCS",20,0)
 Q
"RTN","SRENSCS",21,0)
HR ;entry point called by 'AN' x-ref of the Sur Site Hair Removal Method field
"RTN","SRENSCS",22,0)
 I X'="S"&(X'="O") Q
"RTN","SRENSCS",23,0)
 N SRTN1,SRYN,SRSEL S SRSEL=X,SRTN1=$S($D(SRTN):SRTN,1:DA) Q:'SRTN1
"RTN","SRENSCS",24,0)
HRASK I SRSEL="O" D  G HRC
"RTN","SRENSCS",25,0)
 .D EN^DDIOL("Because OTHER has been selected, information must be entered into the comments",,"!!")
"RTN","SRENSCS",26,0)
 .D EN^DDIOL("field explaining the other technique.",,"!")
"RTN","SRENSCS",27,0)
SH D EN^DDIOL("It has been determined that shaving the surgical site results in a greater",,"!!")
"RTN","SRENSCS",28,0)
 D EN^DDIOL("likelihood of infection. Current best practices suggest that clippers should",,"!")
"RTN","SRENSCS",29,0)
 D EN^DDIOL("be used instead of shaving. Whenever hair is removed by shaving, a comment must",,"!")
"RTN","SRENSCS",30,0)
 D EN^DDIOL("be entered explaining why this process was used instead of safer techniques.",,"!")
"RTN","SRENSCS",31,0)
HRC ; edit the associated comments fields
"RTN","SRENSCS",32,0)
 N DR,DIE,DA,DP,DC,DL,DE,DI,DIEL,DIETMP,DIFLD,DIP,DK,DM,DP,DQ,DU,DV,DW
"RTN","SRENSCS",33,0)
 W ! S DIE=130,DA=SRTN1,DR=508_"T" D ^DIE
"RTN","SRENSCS",34,0)
 Q
"RTN","SRO1L1")
0^40^B13673029^B16661168
"RTN","SRO1L1",1,0)
SRO1L1 ;BIR/ADM - UPDATE 1-LINER CASE, CONTINUED ;03/24/06
"RTN","SRO1L1",2,0)
 ;;3.0; Surgery ;**86,88,100,129,142,153**;24 Jun 93;Build 11
"RTN","SRO1L1",3,0)
 S SRSOUT=0,SRSUPCPT=2 D NCODE^SROAUTL
"RTN","SRO1L1",4,0)
 N SRLCK S SRLCK=$$LOCK^SROUTL(SRTN) I 'SRLCK Q
"RTN","SRO1L1",5,0)
 D SRA^SROES
"RTN","SRO1L1",6,0)
EDIT S SRA=$G(^SRF(SRTN,"RA")) I $P(SRA,"^",2)="N",$P(SRA,"^",6)="N",$P(SRA,"^",7)'="" D ^SROAEX,END Q
"RTN","SRO1L1",7,0)
 S SRR=0 D TSTAT,HDR^SROAUTL D TECH^SROPRIN
"RTN","SRO1L1",8,0)
 S X=$P(^SRF(SRTN,"OP"),"^",2) I X S Y=$P($$CPT^ICPTCOD(X),"^",2) D SSPRIN^SROCPT S SRCPT=Y
"RTN","SRO1L1",9,0)
 S SRQ=0,SRDR=".011;.03;.04;.035;.166;1.09;1.13"
"RTN","SRO1L1",10,0)
 S SRAO(1)="In/Out-Patient Status^.011",SRAO(2)="Major or Minor^.03",SRAO(3)="Surgical Specialty^.04",SRAO(4)="Surgical Priority^.035",SRAO(5)="Attending Code^.166"
"RTN","SRO1L1",11,0)
 S SRAO(6)="ASA Class^1.13",SRAO(7)="Wound Classification^1.09",SRAO(8)="Anesthesia Technique^.37",SRAO(9)="CPT Codes (view only)^",SRAO(10)="Other Procedures^.42"
"RTN","SRO1L1",12,0)
 K DA,DIC,DIQ,DR,SRY S DIC="^SRF(",DA=SRTN,DIQ="SRY",DIQ(0)="E",DR=SRDR D EN^DIQ1 K DA,DIC,DIQ,DR
"RTN","SRO1L1",13,0)
 S SRY(130,SRTN,.37,"E")=SRTECH,SRY(130,SRTN,.42,"E")=$S($O(^SRF(SRTN,13,0)):"***INFORMATION ENTERED***",1:"***NONE ENTERED***"),SRY(130,SRTN,27,"E")=SRCPT
"RTN","SRO1L1",14,0)
 F I=1:1:10 W !,$J(I,2)_". "_$P(SRAO(I),"^")_":" D
"RTN","SRO1L1",15,0)
 .I I=9 D PROC Q
"RTN","SRO1L1",16,0)
 .S SREXT(1)=SRY(130,SRTN,$P(SRAO(I),"^",2),"E") I $L(SREXT(1))>48 D
"RTN","SRO1L1",17,0)
 ..N I,J,X,Y S X=SREXT(1) F I=0:1:47 S J=48-I,Y=$E(X,J) I Y=" " S SREXT(1)=$E(X,1,J-1),SREXT(2)=$E(X,J+1,$L(X)) Q
"RTN","SRO1L1",18,0)
 .W ?32,SREXT(1) W:$D(SREXT(2)) !,?32,SREXT(2) K SREXT
"RTN","SRO1L1",19,0)
 W !! F I=1:1:80 W "-"
"RTN","SRO1L1",20,0)
 S SRX=10 D SEL
"RTN","SRO1L1",21,0)
 K DA,DIK S DIK="^SRF(",DIK(1)=".232^AQ",DA=SRTN D EN1^DIK K DA,DIK
"RTN","SRO1L1",22,0)
 G:SRR=1 EDIT
"RTN","SRO1L1",23,0)
END D EXIT^SROES D:$G(SRLCK) UNLOCK^SROUTL(SRTN)
"RTN","SRO1L1",24,0)
 Q
"RTN","SRO1L1",25,0)
PROC N I,SRPROC,SRL S SRL=48 D CPTS^SROAUTL0
"RTN","SRO1L1",26,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?32,SRPROC(I) W:I'=1 !,?32,SRPROC(I)
"RTN","SRO1L1",27,0)
 Q
"RTN","SRO1L1",28,0)
SEL W !!,"Select number of item to edit: " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SRO1L1",29,0)
 Q:X=""  S:X="a" X="A" I '$D(SRAO(X)),(X'?.N1":".N),(X'="A") D HELP S SRR=1 Q
"RTN","SRO1L1",30,0)
 I X?1.2N1":"1.2N S Y=$P(X,":"),Z=$P(X,":",2) I Y<1!(Z>SRX)!(Y>Z) D HELP S SRR=1 Q
"RTN","SRO1L1",31,0)
 I X="A" S X="1:"_SRX
"RTN","SRO1L1",32,0)
 I X?1.2N1":"1.2N D RANGE S SRR=1 Q
"RTN","SRO1L1",33,0)
 I $D(SRAO(X)) S EMILY=X W !! D ONE S SRR=1
"RTN","SRO1L1",34,0)
 Q
"RTN","SRO1L1",35,0)
HELP W @IOF,!!!!,"Enter the number or range of numbers you want to edit. Examples of proper"
"RTN","SRO1L1",36,0)
 W !,"responses are listed below.",!!,"1. Enter 'A' to update all items."
"RTN","SRO1L1",37,0)
 W !!,"2. Enter a number (1-"_SRX_") to update an individual item. (For example,"
"RTN","SRO1L1",38,0)
 W !,"   enter '1' to update "_$P(SRAO(1),"^")_")"
"RTN","SRO1L1",39,0)
 W !!,"3. Enter a range of numbers (1-"_SRX_") separated by a ':' to enter a range"
"RTN","SRO1L1",40,0)
 W !,"   of items. (For example, enter '1:4' to update items 1, 2, 3 and 4.)",!
"RTN","SRO1L1",41,0)
PRESS W ! K DIR S DIR(0)="E" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1
"RTN","SRO1L1",42,0)
 Q
"RTN","SRO1L1",43,0)
RANGE ; range of numbers
"RTN","SRO1L1",44,0)
 S SHEMP=$P(X,":"),CURLEY=$P(X,":",2) F EMILY=SHEMP:1:CURLEY Q:SRSOUT  D ONE
"RTN","SRO1L1",45,0)
 Q
"RTN","SRO1L1",46,0)
ONE ; edit one item
"RTN","SRO1L1",47,0)
 I EMILY=8 D UPANES Q
"RTN","SRO1L1",48,0)
 I EMILY=9 D DISP^SROAUTL0 Q
"RTN","SRO1L1",49,0)
 I EMILY=10 D ^SROTHER Q
"RTN","SRO1L1",50,0)
 K DR,DIE S DA=SRTN,DR=$P(SRAO(EMILY),"^",2)_"T",DIE=130 D ^DIE K DR I $D(Y) S SRSOUT=1
"RTN","SRO1L1",51,0)
 Q
"RTN","SRO1L1",52,0)
UPANES K DR,DIE,DA S DA=SRTN,DR=.37,DR(2,130.06)=".01T;.05T;42T",DIE=130 D ^DIE K DR
"RTN","SRO1L1",53,0)
 Q
"RTN","SRO1L1",54,0)
TSTAT ; transmission status
"RTN","SRO1L1",55,0)
 N SR905 S SR905=$P($G(^SRF(SRTN,.4)),"^",2)
"RTN","SRO1L1",56,0)
 S SRHDR(.5)="Transmission Status: "_$S(SR905="T":"TRANSMITTED",SR905="R":"QUEUED TO TRANSMIT",1:"NOT QUEUED")
"RTN","SRO1L1",57,0)
 Q
"RTN","SROA30")
0^11^B24202198^B24129006
"RTN","SROA30",1,0)
SROA30 ;BIR/MAM - 30 DAY LETTERS AND MAIL MESSAGE ;01/26/06
"RTN","SROA30",2,0)
 ;;3.0; Surgery ;**7,18,31,38,95,153**;24 Jun 93;Build 11
"RTN","SROA30",3,0)
 S SRSOUT=0 W @IOF K DIR S DIR("A")="Do you want to edit the text of the letter",DIR("B")="NO",DIR(0)="Y" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) G END
"RTN","SROA30",4,0)
 I Y S X="Division: "_SRSITE("SITE")_"  ("_SRSITE("DIV")_")" W @IOF,!,?(80-$L(X)\2),X,! K DA,DIE,DR S DA=SRSITE,DR="31",DIE=133 D ^DIE K DA,DIE,DR
"RTN","SROA30",5,0)
ONE G:SRSOUT END W @IOF S DIR("?",1)="Enter <RET> to select a patient and print the letter for a specific risk",DIR("?")="assessment, or 'NO' to print letters for a date range."
"RTN","SROA30",6,0)
 S DIR("A")="Do you want to print the letter for a specific assessment",DIR("B")="YES",DIR(0)="Y" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 G END
"RTN","SROA30",7,0)
 I Y D ^SROASS S:'$D(SRTN) SRSOUT=1 G:SRSOUT END G IO
"RTN","SROA30",8,0)
 S SRAMAN=1
"RTN","SROA30",9,0)
 W !!,"This option will allow you to reprint the 30 day follow up letters for the date",!,"that they were originally printed.  When printed automatically, the letters",!,"print 25 days after the date of operation."
"RTN","SROA30",10,0)
SDATE W !!,"Print letters for BEGINNING date: TODAY// " R X:DTIME I '$T!(X["^") S SRSOUT=1 G END
"RTN","SROA30",11,0)
 I X["?" W !,"Enter the EARLIEST date for which you want letters printed." S X="?",%DT="E" D ^%DT G SDATE
"RTN","SROA30",12,0)
 S:X="" X="T" S %DT="E" D ^%DT G SDATE:Y<1 S X1=Y,X2=-25 D C^%DTC S SRSTART=X
"RTN","SROA30",13,0)
EDATE W !,"Print letters for ENDING date: TODAY// " R X:DTIME I '$T!(X["^") S SRSOUT=1 G END
"RTN","SROA30",14,0)
 I X["?" W !,"Enter the LATEST date for which you want letters printed." S X="?",%DT="E" D ^%DT G EDATE
"RTN","SROA30",15,0)
 S:X="" X="T" S %DT="E" D ^%DT G EDATE:Y<1 S X1=Y,X2=-25 D C^%DTC S SREND=X
"RTN","SROA30",16,0)
 I SRSTART>SREND W !!,"The ENDING date must be later than the BEGINNING date.  Please try again." G SDATE
"RTN","SROA30",17,0)
IO I $D(SRTN),$P($G(^SRF(SRTN,30)),"^") W !!,"The 30 Day Letter will not print because the case selected has been cancelled.",!!,"Press <RET> to continue " R X:DTIME G END
"RTN","SROA30",18,0)
 I $D(SRTN),'$P($G(^SRF(SRTN,.2)),"^",12) W !!,"The 30 Day Letter will not print because for the case selected,",!,"the field, TIME PATIENT OUT OF OR, has not been filled in.",!!,"Press <RET> to continue " R X:DTIME G END
"RTN","SROA30",19,0)
 I $D(SRTN),$P($G(^DPT(DFN,.35)),"^") W !!,"The 30 Day Letter will not print because the patient has a date of death.",!!,"Press <RET> to continue " R X:DTIME G END
"RTN","SROA30",20,0)
 W ! K %ZIS,IO("Q"),POP S %ZIS("A")="Print 30 Day Letters on which Device: ",%ZIS="Q" D ^%ZIS I POP S SRSOUT=1 G END
"RTN","SROA30",21,0)
 I $D(IO("Q")) K IO("Q") S ZTDESC="Risk Assessment 30 Day Letters",ZTSAVE("SR*")="",ZTRTN="BEG^SROA30" D ^%ZTLOAD S SRSOUT=1 G END
"RTN","SROA30",22,0)
BEG ; Entry point when manually queued
"RTN","SROA30",23,0)
 U IO I $D(SRTN) D ^SROALET G END
"RTN","SROA30",24,0)
 S SRSOUT=0,SRSDATE=SRSTART-.0001,SREND=SREND_".9999" F  S SRSDATE=$O(^SRF("AC",SRSDATE)) Q:'SRSDATE!(SRSDATE>SREND)!(SRSOUT)  D
"RTN","SROA30",25,0)
 .S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSDATE,SRTN)) Q:'SRTN  I $$DIV^SROUTL0(SRTN) D ^SROALET I '$D(SRAMAN),$D(VADM(1)) D MSG
"RTN","SROA30",26,0)
 G END
"RTN","SROA30",27,0)
EN ; Entry point when tasked daily
"RTN","SROA30",28,0)
 Q:$G(IO)=""  U IO S (SRSOUT,SRYN)=0
"RTN","SROA30",29,0)
 S X1=DT,X2=-25 D C^%DTC S SRSDATE=X-.0001,SREND=X_".9999" F  S SRSDATE=$O(^SRF("AC",SRSDATE)) Q:'SRSDATE!(SRSDATE>SREND)!(SRSOUT)  D SRTN
"RTN","SROA30",30,0)
 G END
"RTN","SROA30",31,0)
SRTN I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SROA30",32,0)
 S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSDATE,SRTN)) Q:'SRTN  D ^SROALET I '$D(SRAMAN),$D(VADM(1)) D MSG
"RTN","SROA30",33,0)
 Q
"RTN","SROA30",34,0)
MSG S XMSUB="RISK ASSESSMENT 30 DAY REMINDER FOR "_VADM(1),XMDUZ="SURGICAL CLINICAL NURSE REVIEWER"
"RTN","SROA30",35,0)
 S Y=$P(^SRF(SRTN,0),"^",9),SRADATE=$E(Y,4,5)_"/"_$E(Y,6,7)_"/"_$E(Y,2,3)
"RTN","SROA30",36,0)
 S XMY("G.RISK ASSESSMENT@"_^XMB("NETNAME"))=""
"RTN","SROA30",37,0)
 K SRAMSG S SRAMSG(1,0)=" ",SRAMSG(2,0)="Assesment Number: "_SRTN_"      Date of Operation: "_SRADATE,SRAMSG(3,0)="  ",SRAMSG(4,0)=SRNM,SRAMSG(5,0)=VAPA(1),SRCNT=6 I VAPA(2)'="" D ADD
"RTN","SROA30",38,0)
 S SRAMSG(SRCNT,0)=VAPA(4)_", "_STATE_" "_VAPA(6),SRCNT=SRCNT+1
"RTN","SROA30",39,0)
 F I=SRCNT:1:SRCNT+3 S SRAMSG(I,0)="   "
"RTN","SROA30",40,0)
 S SEX=$P(VADM(5),"^")
"RTN","SROA30",41,0)
 S SRAMSG(SRCNT+4,0)="It has been 25 days since "_SRNM_" had "_$S(SEX="M":"his",SEX="F":"her",1:"his")_" operation.  A follow-up ",SRAMSG(SRCNT+5,0)="letter has been printed."
"RTN","SROA30",42,0)
 S XMTEXT="SRAMSG(" N I D ^XMD
"RTN","SROA30",43,0)
 Q
"RTN","SROA30",44,0)
END S SRPRINT=0 I $E(IOST)="P" S SRPRINT=1
"RTN","SROA30",45,0)
 W:SRPRINT @IOF I $D(ZTQUEUED) Q:$G(ZTSTOP)  S ZTREQ="@" Q
"RTN","SROA30",46,0)
 D ^%ZISC W @IOF D ^SRSKILL K SRTN,VAIN,VAINDT
"RTN","SROA30",47,0)
 Q
"RTN","SROA30",48,0)
ADD ; Lines 2 and 3 of street address
"RTN","SROA30",49,0)
 S SRAMSG(6,0)=VAPA(2),SRCNT=7
"RTN","SROA30",50,0)
 I VAPA(3)'="" S SRAMSG(7,0)=VAPA(3),SRCNT=8
"RTN","SROA30",51,0)
 Q
"RTN","SROACAR")
0^42^B10623143^B10098864
"RTN","SROACAR",1,0)
SROACAR ;BIR/MAM - OPEATIVE DATA ;03/29/06
"RTN","SROACAR",2,0)
 ;;3.0; Surgery ;**38,71,93,95,100,125,142,153**;24 Jun 93;Build 11
"RTN","SROACAR",3,0)
 I '$D(SRTN) W !!,"A Surgery Risk Assessment must be selected prior to using this option.",!!,"Press <RET> to continue  " R X:DTIME G END
"RTN","SROACAR",4,0)
 S SRACLR=0,SRSOUT=0,SRSUPCPT=1 D ^SROAUTL
"RTN","SROACAR",5,0)
START D:SRACLR RET G:SRSOUT END S SRACLR=0 K SRA,SRAO D ^SROACR1
"RTN","SROACAR",6,0)
ASK W !,"Select Operative Information to Edit: " R X:DTIME I '$T!("^"[X) G END
"RTN","SROACAR",7,0)
 S:X="a" X="A" I '$D(SRAO(X)),(X'?.N1":".N),(X'="A") D HELP G:SRSOUT END G START
"RTN","SROACAR",8,0)
 I X="A" S X="1:22"
"RTN","SROACAR",9,0)
 I X?.N1":".N S Y=$E(X),Z=$P(X,":",2) I Y<1!(Z>22)!(Y>Z) D HELP G:SRSOUT END G START
"RTN","SROACAR",10,0)
 D HDR^SROAUTL
"RTN","SROACAR",11,0)
 I X?.N1":".N D RANGE G START
"RTN","SROACAR",12,0)
 I $D(SRAO(X)),+X=X S EMILY=X D  G START
"RTN","SROACAR",13,0)
 .I $$LOCK^SROUTL(SRTN) W ! D ONE,UNLOCK^SROUTL(SRTN)
"RTN","SROACAR",14,0)
 I $D(SRAO(X)) W ! S EMILY=X D  G START
"RTN","SROACAR",15,0)
 .I $$LOCK^SROUTL(SRTN) D ONE,UNLOCK^SROUTL(SRTN)
"RTN","SROACAR",16,0)
END I 'SRSOUT D ^SROACR2
"RTN","SROACAR",17,0)
 W @IOF D ^SRSKILL
"RTN","SROACAR",18,0)
 Q
"RTN","SROACAR",19,0)
HELP W @IOF,!!!!,"Enter the number or range of numbers you want to edit.  Examples of proper",!,"responses are listed below."
"RTN","SROACAR",20,0)
 W !!,"1. Enter 'A' to update all information.",!!,"2. Enter a number (1-22) to update the information in that field.  (For",!,"   example, enter '9' to update Valve Repair.)"
"RTN","SROACAR",21,0)
 W !!,"3. Enter a range of numbers (1-22) separated by a ':' to enter a range of",!,"   information.  (For example, enter '6:8' to enter Aortic Valve",!,"   Replacement, Mitral Valve Replacement, and Tricuspid Valve Replacement.)"
"RTN","SROACAR",22,0)
 D RET
"RTN","SROACAR",23,0)
 Q
"RTN","SROACAR",24,0)
RANGE ; range of numbers
"RTN","SROACAR",25,0)
 I $$LOCK^SROUTL(SRTN) D  D UNLOCK^SROUTL(SRTN)
"RTN","SROACAR",26,0)
 .W ! S SHEMP=$P(X,":"),CURLEY=$P(X,":",2) F EMILY=SHEMP:1:CURLEY Q:SRSOUT  D ONE
"RTN","SROACAR",27,0)
 Q
"RTN","SROACAR",28,0)
ONE ; edit one item
"RTN","SROACAR",29,0)
 ;I EMILY=16 D MIS^SROACR1 Q
"RTN","SROACAR",30,0)
 I EMILY=22 D OPS Q
"RTN","SROACAR",31,0)
 K DR,DIE S DA=SRTN,DR=$P(SRAO(EMILY),"^",2)_"T",DIE=130 D ^DIE K DR I $D(Y) S SRSOUT=1
"RTN","SROACAR",32,0)
 I 'SRSOUT,EMILY=12!(EMILY=13) D OK
"RTN","SROACAR",33,0)
 Q
"RTN","SROACAR",34,0)
OK N SRISCH,SRCPB S X=$G(^SRF(SRTN,206)),SRISCH=$P(X,"^",36),SRCPB=$P(X,"^",37)
"RTN","SROACAR",35,0)
 I SRISCH,SRCPB,SRISCH>SRCPB W !!,"  ***  NOTE: Ischemic Time is greater than CPB Time!!  Please check.  ***",! D RET W !
"RTN","SROACAR",36,0)
 Q
"RTN","SROACAR",37,0)
RET Q:SRSOUT  W ! K DIR S DIR(0)="E" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1
"RTN","SROACAR",38,0)
 Q
"RTN","SROACAR",39,0)
OPS ; enter other cardiac procedures, specify
"RTN","SROACAR",40,0)
 S DIE=130,DA=SRTN,DR="502T" D ^DIE K DR Q:$D(Y)
"RTN","SROACAR",41,0)
 I X'="Y" K ^SRF(SRTN,209.1) Q
"RTN","SROACAR",42,0)
 S DIE=130,DA=SRTN,DR="484T" D ^DIE K DR
"RTN","SROACAR",43,0)
 Q
"RTN","SROACAT")
0^43^B19181546^B8695359
"RTN","SROACAT",1,0)
SROACAT ;BIR/MAM - CARDIAC CATH INFO ;04/13/04  3:00 PM
"RTN","SROACAT",2,0)
 ;;3.0; Surgery ;**38,47,100,125,142,153**;24 Jun 93;Build 11
"RTN","SROACAT",3,0)
 I '$D(SRTN) W !!,"A Surgery Risk Assessment must be selected prior to using this option.",!!,"Press <RET> to continue  " R X:DTIME G END
"RTN","SROACAT",4,0)
 S SRACLR=0,SRSOUT=0,SRSUPCPT=1 D ^SROAUTL
"RTN","SROACAT",5,0)
START D:SRACLR RET G:SRSOUT END S SRACLR=0 D ^SROACTH
"RTN","SROACAT",6,0)
ASK W !!,"Select Cardiac Catheterization and Angiographic Information to Edit: " R X:DTIME I '$T!("^"[X) G END
"RTN","SROACAT",7,0)
 S:X="a" X="A" I '$D(SRAO(X)),(X'?.N1":".N),(X'="A") D HELP G:SRSOUT END G START
"RTN","SROACAT",8,0)
 I X="A" S X="1:8"
"RTN","SROACAT",9,0)
 I X?.N1":".N S Y=$E(X),Z=$P(X,":",2) I Y<1!(Z>8)!(Y>Z) D HELP G:SRSOUT END G START
"RTN","SROACAT",10,0)
 D HDR^SROAUTL
"RTN","SROACAT",11,0)
 I X?.N1":".N D RANGE G START
"RTN","SROACAT",12,0)
 I $D(SRAO(X)) S EMILY=X D  G START
"RTN","SROACAT",13,0)
 .I $$LOCK^SROUTL(SRTN) W !! D ONE,UNLOCK^SROUTL(SRTN)
"RTN","SROACAT",14,0)
END I 'SRSOUT D ^SROACTH1
"RTN","SROACAT",15,0)
 I '$D(SREQST) W @IOF D ^SRSKILL
"RTN","SROACAT",16,0)
 Q
"RTN","SROACAT",17,0)
HELP W @IOF,!!!!,"Enter the number or range of numbers you want to edit.  Examples of proper",!,"responses are listed below."
"RTN","SROACAT",18,0)
 W !!,"1. Enter 'A' to update all information.",!!,"2. Enter a number (1-8) to update the information in that field.  (For",!,"   example, enter '3' to update Aortic Systolic Pressure.)"
"RTN","SROACAT",19,0)
 W !!,"3. Enter a range of numbers (1-8) separated by a ':' to enter a range of",!,"   information.  (For example, enter '1:3' to update Procedure, LVEDP",!,"   and Aortic Systolic Pressure.)"
"RTN","SROACAT",20,0)
 W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1
"RTN","SROACAT",21,0)
 Q
"RTN","SROACAT",22,0)
RANGE ; range of numbers
"RTN","SROACAT",23,0)
 I $$LOCK^SROUTL(SRTN) D  D UNLOCK^SROUTL(SRTN)
"RTN","SROACAT",24,0)
 .W !! S SHEMP=$P(X,":"),CURLEY=$P(X,":",2) F EMILY=SHEMP:1:CURLEY Q:SRSOUT  D ONE
"RTN","SROACAT",25,0)
 Q
"RTN","SROACAT",26,0)
ONE ; edit one item
"RTN","SROACAT",27,0)
 N SRB S:EMILY=1 SRB=$P($G(^SRF(SRTN,209)),"^",4)
"RTN","SROACAT",28,0)
 K DR,DIE S DA=SRTN,DR=$P(SRAO(EMILY),"^",2)_"T",DIE=130 D ^DIE K DR I $D(Y)!$D(DTOUT) S SRSOUT=1 Q
"RTN","SROACAT",29,0)
 I EMILY=1 I SRB="NS"&($P($G(^SRF(SRTN,209)),"^",4)'="NS") D KAA
"RTN","SROACAT",30,0)
 I EMILY=1 I ($P($G(^SRF(SRTN,209)),"^",4)="NS") D ALL
"RTN","SROACAT",31,0)
 Q
"RTN","SROACAT",32,0)
RET Q:SRSOUT  W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROACAT",33,0)
 Q
"RTN","SROACAT",34,0)
ALL ; Entering NS for the procedure field should make all other fields in this Cath section default to NS also 
"RTN","SROACAT",35,0)
 K DIR S DIR("A")="Do you want to automatically enter 'NS' for NO STUDY for all other fields within  this option ",DIR("B")="YES"
"RTN","SROACAT",36,0)
 S DIR(0)="Y",DIR("?",1)="Enter ""YES"" to allow the software to automatically enter 'NS' on all fields within  this option.",DIR("?")="Enter ""NO"" to only enter 'NS' in the Procedure Type field."
"RTN","SROACAT",37,0)
 D ^DIR K DIR I $D(DTOUT)!$D(DUOUT)!('Y) Q
"RTN","SROACAT",38,0)
 K DIE,DR S DA=SRTN,DIE=130,DR="357////"_"NS"_";358////"_"NS"_";359////"_"NS"_";360////"_"NS"_";363////"_"NS"_";415////"_"NS"_";477////"_"NS"
"RTN","SROACAT",39,0)
 S DR=DR_";361////"_"NS"_";362.1////"_"NS"_";362.2////"_"NS"_";362.3////"_"NS"_";478////"_"NS"_";479////"_"NS"_";480////"_"NS"
"RTN","SROACAT",40,0)
 D ^DIE K DR
"RTN","SROACAT",41,0)
 Q
"RTN","SROACAT",42,0)
KAA ; if the value of the procedure type field is changed from NS to somthing else then prompt the user to delete the rest of the fields 
"RTN","SROACAT",43,0)
 N SRI K DIR W !,"You have changed the answer from ""NS""."
"RTN","SROACAT",44,0)
 S DIR("A")="Do you want to clear 'NS' from all other fields within this option ",DIR("B")="NO"
"RTN","SROACAT",45,0)
 S DIR(0)="Y",DIR("?",1)="Enter ""YES"" to allow the software to automatically clear 'NS' from all fields within this option.",DIR("?")="Enter ""NO"" to only delete 'NS' in the Procedure Type field."
"RTN","SROACAT",46,0)
 D ^DIR K DIR I $D(DTOUT)!$D(DUOUT)!('Y) Q
"RTN","SROACAT",47,0)
 K DIE,DR S DR="",DA=SRTN F SRI=357,358,359,360,363,415,477,361,362.1,362.2,362.3,478,479,480 I $$GET1^DIQ(130,SRTN,SRI,"I")="NS" S DR=DR_";"_SRI_"///@"
"RTN","SROACAT",48,0)
 S DR=$P(DR,";",2,20) I $L(DR)=0 K DR Q
"RTN","SROACAT",49,0)
 S DIE=130 D ^DIE K DR
"RTN","SROACAT",50,0)
 Q
"RTN","SROACL1")
0^44^B26895969^B19221450
"RTN","SROACL1",1,0)
SROACL1 ;BIR/MAM - CARDIAC PREOP CLINICAL DATA ;06/13/06
"RTN","SROACL1",2,0)
 ;;3.0; Surgery ;**38,71,95,125,153**;24 Jun 93;Build 11
"RTN","SROACL1",3,0)
 ;
"RTN","SROACL1",4,0)
 ; Reference to EN1^GMRVUT0 supported by DBIA #1446
"RTN","SROACL1",5,0)
 ;
"RTN","SROACL1",6,0)
 F I=0,200,202,205,206,206.1,208,209,200.1 S SRA(I)=$G(^SRF(SRTN,I))
"RTN","SROACL1",7,0)
HT N SRSD,SRED S SRED=$P(SRA(0),"^",9)
"RTN","SROACL1",8,0)
 I $P(SRA(206),"^")="" S SRSD=$$FMADD^XLFDT(SRED,-365),NYUK=$$HW(SRSD,SRED,"HT") D
"RTN","SROACL1",9,0)
 .I NYUK'="" S NYUK=NYUK+.5\1,$P(^SRF(SRTN,206),"^")=NYUK,SRA(206)=$G(^SRF(SRTN,206))
"RTN","SROACL1",10,0)
 S NYUK=$P(SRA(206),"^") S:NYUK'="" NYUK=$S(NYUK["C"!(NYUK["c"):+NYUK_" cm",+NYUK=NYUK:+NYUK_" in",NYUK="NS":" NS",1:NYUK) S SRAO(1)=NYUK_"^236"
"RTN","SROACL1",11,0)
WT I $P(SRA(206),"^",2)="" S SRSD=$$FMADD^XLFDT(SRED,-30),NYUK=$$HW(SRSD,SRED,"WT") D
"RTN","SROACL1",12,0)
 .I NYUK'="" S NYUK=NYUK+.5\1,$P(^SRF(SRTN,206),"^",2)=NYUK,SRA(206)=$G(^SRF(SRTN,206))
"RTN","SROACL1",13,0)
 S NYUK=$P(SRA(206),"^",2) S:NYUK'="" NYUK=$S(NYUK["K"!(NYUK["k"):+NYUK_" kg",+NYUK=NYUK:+NYUK_" lb",NYUK="NS":" NS",1:NYUK) S SRAO(2)=NYUK_"^237"
"RTN","SROACL1",14,0)
 K SRA(0) S NYUK=$P(SRA(209),"^",3),SRAO(3)=$S(NYUK="N":"   NO",NYUK="D":"  DIET",NYUK="O":"  ORAL",NYUK="I":" INSULIN",1:"")_"^475",NYUK=$P(SRA(200),"^",11) D YN S SRAO(4)=SHEMP_"^203"
"RTN","SROACL1",15,0)
 S SRAO(5)=$P(SRA(206),"^",5)_"^347",NYUK=$P(SRA(206),"^",6) D YN S SRAO(6)=SHEMP_"^209",NYUK=$P(SRA(206),"^",7) D YN S SRAO(7)=SHEMP_"^348"
"RTN","SROACL1",16,0)
 S Y=$P(SRA(200.1),"^",5),C=$P(^DD(130,510,0),"^",2) D Y^DIQ S SRAO(8)=$S(Y["-":$E($P(Y,"-",2),1,19),1:$E(Y,1,19))_"^510"
"RTN","SROACL1",17,0)
 S NYUK=$P(SRA(206),"^",10) D YN S SRAO(9)=SHEMP_"^349"
"RTN","SROACL1",18,0)
 S NYUK=$P(SRA(206),"^",11) D YN S SRAO(10)=SHEMP_"^350",NYUK=$P(SRA(200),"^",8),SRAO(11)=$S(NYUK=1:"INDEPENDENT",NYUK=2:"PARTIAL DEPENDENT",NYUK=3:"TOTALLY DEPENDENT",NYUK="NS":"NO STUDY",1:"")_"^240"
"RTN","SROACL1",19,0)
 S NYUK=$P(SRA(206),"^",13),SRAO(12)=$S(NYUK=0:"NONE    ",NYUK=1:"NONE RECENT",NYUK=2:"12-72 HRS",NYUK=3:"<12 hrs  ",NYUK=12:"12 - 72 hrs",NYUK=72:">72 hrs - 7 days",NYUK=7:">7 days  ",NYUK="NS":"NO STUDY",1:"")_"^351"
"RTN","SROACL1",20,0)
 S NYUK=$P(SRA(206),"^",14),SRAO(13)=$S(NYUK=0:"NONE",NYUK=1:"< OR = 7 DAYS",NYUK=2:"> 7 DAYS",1:"")_"^205"
"RTN","SROACL1",21,0)
 S NYUK=$P(SRA(206),"^",15) S SRAO(14)=$S(NYUK=0:"NONE",NYUK=">":">3",NYUK="Y":"YES",NYUK="N":"NO",1:NYUK)_"^352"
"RTN","SROACL1",22,0)
 S SRAO(15)=$P(SRA(206),"^",42)_"^485"
"RTN","SROACL1",23,0)
 S NYUK=$P(SRA(206),"^",16) D YN S SRAO(16)=SHEMP_"^265",NYUK=$P(SRA(206),"^",17) D YN S SRAO(17)=SHEMP_"^264"
"RTN","SROACL1",24,0)
 S SRAO(18)=$P(SRA(206),"^",18)_"^267",SRAO(19)=$P(SRA(206),"^",19)_"^207",NYUK=$P(SRA(206),"^",20) D YN S SRAO(20)=SHEMP_"^353",NYUK=$P(SRA(206),"^",21) D YN S SRAO(21)=SHEMP_"^354"
"RTN","SROACL1",25,0)
 S NYUK=$P(SRA(206),"^",22) D YN S SRAO(22)=SHEMP_"^355"
"RTN","SROACL1",26,0)
 S NYUK=$P(SRA(209),"^",2),SRAO(23)=$S(NYUK="N":"NONE",NYUK="I":"IABP",NYUK="V":"VAD",NYUK="O":"OTHER",1:"")_"^474"
"RTN","SROACL1",27,0)
 S NYUK=$P(SRA(206),"^",38) D YN S SRAO(24)=SHEMP_"^463"
"RTN","SROACL1",28,0)
DISP ; display fields
"RTN","SROACL1",29,0)
 S SRPAGE="PAGE: 1" D HDR^SROAUTL
"RTN","SROACL1",30,0)
 W !," 1. Height:",?29,$P(SRAO(1),"^"),?41,"13. Prior MI: ",$J($P(SRAO(13),"^"),24)
"RTN","SROACL1",31,0)
 W !," 2. Weight:",?29,$P(SRAO(2),"^"),?41,"14. Number prior heart surgeries: ",?70,$P(SRAO(14),"^")
"RTN","SROACL1",32,0)
 W !," 3. Diabetes:",?27,$P(SRAO(3),"^"),?41,"15. Prior heart surgeries:" D H485
"RTN","SROACL1",33,0)
 W !," 4. COPD:",?30,$P(SRAO(4),"^"),?41,"16. Peripheral Vascular Disease:",?75,$P(SRAO(16),"^")
"RTN","SROACL1",34,0)
 W !," 5. FEV1:",?($S($P(SRAO(5),"^")="NS":30,1:27)),$P(SRAO(5),"^")_$S($P(SRAO(5),"^")="":"",$P(SRAO(5),"^")="NS":"",1:" liters"),?41,"17. Cerebral Vascular Disease:",?75,$P(SRAO(17),"^")
"RTN","SROACL1",35,0)
 W !," 6. Cardiomegaly (X-ray):",?30,$P(SRAO(6),"^"),?41,"18. Angina (use CCS Class):",?75,$P(SRAO(18),"^")
"RTN","SROACL1",36,0)
 W !," 7. Pulmonary Rales:",?30,$P(SRAO(7),"^"),?41,"19. CHF (use NYHA Class):",?75,$P(SRAO(19),"^")
"RTN","SROACL1",37,0)
 W !," 8. Current Smoker: ",$J($P(SRAO(8),"^"),19),?41,"20. Current Diuretic Use:",?75,$P(SRAO(20),"^")
"RTN","SROACL1",38,0)
 W !," 9. Active Endocarditis:",?30,$P(SRAO(9),"^"),?41,"21. Current Digoxin Use:",?75,$P(SRAO(21),"^")
"RTN","SROACL1",39,0)
 W !,"10. Resting ST Depression:",?30,$P(SRAO(10),"^"),?41,"22. IV NTG within 48 Hours:",?75,$P(SRAO(22),"^")
"RTN","SROACL1",40,0)
 W !,"11. Functional Status: ",$J($P(SRAO(11),"^"),17),?41,"23. Preop circulatory Device:",?75,$P(SRAO(23),"^")
"RTN","SROACL1",41,0)
 W !,"12. PCI: ",$J($P(SRAO(12),"^"),29),?41,"24. Hypertension (Y/N):",?75,$P(SRAO(24),"^")
"RTN","SROACL1",42,0)
 W !! F MOE=1:1:80 W "-"
"RTN","SROACL1",43,0)
 Q
"RTN","SROACL1",44,0)
YN ; store answer
"RTN","SROACL1",45,0)
 S SHEMP=$S(NYUK="NS":"NS",NYUK="N":"NO",NYUK="Y":"YES",1:"")
"RTN","SROACL1",46,0)
 Q
"RTN","SROACL1",47,0)
H485 S SHEMP="",X=$P(SRAO(15),"^") F I=1:1:$L(X,",") D
"RTN","SROACL1",48,0)
 .S C=$P(X,",",I) S:I>1 SHEMP=SHEMP_", " S SHEMP=SHEMP_$S(C=0:"NONE",C=1:"CABG-ONLY",C=2:"VALVE-ONLY",C=3:"CABG/VALVE",C=4:"OTHER",C=5:"CABG/OTHER",1:"")
"RTN","SROACL1",49,0)
 ;
"RTN","SROACL1",50,0)
 S X=SHEMP I $L(X)<12 W ?68,$J(X,11) Q
"RTN","SROACL1",51,0)
 W ?68,$J($P(X,",")_",",11) I $L($P(X,", ",2,9))<36 W !,?44,$P(X,", ",2,9) Q
"RTN","SROACL1",52,0)
 W !,?44,$P(X,", ",2,4)_",",!,?44,$P(X,", ",5,9)
"RTN","SROACL1",53,0)
 Q
"RTN","SROACL1",54,0)
HW(SRSD,SRED,SVTYPE) ; get weight & height from Vitals
"RTN","SROACL1",55,0)
 N GMRVSTR,SRTYPE,SRBCNT,SRBRDT,SRBIEN,SRBDATA,RESULTS
"RTN","SROACL1",56,0)
 K ^UTILITY($J,"GMRVD"),RESULTS S GMRVSTR=SVTYPE,GMRVSTR(0)=SRSD_"^"_SRED_"^^"
"RTN","SROACL1",57,0)
 D EN1^GMRVUT0 Q:'$D(^UTILITY($J,"GMRVD")) ""
"RTN","SROACL1",58,0)
 S SRTYPE="",SRBCNT=1 F  S SRTYPE=$O(^UTILITY($J,"GMRVD",SRTYPE)) Q:SRTYPE=""  D
"RTN","SROACL1",59,0)
 .S SRBRDT=0 F  S SRBRDT=$O(^UTILITY($J,"GMRVD",SRTYPE,SRBRDT)) Q:'SRBRDT  D
"RTN","SROACL1",60,0)
 ..S SRBIEN=0 F  S SRBIEN=$O(^UTILITY($J,"GMRVD",SRTYPE,SRBRDT,SRBIEN)) Q:'SRBIEN  D
"RTN","SROACL1",61,0)
 ...S SRBDATA=$G(^UTILITY($J,"GMRVD",SRTYPE,SRBRDT,SRBIEN))
"RTN","SROACL1",62,0)
 ...S RESULTS(SRTYPE,SRBRDT)=$P(SRBDATA,"^",1,2)_"^"_$P(SRBDATA,"^",8),SRBCNT=SRBCNT+1
"RTN","SROACL1",63,0)
 I $D(RESULTS(SVTYPE)) S SRI=$O(RESULTS(SVTYPE,0)) Q $P(RESULTS(SVTYPE,SRI),"^",3)
"RTN","SROACL1",64,0)
 Q ""
"RTN","SROACOP")
0^99^B19657223^B19945734
"RTN","SROACOP",1,0)
SROACOP ;BIR/MAM - CARDIAC OPERATIVE RISK SUMMARY ;03/24/06
"RTN","SROACOP",2,0)
 ;;3.0; Surgery ;**38,47,71,88,95,107,100,125,142,153**;24 Jun 93;Build 11
"RTN","SROACOP",3,0)
 I '$D(SRTN) W !!,"A Surgery Risk Assessment must be selected prior to using this option.",!!,"Press <RET> to continue  " R X:DTIME G END
"RTN","SROACOP",4,0)
 S SRACLR=0,SRSOUT=0,SRSUPCPT=1 D ^SROAUTL
"RTN","SROACOP",5,0)
START D:SRACLR RET G:SRSOUT END S SRACLR=0 K SRA,SRAO
"RTN","SROACOP",6,0)
 F I=206,206.1,208 S SRA(I)=$G(^SRF(SRTN,I))
"RTN","SROACOP",7,0)
 I $P(SRA(206),"^",41)="" K DA,DIE,DR S DA=SRTN,DIE=130,DR="472////N" D ^DIE K DA,DIE,DR S SRA(206)=$G(^SRF(SRTN,206))
"RTN","SROACOP",8,0)
 S Y=$P($G(^SRF(SRTN,1.1)),"^",3),C=$P(^DD(130,1.13,0),"^",2) D:Y'="" Y^DIQ S SRAO(2)=Y_"^1.13"
"RTN","SROACOP",9,0)
 S SRAO(1)=$P(SRA(206),"^",31)_"^364",SRAO(3)=$P(SRA(208),"^",12)_"^414"
"RTN","SROACOP",10,0)
 S Y=$P(SRA(206),"^",32) D DT S SRAO("1A")=X_"^364.1"
"RTN","SROACOP",11,0)
 S Y=$P(SRAO(3),"^") I Y'="" S C=$P(^DD(130,414,0),"^",2) D Y^DIQ S $P(SRAO(3),"^")=Y
"RTN","SROACOP",12,0)
 S Y=$P(SRA(208),"^",13) D DT S SRAO("3A")=X_"^414.1"
"RTN","SROACOP",13,0)
 S Y=$P($G(^SRF(SRTN,.2)),"^",2) D DT S SRAO(4)=X_"^.22"
"RTN","SROACOP",14,0)
 S Y=$P($G(^SRF(SRTN,.2)),"^",3) D DT S SRAO(5)=X_"^.23"
"RTN","SROACOP",15,0)
 S SRAO(6)=SRA(206.1)_"^430"
"RTN","SROACOP",16,0)
 S SRPAGE="PAGE: 1" D HDR^SROAUTL S SRAO(7)=""
"RTN","SROACOP",17,0)
 S X=$P(SRAO(1),"^"),X=$S(X?1.3N:X_"%",1:X) W !," 1. Physician's Preoperative Estimate of Operative Mortality: "_X
"RTN","SROACOP",18,0)
 S X=$P(SRAO("1A"),"^") I X'="" W !,?3," A. Date/Time Collected:    "_X
"RTN","SROACOP",19,0)
 W !," 2. ASA Classification:",?31,$P(SRAO(2),"^"),!," 3. Surgical Priority:",?31,$P(SRAO(3),"^")
"RTN","SROACOP",20,0)
 S X=$P(SRAO("3A"),"^") I X'="" W !,?3," A. Date/Time Collected:    "_X
"RTN","SROACOP",21,0)
 W !," 4. Date/Time Operation Began:",?31,$P(SRAO(4),"^"),!," 5. Date/Time Operation Ended:",?31,$P(SRAO(5),"^")
"RTN","SROACOP",22,0)
 W !," 6. Preoperative Risk Factors: "
"RTN","SROACOP",23,0)
 I $P(SRAO(6),"^")'="" S SRQ=0 S X=$P(SRAO(6),"^") W:$L(X)<49 X,! I $L(X)>48 S Z=$L(X) D
"RTN","SROACOP",24,0)
 .I X'[" " W ?25,X Q
"RTN","SROACOP",25,0)
 .S I=0,LINE=1 F  S SRL=$S(LINE=1:48,1:80) D  Q:SRQ
"RTN","SROACOP",26,0)
 ..I $E(X,1,SRL)'[" " W X,! S SRQ=1 Q
"RTN","SROACOP",27,0)
 ..S J=SRL-I,Y=$E(X,J),I=I+1 I Y=" " W $E(X,1,J-1),! S X=$E(X,J+1,Z),Z=$L(X),I=0,LINE=LINE+1 I Z<SRL W X S SRQ=1 Q
"RTN","SROACOP",28,0)
 N SRPROC,SRL S SRL=49 D CPTS^SROAUTL0 W !," 7. CPT Codes (view only):"
"RTN","SROACOP",29,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?31,SRPROC(I) W:I'=1 !,?31,SRPROC(I)
"RTN","SROACOP",30,0)
 W !! F MOE=1:1:80 W "-"
"RTN","SROACOP",31,0)
ASK W !,"Select Operative Risk Summary Information to Edit: " R X:DTIME I '$T!("^"[X) G END
"RTN","SROACOP",32,0)
 S:X="a" X="A" I '$D(SRAO(X)),(X'?.N1":".N),(X'="A") D HELP G:SRSOUT END G START
"RTN","SROACOP",33,0)
 I X="A" S X="1:7"
"RTN","SROACOP",34,0)
 I X?.N1":".N S Y=$E(X),Z=$P(X,":",2) I Y<1!(Z>7)!(Y>Z) D HELP G:SRSOUT END G START
"RTN","SROACOP",35,0)
 I X'=7 D HDR^SROAUTL
"RTN","SROACOP",36,0)
 I X?.N1":".N D RANGE S SROERR=SRTN D ^SROERR0 G START
"RTN","SROACOP",37,0)
 I $D(SRAO(X))!(X=6) S EMILY=X D  S SROERR=SRTN D ^SROERR0 G START
"RTN","SROACOP",38,0)
 .I $$LOCK^SROUTL(SRTN) W !! D ONE,UNLOCK^SROUTL(SRTN)
"RTN","SROACOP",39,0)
END I '$D(SREQST) W @IOF D ^SRSKILL
"RTN","SROACOP",40,0)
 Q
"RTN","SROACOP",41,0)
DT I 'Y S X="" Q
"RTN","SROACOP",42,0)
 X ^DD("DD") S X=$P(Y,"@")_" "_$P(Y,"@",2)
"RTN","SROACOP",43,0)
 Q
"RTN","SROACOP",44,0)
HELP W @IOF,!!!!,"Enter the number or range of numbers you want to edit.  Examples of proper",!,"responses are listed below."
"RTN","SROACOP",45,0)
 W !!,"1. Enter 'A' to update all information.",!!,"2. Enter the corresponding number to update the information in a particular",!,"   field.  (For example, enter '3' to update Surgical Priority)"
"RTN","SROACOP",46,0)
 W !!,"3. Enter two numbers separated by a ':' to enter a range of information.",!,"   (For example, enter '1:2' to update Physician's Preoperative Estimate of",!,"   Mortality and ASA Classification.)"
"RTN","SROACOP",47,0)
 W !!,"Press ENTER to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1
"RTN","SROACOP",48,0)
 Q
"RTN","SROACOP",49,0)
RANGE ; range of numbers
"RTN","SROACOP",50,0)
 I $$LOCK^SROUTL(SRTN) D  D UNLOCK^SROUTL(SRTN)
"RTN","SROACOP",51,0)
 .W !! S SHEMP=$P(X,":"),CURLEY=$P(X,":",2) F EMILY=SHEMP:1:CURLEY Q:SRSOUT  D ONE
"RTN","SROACOP",52,0)
 Q
"RTN","SROACOP",53,0)
ONE ; edit one item
"RTN","SROACOP",54,0)
 I EMILY=7 D DISP^SROAUTL0 Q
"RTN","SROACOP",55,0)
 K DR,DIE S DA=SRTN,DIE=130,DR=$P(SRAO(EMILY),"^",2)
"RTN","SROACOP",56,0)
 S DR=DR_"T",DIE=130 S DR=DR_$S(EMILY=1:";364.1T",EMILY=3:";414.1T",1:"") D ^DIE K DR I $D(Y) S SRSOUT=1
"RTN","SROACOP",57,0)
 Q
"RTN","SROACOP",58,0)
RET Q:SRSOUT  W !!,"Press ENTER to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROACOP",59,0)
 Q
"RTN","SROACOP",60,0)
NOW ; update date/time of estimate of mortality
"RTN","SROACOP",61,0)
 N X D NOW^%DTC S $P(^SRF(DA,206),"^",32)=$E(%,1,12)
"RTN","SROACOP",62,0)
 Q
"RTN","SROACOP",63,0)
KNOW ; delete date/time of estimate of mortality
"RTN","SROACOP",64,0)
 S $P(^SRF(DA,206),"^",32)=""
"RTN","SROACOP",65,0)
 Q
"RTN","SROACOP",66,0)
YN ; store answer
"RTN","SROACOP",67,0)
 S SHEMP=$S(NYUK="NS":"Unknown",NYUK="N":"NO",NYUK="Y":"YES",1:"")
"RTN","SROACOP",68,0)
 Q
"RTN","SROACPM1")
0^45^B14126949^B13730377
"RTN","SROACPM1",1,0)
SROACPM1 ;BIR/SJA - LAB INFO ;05/04/06
"RTN","SROACPM1",2,0)
 ;;3.0; Surgery ;**125,153**;24 Jun 93;Build 11
"RTN","SROACPM1",3,0)
 I '$D(SRTN) W !!,"A Surgery Risk Assessment must be selected prior to using this option.",!!,"Press <RET> to continue  " R X:DTIME G END
"RTN","SROACPM1",4,0)
 S SRSOUT=0 D ^SROAUTL
"RTN","SROACPM1",5,0)
START G:SRSOUT END K SRA,SRAO D ^SROACPM2,DISP
"RTN","SROACPM1",6,0)
ASK W !!,"Select Laboratory Information to Edit: " R X:DTIME I '$T!(X["^") S SRSOUT=1 D CONCC G END
"RTN","SROACPM1",7,0)
 I X="" D CONCC G END
"RTN","SROACPM1",8,0)
 S:X="a" X="A" I '$D(SRAO(X)),(X'?.N1":".N),(X'="A") D HELP G:SRSOUT END G START
"RTN","SROACPM1",9,0)
 I X="A" S X="1:10"
"RTN","SROACPM1",10,0)
 I X?.N1":".N S Y=$E(X),Z=$P(X,":",2) I Y<1!(Z>10)!(Y>Z) D HELP G:SRSOUT END G START
"RTN","SROACPM1",11,0)
 S SRPAGE="" D HDR^SROAUTL
"RTN","SROACPM1",12,0)
 I X?.N1":".N D RANGE G START
"RTN","SROACPM1",13,0)
 I $D(SRAO(X)) S EMILY=X D ONE G START
"RTN","SROACPM1",14,0)
END W @IOF
"RTN","SROACPM1",15,0)
 Q
"RTN","SROACPM1",16,0)
HELP W @IOF,!!!!,"Enter the number or range of numbers you want to edit.  Examples of proper",!,"responses are listed below."
"RTN","SROACPM1",17,0)
 W !!,"1. Enter 'A' to update all information.",!!,"2. Enter a number (1-10) to update the information in that field.  (For",!,"   example, enter '7' to update Serum Creatinine)"
"RTN","SROACPM1",18,0)
 W !!,"3. Enter a range of numbers (1-10) separated by a ':' to enter a range of",!,"   information.  (For example, enter '5:7' to update Serum Potassium,",!,"   Serum Bilirubin, and Serum Creatinine)"
"RTN","SROACPM1",19,0)
 W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1
"RTN","SROACPM1",20,0)
 Q
"RTN","SROACPM1",21,0)
RANGE ; range of numbers
"RTN","SROACPM1",22,0)
 S SRNOMORE=0,SHEMP=$P(X,":"),CURLEY=$P(X,":",2) F EMILY=SHEMP:1:CURLEY Q:SRNOMORE  D ONE
"RTN","SROACPM1",23,0)
 Q
"RTN","SROACPM1",24,0)
ONE ; edit one item
"RTN","SROACPM1",25,0)
 K DR,DIE S DA=SRTN,DR=$P(SRAO(EMILY),"^",3)_"T;"_$P(SRAO(EMILY),"^",4)_"T",DIE=130 D ^DIE S:$D(Y) SRNOMORE=1 K DR
"RTN","SROACPM1",26,0)
 Q
"RTN","SROACPM1",27,0)
RET Q:SRSOUT  W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROACPM1",28,0)
 Q
"RTN","SROACPM1",29,0)
DISP S SRPAGE="PAGE: 1",SRHDR(.5)="PREOPERATIVE LABORATORY RESULTS" D HDR^SROAUTL
"RTN","SROACPM1",30,0)
 W !," 1. HDL:",?25,$J($P(SRAO(1),"^"),6),?35,$P(SRAO(1),"^",2)
"RTN","SROACPM1",31,0)
 W !," 2. LDL:",?25,$J($P(SRAO(2),"^"),6),?35,$P(SRAO(2),"^",2)
"RTN","SROACPM1",32,0)
 W !," 3. Total Cholesterol:",?25,$J($P(SRAO(3),"^"),6),?35,$P(SRAO(3),"^",2)
"RTN","SROACPM1",33,0)
 W !," 4. Serum Triglyceride:",?25,$J($P(SRAO(4),"^"),6),?35,$P(SRAO(4),"^",2)
"RTN","SROACPM1",34,0)
 W !," 5. Serum Potassium:",?25,$J($P(SRAO(5),"^"),6),?35,$P(SRAO(5),"^",2)
"RTN","SROACPM1",35,0)
 W !," 6. Serum Bilirubin:",?25,$J($P(SRAO(6),"^"),6),?35,$P(SRAO(6),"^",2)
"RTN","SROACPM1",36,0)
 W !," 7. Serum Creatinine:",?25,$J($P(SRAO(7),"^"),6),?35,$P(SRAO(7),"^",2)
"RTN","SROACPM1",37,0)
 W !," 8. Serum Albumin:",?25,$J($P(SRAO(8),"^"),6),?35,$P(SRAO(8),"^",2)
"RTN","SROACPM1",38,0)
 W !," 9. Hemoglobin:",?25,$J($P(SRAO(9),"^"),6),?35,$P(SRAO(9),"^",2)
"RTN","SROACPM1",39,0)
 W !,"10. Hemoglobin A1c:",?25,$J($P(SRAO(10),"^"),6),?35,$P(SRAO(10),"^",2)
"RTN","SROACPM1",40,0)
 W !! F MOE=1:1:80 W "-"
"RTN","SROACPM1",41,0)
 Q
"RTN","SROACPM1",42,0)
CONCC ; check for concurrent case and update if one exists
"RTN","SROACPM1",43,0)
 S SRCON=$P($G(^SRF(SRTN,"CON")),"^") Q:'SRCON
"RTN","SROACPM1",44,0)
 S SRI="" F  S SRI=$O(SRAO(SRI)) Q:SRI=""  S S1=$P(SRAO(SRI),"^",3),S2=$P(SRAO(SRI),"^",4) K DA,DIC,DIQ,DR,SRY D
"RTN","SROACPM1",45,0)
 .S DA=SRTN,DR=S1_";"_S2,DIC="^SRF(",DIQ="SRY",DIQ(0)="I" D EN^DIQ1 S P1=SRY(130,SRTN,S1,"I") S:P1="" P1="@" S P2=SRY(130,SRTN,S2,"I") S:P2="" P2="@"
"RTN","SROACPM1",46,0)
 .K DA,DIE,DR S DA=SRCON,DIE=130,DR=S1_"////"_P1_";"_S2_"////"_P2 D ^DIE K DR
"RTN","SROACPM1",47,0)
 Q
"RTN","SROACPM2")
0^46^B6018806^B5317991
"RTN","SROACPM2",1,0)
SROACPM2 ;BIR/MAM - LAB INFO ;03/29/04
"RTN","SROACPM2",2,0)
 ;;3.0; Surgery ;**125,153**;24 Jun 93;Build 11
"RTN","SROACPM2",3,0)
 F SHEMP=201,202,202.1 S SRA(SHEMP)=$G(^SRF(SRTN,SHEMP))
"RTN","SROACPM2",4,0)
 S SHEMP=$P(SRA(201),"^",21),SRAO(1)=SHEMP_"^^457^457.1" S X=$P(SRA(202),"^",21) I X="NS" S $P(SRAO(1),"^",2)="NS"
"RTN","SROACPM2",5,0)
 I X D DATE S SHEMP="("_Y_")",$P(SRAO(1),"^",2)=SHEMP
"RTN","SROACPM2",6,0)
 S SHEMP=$P(SRA(201),"^",25),SRAO(2)=SHEMP_"^^461^461.1" S X=$P(SRA(202),"^",25) I X="NS" S $P(SRAO(2),"^",2)="NS"
"RTN","SROACPM2",7,0)
 I X D DATE S SHEMP="("_Y_")",$P(SRAO(2),"^",2)=SHEMP
"RTN","SROACPM2",8,0)
 S SHEMP=$P(SRA(201),"^",26),SRAO(3)=SHEMP_"^^462^462.1" S X=$P(SRA(202),"^",26) I X="NS" S $P(SRAO(3),"^",2)="NS"
"RTN","SROACPM2",9,0)
 I X D DATE S SHEMP="("_Y_")",$P(SRAO(3),"^",2)=SHEMP
"RTN","SROACPM2",10,0)
 S SHEMP=$P(SRA(201),"^",22),SRAO(4)=SHEMP_"^^458^458.1" S X=$P(SRA(202),"^",22) I X="NS" S $P(SRAO(4),"^",2)="NS"
"RTN","SROACPM2",11,0)
 I X D DATE S SHEMP="("_Y_")",$P(SRAO(4),"^",2)=SHEMP
"RTN","SROACPM2",12,0)
 S SHEMP=$P(SRA(201),"^",23),SRAO(5)=SHEMP_"^^459^459.1" S X=$P(SRA(202),"^",23) I X="NS" S $P(SRAO(5),"^",2)="NS"
"RTN","SROACPM2",13,0)
 I X D DATE S SHEMP="("_Y_")",$P(SRAO(5),"^",2)=SHEMP
"RTN","SROACPM2",14,0)
 S SHEMP=$P(SRA(201),"^",24),SRAO(6)=SHEMP_"^^460^460.1" S X=$P(SRA(202),"^",24) I X="NS" S $P(SRAO(6),"^",2)="NS"
"RTN","SROACPM2",15,0)
 I X D DATE S SHEMP="("_Y_")",$P(SRAO(6),"^",2)=SHEMP
"RTN","SROACPM2",16,0)
 S SHEMP=$P(SRA(201),"^",4),SRAO(7)=SHEMP_"^^223^290" S X=$P(SRA(202),"^",4) I X D DATE S SHEMP="("_Y_")",$P(SRAO(7),"^",2)=SHEMP
"RTN","SROACPM2",17,0)
 S SHEMP=$P(SRA(201),"^",8),SRAO(8)=SHEMP_"^^225^292" S X=$P(SRA(202),"^",8) I X D DATE S SHEMP="("_Y_")",$P(SRAO(8),"^",2)=SHEMP
"RTN","SROACPM2",18,0)
 S SHEMP=$P(SRA(201),"^",20),SRAO(9)=SHEMP_"^^219^239" S X=$P(SRA(202),"^",20) I X D DATE S SHEMP="("_Y_")",$P(SRAO(9),"^",2)=SHEMP
"RTN","SROACPM2",19,0)
 S SHEMP=$P(SRA(201),"^",28),SRAO(10)=SHEMP_"^^504^504.1" S X=$P(SRA(202.1),"^") I X D DATE S SHEMP="("_Y_")",$P(SRAO(10),"^",2)=SHEMP
"RTN","SROACPM2",20,0)
 K SRA
"RTN","SROACPM2",21,0)
 Q
"RTN","SROACPM2",22,0)
DATE S Y=X X ^DD("DD")
"RTN","SROACPM2",23,0)
 Q
"RTN","SROACR1")
0^47^B19934044^B21202350
"RTN","SROACR1",1,0)
SROACR1 ;BIR/MAM - OPERATIVE DATA, PAGE 1 ;06/28/06
"RTN","SROACR1",2,0)
 ;;3.0; Surgery ;**38,71,93,95,99,125,153**;24 Jun 93;Build 11
"RTN","SROACR1",3,0)
 ;
"RTN","SROACR1",4,0)
 S SRA(206)=$G(^SRF(SRTN,206)),SRA(209)=$G(^SRF(SRTN,209))
"RTN","SROACR1",5,0)
 S SRA(207)=$G(^SRF(SRTN,207)),SRA(207.1)=$G(^SRF(SRTN,207.1)) I $P(SRA(207),"^",27)="" K DA,DIE,DR S DA=SRTN,DIE=130,DR="469////5" D ^DIE K DA,DIE,DR S SRA(207)=$G(^SRF(SRTN,207))
"RTN","SROACR1",6,0)
 S SRAO(1)=$P(SRA(207),"^")_"^365",SRAO(2)=$P(SRA(207),"^",2)_"^366",SRAO(3)=$P(SRA(207),"^",24)_"^464",SRAO(4)=$P(SRA(207),"^",25)_"^465",SRAO(5)=$P(SRA(207),"^",20)_"^416"
"RTN","SROACR1",7,0)
 S NYUK=$P(SRA(207),"^",3) D YN S SRAO(6)=SHEMP_"^367",NYUK=$P(SRA(207),"^",4) D YN S SRAO(7)=SHEMP_"^368",NYUK=$P(SRA(207),"^",5) D YN S SRAO(8)=SHEMP_"^369"
"RTN","SROACR1",8,0)
 S NYUK=$P(SRA(207),"^",6) S SRAO(9)=$S(NYUK="Y":"YES",NYUK="N":"NO",NYUK=1:"AORTIC",NYUK=2:"MITRAL",NYUK=3:"TRICUSPID",NYUK=4:"OTHER/COMBINATION",NYUK=5:"NONE",1:"")_"^370"
"RTN","SROACR1",9,0)
 S NYUK=$P(SRA(207),"^",7) D YN S SRAO(10)=SHEMP_"^371",NYUK=$P(SRA(209),"^",9) D YN S SRAO(11)=SHEMP_"^481"
"RTN","SROACR1",10,0)
 S NYUK=$P(SRA(209),"^",11) D YN S SRAO(12)=SHEMP_"^483"
"RTN","SROACR1",11,0)
 S NYUK=$P(SRA(209),"^",14) S SHEMP=$S(NYUK="F":"FULL MAZE",NYUK="N":"NO MAZE PERFORMED",NYUK="M":"MINI MAZE",1:"") S SRAO(13)=SHEMP_"^512"
"RTN","SROACR1",12,0)
 S NYUK=$P(SRA(207),"^",12) D YN S SRAO(14)=SHEMP_"^376"
"RTN","SROACR1",13,0)
 S NYUK=$P(SRA(207),"^",13) D YN S SRAO(15)=SHEMP_"^380"
"RTN","SROACR1",14,0)
 S NYUK=$P(SRA(207),"^",16) D YN S SRAO(16)=SHEMP_"^378"
"RTN","SROACR1",15,0)
 S NYUK=$P(SRA(207),"^",14) D YN S SRAO(17)=SHEMP_"^377"
"RTN","SROACR1",16,0)
 S NYUK=$P(SRA(207),"^",18) D YN S SRAO(18)=SHEMP_"^379"
"RTN","SROACR1",17,0)
 S NYUK=$P(SRA(207),"^",9) D YN S SRAO(19)=SHEMP_"^373"
"RTN","SROACR1",18,0)
 S NYUK=$P(SRA(207),"^",8) D YN S SRAO(20)=SHEMP_"^372"
"RTN","SROACR1",19,0)
 S NYUK=$P(SRA(207.1),"^",2) D YN S SRAO(21)=SHEMP_"^505"
"RTN","SROACR1",20,0)
 S SRAO(22)=$P($G(^SRF(SRTN,209)),"^",13)_"^502"
"RTN","SROACR1",21,0)
 ;
"RTN","SROACR1",22,0)
DISP S SRPAGE="PAGE: 1 OF 2" D HDR^SROAUTL
"RTN","SROACR1",23,0)
 W "Cardiac surgical procedures with or without cardiopulmonary bypass "
"RTN","SROACR1",24,0)
 ;W ! F MOE=1:1:80 W "-"
"RTN","SROACR1",25,0)
 W !,"CABG distal anastomoses:",?40,"11. Bridge to transplant/Device:",?75,$P(SRAO(11),"^")
"RTN","SROACR1",26,0)
 W !," 1. Number with vein:",?34,$P(SRAO(1),"^"),?40,"12. TMR:",?75,$P(SRAO(12),"^")
"RTN","SROACR1",27,0)
 W !," 2. Number with IMA:",?34,$P(SRAO(2),"^"),?40,"13. Maze procedure:",?61,$J($P(SRAO(13),"^"),17)
"RTN","SROACR1",28,0)
 W !," 3. Number with Radial Artery:",?34,$P(SRAO(3),"^"),?40,"14. ASD repair:",?75,$P(SRAO(14),"^")
"RTN","SROACR1",29,0)
 W !," 4. Number with Other Artery:",?34,$P(SRAO(4),"^"),?40,"15. VSD repair:",?75,$P(SRAO(15),"^")
"RTN","SROACR1",30,0)
 W !," 5. Number with Other Conduit:",?34,$P(SRAO(5),"^"),?40,"16. Myectomy for IHSS:",?75,$P(SRAO(16),"^")
"RTN","SROACR1",31,0)
 W !,?40,"17. Myxoma resection:",?75,$P(SRAO(17),"^")
"RTN","SROACR1",32,0)
 W !," 6. Aortic Valve Replacement:",?34,$P(SRAO(6),"^"),?40,"18. Other tumor resection:",?75,$P(SRAO(18),"^")
"RTN","SROACR1",33,0)
 W !," 7. Mitral Valve Replacement:",?34,$P(SRAO(7),"^"),?40,"19. Cardiac transplant:",?75,$P(SRAO(19),"^")
"RTN","SROACR1",34,0)
 W !," 8. Tricuspid Valve Replacement:",?34,$P(SRAO(8),"^"),?40,"20. Great Vessel Repair:",?75,$P(SRAO(20),"^")
"RTN","SROACR1",35,0)
 W !," 9. Valve Repair:  ",$J($P(SRAO(9),"^"),18),?40,"21. Endovascular Repair:",?75,$P(SRAO(21),"^")
"RTN","SROACR1",36,0)
 W !,"10. LV Aneurysmectomy:",?34,$P(SRAO(10),"^"),?40,"22. Other cardiac procedures:" S X=$P(SRAO(22),"^") W ?75,$S(X="N":"NO",X="Y":"YES",1:""),!
"RTN","SROACR1",37,0)
 S X="IORVON;IORVOFF" D ENDR^%ZISS
"RTN","SROACR1",38,0)
 S X=$P($G(^SRF(SRTN,209.1)),"^") I X'="",X'="NS" S SRQ=0 W !,IORVON_"* Other cardiac procedures (specify): " W:$L(X)<56 X,! I $L(X)>55 S Z=$L(X) D
"RTN","SROACR1",39,0)
 .I X'[" " W ?27,X Q
"RTN","SROACR1",40,0)
 .S I=0,LINE=1 F  S SRL=$S(LINE=1:39,1:80) D  Q:SRQ
"RTN","SROACR1",41,0)
 ..I $E(X,1,SRL)'[" " W X,! S SRQ=1 Q
"RTN","SROACR1",42,0)
 ..S J=SRL-I,Y=$E(X,J),I=I+1 I Y=" " W $E(X,1,J-1),! S X=$E(X,J+1,Z),Z=$L(X),I=0,LINE=LINE+1 I Z<SRL W X,! S SRQ=1 Q
"RTN","SROACR1",43,0)
 W IORVOFF
"RTN","SROACR1",44,0)
 W ! F MOE=1:1:80 W "-"
"RTN","SROACR1",45,0)
 Q
"RTN","SROACR1",46,0)
CHCK ; compare ischemic time to CPB time
"RTN","SROACR1",47,0)
 I '$D(IORVON) S X="IORVON;IORVOFF" D ENDR^%ZISS
"RTN","SROACR1",48,0)
 N SRISCH,SRCPB S SRISCH=$P(SRA(206),"^",36),SRCPB=$P(SRA(206),"^",37)
"RTN","SROACR1",49,0)
 I SRISCH,SRCPB,SRISCH>SRCPB W !,IORVON_"***  NOTE: Ischemic Time is greater than CPB Time!!  Please check.  ***"_IORVOFF,!
"RTN","SROACR1",50,0)
 F MOE=1:1:80 W "-"
"RTN","SROACR1",51,0)
 Q
"RTN","SROACR1",52,0)
YN ; store answer
"RTN","SROACR1",53,0)
 S SHEMP=$S(NYUK="NS":"NS",NYUK="N":"NO",NYUK="Y":"YES",1:"")
"RTN","SROACR1",54,0)
 Q
"RTN","SROACR1",55,0)
SURE W ! K DIR S DIR("A")="   Sure you want to delete all Misc. Cardiac Procedures information ? ",DIR("B")="NO",DIR(0)="YA" D ^DIR W ! K DIR S SRYN=Y I $D(DTOUT)!$D(DUOUT) S SRSOUT=1
"RTN","SROACR1",56,0)
 Q
"RTN","SROACR2")
0^48^B15125616^B18870197
"RTN","SROACR2",1,0)
SROACR2 ;BIR/SJA - OPERATIVE DATA, PAGE 2 ;04/12/06
"RTN","SROACR2",2,0)
 ;;3.0; Surgery ;**125,153**;24 Jun 93;Build 11
"RTN","SROACR2",3,0)
 ;
"RTN","SROACR2",4,0)
 I '$D(SRTN) W !!,"A Surgery Risk Assessment must be selected prior to using this option.",!!,"Press <RET> to continue  " R X:DTIME G END
"RTN","SROACR2",5,0)
 S SRSOUT=0 D ^SROAUTL
"RTN","SROACR2",6,0)
START G:SRSOUT END
"RTN","SROACR2",7,0)
 ;
"RTN","SROACR2",8,0)
EDIT S SRR=0 S SRPAGE="PAGE: 2 OF 2" D HDR^SROAUTL W "Indicate other cardiac procedures only if done with cardiopulmonary bypass",! F K=1:1:80 W "-"
"RTN","SROACR2",9,0)
 ;
"RTN","SROACR2",10,0)
 K DR S SRQ=0,(DR,SRDR)="381;382;451;450;468;469"
"RTN","SROACR2",11,0)
 K DA,DIC,DIQ,SRY S DIC="^SRF(",DA=SRTN,DIQ="SRY",DIQ(0)="IE",DR=SRDR D EN^DIQ1 K DA,DIC,DIQ,DR
"RTN","SROACR2",12,0)
 K SRX S SRX=0 F M=1:1 S I=$P(SRDR,";",M)  Q:'I  D
"RTN","SROACR2",13,0)
 .K SREXT D TR,GET
"RTN","SROACR2",14,0)
 .S SRX=SRX+1,Y=$P(X,";;",2),SRFLD=$P(Y,"^"),(Z,SRX(SRX))=$P(Y,"^",2)_"^"_SRFLD,SREXT=SRY(130,SRTN,SRFLD,"E")
"RTN","SROACR2",15,0)
 .I SRFLD=451 W !,"Other Operative Data details:",!,"------------------------------"
"RTN","SROACR2",16,0)
 .W !,$J(SRX,2)_". "_$P(Z,"^")_":" D EXT
"RTN","SROACR2",17,0)
 .W:SRFLD=382 !
"RTN","SROACR2",18,0)
 D CHCK W ! F K=1:1:80 W "-"
"RTN","SROACR2",19,0)
 D SEL G:SRR=1 EDIT
"RTN","SROACR2",20,0)
 S SRSOUT=1 G END
"RTN","SROACR2",21,0)
 Q
"RTN","SROACR2",22,0)
SEL S SRSOUT=0 W !!,"Select Operative Information to Edit: " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROACR2",23,0)
 Q:X=""  S:X="a" X="A" I '$D(SRFLG),'$D(SRX(X)),(X'?1.2N1":"1.2N),X'="A" D HELP S SRR=1 Q
"RTN","SROACR2",24,0)
 I X?1.2N1":"1.2N S Y=$P(X,":"),Z=$P(X,":",2) I Y<1!(Z>SRX)!(Y>Z) D HELP S SRR=1 Q
"RTN","SROACR2",25,0)
 I X="A" S X="1:"_SRX
"RTN","SROACR2",26,0)
 I X?1.2N1":"1.2N D RANGE S SRR=1 K SREXT Q
"RTN","SROACR2",27,0)
 I $D(SRX(X)),+X=X S EMILY=X D  S SRR=1
"RTN","SROACR2",28,0)
 .I $$LOCK^SROUTL(SRTN) W ! D ONE,UNLOCK^SROUTL(SRTN)
"RTN","SROACR2",29,0)
 Q
"RTN","SROACR2",30,0)
EXT W ?30,SREXT
"RTN","SROACR2",31,0)
 Q
"RTN","SROACR2",32,0)
HELP W @IOF,!!!!,"Enter the number or range of numbers you want to edit.  Examples of proper",!,"responses are listed below."
"RTN","SROACR2",33,0)
 W !!,"1. Enter 'A' to update all information.",!!,"2. Enter a number (1-6) to update the information in that field.  (For",!,"   example, enter '5' to update Incision Type.)"
"RTN","SROACR2",34,0)
 W !!,"3. Enter a range of numbers (1-6) separated by a ':' to enter a range of",!,"   information.  (For example, enter '3:5' to enter Total CPB time,",!,"   Total Ischemic time, and Incision Type.)"
"RTN","SROACR2",35,0)
 D RET
"RTN","SROACR2",36,0)
 Q
"RTN","SROACR2",37,0)
CHCK ; compare ischemic time to CPB time
"RTN","SROACR2",38,0)
 I '$D(IORVON) S X="IORVON;IORVOFF" D ENDR^%ZISS
"RTN","SROACR2",39,0)
 N SRISCH,SRCPB S SRISCH=SRY(130,SRTN,450,"E"),SRCPB=SRY(130,SRTN,451,"E")
"RTN","SROACR2",40,0)
 I SRISCH,SRCPB,SRISCH>SRCPB W !,IORVON_"***  NOTE: Ischemic Time is greater than CPB Time!!  Please check.  ***"_IORVOFF
"RTN","SROACR2",41,0)
 Q
"RTN","SROACR2",42,0)
RET Q:SRSOUT  W ! K DIR S DIR(0)="E" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1
"RTN","SROACR2",43,0)
 Q
"RTN","SROACR2",44,0)
RANGE ; range of numbers
"RTN","SROACR2",45,0)
 I $$LOCK^SROUTL(SRTN) D  D UNLOCK^SROUTL(SRTN)
"RTN","SROACR2",46,0)
 .W ! S SHEMP=$P(X,":"),CURLEY=$P(X,":",2) F EMILY=SHEMP:1:CURLEY Q:SRSOUT  D ONE
"RTN","SROACR2",47,0)
 Q
"RTN","SROACR2",48,0)
ONE ; edit one item
"RTN","SROACR2",49,0)
 K DR,DA,DIE S DR=$P(SRX(EMILY),"^",2)_"T",DA=SRTN,DIE=130,SRDT=$P(SRX(EMILY),"^",3) S:SRDT DR=DR_";"_SRDT_"T" D ^DIE K DR,DA I $D(Y) S SRSOUT=1
"RTN","SROACR2",50,0)
 Q
"RTN","SROACR2",51,0)
TR S J=I,J=$TR(J,"1234567890.","ABCDEFGHIJP")
"RTN","SROACR2",52,0)
 Q
"RTN","SROACR2",53,0)
GET S X=$T(@J)
"RTN","SROACR2",54,0)
 Q
"RTN","SROACR2",55,0)
END W @IOF D ^SRSKILL
"RTN","SROACR2",56,0)
 Q
"RTN","SROACR2",57,0)
CHA ;;381^Foreign Body Removal
"RTN","SROACR2",58,0)
CHB ;;382^Pericardiectomy
"RTN","SROACR2",59,0)
DEA ;;451^Total CPB Time
"RTN","SROACR2",60,0)
DEJ ;;450^Total Ischemic Time
"RTN","SROACR2",61,0)
DFH ;;468^Incision Type
"RTN","SROACR2",62,0)
DFI ;;469^Convert Off Pump to CPB
"RTN","SROAEX")
0^8^B13592830^B17035378
"RTN","SROAEX",1,0)
SROAEX ;BIR/MAM - EXCLUSION CRITERIA ;03/24/06
"RTN","SROAEX",2,0)
 ;;3.0; Surgery ;**38,47,63,88,142,153**;24 Jun 93;Build 11
"RTN","SROAEX",3,0)
 S SRACLR=0,SRSOUT=0 D NCODE^SROAUTL
"RTN","SROAEX",4,0)
START D:SRACLR RET G:SRSOUT END S SRACLR=0 K SRA,SRAO S SRAO(4)=""
"RTN","SROAEX",5,0)
 S SR(0)=^SRF(SRTN,0),Y=$P($G(^SRF(SRTN,"RA")),"^",7) D CRITERIA S SRAO(1)=NYUK_"^102"
"RTN","SROAEX",6,0)
 S SRAO(2)=$P(SR(0),"^",10)_"^.035",X=$P(SRAO(2),"^") I X'="" S $P(SRAO(2),"^")=$S(X="EL":"ELECTIVE",X="EM":"EMERGENT",X="U":"URGENT",X="A":"ADD ON TODAY (NONEMERGENT)",X="S":"STANDBY",1:"")
"RTN","SROAEX",7,0)
 S SHEMP=$P(SR(0),"^",4) S:SHEMP SHEMP=$P(^SRO(137.45,SHEMP,0),"^"),SRAO(3)=SHEMP_"^.04"
"RTN","SROAEX",8,0)
 D TECH^SROPRIN S:SRTECH="NOT ENTERED" SRTECH="" S SRAO(5)=SRTECH
"RTN","SROAEX",9,0)
 S X=$P(SR(0),"^",3),X=$S(X="J":"MAJOR",X="N":"MINOR",1:""),SRAO(6)=X_"^.03"
"RTN","SROAEX",10,0)
 D TSTAT^SRO1L1,HDR^SROAUTL
"RTN","SROAEX",11,0)
 W !,"1. Exclusion Criteria: ",?35,$P(SRAO(1),"^"),!,"2. Surgical Priority:",?35,$P(SRAO(2),"^"),!,"3. Surgical Specialty:",?35,$P(SRAO(3),"^")
"RTN","SROAEX",12,0)
 N SRPROC,SRL S SRL=45 D CPTS^SROAUTL0 W !,"4. CPT Codes (view only):"
"RTN","SROAEX",13,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?35,SRPROC(I) W:I'=1 !,?35,SRPROC(I)
"RTN","SROAEX",14,0)
 W !,"5. Principal Anesthesia Technique: "_$P(SRAO(5),"^"),!,"6. Major or Minor:",?35,$P(SRAO(6),"^"),!! F LINE=1:1:80 W "-"
"RTN","SROAEX",15,0)
ASK W !!,"Select Excluded Case Information to Edit: " R X:DTIME I '$T!("^"[X) G END
"RTN","SROAEX",16,0)
 S:X="a" X="A" I '$D(SRAO(X)),(X'?.N1":".N),(X'="A") D HELP G:SRSOUT END G START
"RTN","SROAEX",17,0)
 I X="A" S X="1:6"
"RTN","SROAEX",18,0)
 I X?.N1":".N S Y=$E(X),Z=$P(X,":",2) I Y<1!(Z>6)!(Y>Z) D HELP G:SRSOUT END G START
"RTN","SROAEX",19,0)
 D TSTAT^SRO1L1,HDR^SROAUTL
"RTN","SROAEX",20,0)
 I X?.N1":".N D RANGE,AQ G START
"RTN","SROAEX",21,0)
 I $D(SRAO(X)) S EMILY=X W !! D ONE,AQ G START
"RTN","SROAEX",22,0)
END D AQ W @IOF D ^SRSKILL
"RTN","SROAEX",23,0)
 Q
"RTN","SROAEX",24,0)
HELP W @IOF,!!!!,"Enter the number or range of numbers you want to edit. Examples of proper"
"RTN","SROAEX",25,0)
 W !,"responses are listed below.",!!,"1. Enter 'A' to update all information."
"RTN","SROAEX",26,0)
 W !!,"2. Enter a number (1-6) to update the information in that field. (For"
"RTN","SROAEX",27,0)
 W !,"   example, enter '2' to update Surgical Priority)"
"RTN","SROAEX",28,0)
 W !!,"3. Enter a range of numbers (1-6) separated by a ':' to enter a range of"
"RTN","SROAEX",29,0)
 W !,"   information. (For example, enter '1:2' to update the Exclusion Criteria "
"RTN","SROAEX",30,0)
 W !,"   and Surgical Priority)" D RET
"RTN","SROAEX",31,0)
 Q
"RTN","SROAEX",32,0)
AQ ; update transmission status
"RTN","SROAEX",33,0)
 K DA,DIK S DIK="^SRF(",DIK(1)=".232^AQ",DA=SRTN D EN1^DIK K DA,DIK
"RTN","SROAEX",34,0)
 Q
"RTN","SROAEX",35,0)
RANGE ; range of numbers
"RTN","SROAEX",36,0)
 W !! S SHEMP=$P(X,":"),CURLEY=$P(X,":",2) F EMILY=SHEMP:1:CURLEY Q:SRSOUT  D ONE I EMILY=4 D HDR^SROAUTL
"RTN","SROAEX",37,0)
 Q
"RTN","SROAEX",38,0)
ONE ; edit one item
"RTN","SROAEX",39,0)
 I EMILY=1 D REASON Q
"RTN","SROAEX",40,0)
 I EMILY=4 D DISP^SROAUTL0 Q
"RTN","SROAEX",41,0)
 I EMILY=5 D UPANES Q
"RTN","SROAEX",42,0)
 K DR,DIE S DA=SRTN,DR=$P(SRAO(EMILY),"^",2)_"T",DIE=130 D ^DIE K DR I $D(Y) S SRSOUT=1
"RTN","SROAEX",43,0)
 Q
"RTN","SROAEX",44,0)
RET Q:SRSOUT  W ! K DIR S DIR(0)="E" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1
"RTN","SROAEX",45,0)
 Q
"RTN","SROAEX",46,0)
CRITERIA ; expand set of codes for exclusion criteria
"RTN","SROAEX",47,0)
 S C=$P(^DD(130,102,0),"^",2) D Y^DIQ S NYUK=Y
"RTN","SROAEX",48,0)
 S SHEMP=$P(^SRF(SRTN,0),"^",10),MOE=$S(SHEMP="E":"ELECTIVE",SHEMP="M":"EMERGENCY",SHEMP="U":"URGENT",1:"")
"RTN","SROAEX",49,0)
 Q
"RTN","SROAEX",50,0)
UPANES K DR,DIE,DA S DA=SRTN,DR=.37,DR(2,130.06)=".01T;.05T;42T",DIE=130 D ^DIE K DR
"RTN","SROAEX",51,0)
 Q
"RTN","SROAEX",52,0)
REASON W ! K DIR S DIR(0)="130,102",DIR("A")="Reason for not Creating an Assessment",DIR("B")=$P(SRAO(1),"^") D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 Q
"RTN","SROAEX",53,0)
 I X="@" D DELETE^SRONASS S SRSOUT=1 Q
"RTN","SROAEX",54,0)
 I Y K DR,DIE,DA S DA=SRTN,DIE=130,DR="102////"_Y D ^DIE K DA,DIE,DR
"RTN","SROAEX",55,0)
 Q
"RTN","SROAL1")
0^14^B22463945^B21156803
"RTN","SROAL1",1,0)
SROAL1 ;BIR/ADM - LOAD PREOPERATIVE LAB DATA ;06/27/06
"RTN","SROAL1",2,0)
 ;;3.0; Surgery ;**18,38,47,54,65,71,81,88,100,125,153**;24 Jun 93;Build 11
"RTN","SROAL1",3,0)
 ;
"RTN","SROAL1",4,0)
 ; Reference to ^LR( supported by DBIA #194
"RTN","SROAL1",5,0)
 ;
"RTN","SROAL1",6,0)
 Q:'$D(SRTN)  K SRAD,SRAT S SRSOUT=0
"RTN","SROAL1",7,0)
 W !!,"This selection loads the most recent lab data for tests performed",!,"within 90 days before the operation unless otherwise specified."
"RTN","SROAL1",8,0)
YEP W !!,"Do you want to automatically load preoperative lab data ?  YES//  " R SRYN:DTIME G:'$T!(SRYN["^") END
"RTN","SROAL1",9,0)
 S SRYN=$E(SRYN) I "YyNn"'[SRYN W !!,"Enter <RET> to automatically load preoperative lab data from the patient's lab record, or 'NO' to return to the menu." G YEP
"RTN","SROAL1",10,0)
 I "Yy"'[SRYN W !!,"Lab data NOT loaded." G END
"RTN","SROAL1",11,0)
START S SRALR=$S($D(^DPT($P(^SRF(SRTN,0),"^"),"LR")):$P(^("LR"),"^"),1:"")
"RTN","SROAL1",12,0)
 S SRAOP=$P($G(^SRF(SRTN,.2)),"^",2) I 'SRAOP W !!,"The 'Time the Operation Began' must be entered before continuing." D TMCHK G:SRSOUT END
"RTN","SROAL1",13,0)
 S SRST=9999999-SRAOP,X1=SRAOP,X2=-90 D C^%DTC S SREND=9999999-X
"RTN","SROAL1",14,0)
SRAT ; Get test and data name(s) for test from file 139.2.
"RTN","SROAL1",15,0)
 W !!,"..Searching lab record for latest preoperative test data...."
"RTN","SROAL1",16,0)
 K DIC S DIC=61,DIC(0)="",X="SERUM" D ^DIC S SRSER=+Y K DIC S DIC=61,DIC(0)="",X="PLASMA" D ^DIC K DIC S SRP=+Y
"RTN","SROAL1",17,0)
 F SRAT=1,4,7,8,11,13:1:20,25 D SP
"RTN","SROAL1",18,0)
 S SRAT=26,X1=SRAOP,X2=-2 D C^%DTC S SREND=9999999-X D SP
"RTN","SROAL1",19,0)
 I $$LOCK^SROUTL(SRTN) D ^SROAL11 S SRCON=$P($G(^SRF(SRTN,"CON")),"^") D:SRCON CONCC D UNLOCK^SROUTL(SRTN)
"RTN","SROAL1",20,0)
END I 'SRSOUT W !!,"Press <RET> to continue  " R X:DTIME
"RTN","SROAL1",21,0)
 W @IOF
"RTN","SROAL1",22,0)
 Q
"RTN","SROAL1",23,0)
CONCC ; update concurrent case
"RTN","SROAL1",24,0)
 S SRTN1=SRTN,SRTN=SRCON D N4^SROAL11 S SRTN=SRTN1
"RTN","SROAL1",25,0)
 Q
"RTN","SROAL1",26,0)
SP S SRASP=$P(^SRO(139.2,SRAT,2),"^") K SRADT F SRADN=0:0 S SRADN=$O(^SRO(139.2,SRAT,1,SRADN)) Q:SRADN'>0  S SRATN=$P(^(SRADN,0),"^") D LABCHK
"RTN","SROAL1",27,0)
 D NS
"RTN","SROAL1",28,0)
 Q
"RTN","SROAL1",29,0)
LABCHK ; Get latest test values from patient's lab record.
"RTN","SROAL1",30,0)
 I SRALR F SRAIDT=SRST:0 S SRAIDT=$O(^LR(SRALR,"CH",SRAIDT)) Q:SRAIDT'>0!(SRAIDT>SREND)  I $D(^(SRAIDT,SRATN)) S SRSP=$P(^(0),"^",5) D
"RTN","SROAL1",31,0)
 .I (SRAT>1&(SRAT<16))!(SRAT=26)!(SRAT>20&(SRAT<25)),SRSP=SRSER!(SRSP=SRP) D COMP Q
"RTN","SROAL1",32,0)
 .I SRSP=SRASP D COMP
"RTN","SROAL1",33,0)
 Q
"RTN","SROAL1",34,0)
NS ; check for no sample
"RTN","SROAL1",35,0)
 I '$D(SRAT(SRAT)) S SRAT(SRAT)="NS",SRAD(SRAT)=""
"RTN","SROAL1",36,0)
 Q
"RTN","SROAL1",37,0)
COMP S SRX=$P(^LR(SRALR,"CH",SRAIDT,SRATN),"^") I $P(^LR(SRALR,"CH",SRAIDT,0),"^",3)'="","canccommentpending"'[SRX,SRX'["CANC" D DATA
"RTN","SROAL1",38,0)
 Q
"RTN","SROAL1",39,0)
DATA I $D(SRADT),SRAIDT>SRADT Q
"RTN","SROAL1",40,0)
 I +SRX'=SRX D
"RTN","SROAL1",41,0)
 .N X1,X2 S SRZ="" I " <>"[$E(SRX) S SRZ=$E(SRX),SRX=$E(SRX,2,99)
"RTN","SROAL1",42,0)
 .I SRX?.N0.1".".N D  Q
"RTN","SROAL1",43,0)
 ..S X1=$P(SRX,"."),X1=+X1 S:X1=0 X1=""
"RTN","SROAL1",44,0)
 ..S X2="."_$P(SRX,".",2),X2=+X2 S:X2=0 X2=""
"RTN","SROAL1",45,0)
 ..S SRX=X1_X2,SRX=+SRX,SRX=SRZ_SRX
"RTN","SROAL1",46,0)
 .S SRX="*"
"RTN","SROAL1",47,0)
 S SRAT(SRAT)=SRX D:SRAT(SRAT)["." DEC S SRAD(SRAT)=$E($P(^LR(SRALR,"CH",SRAIDT,0),"^"),1,7),SRADT=SRAIDT
"RTN","SROAL1",48,0)
 Q
"RTN","SROAL1",49,0)
TMCHK W !!,"Do you want to enter 'Time the Operation Began' at this time ?  YES//  " R SRYN:DTIME I '$T!(SRYN["^") S SRSOUT=1 Q
"RTN","SROAL1",50,0)
 S SRYN=$E(SRYN)
"RTN","SROAL1",51,0)
 I "YyNn"'[SRYN W !!,"The time that the operation began must be entered prior to capturing the",!,"preoperative lab data.  Enter 'YES' to input 'Time the Operation Began',",!,"or 'NO' to return to the menu." G TMCHK
"RTN","SROAL1",52,0)
 I "Yy"'[SRYN S SRSOUT=1 Q
"RTN","SROAL1",53,0)
 I $$LOCK^SROUTL(SRTN) D  D UNLOCK^SROUTL(SRTN)
"RTN","SROAL1",54,0)
 .W ! K DR S DR=".22T",DA=SRTN,DIE=130 D ^DIE K DR
"RTN","SROAL1",55,0)
 S SRAOP=$P($G(^SRF(SRTN,.2)),"^",2) I 'SRAOP S SRSOUT=1
"RTN","SROAL1",56,0)
 Q
"RTN","SROAL1",57,0)
DEC ; convert to proper decimal place
"RTN","SROAL1",58,0)
 I +SRAT(SRAT)=SRAT(SRAT)  S SRAT(SRAT)=SRAT(SRAT)+.005\.01*.01 Q
"RTN","SROAL1",59,0)
 S SR1=$E(SRAT(SRAT)),SR2=$E(SRAT(SRAT),2,99),SR2=SR2+.005\.01*.01,SRAT(SRAT)=SR1_SR2
"RTN","SROAL1",60,0)
 Q
"RTN","SROAL1",61,0)
CREAT ; from SROACL1 for creatinine
"RTN","SROAL1",62,0)
 N SRSER,SRP K DIC S DIC=61,DIC(0)="",X="SERUM" D ^DIC S SRSER=+Y K DIC S DIC=61,DIC(0)="",X="PLASMA" D ^DIC K DIC S SRP=+Y
"RTN","SROAL1",63,0)
 S SRLB=0 F SRLB=4,8,20 D
"RTN","SROAL1",64,0)
 .S VALUE=$P($G(^SRF(SRTN,201)),"^",SRLB),SRAOPDT=$P(^SRF(SRTN,0),"^",9) I DT>SRAOPDT,VALUE Q
"RTN","SROAL1",65,0)
 .S SRSOUT=0,SRALR=$S($D(^DPT($P(^SRF(SRTN,0),"^"),"LR")):$P(^("LR"),"^"),1:"")
"RTN","SROAL1",66,0)
 .S SRAOP=SRAOPDT,SRST=9999999-SRAOP,X1=SRAOP,X2=-30 D C^%DTC S SREND=9999999-X
"RTN","SROAL1",67,0)
 .S SRAT=$S(SRLB=4:7,SRLB=8:11,1:1),SRASP=$P(^SRO(139.2,SRAT,2),"^") K SRADT F SRADN=0:0 S SRADN=$O(^SRO(139.2,SRAT,1,SRADN)) Q:'SRADN  S SRATN=$P(^(SRADN,0),"^") D LABCHK
"RTN","SROAL1",68,0)
 .I $D(SRAT(SRAT)),$$LOCK^SROUTL(SRTN) S $P(^SRF(SRTN,201),"^",SRLB)=SRAT(SRAT),$P(^(202),"^",SRLB)=SRAD(SRAT) D UNLOCK^SROUTL(SRTN)
"RTN","SROAL1",69,0)
 K SRLB
"RTN","SROAL1",70,0)
 Q
"RTN","SROAL11")
0^15^B18235736^B16645671
"RTN","SROAL11",1,0)
SROAL11 ;BIR/ADM - LOAD PREOP LAB DATA (CONTINUED) ;06/27/06
"RTN","SROAL11",2,0)
 ;;3.0; Surgery ;**38,47,65,95,125,153**;24 Jun 93;Build 11
"RTN","SROAL11",3,0)
STUFF ; Transfer test data from array to file 130
"RTN","SROAL11",4,0)
 W !!,"..Moving preoperative lab test data to Surgery Risk Assessment file...."
"RTN","SROAL11",5,0)
N4 I $D(SRAT(4)) S X=SRAT(4),SRL=1,SRH=5 D INPUT S $P(^SRF(SRTN,201),"^")=X S $P(^(202),"^")=$S(X'="":SRAD(4),1:"") ; Sodium
"RTN","SROAL11",6,0)
N7 I $D(SRAT(7)) S X=SRAT(7),SRL=1,SRH=4 D INPUT S $P(^SRF(SRTN,201),"^",4)=X,$P(^(202),"^",4)=$S(X'="":SRAD(7),1:"") ; Creatinine
"RTN","SROAL11",7,0)
N8 I $D(SRAT(8)) S X=SRAT(8),SRL=1,SRH=5 D INPUT S $P(^SRF(SRTN,201),"^",5)=X,$P(^(202),"^",5)=$S(X'="":SRAD(8),1:"") ; BUN
"RTN","SROAL11",8,0)
N11 I $D(SRAT(11)) S X=SRAT(11),SRL=1,SRH=4 D INPUT S $P(^SRF(SRTN,201),"^",8)=X,$P(^(202),"^",8)=$S(X'="":SRAD(11),1:"") ; Albumin
"RTN","SROAL11",9,0)
N13 I $D(SRAT(13)) S X=SRAT(13),SRL=1,SRH=5 D INPUT S $P(^SRF(SRTN,201),"^",11)=X,$P(^(202),"^",11)=$S(X'="":SRAD(13),1:"") ; SGOT
"RTN","SROAL11",10,0)
N14 I $D(SRAT(14)) S X=SRAT(14),SRL=1,SRH=5 D INPUT S $P(^SRF(SRTN,201),"^",9)=X,$P(^(202),"^",9)=$S(X'="":SRAD(14),1:"") ; Total Bilirubin
"RTN","SROAL11",11,0)
N15 I $D(SRAT(15)) S X=SRAT(15),SRL=1,SRH=5 D INPUT S $P(^SRF(SRTN,201),"^",12)=X,$P(^(202),"^",12)=$S(X'="":SRAD(15),1:"") ; Alkaline Phosphatase
"RTN","SROAL11",12,0)
N16 I $D(SRAT(16)) S X=SRAT(16),SRL=1,SRH=4 D INPUT S $P(^SRF(SRTN,201),"^",13)=X,$P(^(202),"^",13)=$S(X'="":SRAD(16),1:"") ; White Blood Count
"RTN","SROAL11",13,0)
N17 I $D(SRAT(17)) S X=SRAT(17),SRL=1,SRH=4 D INPUT S $P(^SRF(SRTN,201),"^",14)=X,$P(^(202),"^",14)=$S(X'="":SRAD(17),1:"") ; Hematocrit
"RTN","SROAL11",14,0)
N18 I $D(SRAT(18)) S X=SRAT(18),SRL=1,SRH=5 D INPUT S $P(^SRF(SRTN,201),"^",15)=X,$P(^(202),"^",15)=$S(X'="":SRAD(18),1:"") ; Platelet Count
"RTN","SROAL11",15,0)
N19 I $D(SRAT(19)) S X=SRAT(19),SRL=1,SRH=4 D INPUT S $P(^SRF(SRTN,201),"^",17)=X,$P(^(202),"^",17)=$S(X'="":SRAD(19),1:"") ; PT
"RTN","SROAL11",16,0)
N20 I $D(SRAT(20)) S X=SRAT(20),SRL=1,SRH=5 D INPUT S $P(^SRF(SRTN,201),"^",16)=X,$P(^(202),"^",16)=$S(X'="":SRAD(20),1:"") ; PTT
"RTN","SROAL11",17,0)
N25 I $D(SRAT(25)) S X=SRAT(25),SRL=1,SRH=5 D INPUT S $P(^SRF(SRTN,201),"^",27)=X,$P(^(202),"^",27)=$S(X'="":SRAD(25),1:"") ; INR
"RTN","SROAL11",18,0)
N26 I $D(SRAT(26)) S X=SRAT(26),SRL=1,SRH=5 D INPUT S $P(^SRF(SRTN,203),"^",15)=X,$P(^(204),"^",15)=$S(X'="":SRAD(26),1:"") ; ANION GAP
"RTN","SROAL11",19,0)
 Q
"RTN","SROAL11",20,0)
CARDIAC ; LOAD CARDIAC LAB DATA (CONTINUED)
"RTN","SROAL11",21,0)
 N SRCRD
"RTN","SROAL11",22,0)
C1 I $D(SRAT(1)) S X=SRAT(1),SRL=1,SRH=7,SRCRD=1 D INPUT S $P(^SRF(SRTN,201),"^",20)=X,$P(^(202),"^",20)=$S(X'="":SRAD(1),1:"") ; Hemoglobin
"RTN","SROAL11",23,0)
C5 I $D(SRAT(5)) S X=SRAT(5),SRL=1,SRH=6 D INPUT S $P(^SRF(SRTN,201),"^",23)=X,$P(^(202),"^",23)=$S(X'="":SRAD(5),1:"") ; Potassium (Cardiac)
"RTN","SROAL11",24,0)
C7 I $D(SRAT(7)) S X=SRAT(7),SRL=1,SRH=4,SRCRD=1 D INPUT S $P(^SRF(SRTN,201),"^",4)=X,$P(^(202),"^",4)=$S(X'="":SRAD(7),1:"") ; Creatinine
"RTN","SROAL11",25,0)
C11 I $D(SRAT(11)) S X=SRAT(11),SRL=1,SRH=4 D INPUT S $P(^SRF(SRTN,201),"^",8)=X,$P(^(202),"^",8)=$S(X'="":SRAD(11),1:"") ; Albumin
"RTN","SROAL11",26,0)
C14 I $D(SRAT(14)) S X=SRAT(14),SRL=1,SRH=6 D INPUT S $P(^SRF(SRTN,201),"^",24)=X,$P(^(202),"^",24)=$S(X'="":SRAD(14),1:"") ; Total Bilirubin (Cardiac)
"RTN","SROAL11",27,0)
C21 I $D(SRAT(21)) S X=SRAT(21),SRL=1,SRH=6 D INPUT S $P(^SRF(SRTN,201),"^",21)=X,$P(^(202),"^",21)=$S(X'="":SRAD(21),1:"") ; HDL
"RTN","SROAL11",28,0)
C22 I $D(SRAT(22)) S X=SRAT(22),SRL=1,SRH=6 D INPUT S $P(^SRF(SRTN,201),"^",22)=X,$P(^(202),"^",22)=$S(X'="":SRAD(22),1:"") ; Triglyceride
"RTN","SROAL11",29,0)
C23 I $D(SRAT(23)) S X=SRAT(23),SRL=1,SRH=6 D INPUT S $P(^SRF(SRTN,201),"^",25)=X,$P(^(202),"^",25)=$S(X'="":SRAD(23),1:"") ; LDL
"RTN","SROAL11",30,0)
C24 I $D(SRAT(24)) S X=SRAT(24),SRL=1,SRH=6 D INPUT S $P(^SRF(SRTN,201),"^",26)=X,$P(^(202),"^",26)=$S(X'="":SRAD(24),1:"") ; Cholesterol
"RTN","SROAL11",31,0)
C27 I $D(SRAT(27)) S X=SRAT(27),SRL=1,SRH=6 D INPUT S $P(^SRF(SRTN,201),"^",28)=X,$P(^(202.1),"^")=$S(X'="":SRAD(27),1:"") ; HEMOGLOBIN A1C
"RTN","SROAL11",32,0)
 Q
"RTN","SROAL11",33,0)
INPUT ; input checking
"RTN","SROAL11",34,0)
 N SRX,SRY I $D(SRCRD),X="NS" S X=""
"RTN","SROAL11",35,0)
 K SRCRD I X="NS"!(X="") Q
"RTN","SROAL11",36,0)
 I $L(X)<SRL S X="" Q
"RTN","SROAL11",37,0)
 S SRX=X,SRY="" S:" <>"[$E(X) SRY=$E(X),SRX=$E(X,2,99)
"RTN","SROAL11",38,0)
 I +SRX'=SRX S X="" Q
"RTN","SROAL11",39,0)
 I $L(X)>SRH D
"RTN","SROAL11",40,0)
 .I SRX["." S SRX=SRX+.05\.1*.1,X=SRY_SRX I $L(X)>SRH S SRX=SRX+.5\1,X=SRY_SRX
"RTN","SROAL11",41,0)
 .I $L(X)>SRH S X=""
"RTN","SROAL11",42,0)
 Q
"RTN","SROAL2")
0^16^B18933004^B18847403
"RTN","SROAL2",1,0)
SROAL2 ;BIR/ADM - LOAD POSTOPERATIVE LAB DATA ;06/27/06
"RTN","SROAL2",2,0)
 ;;3.0; Surgery ;**18,38,47,54,65,71,88,100,125,153**;24 Jun 93;Build 11
"RTN","SROAL2",3,0)
 ;
"RTN","SROAL2",4,0)
 ; Reference to ^LR( supported by DBIA #194
"RTN","SROAL2",5,0)
 ;
"RTN","SROAL2",6,0)
 Q:'$D(SRTN)  K SRAD,SRAT S SRSOUT=0
"RTN","SROAL2",7,0)
 W !!,"This selection loads highest or lowest lab data for tests performed within",!,"30 days after the operation."
"RTN","SROAL2",8,0)
YEP W !!,"Do you want to automatically load postoperative lab data ?  YES//  " R SRYN:DTIME G:'$T!(SRYN["^") END
"RTN","SROAL2",9,0)
 S SRYN=$E(SRYN) I "YyNn"'[SRYN W !!,"Enter <RET> to automatically load postoperative lab data from the patient's lab record, or 'NO' to return to the menu." G YEP
"RTN","SROAL2",10,0)
 I "Yy"'[SRYN W !!,"Lab data NOT loaded." G END
"RTN","SROAL2",11,0)
START S SRALR=$S($D(^DPT($P(^SRF(SRTN,0),"^"),"LR")):$P(^("LR"),"^"),1:"")
"RTN","SROAL2",12,0)
 S SRAOP=$P($G(^SRF(SRTN,.2)),"^",3) I 'SRAOP W !!,"'Time the Operation Ends' must be entered before continuing." D TMCHK G:SRSOUT END
"RTN","SROAL2",13,0)
 S SREND=9999999-SRAOP,X1=SRAOP,X2=30 D C^%DTC S SRST=9999999-X
"RTN","SROAL2",14,0)
SRAT ; Get test from file 139.2.
"RTN","SROAL2",15,0)
 W !!,"..Searching lab record for postoperative lab test data...."
"RTN","SROAL2",16,0)
 K DIC S DIC=61,DIC(0)="",X="SERUM" D ^DIC S SRSER=+Y K DIC S DIC=61,DIC(0)="",X="PLASMA" D ^DIC K DIC S SRP=+Y
"RTN","SROAL2",17,0)
 S SRFLG="H" F SRAT=2,3,4,5,7,9,10,14,16,26 S SRASP=$P(^SRO(139.2,SRAT,2),"^") D SRADN,NS
"RTN","SROAL2",18,0)
 S SRFLG="L" F SRAT=4,5,17 S SRASP=$P(^SRO(139.2,SRAT,2),"^") D SRADN,NS
"RTN","SROAL2",19,0)
 I $$LOCK^SROUTL(SRTN) D ^SROAL21,UNLOCK^SROUTL(SRTN)
"RTN","SROAL2",20,0)
END I 'SRSOUT W !!,"Press <RET> to continue  " R X:DTIME
"RTN","SROAL2",21,0)
 W @IOF
"RTN","SROAL2",22,0)
 Q
"RTN","SROAL2",23,0)
SRADN ; Get data name(s) for test, make call to check lab record.
"RTN","SROAL2",24,0)
 F SRADN=0:0 S SRADN=$O(^SRO(139.2,SRAT,1,SRADN)) Q:SRADN'>0  S SRATN=$P(^(SRADN,0),"^") D LABCHK
"RTN","SROAL2",25,0)
 Q
"RTN","SROAL2",26,0)
LABCHK ; Get test values from patient's lab record.
"RTN","SROAL2",27,0)
 S SRX="" I SRALR F SRAIDT=SRST:0 S SRAIDT=$O(^LR(SRALR,"CH",SRAIDT)) Q:SRAIDT'>0!(SRAIDT>SREND)  I $D(^(SRAIDT,SRATN)) S SRSP=$P(^(0),"^",5) D  Q:(SRFLG="H"&(SRX[">"))!(SRFLG="L"&(SRX["<"))  I SRX="*" D STAR
"RTN","SROAL2",28,0)
 .I (SRAT>1&(SRAT<16))!(SRAT=26),SRSP=SRSER!(SRSP=SRP) D COMP Q
"RTN","SROAL2",29,0)
 .I SRSP=SRASP D COMP Q
"RTN","SROAL2",30,0)
 Q
"RTN","SROAL2",31,0)
COMP S SRAVAL=$P(^LR(SRALR,"CH",SRAIDT,SRATN),"^") I $P(^LR(SRALR,"CH",SRAIDT,0),"^",3)'="","canccommentpending"'[SRAVAL,SRAVAL'["CANC" D DATA
"RTN","SROAL2",32,0)
 I $D(SRAT(SRFLG,SRAT)),SRAT(SRFLG,SRAT)["." D
"RTN","SROAL2",33,0)
 .I SRAT(SRFLG,SRAT)=+SRAT(SRFLG,SRAT) S SRAT(SRFLG,SRAT)=SRAT(SRFLG,SRAT)+.005\.01*.01 Q
"RTN","SROAL2",34,0)
 .S SR1=$E(SRAT(SRFLG,SRAT)),SR2=$E(SRAT(SRFLG,SRAT),2,99),SR2=SR2+.005\.01*.01,SRAT(SRFLG,SRAT)=SR1_SR2
"RTN","SROAL2",35,0)
 Q
"RTN","SROAL2",36,0)
NS ; check for no sample
"RTN","SROAL2",37,0)
 I '$D(SRAT(SRFLG,SRAT)) S SRAT(SRFLG,SRAT)="NS",SRAD(SRFLG,SRAT)=""
"RTN","SROAL2",38,0)
 Q
"RTN","SROAL2",39,0)
STAR ; questional result, require manual input
"RTN","SROAL2",40,0)
 S (SRAT(SRFLG,SRAT),SRAD(SRFLG,SRAT))=""
"RTN","SROAL2",41,0)
 Q
"RTN","SROAL2",42,0)
DATA ; Decide to save test result or not
"RTN","SROAL2",43,0)
 N SRSWAP,SRVAL S SRSWAP=0
"RTN","SROAL2",44,0)
 S (SRT,SRX)=SRAVAL I +SRAVAL'=SRAVAL D CONV Q:SRX="*"  S (SRT,SRAVAL)=SRZ_SRX
"RTN","SROAL2",45,0)
 I $D(SRAT(SRFLG,SRAT)) S SRT1=SRAT(SRFLG,SRAT) D  I SRSWAP S SRAT(SRFLG,SRAT)=SRAVAL,SRAD(SRFLG,SRAT)=$E($P(^LR(SRALR,"CH",SRAIDT,0),"^"),1,7) Q
"RTN","SROAL2",46,0)
 .I SRFLG="H" Q:SRT1[">"  D
"RTN","SROAL2",47,0)
 ..I SRT[">" S SRSWAP=1 Q
"RTN","SROAL2",48,0)
 ..S SRVAL=SRX,SRX=SRT1 D CONV I SRVAL>SRX S SRSWAP=1 Q
"RTN","SROAL2",49,0)
 .I SRFLG="L" Q:SRT1["<"  D
"RTN","SROAL2",50,0)
 ..I SRT["<" S SRSWAP=1 Q
"RTN","SROAL2",51,0)
 ..S SRVAL=SRX,SRX=SRT1 D CONV I SRVAL<SRX S SRSWAP=1 Q
"RTN","SROAL2",52,0)
 I '$D(SRAT(SRFLG,SRAT)) S SRAT(SRFLG,SRAT)=SRAVAL,SRAD(SRFLG,SRAT)=$E($P(^LR(SRALR,"CH",SRAIDT,0),"^"),1,7)
"RTN","SROAL2",53,0)
 Q
"RTN","SROAL2",54,0)
TMCHK W !!,"Do you want to enter the time that the operation was completed at ",!,"this time ?  YES//  " R SRYN:DTIME I '$T!(SRYN["^") S SRSOUT=1 Q
"RTN","SROAL2",55,0)
 S SRYN=$E(SRYN) I "YyNn"'[SRYN W !!,"Enter 'YES' to input 'Time the Operation Ends' or ",!,"'NO' to return to the menu." G TMCHK
"RTN","SROAL2",56,0)
 I "Yy"'[SRYN S SRSOUT=1 Q
"RTN","SROAL2",57,0)
 I $$LOCK^SROUTL(SRTN) D  D UNLOCK^SROUTL(SRTN)
"RTN","SROAL2",58,0)
 .W ! K DR S DR=".23T",DA=SRTN,DIE=130 D ^DIE K DR S SRAOP=$P($G(^SRF(SRTN,.2)),"^",3) I 'SRAOP S SRSOUT=1
"RTN","SROAL2",59,0)
 Q
"RTN","SROAL2",60,0)
CONV ; convert value to numeric for comparison
"RTN","SROAL2",61,0)
 N SRELSE,X1,X2 S SRZ="" I " <>"[$E(SRX) S SRZ=$E(SRX),SRX=$E(SRX,2,99)
"RTN","SROAL2",62,0)
 I SRX?.N0.1".".N D  Q
"RTN","SROAL2",63,0)
 .I SRX'["." S SRX=+SRX Q
"RTN","SROAL2",64,0)
 .S X1=$P(SRX,"."),X1=+X1 S:X1=0 X1=""
"RTN","SROAL2",65,0)
 .S X2="."_$P(SRX,".",2),X2=+X2 S:X2=0 X2=""
"RTN","SROAL2",66,0)
 .S SRX=X1_X2,SRX=+SRX
"RTN","SROAL2",67,0)
 S SRX="*"
"RTN","SROAL2",68,0)
 Q
"RTN","SROAL21")
0^17^B9664688^B8949324
"RTN","SROAL21",1,0)
SROAL21 ;BIR/ADM - LOAD POSTOPERATIVE LAB DATA (CONTINUED) ;06/27/06
"RTN","SROAL21",2,0)
 ;;3.0; Surgery ;**38,47,65,88,125,153**;24 Jun 93;Build 11
"RTN","SROAL21",3,0)
STUFF ; Transfer data from arrays to file 130.
"RTN","SROAL21",4,0)
 W !!,"..Moving postoperative lab data to Surgery Risk Assessment file...."
"RTN","SROAL21",5,0)
SRAT2 I $D(SRAT("H",2)) S X=SRAT("H",2) S SRL=1,SRH=5 D INPUT S $P(^SRF(SRTN,203),"^",13)=X,$P(^(204),"^",13)=$S(X'="":SRAD("H",2),1:"")
"RTN","SROAL21",6,0)
SRAT3 I $D(SRAT("H",3)) S X=SRAT("H",3) S SRL=1,SRH=5 D INPUT S $P(^SRF(SRTN,203),"^",14)=X,$P(^(204),"^",14)=$S(X'="":SRAD("H",3),1:"")
"RTN","SROAL21",7,0)
SRAT4 I $D(SRAT("H",4)) S X=SRAT("H",4) S SRL=1,SRH=5 D INPUT S $P(^SRF(SRTN,203),"^")=X,$P(^(204),"^")=$S(X'="":SRAD("H",4),1:"")
"RTN","SROAL21",8,0)
SRAT5 I $D(SRAT("H",5)) S X=SRAT("H",5) S SRL=1,SRH=3 D INPUT S $P(^SRF(SRTN,203),"^",3)=X,$P(^(204),"^",3)=$S(X'="":SRAD("H",5),1:"")
"RTN","SROAL21",9,0)
SRAT7 I $D(SRAT("H",7)) S X=SRAT("H",7) S SRL=1,SRH=4 D INPUT S $P(^SRF(SRTN,203),"^",6)=X,$P(^(204),"^",6)=$S(X'="":SRAD("H",7),1:"")
"RTN","SROAL21",10,0)
SRAT9 I $D(SRAT("H",9)) S X=SRAT("H",9) S SRL=1,SRH=6 D INPUT S $P(^SRF(SRTN,203),"^",7)=X,$P(^(204),"^",7)=$S(X'="":SRAD("H",9),1:"")
"RTN","SROAL21",11,0)
SRAT10 I $D(SRAT("H",10)) S X=SRAT("H",10) S SRL=1,SRH=4 D INPUT S $P(^SRF(SRTN,203),"^",8)=X,$P(^(204),"^",8)=$S(X'="":SRAD("H",10),1:"")
"RTN","SROAL21",12,0)
SRAT14 I $D(SRAT("H",14)) S X=SRAT("H",14) S SRL=1,SRH=5 D INPUT S $P(^SRF(SRTN,203),"^",9)=X,$P(^(204),"^",9)=$S(X'="":SRAD("H",14),1:"")
"RTN","SROAL21",13,0)
SRAT16 I $D(SRAT("H",16)) S X=SRAT("H",16) S SRL=1,SRH=4 D INPUT S $P(^SRF(SRTN,203),"^",10)=X,$P(^(204),"^",10)=$S(X'="":SRAD("H",16),1:"")
"RTN","SROAL21",14,0)
SRAT17 I $D(SRAT("L",17)) S X=SRAT("L",17) S SRL=1,SRH=4 D INPUT S $P(^SRF(SRTN,203),"^",12)=X,$P(^(204),"^",12)=$S(X'="":SRAD("L",17),1:"")
"RTN","SROAL21",15,0)
SRAT26 I $D(SRAT("H",26)) S X=SRAT("H",26) S SRL=1,SRH=5 D INPUT S $P(^SRF(SRTN,203),"^",16)=X,$P(^(204),"^",16)=$S(X'="":SRAD("H",26),1:"")
"RTN","SROAL21",16,0)
SRAT4L I $D(SRAT("L",4)) S X=SRAT("L",4) S SRL=1,SRH=5 D INPUT S $P(^SRF(SRTN,203),"^",2)=X,$P(^(204),"^",2)=$S(X'="":SRAD("L",4),1:"")
"RTN","SROAL21",17,0)
SRAT5L I $D(SRAT("L",5)) S X=SRAT("L",5) S SRL=1,SRH=3 D INPUT S $P(^SRF(SRTN,203),"^",4)=X,$P(^(204),"^",4)=$S(X'="":SRAD("L",5),1:"")
"RTN","SROAL21",18,0)
 Q
"RTN","SROAL21",19,0)
NUM ; input transform logic for lab tests  
"RTN","SROAL21",20,0)
 N SRX I X="NS"!(X="ns") S X="NS" D:$D(SRCICSP) CARDNS Q
"RTN","SROAL21",21,0)
 S SRX=X S:"<>"[$E(X) SRX=$E(X,2,99)
"RTN","SROAL21",22,0)
 I +SRX'=SRX K X Q
"RTN","SROAL21",23,0)
 Q
"RTN","SROAL21",24,0)
INPUT ; capture input check
"RTN","SROAL21",25,0)
 N SRX,SRY I X="NS"!(X="") Q
"RTN","SROAL21",26,0)
 I $L(X)<SRL S X="" Q
"RTN","SROAL21",27,0)
 S SRX=X,SRY="" S:" <>"[$E(X) SRY=$E(X),SRX=$E(X,2,99)
"RTN","SROAL21",28,0)
 I +SRX'=SRX S X=""
"RTN","SROAL21",29,0)
 I $L(X)>SRH D
"RTN","SROAL21",30,0)
 .I SRX["." S SRX=SRX+.05\.1*.1,X=SRY_SRX I $L(X)>SRH S SRX=SRX+.5\1,X=SRY_SRX
"RTN","SROAL21",31,0)
 .I $L(X)>SRH S X=""
"RTN","SROAL21",32,0)
 Q
"RTN","SROAL21",33,0)
CARDNS ; if cardiac, NS not allowed
"RTN","SROAL21",34,0)
 N SRTYPE,SRXX
"RTN","SROAL21",35,0)
 S SRXX=$S($D(SRTN):SRTN,$D(DA):DA,1:"") Q:'SRXX
"RTN","SROAL21",36,0)
 S SRTYPE=$P($G(^SRF(SRXX,"RA")),"^",2)
"RTN","SROAL21",37,0)
 I SRTYPE="C" K X
"RTN","SROAL21",38,0)
 K SRCICSP
"RTN","SROAL21",39,0)
 Q
"RTN","SROALC")
0^83^B10589627^B10924370
"RTN","SROALC",1,0)
SROALC ;BIR/MAM - COMPLETE ASSESSMENTS ;03/24/06
"RTN","SROALC",2,0)
 ;;3.0; Surgery ;**38,50,142,153**;24 Jun 93 ;Build 11
"RTN","SROALC",3,0)
 I $E(IOST)="P" D ^SROALCP Q
"RTN","SROALC",4,0)
 S SRSOUT=0 D HDR
"RTN","SROALC",5,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  S SR("RA")=$G(^SRF(SRTN,"RA")) I $P(SR("RA"),"^")="C",$D(^SRF(SRTN,0)),$$DIV^SROUTL0(SRTN) D SET
"RTN","SROALC",6,0)
 Q
"RTN","SROALC",7,0)
SET ; print assessments
"RTN","SROALC",8,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROALC",9,0)
 I $P(SR("RA"),"^",6)="N" Q
"RTN","SROALC",10,0)
 I $Y+5>IOSL D PAGE I SRSOUT Q
"RTN","SROALC",11,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALC",12,0)
 I $L(SRANM)>19 S SRANM=$P(SRANM,",")_","_$E($P(SRANM,",",2))_"."
"RTN","SROALC",13,0)
 S SROPER=$P(^SRF(SRTN,"OP"),"^") I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALC",14,0)
 S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROALC",15,0)
 K SROPS,MM,MMM S:$L(SROPER)<34 SROPS(1)=SROPER I $L(SROPER)>33 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALC",16,0)
 S SRSS=$P(SRA(0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALC",17,0)
 D TECH^SROPRIN
"RTN","SROALC",18,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALC",19,0)
 W !,SRTN,?20,SRANM_" "_VA("PID"),?55,$P(SRSS,"("),!,SRDT,?20,SROPS(1),?55,SRTECH I $D(SROPS(2)) W !,?20,SROPS(2) I $D(SROPS(3)) W !,?20,SROPS(3)
"RTN","SROALC",20,0)
 N I,SRPROC,SRL S SRL=48 D CPTS^SROAUTL0 W !,?20,"CPT Codes: "
"RTN","SROALC",21,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?31,SRPROC(I) W:I'=1 !,?31,SRPROC(I)
"RTN","SROALC",22,0)
 W ! F LINE=1:1:80 W "-"
"RTN","SROALC",23,0)
 Q
"RTN","SROALC",24,0)
OTHER ; other operations
"RTN","SROALC",25,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>125 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROALC",26,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALC",27,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALC",28,0)
 Q
"RTN","SROALC",29,0)
LOOP ; break procedures
"RTN","SROALC",30,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<34  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALC",31,0)
 Q
"RTN","SROALC",32,0)
PAGE W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROALC",33,0)
 I X["?" W !!,"If you want to continue listing incomplete assessments, enter <RET>.  Enter",!,"'^' to return to the menu." G PAGE
"RTN","SROALC",34,0)
HDR W @IOF,!,?27,"COMPLETED RISK ASSESSMENTS",!,?(80-$L(SRFRTO)\2),SRFRTO,!!,"ASSESSMENT #",?20,"PATIENT",?55,"SURGICAL SPECIALTY",!,"OPERATION DATE",?20,"OPERATION(S)",?55,"ANESTHESIA TECHNIQUE",! F LINE=1:1:80 W "="
"RTN","SROALC",35,0)
 Q
"RTN","SROALCP")
0^86^B10000827^B10263576
"RTN","SROALCP",1,0)
SROALCP ;BIR/MAM - COMPLETE ASSESSMENTS (PRINTER) ;03/24/06
"RTN","SROALCP",2,0)
 ;;3.0; Surgery ;**32,50,142,153**;24 Jun 93;Build 11
"RTN","SROALCP",3,0)
 S SRPAGE=1,(SRSOUT,SRDFN)=0 D HDR Q:SRSOUT
"RTN","SROALCP",4,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  S SR("RA")=$G(^SRF(SRTN,"RA")) I $P(SR("RA"),"^")="C",$D(^SRF(SRTN,0)),$$DIV^SROUTL0(SRTN) D SET
"RTN","SROALCP",5,0)
 Q
"RTN","SROALCP",6,0)
SET ; print assessments
"RTN","SROALCP",7,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROALCP",8,0)
 I $P(SR("RA"),"^",6)="N" Q
"RTN","SROALCP",9,0)
 I $Y+5>IOSL S SRPAGE=SRPAGE+1 D HDR I SRSOUT Q
"RTN","SROALCP",10,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALCP",11,0)
 S SROPER=$P(^SRF(SRTN,"OP"),"^") I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALCP",12,0)
 S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROALCP",13,0)
 K SROPS,MM,MMM S:$L(SROPER)<81 SROPS(1)=SROPER I $L(SROPER)>80 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALCP",14,0)
 S SRSS=$P(SRA(0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALCP",15,0)
 S TYPE=$P(SR("RA"),"^",2) I SRSS="SPECIALTY NOT ENTERED",TYPE="C" S SRSS="N/A"
"RTN","SROALCP",16,0)
 D TECH^SROPRIN
"RTN","SROALCP",17,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALCP",18,0)
 W !,SRTN,?20,SRANM_" "_VA("PID"),?67,$P(SRSS,"("),?107,SRTECH,!,SRDT,?20,SROPS(1) I $D(SROPS(2)) W !,?20,SROPS(2) I $D(SROPS(3)) W !,?20,SROPS(3) I $D(SROPS(4)) W !,?20,SROPS(4)
"RTN","SROALCP",19,0)
 N I,SRPROC,SRL S SRL=100 D CPTS^SROAUTL0 W !,?20,"CPT Codes: "
"RTN","SROALCP",20,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?31,SRPROC(I) W:I'=1 !,?31,SRPROC(I)
"RTN","SROALCP",21,0)
 W ! F LINE=1:1:132 W "-"
"RTN","SROALCP",22,0)
 Q
"RTN","SROALCP",23,0)
OTHER ; other operations
"RTN","SROALCP",24,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>165 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROALCP",25,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALCP",26,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALCP",27,0)
 Q
"RTN","SROALCP",28,0)
LOOP ; break procedures
"RTN","SROALCP",29,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<81  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALCP",30,0)
 Q
"RTN","SROALCP",31,0)
HDR ; print heading
"RTN","SROALCP",32,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SROALCP",33,0)
 W:$Y @IOF W !,?53,"COMPLETED RISK ASSESSMENTS",?120,"PAGE "_SRPAGE,!,?(132-$L(SRINST)\2),SRINST,!,?58,"SURGERY SERVICE",?100,"DATE REVIEWED:"
"RTN","SROALCP",34,0)
 W !,?(132-$L(SRFRTO)\2),SRFRTO,?100,"REVIEWED BY:"
"RTN","SROALCP",35,0)
 W !!,"ASSESSMENT #",?20,"PATIENT",?67,"SURGICAL SPECIALTY",?107,"ANESTHESIA TECHNIQUE",!,"OPERATION DATE",?20,"OPERATIVE PROCEDURE(S)",! F LINE=1:1:132 W "="
"RTN","SROALCP",36,0)
 Q
"RTN","SROALCS")
0^84^B13891688^B14237632
"RTN","SROALCS",1,0)
SROALCS ;BIR/MAM - COMPLETE ASSESSMENTS ;03/24/06
"RTN","SROALCS",2,0)
 ;;3.0; Surgery ;**38,50,142,153**;24 Jun 93;Build 11
"RTN","SROALCS",3,0)
 I $E(IOST)="P" D ^SROALCSP Q
"RTN","SROALCS",4,0)
 K ^TMP("SRA",$J)
"RTN","SROALCS",5,0)
 S SRSOUT=0 D HDR
"RTN","SROALCS",6,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  S SR("RA")=$G(^SRF(SRTN,"RA")) I $P(SR("RA"),"^")="C",$D(^SRF(SRTN,0)),$$DIV^SROUTL0(SRTN) D UTL
"RTN","SROALCS",7,0)
 S SRSS="" F  S SRSS=$O(^TMP("SRA",$J,SRSS)) Q:SRSS=""!SRSOUT  D SS S SRTN=0 F  S SRTN=$O(^TMP("SRA",$J,SRSS,SRTN)) Q:'SRTN!SRSOUT  D SET
"RTN","SROALCS",8,0)
 I '$D(^TMP("SRA",$J)) W $$NODATA^SROUTL0()
"RTN","SROALCS",9,0)
 Q
"RTN","SROALCS",10,0)
UTL ; write to ^TMP("SRA",$J)
"RTN","SROALCS",11,0)
 I $P(SR("RA"),"^",6)="N" Q
"RTN","SROALCS",12,0)
 I SRFLG,$P(^SRF(SRTN,0),"^",4)'=SRASP Q
"RTN","SROALCS",13,0)
 S SRSS=$P(^SRF(SRTN,0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALCS",14,0)
 S ^TMP("SRA",$J,SRSS,SRTN)=""
"RTN","SROALCS",15,0)
 Q
"RTN","SROALCS",16,0)
SET ; print assessments
"RTN","SROALCS",17,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROALCS",18,0)
 I $Y+5>IOSL D PAGE I SRSOUT Q
"RTN","SROALCS",19,0)
 S SRA(0)=^SRF(SRTN,0),SR("RA")=^SRF(SRTN,"RA"),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALCS",20,0)
 I $L(SRANM)>19 S SRANM=$P(SRANM,",")_","_$E($P(SRANM,",",2))_"."
"RTN","SROALCS",21,0)
 S SRC="",Y=$E($P(SR("RA"),"^",5),1,7) I Y D D^DIQ S SRC=Y
"RTN","SROALCS",22,0)
 S SROPER=$P(^SRF(SRTN,"OP"),"^") I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALCS",23,0)
 S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROALCS",24,0)
 K SROPS,MM,MMM S:$L(SROPER)<34 SROPS(1)=SROPER I $L(SROPER)>33 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALCS",25,0)
 S SRSS=$P(SRA(0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALCS",26,0)
 S TYPE=$P(SR("RA"),"^",2) I SRSS="SPECIALTY NOT ENTERED",TYPE="C" S SRSS="N/A"
"RTN","SROALCS",27,0)
 D TECH^SROPRIN
"RTN","SROALCS",28,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALCS",29,0)
 W !,SRTN,?20,SRANM_" "_VA("PID"),?55,SRC,!,SRDT,?20,SROPS(1),?55,SRTECH S SRAO=1 F  S SRAO=$O(SROPS(SRAO)) Q:'SRAO  W !,?20,SROPS(SRAO)
"RTN","SROALCS",30,0)
 N I,SRPROC,SRL S SRL=48 D CPTS^SROAUTL0 W !,?20,"CPT Codes: "
"RTN","SROALCS",31,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?31,SRPROC(I) W:I'=1 !,?31,SRPROC(I)
"RTN","SROALCS",32,0)
 W ! F LINE=1:1:80 W "-"
"RTN","SROALCS",33,0)
 Q
"RTN","SROALCS",34,0)
OTHER ; other operations
"RTN","SROALCS",35,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>125 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROALCS",36,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALCS",37,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALCS",38,0)
 Q
"RTN","SROALCS",39,0)
LOOP ; break procedures
"RTN","SROALCS",40,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<34  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALCS",41,0)
 Q
"RTN","SROALCS",42,0)
PAGE W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROALCS",43,0)
 I X["?" W !!,"If you want to continue listing incomplete assessments, enter <RET>.  Enter",!,"'^' to return to the menu." G PAGE
"RTN","SROALCS",44,0)
HDR W @IOF,!,?27,"COMPLETED RISK ASSESSMENTS",!,?(80-$L(SRFRTO)\2),SRFRTO,!!,"ASSESSMENT #",?20,"PATIENT",?55,"DATE COMPLETED",!,"OPERATION DATE",?20,"OPERATION(S)",?55,"ANESTHESIA TECHNIQUE",! F LINE=1:1:80 W "="
"RTN","SROALCS",45,0)
 Q
"RTN","SROALCS",46,0)
SS ; print surgical specialty
"RTN","SROALCS",47,0)
 I $Y+5>IOSL D PAGE Q:SRSOUT
"RTN","SROALCS",48,0)
 W !!,"** SURGICAL SPECIALTY: ",SRSS," **",!
"RTN","SROALCS",49,0)
 Q
"RTN","SROALCSP")
0^85^B12135710^B12507398
"RTN","SROALCSP",1,0)
SROALCSP ;BIR/MAM - COMPLETE ASSESSMENTS (PRINTER) ;03/24/06
"RTN","SROALCSP",2,0)
 ;;3.0; Surgery ;**32,50,142,153**;24 Jun 93;Build 11
"RTN","SROALCSP",3,0)
 K ^TMP("SRA",$J) S SRPAGE=0,(SRSOUT,SRDFN)=0 D HDR Q:SRSOUT
"RTN","SROALCSP",4,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  S SR("RA")=$G(^SRF(SRTN,"RA")) I $P(SR("RA"),"^")="C",$D(^SRF(SRTN,0)),$$DIV^SROUTL0(SRTN) D UTL
"RTN","SROALCSP",5,0)
 S SRSS="" F  S SRSS=$O(^TMP("SRA",$J,SRSS)) Q:SRSS=""!SRSOUT  D SS S SRTN=0 F  S SRTN=$O(^TMP("SRA",$J,SRSS,SRTN)) Q:'SRTN!SRSOUT  D SET
"RTN","SROALCSP",6,0)
 I '$D(^TMP("SRA",$J)) W $$NODATA^SROUTL0()
"RTN","SROALCSP",7,0)
 Q
"RTN","SROALCSP",8,0)
UTL ; write to ^TMP("SRA",$J)
"RTN","SROALCSP",9,0)
 I $P(SR("RA"),"^",6)="N" Q
"RTN","SROALCSP",10,0)
 I SRFLG,$P(^SRF(SRTN,0),"^",4)'=SRASP Q
"RTN","SROALCSP",11,0)
 S SRSS=$P(^SRF(SRTN,0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALCSP",12,0)
 S TYPE=$P(SR("RA"),"^",2) I SRSS="SPECIALTY NOT ENTERED",TYPE="C" S SRSS="N/A"
"RTN","SROALCSP",13,0)
 S ^TMP("SRA",$J,SRSS,SRTN)=""
"RTN","SROALCSP",14,0)
 Q
"RTN","SROALCSP",15,0)
SET ; print assessments
"RTN","SROALCSP",16,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROALCSP",17,0)
 I $Y+5>IOSL D HDR I SRSOUT Q
"RTN","SROALCSP",18,0)
 S SRA(0)=^SRF(SRTN,0),SR("RA")=^SRF(SRTN,"RA"),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALCSP",19,0)
 S SRC="",Y=$E($P(SR("RA"),"^",5),1,7) I Y D D^DIQ S SRC=Y
"RTN","SROALCSP",20,0)
 S SROPER=$P(^SRF(SRTN,"OP"),"^") I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALCSP",21,0)
 S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROALCSP",22,0)
 K SROPS,MM,MMM S:$L(SROPER)<81 SROPS(1)=SROPER I $L(SROPER)>80 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALCSP",23,0)
 D TECH^SROPRIN
"RTN","SROALCSP",24,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALCSP",25,0)
 W !,SRTN,?20,SRANM_" "_VA("PID"),?67,SRC,?107,SRTECH,!,SRDT,?20,SROPS(1) S SRAO=1 F I=0:0 S SRAO=$O(SROPS(SRAO)) Q:'SRAO  W !,?20,SROPS(SRAO)
"RTN","SROALCSP",26,0)
 N I,SRPROC,SRL S SRL=100 D CPTS^SROAUTL0 W !,?20,"CPT Codes: "
"RTN","SROALCSP",27,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?31,SRPROC(I) W:I'=1 !,?31,SRPROC(I)
"RTN","SROALCSP",28,0)
 D LINE
"RTN","SROALCSP",29,0)
 Q
"RTN","SROALCSP",30,0)
OTHER ; other operations
"RTN","SROALCSP",31,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>165 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROALCSP",32,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALCSP",33,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALCSP",34,0)
 Q
"RTN","SROALCSP",35,0)
LOOP ; break procedures
"RTN","SROALCSP",36,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<44  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALCSP",37,0)
 Q
"RTN","SROALCSP",38,0)
HDR ; print heading
"RTN","SROALCSP",39,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SROALCSP",40,0)
 S SRPAGE=SRPAGE+1 W:$Y @IOF W !,?53,"COMPLETED RISK ASSESSMENTS",?120,"PAGE "_SRPAGE,!,?(132-$L(SRINST)\2),SRINST,!,?58,"SURGERY SERVICE",?100,"DATE REVIEWED:"
"RTN","SROALCSP",41,0)
 W !,?(132-$L(SRFRTO)\2),SRFRTO,?100,"REVIEWED BY:"
"RTN","SROALCSP",42,0)
 W !!,"ASSESSMENT #",?20,"PATIENT",?67,"DATE COMPLETED",?107,"ANESTHESIA TECHNIQUE",!,"OPERATION DATE",?20,"OPERATIVE PROCEDURE(S)",! F LINE=1:1:132 W "="
"RTN","SROALCSP",43,0)
 Q
"RTN","SROALCSP",44,0)
SS ; print surgical specialty
"RTN","SROALCSP",45,0)
 I $Y+5>IOSL D HDR
"RTN","SROALCSP",46,0)
 W !!,"** SURGICAL SPECIALTY: ",SRSS," **",!
"RTN","SROALCSP",47,0)
 Q
"RTN","SROALCSP",48,0)
LINE W ! F L=1:1:132 W "-"
"RTN","SROALCSP",49,0)
 Q
"RTN","SROALDP")
0^22^B3261436^B3823974
"RTN","SROALDP",1,0)
SROALDP ;BIR/MAM - DISPLAY PREOP LABS ;06/27/06
"RTN","SROALDP",2,0)
 ;;3.0; Surgery ;**38,47,81,125,153**;24 Jun 93;Build 11
"RTN","SROALDP",3,0)
 S SRPAGE="PAGE: 1 OF 2",SRHDR(.5)="LATEST PREOP LAB RESULTS IN 90 DAYS PRIOR TO SURGERY UNLESS OTHERWISE SPECIFIED" D HDR^SROAUTL
"RTN","SROALDP",4,0)
 W !," 1. Anion Gap (in 48 hrs.):",?28,$J($P(SRAO(1),"^"),6),?38,$P(SRAO(1),"^",2)
"RTN","SROALDP",5,0)
 W !," 2. Serum Sodium: ",?28,$J($P(SRAO(2),"^"),6),?38,$P(SRAO(2),"^",2)
"RTN","SROALDP",6,0)
 W !," 3. BUN:",?28,$J($P(SRAO(3),"^"),6),?38,$P(SRAO(3),"^",2)
"RTN","SROALDP",7,0)
 W !," 4. Serum Creatinine: ",?28,$J($P(SRAO(4),"^"),6),?38,$P(SRAO(4),"^",2)
"RTN","SROALDP",8,0)
 W !," 5. Serum Albumin:",?28,$J($P(SRAO(5),"^"),6),?38,$P(SRAO(5),"^",2)
"RTN","SROALDP",9,0)
 W !," 6. Total Bilirubin:",?28,$J($P(SRAO(6),"^"),6),?38,$P(SRAO(6),"^",2)
"RTN","SROALDP",10,0)
 W !," 7. SGOT:",?28,$J($P(SRAO(7),"^"),6),?38,$P(SRAO(7),"^",2)
"RTN","SROALDP",11,0)
 W !," 8. Alkaline Phosphatase:",?28,$J($P(SRAO(8),"^"),6),?38,$P(SRAO(8),"^",2)
"RTN","SROALDP",12,0)
 W !," 9. WBC:",?28,$J($P(SRAO(9),"^"),6),?38,$P(SRAO(9),"^",2)
"RTN","SROALDP",13,0)
 W !,"10. Hematocrit:",?28,$J($P(SRAO(10),"^"),6),?38,$P(SRAO(10),"^",2)
"RTN","SROALDP",14,0)
 W !,"11. Platelet Count:",?28,$J($P(SRAO(11),"^"),6),?38,$P(SRAO(11),"^",2)
"RTN","SROALDP",15,0)
 W !,"12. PTT: ",?28,$J($P(SRAO(12),"^"),6),?38,$P(SRAO(12),"^",2)
"RTN","SROALDP",16,0)
 W !,"13. PT: ",?28,$J($P(SRAO(13),"^"),6),?38,$P(SRAO(13),"^",2)
"RTN","SROALDP",17,0)
 W !,"14. INR: ",?28,$J($P(SRAO(14),"^"),6),?38,$P(SRAO(14),"^",2)
"RTN","SROALDP",18,0)
 W !! F MOE=1:1:80 W "-"
"RTN","SROALDP",19,0)
 Q
"RTN","SROALEN")
0^21^B11769217^B11768487
"RTN","SROALEN",1,0)
SROALEN ;BIR/MAM - LAB INFO ;01/27/06
"RTN","SROALEN",2,0)
 ;;3.0; Surgery ;**38,100,125,153**;24 Jun 93;Build 11
"RTN","SROALEN",3,0)
 I '$D(SRTN) W !!,"A Surgery Risk Assessment must be selected prior to using this option.",!!,"Press <RET> to continue  " R X:DTIME G END
"RTN","SROALEN",4,0)
 S SRSOUT=0 D ^SROAUTL
"RTN","SROALEN",5,0)
START G:SRSOUT END K SRA,SRAO D ^SROALN1,^SROALDP
"RTN","SROALEN",6,0)
ASK W !!,"Select Preoperative Laboratory Information to Edit: " R X:DTIME I '$T!(X["^") S SRSOUT=1 D CONCC G END
"RTN","SROALEN",7,0)
 I X="" D CONCC,^SROALN2 G END
"RTN","SROALEN",8,0)
 S:X="a" X="A" I '$D(SRAO(X)),(X'?.N1":".N),(X'="A") D HELP G:SRSOUT END G START
"RTN","SROALEN",9,0)
 I X="A" S X="1:14"
"RTN","SROALEN",10,0)
 I X?.N1":".N S Y=$E(X),Z=$P(X,":",2) I Y<1!(Z>14)!(Y>Z) D HELP G:SRSOUT END G START
"RTN","SROALEN",11,0)
 S SRPAGE="" D HDR^SROAUTL
"RTN","SROALEN",12,0)
 I X?.N1":".N D RANGE G START
"RTN","SROALEN",13,0)
 I $D(SRAO(X)) S EMILY=X D  G START
"RTN","SROALEN",14,0)
 .I $$LOCK^SROUTL(SRTN) D ONE,UNLOCK^SROUTL(SRTN)
"RTN","SROALEN",15,0)
END W @IOF
"RTN","SROALEN",16,0)
 Q
"RTN","SROALEN",17,0)
HELP W @IOF,!!!!,"Enter the number or range of numbers you want to edit.  Examples of proper",!,"responses are listed below."
"RTN","SROALEN",18,0)
 W !!,"1. Enter 'A' to update all information.",!!,"2. Enter a number (1-14) to update the information in that field.  (For",!,"   example, enter '3' to update Preoperative BUN)"
"RTN","SROALEN",19,0)
 W !!,"3. Enter a range of numbers (1-14) separated by a ':' to enter a range of",!,"   information.  (For example, enter '2:4' to update Serum Sodium,",!,"   BUN, and Serum Creatinine)"
"RTN","SROALEN",20,0)
 W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1
"RTN","SROALEN",21,0)
 Q
"RTN","SROALEN",22,0)
RANGE ; range of numbers
"RTN","SROALEN",23,0)
 I $$LOCK^SROUTL(SRTN) D  D UNLOCK^SROUTL(SRTN)
"RTN","SROALEN",24,0)
 .S SRNOMORE=0,SHEMP=$P(X,":"),CURLEY=$P(X,":",2) F EMILY=SHEMP:1:CURLEY Q:SRNOMORE  D ONE
"RTN","SROALEN",25,0)
 Q
"RTN","SROALEN",26,0)
ONE ; edit one item
"RTN","SROALEN",27,0)
 I EMILY>14 K DR,DIE S DA=SRTN,DR=$P(SRAO(EMILY),"^",4)_"T;"_$P(SRAO(EMILY),"^",5)_"T;"_$P(SRAO(EMILY),"^",6)_"T",DIE=130 D ^DIE S:$D(Y) SRNOMORE=1 K DR Q
"RTN","SROALEN",28,0)
 K DR,DIE S DA=SRTN,DR=$P(SRAO(EMILY),"^",3)_"T;"_$P(SRAO(EMILY),"^",4)_"T",DIE=130 D ^DIE S:$D(Y) SRNOMORE=1 K DR
"RTN","SROALEN",29,0)
 Q
"RTN","SROALEN",30,0)
RET Q:SRSOUT  W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROALEN",31,0)
 Q
"RTN","SROALEN",32,0)
CONCC ; check for concurrent case and update if one exists
"RTN","SROALEN",33,0)
 Q:'$$LOCK^SROUTL(SRTN)
"RTN","SROALEN",34,0)
 S SRCON=$P($G(^SRF(SRTN,"CON")),"^") Q:'SRCON
"RTN","SROALEN",35,0)
 S SRI="" F  S SRI=$O(SRAO(SRI)) Q:SRI=""  S S1=$P(SRAO(SRI),"^",3),S2=$P(SRAO(SRI),"^",4) K DA,DIC,DIQ,DR,SRY D
"RTN","SROALEN",36,0)
 .S DA=SRTN,DR=S1_";"_S2,DIC="^SRF(",DIQ="SRY",DIQ(0)="I" D EN^DIQ1 S P1=SRY(130,SRTN,S1,"I") S:P1="" P1="@" S P2=SRY(130,SRTN,S2,"I") S:P2="" P2="@"
"RTN","SROALEN",37,0)
 .K DA,DIE,DR S DA=SRCON,DIE=130,DR=S1_"////"_P1_";"_S2_"////"_P2 D ^DIE K DR
"RTN","SROALEN",38,0)
 D UNLOCK^SROUTL(SRTN)
"RTN","SROALEN",39,0)
 Q
"RTN","SROALET")
0^12^B21039720^B20305580
"RTN","SROALET",1,0)
SROALET ;BIR/MAM - PRINT 30 DAY LETTER ;01/26/06
"RTN","SROALET",2,0)
 ;;3.0; Surgery ;**38,63,95,98,113,153**;24 Jun 93;Build 11
"RTN","SROALET",3,0)
 K VADM,VAPA I $P($G(^SRF(SRTN,30)),"^")!'$P($G(^SRF(SRTN,.2)),"^",12) Q
"RTN","SROALET",4,0)
 S SR("RA")=$G(^SRF(SRTN,"RA")) I $P(SR("RA"),"^",6)["N" Q
"RTN","SROALET",5,0)
 I $P(SR("RA"),"^")="" Q
"RTN","SROALET",6,0)
 S DFN=$P(^SRF(SRTN,0),"^") S X=$G(^DPT(DFN,.35)) Q:$P(X,"^")'=""  ; no letter if deceased
"RTN","SROALET",7,0)
 S VAINDT="NOW" D INP^VADPT I $G(VAIN(1)) Q  ; no letter if inpatient
"RTN","SROALET",8,0)
 D DEM^VADPT,ADD^VADPT
"RTN","SROALET",9,0)
 S SRANAME=$P(VADM(1),"^"),X=$P(SRANAME,",") D
"RTN","SROALET",10,0)
 .I X["-" N SRNM,J,Z D  Q
"RTN","SROALET",11,0)
 ..F J=1:1 S Z=$P(X,"-",J) Q:Z=""  S SRNM(J)=$E(Z)_$TR($E(Z,2,$L(Z)),"ABCDEFGHIJKLMNOPQRSTUVWXYZ","abcdefghijklmnopqrstuvwxyz")
"RTN","SROALET",12,0)
 ..S Y=SRNM(1) F J=2:1 Q:'$D(SRNM(J))  S Y=Y_"-"_SRNM(J)
"RTN","SROALET",13,0)
 .S Y=$E(X)_$TR($E(X,2,$L(X)),"ABCDEFGHIJKLMNOPQRSTUVWXYZ","abcdefghijklmnopqrstuvwxyz")
"RTN","SROALET",14,0)
 S TITLE=$S($P(VADM(5),"^")="F":"Ms. ",1:"Mr. "),SRANAME=TITLE_Y
"RTN","SROALET",15,0)
 S SRADATE=$E(SRSDATE,4,5)_"/"_$E(SRSDATE,6,7)_"/"_$E(SRSDATE,2,3)
"RTN","SROALET",16,0)
 S Y=DT D D^DIQ S SRDT=Y
"RTN","SROALET",17,0)
 S SEX=$P(VADM(5),"^")
"RTN","SROALET",18,0)
 S SRNM=$P(VADM(1),",",2)_" "_$P(VADM(1),",")
"RTN","SROALET",19,0)
 W:$Y @IOF W !!!!!!!!!!,?4,SRNM,?60,SRDT
"RTN","SROALET",20,0)
 N SRCCADD S SRCCADD=0 D CCADD
"RTN","SROALET",21,0)
 I 'SRCCADD S STATE="" I VAPA(5) S STATE=$P(^DIC(5,$P(VAPA(5),"^"),0),"^",2)
"RTN","SROALET",22,0)
 I 'SRCCADD W !,?4,VAPA(1) W:$G(VAPA(2))'="" !,?4,VAPA(2) W:$G(VAPA(3))'="" !,?4,VAPA(3) W:VAPA(4)'="" !,?4,VAPA(4)_", "_STATE_" "_VAPA(6)
"RTN","SROALET",23,0)
 W !!!,?4,"Dear "_SRANAME_","
"RTN","SROALET",24,0)
MM ;
"RTN","SROALET",25,0)
 N SRDIV S SRDIV=$$SITE^SROUTL0(SRTN) I 'SRDIV D DFLT Q
"RTN","SROALET",26,0)
 I '$O(^SRO(133,SRDIV,5,0)) D DFLT Q
"RTN","SROALET",27,0)
 W ! S SRLINE=0 F  S SRLINE=$O(^SRO(133,SRDIV,5,SRLINE)) Q:'SRLINE  W !,?4,^SRO(133,SRDIV,5,SRLINE,0)
"RTN","SROALET",28,0)
 Q
"RTN","SROALET",29,0)
DFLT W !!,?4,"One month ago, you had an operation at the VA Medical Center.  We are",!,?4,"interested in how you feel.  Have you had any health problems since your",!,?4,"operation ?  We would like to hear from you.  Please take a few minutes"
"RTN","SROALET",30,0)
 W !,?4,"to answer these questions and return this letter in the self-addressed",!,?4,"stamped envelope."
"RTN","SROALET",31,0)
 W !!,?4,"Have you been to a hospital or seen a doctor for any reason since your",!,?4,"operation ?   ___ Yes  ___ No"
"RTN","SROALET",32,0)
 W !!,?4,"If you answered NO, you do not need to answer any more questions.  Please",!,?4,"return this sheet in the self-addressed stamped envelope."
"RTN","SROALET",33,0)
 W !!,?4,"If you have answered YES, please answer the following questions.",!!,?7,"1) Have you been seen in an outpatient clinic or doctor's office ? "
"RTN","SROALET",34,0)
 W !,?10,"___ Yes  ___ No",!!,?10,"Why did you go to the clinic or doctor's office ? ________________"
"RTN","SROALET",35,0)
 W !!,?10,"Where ? (name and location) _____________________  Date ? ________"
"RTN","SROALET",36,0)
 W !!,?10,"Who was your doctor ? ____________________________________________"
"RTN","SROALET",37,0)
 W !!!,?7,"2) Were you admitted to a hospital ?  ___ Yes  ___ No",!!,?10,"Why did you go to the hospital ? _________________________________"
"RTN","SROALET",38,0)
 W !!,?10,"Where ? (name and location) _____________________  Date ? ________"
"RTN","SROALET",39,0)
 W !!,?10,"Who was your doctor ? ____________________________________________"
"RTN","SROALET",40,0)
 W !!!,?4,"Please return this letter whether or not you have had any medical problems.",!,?4,"Your health and opinion are important to us.  Thank You.",!!,?4,"Sincerely,",!!!,?4,"Surgical Clinical Nurse Reviewer"
"RTN","SROALET",41,0)
 Q
"RTN","SROALET",42,0)
 ;
"RTN","SROALET",43,0)
CCADD ; Get Confidential Correspondence Address if one is active
"RTN","SROALET",44,0)
 ; and has the category "all other".
"RTN","SROALET",45,0)
 ;
"RTN","SROALET",46,0)
 N NSTATE S NSTATE=""
"RTN","SROALET",47,0)
 ; See if CC address exists
"RTN","SROALET",48,0)
 I '$G(VAPA(12)) Q
"RTN","SROALET",49,0)
 ; code to check the CC category in the variable array VAPA(22)
"RTN","SROALET",50,0)
 I $P($G(VAPA(22,5)),"^",3)'="Y" Q
"RTN","SROALET",51,0)
 ; if the category "All Other" is active, set SRCCADD=1 and print the CC address
"RTN","SROALET",52,0)
 S SRCCADD=1
"RTN","SROALET",53,0)
 S:$G(VAPA(17)) NSTATE=$P(^DIC(5,$P(VAPA(17),"^"),0),"^",2)
"RTN","SROALET",54,0)
 W:$G(VAPA(13))'="" !,?4,VAPA(13) W:$G(VAPA(14))'="" !,?4,VAPA(14) W:$G(VAPA(15))'="" !,?4,VAPA(15) W:$G(VAPA(16))'="" !,?4,VAPA(16)_", "_NSTATE_" "_$P(VAPA(18),"^",2)
"RTN","SROALET",55,0)
 Q
"RTN","SROALL")
0^91^B13021527^B14403320
"RTN","SROALL",1,0)
SROALL ;BIR/MAM - ALL ASSESSMENTS ;03/27/06
"RTN","SROALL",2,0)
 ;;3.0; Surgery ;**32,38,47,55,50,88,142,153**;24 Jun 93;Build 11
"RTN","SROALL",3,0)
 I $E(IOST)="P" D ^SROALLP Q
"RTN","SROALL",4,0)
 S SRSOUT=0 D HDR F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  I $D(^SRF(SRTN,0)),$$DIV^SROUTL0(SRTN) D SET
"RTN","SROALL",5,0)
 Q
"RTN","SROALL",6,0)
SET ; print assessments
"RTN","SROALL",7,0)
 I $Y+5>IOSL D PAGE I SRSOUT Q
"RTN","SROALL",8,0)
 S SRA(0)=^SRF(SRTN,0) I $P(SRA(0),"^",3)'="J" Q
"RTN","SROALL",9,0)
 I $G(SRMNA),($P($G(^SRF(SRTN,"RA")),"^",2))'="" Q
"RTN","SROALL",10,0)
 S CAN=$P($G(^SRF(SRTN,30)),"^") I CAN Q
"RTN","SROALL",11,0)
 S CAN=$P($G(^SRF(SRTN,31)),"^",8) I CAN'="" Q
"RTN","SROALL",12,0)
 I '$P($G(^SRF(SRTN,.2)),"^",12) Q:'$G(SRMNA)  I '$P($G(^SRF(SRTN,.2)),"^",3) Q
"RTN","SROALL",13,0)
 S DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALL",14,0)
 I $L(SRANM)>19 S SRANM=$P(SRANM,",")_","_$E($P(SRANM,",",2))_"."
"RTN","SROALL",15,0)
 S SREXCL="" I '$G(SRMNA) D
"RTN","SROALL",16,0)
 .S SRA("RA")=$G(^SRF(SRTN,"RA")),X=$P(SRA("RA"),"^"),STATUS=$S(X="I":"INCOMPLETE",X="C":"COMPLETED",X="T":"TRANSMITTED",1:"NO ASSESSMENT")
"RTN","SROALL",17,0)
 .S (SREXCL,Y)=$P(SRA("RA"),"^",7),C=$P(^DD(130,102,0),"^",2) D Y^DIQ S SREXCL=Y
"RTN","SROALL",18,0)
 S SROPER=$P(^SRF(SRTN,"OP"),"^") I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALL",19,0)
 I '$G(SRMNA) S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROALL",20,0)
 K SROPS,MM,MMM S:$L(SROPER)<34 SROPS(1)=SROPER I $L(SROPER)>33 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALL",21,0)
 S SRSS=$P(SRA(0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALL",22,0)
 D TECH^SROPRIN
"RTN","SROALL",23,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALL",24,0)
 W !,SRTN,?20,SRANM_" "_VA("PID"),?55,$P(SRSS,"("),!,SRDT,?20,SROPS(1),?55,SRTECH
"RTN","SROALL",25,0)
 I $G(SRMNA),$D(SROPS(2)) W !,?20,SROPS(2)
"RTN","SROALL",26,0)
 I '$G(SRMNA) W !,$S('$G(SRMNA):STATUS,1:"") W:$D(SROPS(2)) ?20,SROPS(2) I SREXCL'="" W ?55,SREXCL
"RTN","SROALL",27,0)
 I $D(SROPS(3)) W !,?20,SROPS(3) I $D(SROPS(4)) W !,?20,SROPS(4)
"RTN","SROALL",28,0)
 I SREXCL="",$D(SROPS(3)) W !,?20,SROPS(3) I $D(SROPS(4)) W !,?20,SROPS(4)
"RTN","SROALL",29,0)
 N I,SRPROC,SRL S SRL=48 D CPTS^SROAUTL0 W !,?20,"CPT Codes: "
"RTN","SROALL",30,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?31,SRPROC(I) W:I'=1 !,?31,SRPROC(I)
"RTN","SROALL",31,0)
 W ! F LINE=1:1:80 W "-"
"RTN","SROALL",32,0)
 Q
"RTN","SROALL",33,0)
OTHER ; other operations
"RTN","SROALL",34,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>125 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROALL",35,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALL",36,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALL",37,0)
 Q
"RTN","SROALL",38,0)
LOOP ; break procedures
"RTN","SROALL",39,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<34  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALL",40,0)
 Q
"RTN","SROALL",41,0)
PAGE W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROALL",42,0)
 I X["?" W !!,"If you want to continue listing incomplete assessments, enter <RET>.  Enter",!,"'^' to return to the menu." G PAGE
"RTN","SROALL",43,0)
HDR S SRHD=$S($G(SRMNA):"NON-ASSESSED MAJOR SURGICAL CASES",1:"ALL MAJOR SURGICAL CASES")
"RTN","SROALL",44,0)
 W @IOF,!,?(80-$L(SRHD)\2),SRHD,!,?(80-$L(SRFRTO)\2),SRFRTO
"RTN","SROALL",45,0)
 W !!,"CASE #",?20,"PATIENT",?55,"SURGICAL SPECIALTY",!,"OPERATION DATE",?20,"OPERATIVE PROCEDURE(S)",?55,"ANESTHESIA TECHNIQUE"
"RTN","SROALL",46,0)
 I '$G(SRMNA) W !,"ASSESSMENT STATUS",?55,"EXCLUSION CRITERIA"
"RTN","SROALL",47,0)
 W ! F LINE=1:1:80 W "="
"RTN","SROALL",48,0)
 Q
"RTN","SROALLP")
0^94^B12596044^B12421048
"RTN","SROALLP",1,0)
SROALLP ;BIR/MAM - MAJOR CASES ;04/03/06
"RTN","SROALLP",2,0)
 ;;3.0; Surgery ;**32,47,55,50,88,142,153**;24 Jun 93;Build 11
"RTN","SROALLP",3,0)
 S SRPAGE=1,(SRSOUT,SRDFN)=0 D HDR Q:SRSOUT
"RTN","SROALLP",4,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  I $D(^SRF(SRTN,0)),$$DIV^SROUTL0(SRTN) D SET
"RTN","SROALLP",5,0)
 Q
"RTN","SROALLP",6,0)
SET ; print assessments
"RTN","SROALLP",7,0)
 I $Y+5>IOSL S SRPAGE=SRPAGE+1 D HDR I SRSOUT Q
"RTN","SROALLP",8,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALLP",9,0)
 I $P(SRA(0),"^",3)'="J" Q
"RTN","SROALLP",10,0)
 I $G(SRMNA),($P($G(^SRF(SRTN,"RA")),"^",2))'="" Q
"RTN","SROALLP",11,0)
 S CAN=$P($G(^SRF(SRTN,30)),"^") I CAN Q
"RTN","SROALLP",12,0)
 S CAN=$P($G(^SRF(SRTN,31)),"^",8) I CAN'="" Q
"RTN","SROALLP",13,0)
 I '$P($G(^SRF(SRTN,.2)),"^",12) Q:'$G(SRMNA)  I '$P($G(^SRF(SRTN,.2)),"^",3) Q
"RTN","SROALLP",14,0)
 S SREXCL="" I '$G(SRMNA) D
"RTN","SROALLP",15,0)
 .S SRA("RA")=$G(^SRF(SRTN,"RA")),X=$P(SRA("RA"),"^"),STATUS=$S(X="I":"INCOMPLETE",X="C":"COMPLETED",X="T":"TRANSMITTED",1:"NO ASSESSMENT")
"RTN","SROALLP",16,0)
 .S (SREXCL,Y)=$P(SRA("RA"),"^",7),C=$P(^DD(130,102,0),"^",2) D Y^DIQ S SREXCL=Y
"RTN","SROALLP",17,0)
 S SROPER=$P(^SRF(SRTN,"OP"),"^") I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALLP",18,0)
 I '$G(SRMNA) S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROALLP",19,0)
 K SROPS,MM,MMM S:$L(SROPER)<34 SROPS(1)=SROPER I $L(SROPER)>33 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALLP",20,0)
 S SRSS=$P(SRA(0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALLP",21,0)
 D TECH^SROPRIN
"RTN","SROALLP",22,0)
 S (SRDOC,Y)=$P($G(^SRF(SRTN,.1)),"^",4),C=$P(^DD(130,.14,0),"^",2) D:Y'="" Y^DIQ I $L(Y)>24 S Z=$P(Y,",")_","_$E($P(Y,",",2))_".",Y=Z
"RTN","SROALLP",23,0)
 S SRDOC=Y
"RTN","SROALLP",24,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALLP",25,0)
 W !,SRTN,?20,SRANM_" "_VA("PID"),?67,$P(SRSS,"("),?107,SRTECH,!,SRDT,?20,SROPS(1)
"RTN","SROALLP",26,0)
 I '$G(SRMNA) W ?67,STATUS,?107,SREXCL
"RTN","SROALLP",27,0)
 I $G(SRMNA) W ?67,SRDOC
"RTN","SROALLP",28,0)
 I $D(SROPS(2)) W !,?20,SROPS(2) I $D(SROPS(3)) W !,?20,SROPS(3) I $D(SROPS(4)) W !,?20,SROPS(4)
"RTN","SROALLP",29,0)
 N I,SRPROC,SRL S SRL=100 D CPTS^SROAUTL0 W !,?20,"CPT Codes: "
"RTN","SROALLP",30,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?31,SRPROC(I) W:I'=1 !,?31,SRPROC(I)
"RTN","SROALLP",31,0)
 W ! F LINE=1:1:132 W "-"
"RTN","SROALLP",32,0)
 Q
"RTN","SROALLP",33,0)
OTHER ; other operations
"RTN","SROALLP",34,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>165 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROALLP",35,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALLP",36,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALLP",37,0)
 Q
"RTN","SROALLP",38,0)
LOOP ; break procedures
"RTN","SROALLP",39,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<44  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALLP",40,0)
 Q
"RTN","SROALLP",41,0)
HDR ; print heading
"RTN","SROALLP",42,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SROALLP",43,0)
 S SRTITLE=$S($G(SRMNA):"NON-ASSESSED MAJOR SURGICAL CASES",1:"ALL MAJOR SURGICAL CASES")
"RTN","SROALLP",44,0)
 W:$Y @IOF W !,?(132-$L(SRTITLE)\2),SRTITLE,?120,"PAGE "_SRPAGE,!,?(132-$L(SRINST)\2),SRINST,!,?58,"SURGERY SERVICE",?100,"DATE REVIEWED:"
"RTN","SROALLP",45,0)
 W !,?(132-$L(SRFRTO)\2),SRFRTO,?100,"REVIEWED BY:"
"RTN","SROALLP",46,0)
 W !!,"CASE #",?20,"PATIENT",?67,"SURGICAL SPECIALTY",?107,"ANESTHESIA TECHNIQUE",!,"OPERATION DATE",?20,"OPERATIVE PROCEDURE(S)"
"RTN","SROALLP",47,0)
 I '$G(SRMNA) W ?67,"ASSESSMENT STATUS",?107,"EXCLUSION CRITERIA"
"RTN","SROALLP",48,0)
 E  W ?67,"SURGEON"
"RTN","SROALLP",49,0)
 W ! F LINE=1:1:132 W "="
"RTN","SROALLP",50,0)
 Q
"RTN","SROALLS")
0^92^B19116558^B18743963
"RTN","SROALLS",1,0)
SROALLS ;BIR/ADM - MAJOR CASES BY SPECIALTY ;04/03/06
"RTN","SROALLS",2,0)
 ;;3.0; Surgery ;**32,38,47,55,50,88,142,153**;24 Jun 93;Build 11
"RTN","SROALLS",3,0)
 I $E(IOST)="P" D ^SROALLSP Q
"RTN","SROALLS",4,0)
START S SRSOUT=0 K ^TMP("SRA",$J)
"RTN","SROALLS",5,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  I $D(^SRF(SRTN,0)),$$DIV^SROUTL0(SRTN) D UTL
"RTN","SROALLS",6,0)
 D PRINT Q
"RTN","SROALLS",7,0)
UTL ; write to ^TMP("SRA,$J)
"RTN","SROALLS",8,0)
 S SRA(0)=^SRF(SRTN,0) I $P(SRA(0),"^",3)'="J" Q
"RTN","SROALLS",9,0)
 I $G(SRMNA),($P($G(^SRF(SRTN,"RA")),"^",2))'="" Q
"RTN","SROALLS",10,0)
 S CAN=$P($G(^SRF(SRTN,30)),"^") I CAN Q
"RTN","SROALLS",11,0)
 S CAN=$P($G(^SRF(SRTN,31)),"^",8) I CAN'="" Q
"RTN","SROALLS",12,0)
 I '$P($G(^SRF(SRTN,.2)),"^",12) Q:'$G(SRMNA)  I '$P($G(^SRF(SRTN,.2)),"^",3) Q
"RTN","SROALLS",13,0)
 I SRFLG,$P(^SRF(SRTN,0),"^",4)'=SRASP Q
"RTN","SROALLS",14,0)
 S SRSS=$P(^SRF(SRTN,0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALLS",15,0)
 S ^TMP("SRA",$J,SRSS,SRTN)=""
"RTN","SROALLS",16,0)
 Q
"RTN","SROALLS",17,0)
SET ; set variables
"RTN","SROALLS",18,0)
 S SREXCL="" I '$G(SRMNA) D
"RTN","SROALLS",19,0)
 .S SRA("RA")=$G(^SRF(SRTN,"RA")),X=$P(SRA("RA"),"^"),STATUS=$S(X="I":"INCOMPLETE",X="C":"COMPLETED",X="T":"TRANSMITTED",1:"NO ASSESSMENT")
"RTN","SROALLS",20,0)
 .S (SREXCL,Y)=$P(SRA("RA"),"^",7),C=$P(^DD(130,102,0),"^",2) D Y^DIQ S SREXCL=Y
"RTN","SROALLS",21,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALLS",22,0)
 I $L(SRANM)>19 S SRANM=$P(SRANM,",")_","_$E($P(SRANM,",",2))_"."
"RTN","SROALLS",23,0)
 S SROPER=$P(^SRF(SRTN,"OP"),"^") I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALLS",24,0)
 I '$G(SRMNA) S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROALLS",25,0)
 K SROPS,MM,MMM S:$L(SROPER)<34 SROPS(1)=SROPER I $L(SROPER)>33 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALLS",26,0)
 S SRSS=$P(SRA(0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALLS",27,0)
 D TECH^SROPRIN
"RTN","SROALLS",28,0)
 S (SRDOC,Y)=$P($G(^SRF(SRTN,.1)),"^",4),C=$P(^DD(130,.14,0),"^",2) D:Y'="" Y^DIQ I $L(Y)>18 S Z=$P(Y,",")_","_$E($P(Y,",",2))_".",Y=Z
"RTN","SROALLS",29,0)
 S SRDOC=Y
"RTN","SROALLS",30,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALLS",31,0)
 Q
"RTN","SROALLS",32,0)
PRINT ;
"RTN","SROALLS",33,0)
 U IO S SRSS="",SRTC=0 D HDR
"RTN","SROALLS",34,0)
 F  S SRSS=$O(^TMP("SRA",$J,SRSS)) Q:SRSS=""!SRSOUT  S SRC=0 D SS S SRTN=0 F  S SRTN=$O(^TMP("SRA",$J,SRSS,SRTN)) D:'SRTN SSCT Q:'SRTN!SRSOUT  D SET,CASE Q:SRSOUT
"RTN","SROALLS",35,0)
 Q:SRSOUT!SRFLG  I $Y+5>IOSL D PAGE Q:SRSOUT
"RTN","SROALLS",36,0)
 W !!,"TOTAL MAJOR CASES FOR ALL SPECIALTIES: ",SRTC
"RTN","SROALLS",37,0)
 Q
"RTN","SROALLS",38,0)
CASE ; print a case
"RTN","SROALLS",39,0)
 S SRC=SRC+1,SRTC=SRTC+1
"RTN","SROALLS",40,0)
 I $Y+5>IOSL D PAGE Q:SRSOUT
"RTN","SROALLS",41,0)
 W !,SRTN,?20,SRANM_"  "_VA("PID"),?55,SRTECH
"RTN","SROALLS",42,0)
 W !,SRDT,?20,SROPS(1) I $G(SRMNA) W ?55,SRDOC
"RTN","SROALLS",43,0)
 I '$G(SRMNA) W ?55,STATUS
"RTN","SROALLS",44,0)
 I '$G(SRMNA),(SREXCL'="") W ! W:$D(SROPS(2)) ?20,SROPS(2) W ?55,SREXCL I $D(SROPS(3)) W !,?20,SROPS(3) I $D(SROPS(4)) W !,?20,SROPS(4)
"RTN","SROALLS",45,0)
 I SREXCL="",$D(SROPS(2)) W !,?20,SROPS(2) I $D(SROPS(3)) W !,?20,SROPS(3) I $D(SROPS(4)) W !,?20,SROPS(4)
"RTN","SROALLS",46,0)
 N I,SRPROC,SRL S SRL=48 D CPTS^SROAUTL0 W !,?20,"CPT Codes: "
"RTN","SROALLS",47,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?31,SRPROC(I) W:I'=1 !,?31,SRPROC(I)
"RTN","SROALLS",48,0)
 W ! F LINE=1:1:80 W "-"
"RTN","SROALLS",49,0)
 Q
"RTN","SROALLS",50,0)
SS ; print surgical specialty
"RTN","SROALLS",51,0)
 I $Y+5>IOSL D PAGE Q:SRSOUT
"RTN","SROALLS",52,0)
 W !,"** SURGICAL SPECIALTY: ",SRSS," **",! Q
"RTN","SROALLS",53,0)
PAGE W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROALLS",54,0)
 I X["?" W !!,"If you want to continue listing assessments, enter <RET>.  Enter '^' to",!,"return to the menu." G PAGE
"RTN","SROALLS",55,0)
HDR ; print heading
"RTN","SROALLS",56,0)
 S SRHD=$S($G(SRMNA):"NON-ASSESSED MAJOR SURGICAL CASES BY SURGICAL SPECIALTY",1:"ALL MAJOR SURGICAL CASES BY SURGICAL SPECIALTY")
"RTN","SROALLS",57,0)
 W @IOF,!,?(80-$L(SRHD)\2),SRHD,!,?(80-$L(SRFRTO)\2),SRFRTO
"RTN","SROALLS",58,0)
 W !!,"CASE #",?20,"PATIENT",?55,"ANESTHESIA TECHNIQUE"
"RTN","SROALLS",59,0)
 W !,"OPERATION DATE",?20,"OPERATIVE PROCEDURE(S)"
"RTN","SROALLS",60,0)
 I '$G(SRMNA) W ?55,"ASSESSMENT STATUS"
"RTN","SROALLS",61,0)
 E  W ?55,"SURGEON"
"RTN","SROALLS",62,0)
 I '$G(SRMNA) W !,?55,"EXCLUSION CRITERIA"
"RTN","SROALLS",63,0)
 W ! F L=1:1:80 W "="
"RTN","SROALLS",64,0)
 W ! Q
"RTN","SROALLS",65,0)
OTHER ; other operations
"RTN","SROALLS",66,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>125 S SRLONG=0,OPER=999,SROPERS=" ..."
"RTN","SROALLS",67,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALLS",68,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALLS",69,0)
 Q
"RTN","SROALLS",70,0)
LOOP ; break procedures
"RTN","SROALLS",71,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<34  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALLS",72,0)
 Q
"RTN","SROALLS",73,0)
SSCT ; write specialty count
"RTN","SROALLS",74,0)
 I $Y+5>IOSL D PAGE Q:SRSOUT
"RTN","SROALLS",75,0)
 W !,"TOTAL ",SRSS,": ",SRC,! F L=1:1:80 W "-"
"RTN","SROALLS",76,0)
 Q
"RTN","SROALLSP")
0^93^B20130210^B18389897
"RTN","SROALLSP",1,0)
SROALLSP ;BIR/ADM - ASSESSMENTS BY SPECIALTY (PRINTER) ;04/03/06
"RTN","SROALLSP",2,0)
 ;;3.0; Surgery ;**32,47,55,50,88,142,153**;24 Jun 93;Build 11
"RTN","SROALLSP",3,0)
START S SRSOUT=0 K ^TMP("SRA",$J)
"RTN","SROALLSP",4,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN  I $D(^SRF(SRTN,0)),$$DIV^SROUTL0(SRTN) D UTL
"RTN","SROALLSP",5,0)
 D PRINT Q
"RTN","SROALLSP",6,0)
UTL ; write to ^TMP("SRA,$J)
"RTN","SROALLSP",7,0)
 S SRA(0)=^SRF(SRTN,0) I $P(SRA(0),"^",3)'="J" Q
"RTN","SROALLSP",8,0)
 I $G(SRMNA),($P($G(^SRF(SRTN,"RA")),"^",2))'="" Q
"RTN","SROALLSP",9,0)
 S CAN=$P($G(^SRF(SRTN,30)),"^") I CAN Q
"RTN","SROALLSP",10,0)
 S CAN=$P($G(^SRF(SRTN,31)),"^",8) I CAN'="" Q
"RTN","SROALLSP",11,0)
 I '$P($G(^SRF(SRTN,.2)),"^",12) Q:'$G(SRMNA)  I '$P($G(^SRF(SRTN,.2)),"^",3) Q
"RTN","SROALLSP",12,0)
 I SRFLG,$P(^SRF(SRTN,0),"^",4)'=SRASP Q
"RTN","SROALLSP",13,0)
 S SRSS=$P(^SRF(SRTN,0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALLSP",14,0)
 S TYPE=$P($G(^SRF(SRTN,"RA")),"^",2) I SRSS="SPECIALTY NOT ENTERED",TYPE="C" S SRSS="N/A"
"RTN","SROALLSP",15,0)
 S ^TMP("SRA",$J,SRSS,SRTN)=""
"RTN","SROALLSP",16,0)
 Q
"RTN","SROALLSP",17,0)
SET ; set variables
"RTN","SROALLSP",18,0)
 S SREXCL="" I '$G(SRMNA) D
"RTN","SROALLSP",19,0)
 .S SRA("RA")=$G(^SRF(SRTN,"RA")),X=$P(SRA("RA"),"^"),STATUS=$S(X="I":"INCOMPLETE",X="C":"COMPLETED",X="T":"TRANSMITTED",1:"NO ASSESSMENT")
"RTN","SROALLSP",20,0)
 .S (SREXCL,Y)=$P(SRA("RA"),"^",7),C=$P(^DD(130,102,0),"^",2) D Y^DIQ S SREXCL=Y
"RTN","SROALLSP",21,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALLSP",22,0)
 S SROPER=$P(^SRF(SRTN,"OP"),"^") I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALLSP",23,0)
 I '$G(SRMNA) S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROALLSP",24,0)
 K SROPS,MM,MMM
"RTN","SROALLSP",25,0)
 I $G(SRMNA) S:$L(SROPER)<85 SROPS(1)=SROPER I $L(SROPER)>84 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALLSP",26,0)
 I '$G(SRMNA) S:$L(SROPER)<44 SROPS(1)=SROPER I $L(SROPER)>43 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALLSP",27,0)
 S SRSS=$P(SRA(0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALLSP",28,0)
 D TECH^SROPRIN
"RTN","SROALLSP",29,0)
 S (SRDOC,Y)=$P($G(^SRF(SRTN,.1)),"^",4),C=$P(^DD(130,.14,0),"^",2) D:Y'="" Y^DIQ I $L(Y)>24 S Z=$P(Y,",")_","_$E($P(Y,",",2))_".",Y=Z
"RTN","SROALLSP",30,0)
 S SRDOC=Y
"RTN","SROALLSP",31,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALLSP",32,0)
 Q
"RTN","SROALLSP",33,0)
PRINT ;
"RTN","SROALLSP",34,0)
 U IO S SRSS="",(SRTC,SRPAGE)=0 D HDR Q:SRSOUT
"RTN","SROALLSP",35,0)
 F  S SRSS=$O(^TMP("SRA",$J,SRSS)) Q:SRSS=""!SRSOUT  S SRC=0 D SS S SRTN=0 F  S SRTN=$O(^TMP("SRA",$J,SRSS,SRTN)) D:'SRTN SSCT Q:'SRTN!SRSOUT  D SET,CASE
"RTN","SROALLSP",36,0)
 Q:SRFLG  I $Y+5>IOSL D HDR Q:SRSOUT
"RTN","SROALLSP",37,0)
 W !!,"TOTAL CASES FOR ALL SPECIALTIES: ",SRTC
"RTN","SROALLSP",38,0)
 Q
"RTN","SROALLSP",39,0)
CASE ; print a case
"RTN","SROALLSP",40,0)
 S SRC=SRC+1,SRTC=SRTC+1
"RTN","SROALLSP",41,0)
 I $Y+5>IOSL D HDR Q:SRSOUT  W !,"** SURGICAL SPECIALTY: ",SRSS," **",!
"RTN","SROALLSP",42,0)
 W !,SRTN,?20,SRANM_"  "_VA("PID") I '$G(SRMNA) W ?67,STATUS
"RTN","SROALLSP",43,0)
 W ?107,SRTECH,!,SRDT,?20,SROPS(1) I '$G(SRMNA),(SREXCL'="") W ?67,SREXCL
"RTN","SROALLSP",44,0)
 W ?107,SRDOC
"RTN","SROALLSP",45,0)
 I $D(SROPS(2)) W !,?20,SROPS(2) I $D(SROPS(3)) W !,?20,SROPS(3) I $D(SROPS(4)) W !,?20,SROPS(4)
"RTN","SROALLSP",46,0)
 N I,SRPROC,SRL S SRL=100 D CPTS^SROAUTL0 W !,?20,"CPT Codes: "
"RTN","SROALLSP",47,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?31,SRPROC(I) W:I'=1 !,?31,SRPROC(I)
"RTN","SROALLSP",48,0)
 W ! F LINE=1:1:132 W "-"
"RTN","SROALLSP",49,0)
 Q
"RTN","SROALLSP",50,0)
SS ; print surgical specialty
"RTN","SROALLSP",51,0)
 I $Y+5>IOSL D HDR Q:SRSOUT
"RTN","SROALLSP",52,0)
 W !,"** SURGICAL SPECIALTY: ",SRSS," **",!
"RTN","SROALLSP",53,0)
 Q
"RTN","SROALLSP",54,0)
HDR ; print heading
"RTN","SROALLSP",55,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SROALLSP",56,0)
 S SRHD=$S($G(SRMNA):"NON-ASSESSED MAJOR SURGICAL CASES BY SURGICAL SPECIALTY",1:"ALL MAJOR SURGICAL CASES BY SURGICAL SPECIALTY"),SRPAGE=SRPAGE+1
"RTN","SROALLSP",57,0)
 W:$Y @IOF W !,?(132-$L(SRHD)\2),SRHD,?120,"PAGE "_SRPAGE,!,?(132-$L(SRINST)\2),SRINST,!,?58,"SURGERY SERVICE",?100,"DATE REVIEWED:"
"RTN","SROALLSP",58,0)
 W !,?(132-$L(SRFRTO)\2),SRFRTO,?100,"REVIEWED BY:"
"RTN","SROALLSP",59,0)
 W !!,"CASE #",?20,"PATIENT" I '$G(SRMNA) W ?67,"ASSESSMENT STATUS"
"RTN","SROALLSP",60,0)
 W ?107,"ANESTHESIA TECHNIQUE",!,"OPERATION DATE",?20,"OPERATIVE PROCEDURE(S)"
"RTN","SROALLSP",61,0)
 W:'$G(SRMNA) ?67,"EXCLUSION CRITERIA" W ?107,"SURGEON"
"RTN","SROALLSP",62,0)
 W ! F L=1:1:132 W "="
"RTN","SROALLSP",63,0)
 Q
"RTN","SROALLSP",64,0)
OTHER ; other operations
"RTN","SROALLSP",65,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>165 S SRLONG=0,OPER=999,SROPERS=" ..."
"RTN","SROALLSP",66,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALLSP",67,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALLSP",68,0)
 Q
"RTN","SROALLSP",69,0)
LOOP ; break procedures
"RTN","SROALLSP",70,0)
 S SROPS(M)=""
"RTN","SROALLSP",71,0)
 I $G(SRMNA) F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<85  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALLSP",72,0)
 I '$G(SRMNA) F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<44  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALLSP",73,0)
 Q
"RTN","SROALLSP",74,0)
SSCT ; write specialty count
"RTN","SROALLSP",75,0)
 I $Y+5>IOSL D HDR Q:SRSOUT
"RTN","SROALLSP",76,0)
 W !," >>> TOTAL ",SRSS,": ",SRC,! F L=1:1:132 W "-"
"RTN","SROALLSP",77,0)
 Q
"RTN","SROALM")
0^95^B21272239^B21479758
"RTN","SROALM",1,0)
SROALM ;BIR/ADM - LIST OF ASSESSMENTS MISSING INFORMATION ;03/24/06
"RTN","SROALM",2,0)
 ;;3.0; Surgery ;**38,50,88,142,153**;24 Jun 93;Build 11
"RTN","SROALM",3,0)
 S (GRAND,SRNEW,SRSOUT,TOT)=0,(SRHDR,SRPAGE)=1,SRTITLE="COMPLETED/TRANSMITTED ASSESSMENTS MISSING INFORMATION" K ^TMP("SRA",$J)
"RTN","SROALM",4,0)
 I SRFLG,SRASP S SRSPEC=$P(^SRO(137.45,SRASP,0),"^")
"RTN","SROALM",5,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  D
"RTN","SROALM",6,0)
 .S SR("RA")=$G(^SRF(SRTN,"RA")) I $P(SR("RA"),"^")="C"!($P(SR("RA"),"^")="T"),$D(^SRF(SRTN,0)),$$DIV^SROUTL0(SRTN) D UTL
"RTN","SROALM",7,0)
 I SRSP S SRSS="" F  S SRSS=$O(^TMP("SRA",$J,SRSS)) Q:SRSS=""  D SRSD Q:SRSOUT  D:TOT TOT
"RTN","SROALM",8,0)
 I 'SRSP S SRNEW=1,(SRSD,TOT)=0 F  S SRSD=$O(^TMP("SRA",$J,SRSD)) Q:'SRSD!SRSOUT  S SRTN=0 F  S SRTN=$O(^TMP("SRA",$J,SRSD,SRTN)) Q:'SRTN  S SRA=^(SRTN) D CASE Q:SRSOUT
"RTN","SROALM",9,0)
 Q:SRSOUT  I SRSP,'SRFLG,GRAND D GRAND
"RTN","SROALM",10,0)
 I SRFLG,'GRAND S SRSS=SRSPEC D HDR,GRAND
"RTN","SROALM",11,0)
 I SRSP,'SRFLG,'GRAND S SRSS="" D HDR,GRAND
"RTN","SROALM",12,0)
 I 'SRSP,'GRAND S SRSS="" D HDR,GRAND
"RTN","SROALM",13,0)
 I 'SRSP,GRAND S SRSS="" D GRAND
"RTN","SROALM",14,0)
 Q
"RTN","SROALM",15,0)
UTL ; set up TMP global
"RTN","SROALM",16,0)
 I SRFLG,$P(^SRF(SRTN,0),"^",4)'=SRASP Q
"RTN","SROALM",17,0)
 I SRSP S SRSS=$P(^SRF(SRTN,0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED"),^TMP("SRA",$J,SRSS,SRSD,SRTN)=SR("RA") Q
"RTN","SROALM",18,0)
 S ^TMP("SRA",$J,SRSD,SRTN)=SR("RA")
"RTN","SROALM",19,0)
 Q
"RTN","SROALM",20,0)
SRSD S SRNEW=1,(SRSD,TOT)=0 F  S SRSD=$O(^TMP("SRA",$J,SRSS,SRSD)) Q:'SRSD!SRSOUT  S SRTN=0 F  S SRTN=$O(^TMP("SRA",$J,SRSS,SRSD,SRTN)) Q:'SRTN  S SRA=^(SRTN) D CASE Q:SRSOUT
"RTN","SROALM",21,0)
 Q
"RTN","SROALM",22,0)
CASE I $P(SRA,"^",2)="N",$P(SRA,"^",6)="Y" S SRATYPE="NON-CARDIAC" D CHK^SROAUTL
"RTN","SROALM",23,0)
 I $P(SRA,"^",2)="N",$P(SRA,"^",6)="N" S SRATYPE="EXCLUDED" D CHK^SROAUTL3
"RTN","SROALM",24,0)
 I $P(SRA,"^",2)="C" S SRATYPE="CARDIAC" D CHK^SROAUTLC
"RTN","SROALM",25,0)
 S SRFLD="" I $O(SRX(SRFLD))'="" S TOT=TOT+1,GRAND=GRAND+1 D PRINT
"RTN","SROALM",26,0)
 Q
"RTN","SROALM",27,0)
PRINT ; print assessments
"RTN","SROALM",28,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROALM",29,0)
 I $Y+5>IOSL!SRNEW D PAGE I SRSOUT Q
"RTN","SROALM",30,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALM",31,0)
 I $L(SRANM)>19 S SRANM=$P(SRANM,",")_","_$E($P(SRANM,",",2))_"."
"RTN","SROALM",32,0)
 S SROPER=$P(^SRF(SRTN,"OP"),"^") I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALM",33,0)
 K SROPS,MM,MMM S:$L(SROPER)<63 SROPS(1)=SROPER I $L(SROPER)>62 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALM",34,0)
 S SRSTATUS=$S($P(SRA,"^")="T":"TRANSMITTED",1:"COMPLETE"),Y=SRSD D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALM",35,0)
 I $Y+5>IOSL D PAGE I SRSOUT Q
"RTN","SROALM",36,0)
 W !,SRTN,?18,SRANM_" "_VA("PID"),?53,SRATYPE,?68,SRSTATUS,!,SRDT F I=1:1 Q:'$D(SROPS(I))  W ?18,SROPS(I),!
"RTN","SROALM",37,0)
 N I,SRPROC,SRL S SRL=100 D CPTS^SROAUTL0 W ?18,"CPT Codes: "
"RTN","SROALM",38,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?29,SRPROC(I) W:I'=1 !,?29,SRPROC(I)
"RTN","SROALM",39,0)
 S CNT=1 W !,?5,"Missing information:"
"RTN","SROALM",40,0)
 I '$P($G(^SRO(136,SRTN,10)),"^")!('$P($G(^SRO(136,SRTN,0)),"^",2))!('$P($G(^SRO(136,SRTN,0)),"^",3)) W !,$J(CNT_". ",8),"The final coding for Procedure and Diagnosis is not complete." S CNT=CNT+1
"RTN","SROALM",41,0)
 F  S SRFLD=$O(SRX(SRFLD)) Q:SRFLD=""  D:$Y+5>IOSL PAGE Q:SRSOUT  W !,$J(CNT_". ",8),SRX(SRFLD) S CNT=CNT+1
"RTN","SROALM",42,0)
 I 'SRSOUT W ! F LINE=1:1:80 W "-"
"RTN","SROALM",43,0)
 Q
"RTN","SROALM",44,0)
OTHER ; other operations
"RTN","SROALM",45,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>125 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROALM",46,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALM",47,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALM",48,0)
 Q
"RTN","SROALM",49,0)
LOOP ; break procedures
"RTN","SROALM",50,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<63  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALM",51,0)
 Q
"RTN","SROALM",52,0)
PAGE I $E(IOST)="P"!SRHDR G HDR
"RTN","SROALM",53,0)
 W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROALM",54,0)
 I X["?" W !!,"If you want to continue listing incomplete assessments, enter <RET>.  Enter",!,"'^' to return to the menu." G PAGE
"RTN","SROALM",55,0)
HDR ; print heading
"RTN","SROALM",56,0)
 W @IOF,!,?(80-$L(SRTITLE)\2),SRTITLE,?70,$J("PAGE "_SRPAGE,9) W:$E(IOST)="P" !,?(80-$L(SRINST)\2),SRINST W !,?(80-$L(SRFRTO)\2),SRFRTO
"RTN","SROALM",57,0)
 W:$E(IOST)="P" !,?(80-$L(SRPRINT)\2),SRPRINT I SRSP,SRSS'="" W !!,"** "_SRSS
"RTN","SROALM",58,0)
 W !!,"ASSESSMENT #",?18,"PATIENT",?53,"TYPE",?68,"STATUS",!,"OPERATION DATE",?18,"OPERATION(S)",! F LINE=1:1:80 W "="
"RTN","SROALM",59,0)
 S SRHDR=0,SRNEW=0,SRPAGE=SRPAGE+1
"RTN","SROALM",60,0)
 Q
"RTN","SROALM",61,0)
TOT W !!,"TOTAL FOR "_SRSS_": ",TOT
"RTN","SROALM",62,0)
 Q
"RTN","SROALM",63,0)
GRAND I 'SRSP W !!,"TOTAL: ",GRAND Q
"RTN","SROALM",64,0)
 I SRSP,'SRFLG W !!,"TOTAL FOR ALL SPECIALTIES: ",GRAND Q
"RTN","SROALM",65,0)
 I SRSP,SRFLG S SRSS=SRSPEC D TOT
"RTN","SROALM",66,0)
 Q
"RTN","SROALMN")
0^96^B23578732^n/a
"RTN","SROALMN",1,0)
SROALMN ;BIR/ADM - LIST OF 1-LINER CASES WITH MISSING INFO ;05/09/06
"RTN","SROALMN",2,0)
 ;;3.0; Surgery ;**153**;24 Jun 93;Build 11
"RTN","SROALMN",3,0)
 S (GRAND,SRNEW,SRSOUT,TOT)=0,(SRHDR,SRPAGE)=1,SRTITLE="1-LINER CASES MISSING INFORMATION" K ^TMP("SRA",$J)
"RTN","SROALMN",4,0)
 I SRFLG,SRASP S SRSPEC=$P(^SRO(137.45,SRASP,0),"^")
"RTN","SROALMN",5,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  I $D(^SRF(SRTN,0)),$$DIV^SROUTL0(SRTN) D UTL
"RTN","SROALMN",6,0)
 I SRSP S SRSS="" F  S SRSS=$O(^TMP("SRA",$J,SRSS)) Q:SRSS=""  D SRSD Q:SRSOUT  D:TOT TOT
"RTN","SROALMN",7,0)
 I 'SRSP S SRNEW=1,(SRSD,TOT)=0 F  S SRSD=$O(^TMP("SRA",$J,SRSD)) Q:'SRSD!SRSOUT  S SRTN=0 F  S SRTN=$O(^TMP("SRA",$J,SRSD,SRTN)) Q:'SRTN  S SRA=^(SRTN) D CASE Q:SRSOUT
"RTN","SROALMN",8,0)
 Q:SRSOUT  I SRSP,'SRFLG,GRAND D GRAND
"RTN","SROALMN",9,0)
 I SRFLG,'GRAND S SRSS=SRSPEC D HDR,GRAND
"RTN","SROALMN",10,0)
 I SRSP,'SRFLG,'GRAND S SRSS="" D HDR,GRAND
"RTN","SROALMN",11,0)
 I 'SRSP,'GRAND S SRSS="" D HDR,GRAND
"RTN","SROALMN",12,0)
 I 'SRSP,GRAND S SRSS="" D GRAND
"RTN","SROALMN",13,0)
 Q
"RTN","SROALMN",14,0)
UTL ; set up TMP global
"RTN","SROALMN",15,0)
 I '$P($G(^SRF(SRTN,.2)),"^",3)&'$P($G(^SRF(SRTN,.2)),"^",12) Q
"RTN","SROALMN",16,0)
 I $P($G(^SRF(SRTN,30)),"^") Q
"RTN","SROALMN",17,0)
 S SRA=$G(^SRF(SRTN,"RA")) I $P(SRA,"^",2)="N",$P(SRA,"^",6)="Y" Q
"RTN","SROALMN",18,0)
 I SRFLG,$P(^SRF(SRTN,0),"^",4)'=SRASP Q
"RTN","SROALMN",19,0)
 I SRSP S SRSS=$P(^SRF(SRTN,0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED"),^TMP("SRA",$J,SRSS,SRSD,SRTN)=SRA Q
"RTN","SROALMN",20,0)
 S ^TMP("SRA",$J,SRSD,SRTN)=SRA
"RTN","SROALMN",21,0)
 Q
"RTN","SROALMN",22,0)
SRSD S SRNEW=1,(SRSD,TOT)=0 F  S SRSD=$O(^TMP("SRA",$J,SRSS,SRSD)) Q:'SRSD!SRSOUT  S SRTN=0 F  S SRTN=$O(^TMP("SRA",$J,SRSS,SRSD,SRTN)) Q:'SRTN  S SRA=^(SRTN) D CASE Q:SRSOUT
"RTN","SROALMN",23,0)
 Q
"RTN","SROALMN",24,0)
CASE I $P(SRA,"^",2)="N",$P(SRA,"^",6)="N" S SRATYPE="EXCLUDED"
"RTN","SROALMN",25,0)
 S:$P(SRA,"^",2)="C" SRATYPE="CARDIAC" S:$P(SRA,"^",2)="" SRATYPE="NON-ASSESSED" D LNR
"RTN","SROALMN",26,0)
 S SRFLD="" I $O(SRX(SRFLD))'="" S TOT=TOT+1,GRAND=GRAND+1 D PRINT
"RTN","SROALMN",27,0)
 Q
"RTN","SROALMN",28,0)
LNR ; check for missing 1-liner information
"RTN","SROALMN",29,0)
 K SRX,DA,DIC,DIQ,DR,SRY S DIC="^SRF(",DA=SRTN,DIQ="SRY",DIQ(0)="I"
"RTN","SROALMN",30,0)
 I SRATYPE'="EXCLUDED" S DR=".011;.03;.04;.035;.166;1.09;1.13"
"RTN","SROALMN",31,0)
 I SRATYPE="EXCLUDED" S DR=".03;.35;102"
"RTN","SROALMN",32,0)
 D EN^DIQ1 D ^SROAUTL2 K DA,DIC,DIQ,DR,SRY,SRZ
"RTN","SROALMN",33,0)
 D TECH^SROPRIN I SRTECH="NOT ENTERED" S SRX("ANESTHESIA TECHNIQUE")="Anesthesia Technique"
"RTN","SROALMN",34,0)
 Q
"RTN","SROALMN",35,0)
PRINT ; print assessments
"RTN","SROALMN",36,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROALMN",37,0)
 I $Y+5>IOSL!SRNEW D PAGE I SRSOUT Q
"RTN","SROALMN",38,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALMN",39,0)
 I $L(SRANM)>19 S SRANM=$P(SRANM,",")_","_$E($P(SRANM,",",2))_"."
"RTN","SROALMN",40,0)
 S SROPER=$P(^SRF(SRTN,"OP"),"^") I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALMN",41,0)
 K SROPS,MM,MMM S:$L(SROPER)<63 SROPS(1)=SROPER I $L(SROPER)>62 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALMN",42,0)
 S SRSTATUS=$S($P(SRA,"^")="T":"TRANSMITTED",1:"COMPLETE"),Y=SRSD D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALMN",43,0)
 I $Y+5>IOSL D PAGE I SRSOUT Q
"RTN","SROALMN",44,0)
 W !,SRTN,?18,SRANM_" "_VA("PID"),?53,SRATYPE,?68,SRSTATUS,!,SRDT F I=1:1 Q:'$D(SROPS(I))  W ?18,SROPS(I),!
"RTN","SROALMN",45,0)
 N I,SRPROC,SRL S SRL=100 D CPTS^SROAUTL0 W ?18,"CPT Codes: "
"RTN","SROALMN",46,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?29,SRPROC(I) W:I'=1 !,?29,SRPROC(I)
"RTN","SROALMN",47,0)
 S CNT=1 W !,?5,"Missing information:"
"RTN","SROALMN",48,0)
 I '$P($G(^SRO(136,SRTN,10)),"^")!('$P($G(^SRO(136,SRTN,0)),"^",2))!('$P($G(^SRO(136,SRTN,0)),"^",3)) W !,$J(CNT_". ",8),"The final coding for Procedure and Diagnosis is not complete." S CNT=CNT+1
"RTN","SROALMN",49,0)
 F  S SRFLD=$O(SRX(SRFLD)) Q:SRFLD=""  D:$Y+5>IOSL PAGE Q:SRSOUT  W !,$J(CNT_". ",8),SRX(SRFLD) S CNT=CNT+1
"RTN","SROALMN",50,0)
 I 'SRSOUT W ! F LINE=1:1:80 W "-"
"RTN","SROALMN",51,0)
 Q
"RTN","SROALMN",52,0)
OTHER ; other operations
"RTN","SROALMN",53,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>125 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROALMN",54,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALMN",55,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALMN",56,0)
 Q
"RTN","SROALMN",57,0)
LOOP ; break procedures
"RTN","SROALMN",58,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<63  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALMN",59,0)
 Q
"RTN","SROALMN",60,0)
PAGE I $E(IOST)="P"!SRHDR G HDR
"RTN","SROALMN",61,0)
 W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROALMN",62,0)
 I X["?" W !!,"If you want to continue listing incomplete assessments, enter <RET>.  Enter",!,"'^' to return to the menu." G PAGE
"RTN","SROALMN",63,0)
HDR ; print heading
"RTN","SROALMN",64,0)
 W @IOF,!,?(80-$L(SRTITLE)\2),SRTITLE,?70,$J("PAGE "_SRPAGE,9) W:$E(IOST)="P" !,?(80-$L(SRINST)\2),SRINST W !,?(80-$L(SRFRTO)\2),SRFRTO
"RTN","SROALMN",65,0)
 W:$E(IOST)="P" !,?(80-$L(SRPRINT)\2),SRPRINT I SRSP,SRSS'="" W !!,"** "_SRSS
"RTN","SROALMN",66,0)
 W !!,"CASE #",?18,"PATIENT",?53,"TYPE",?68,"STATUS",!,"OP DATE",?18,"OPERATION(S)",! F LINE=1:1:80 W "="
"RTN","SROALMN",67,0)
 S SRHDR=0,SRNEW=0,SRPAGE=SRPAGE+1
"RTN","SROALMN",68,0)
 Q
"RTN","SROALMN",69,0)
TOT W !!,"TOTAL FOR "_SRSS_": ",TOT
"RTN","SROALMN",70,0)
 Q
"RTN","SROALMN",71,0)
GRAND I 'SRSP W !!,"TOTAL: ",GRAND Q
"RTN","SROALMN",72,0)
 I SRSP,'SRFLG W !!,"TOTAL FOR ALL SPECIALTIES: ",GRAND Q
"RTN","SROALMN",73,0)
 I SRSP,SRFLG S SRSS=SRSPEC D TOT
"RTN","SROALMN",74,0)
 Q
"RTN","SROALN1")
0^18^B8424056^B7744706
"RTN","SROALN1",1,0)
SROALN1 ;BIR/MAM - LAB INFO ;01/27/06
"RTN","SROALN1",2,0)
 ;;3.0; Surgery ;**38,125,153**;24 Jun 93;Build 11
"RTN","SROALN1",3,0)
 F SHEMP=201:1:204 S SRA(SHEMP)=$G(^SRF(SRTN,SHEMP))
"RTN","SROALN1",4,0)
 S SHEMP=$P(SRA(203),"^",15),SRAO(1)=SHEMP_"^^444^444.1" S X=$P(SRA(204),"^",15) I X D DATE S SHEMP="("_Y_")",$P(SRAO(1),"^",2)=SHEMP
"RTN","SROALN1",5,0)
 S SHEMP=$P(SRA(201),"^"),SRAO(2)=SHEMP_"^^270^304" S X=$P(SRA(202),"^") I X D DATE S SHEMP="("_Y_")",$P(SRAO(2),"^",2)=SHEMP
"RTN","SROALN1",6,0)
 S SHEMP=$P(SRA(201),"^",5),SRAO(3)=SHEMP_"^^224^291" S X=$P(SRA(202),"^",5) I X D DATE S SHEMP="("_Y_")",$P(SRAO(3),"^",2)=SHEMP
"RTN","SROALN1",7,0)
 S SHEMP=$P(SRA(201),"^",4),SRAO(4)=SHEMP_"^^223^290" S X=$P(SRA(202),"^",4) I X D DATE S SHEMP="("_Y_")",$P(SRAO(4),"^",2)=SHEMP
"RTN","SROALN1",8,0)
 S SHEMP=$P(SRA(201),"^",8),SRAO(5)=SHEMP_"^^225^292" S X=$P(SRA(202),"^",8) I X D DATE S SHEMP="("_Y_")",$P(SRAO(5),"^",2)=SHEMP
"RTN","SROALN1",9,0)
 S SHEMP=$P(SRA(201),"^",9),SRAO(6)=SHEMP_"^^228^295" S X=$P(SRA(202),"^",9) I X D DATE S SHEMP="("_Y_")",$P(SRAO(6),"^",2)=SHEMP
"RTN","SROALN1",10,0)
 S SHEMP=$P(SRA(201),"^",11),SRAO(7)=SHEMP_"^^227^294" S X=$P(SRA(202),"^",11) I X D DATE S SHEMP="("_Y_")",$P(SRAO(7),"^",2)=SHEMP
"RTN","SROALN1",11,0)
 S SHEMP=$P(SRA(201),"^",12),SRAO(8)=SHEMP_"^^229^296" S X=$P(SRA(202),"^",12) I X D DATE S SHEMP="("_Y_")",$P(SRAO(8),"^",2)=SHEMP
"RTN","SROALN1",12,0)
 S SHEMP=$P(SRA(201),"^",13),SRAO(9)=SHEMP_"^^230^297" S X=$P(SRA(202),"^",13) I X D DATE S SHEMP="("_Y_")",$P(SRAO(9),"^",2)=SHEMP
"RTN","SROALN1",13,0)
 S SHEMP=$P(SRA(201),"^",14),SRAO(10)=SHEMP_"^^234^301" S X=$P(SRA(202),"^",14) I X D DATE S SHEMP="("_Y_")",$P(SRAO(10),"^",2)=SHEMP
"RTN","SROALN1",14,0)
 S SHEMP=$P(SRA(201),"^",15),SRAO(11)=SHEMP_"^^231^298" S X=$P(SRA(202),"^",15) I X D DATE S SHEMP="("_Y_")",$P(SRAO(11),"^",2)=SHEMP
"RTN","SROALN1",15,0)
 S SHEMP=$P(SRA(201),"^",16),SRAO(12)=SHEMP_"^^233^300" S X=$P(SRA(202),"^",16) I X D DATE S SHEMP="("_Y_")",$P(SRAO(12),"^",2)=SHEMP
"RTN","SROALN1",16,0)
 S SHEMP=$P(SRA(201),"^",17),SRAO(13)=SHEMP_"^^232^299" S X=$P(SRA(202),"^",17) I X D DATE S SHEMP="("_Y_")",$P(SRAO(13),"^",2)=SHEMP
"RTN","SROALN1",17,0)
 S SHEMP=$P(SRA(201),"^",27),SRAO(14)=SHEMP_"^^487^487.1" S X=$P(SRA(202),"^",27) I X D DATE S SHEMP="("_Y_")",$P(SRAO(14),"^",2)=SHEMP
"RTN","SROALN1",18,0)
 K SRA
"RTN","SROALN1",19,0)
 Q
"RTN","SROALN1",20,0)
DATE S Y=X X ^DD("DD")
"RTN","SROALN1",21,0)
 Q
"RTN","SROALN2")
0^19^B9184341^B9183649
"RTN","SROALN2",1,0)
SROALN2 ;BIR/MAM - LAB INFO ;01/27/06
"RTN","SROALN2",2,0)
 ;;3.0; Surgery ;**38,88,100,153**;24 Jun 93;Build 11
"RTN","SROALN2",3,0)
 S SRSOUT=0 I '$D(SRTN) W !!,"A Surgery Risk Assessment must be selected prior to using this option.",!!,"Press <RET> to continue  " R X:DTIME G END
"RTN","SROALN2",4,0)
 D ^SROAUTL
"RTN","SROALN2",5,0)
START G:SRSOUT END K SRA,SRAO D ^SROALN3
"RTN","SROALN2",6,0)
ASK W !!,"Select Postoperative Laboratory Information to Edit: " R X:DTIME I '$T!(X["^") S SRSOUT=1 G END
"RTN","SROALN2",7,0)
 I X="" Q
"RTN","SROALN2",8,0)
 S:X="a" X="A" I '$D(SRAO(X)),(X'?.N1":".N),(X'="A") D HELP G:SRSOUT END G START
"RTN","SROALN2",9,0)
 I X="A" S X="1:13"
"RTN","SROALN2",10,0)
 I X?.N1":".N S Y=$E(X),Z=$P(X,":",2) I Y<1!(Z>13)!(Y>Z) D HELP G:SRSOUT END G START
"RTN","SROALN2",11,0)
 S SRPAGE="" D HDR^SROAUTL
"RTN","SROALN2",12,0)
 I X?.N1":".N D RANGE G START
"RTN","SROALN2",13,0)
 I $D(SRAO(X)) S EMILY=X D  G START
"RTN","SROALN2",14,0)
 .I $$LOCK^SROUTL(SRTN) D ONE,UNLOCK^SROUTL(SRTN)
"RTN","SROALN2",15,0)
END W @IOF
"RTN","SROALN2",16,0)
 Q
"RTN","SROALN2",17,0)
HELP W @IOF,!!!!,"Enter the number or range of numbers you want to edit.  Examples of proper",!,"responses are listed below."
"RTN","SROALN2",18,0)
 W !!,"1. Enter 'A' to update all information.",!!,"2. Enter a number (1-13) to update the information in that field.  (For",!,"   example, enter '6' to update Highest Serum Creatinine)"
"RTN","SROALN2",19,0)
 W !!,"3. Enter a range of numbers (1-13) separated by a ':' to enter a range of",!,"   information.  (For example, enter '2:4' to update Highest Serum Sodium,",!,"   Lowest Serum Sodium, and Highest Potassium)"
"RTN","SROALN2",20,0)
 W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1
"RTN","SROALN2",21,0)
 Q
"RTN","SROALN2",22,0)
RANGE ; range of numbers
"RTN","SROALN2",23,0)
 I $$LOCK^SROUTL(SRTN) D  D UNLOCK^SROUTL(SRTN)
"RTN","SROALN2",24,0)
 .S SRNOMORE=0,SHEMP=$P(X,":"),CURLEY=$P(X,":",2) F EMILY=SHEMP:1:CURLEY Q:SRNOMORE  D ONE
"RTN","SROALN2",25,0)
 Q
"RTN","SROALN2",26,0)
ONE ; edit one item
"RTN","SROALN2",27,0)
 K DR,DIE S DA=SRTN,DR=$P(SRAO(EMILY),"^",3)_"T;"_$P(SRAO(EMILY),"^",4)_"T",DIE=130 D ^DIE S:$D(Y) SRNOMORE=1 K DR
"RTN","SROALN2",28,0)
 Q
"RTN","SROALN2",29,0)
RET Q:SRSOUT  W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROALN2",30,0)
 Q
"RTN","SROALN3")
0^20^B12090037^B12613397
"RTN","SROALN3",1,0)
SROALN3 ;BIR/MAM - LAB INFO ;06/27/06
"RTN","SROALN3",2,0)
 ;;3.0; Surgery ;**38,47,88,153**;24 Jun 93;Build 11
"RTN","SROALN3",3,0)
 F SHEMP=203,204 S SRA(SHEMP)=$G(^SRF(SRTN,SHEMP))
"RTN","SROALN3",4,0)
 S SHEMP=$P(SRA(203),"^",16),SRAO(1)=SHEMP_"^^445^445.1" S X=$P(SRA(204),"^",16) I X D DATE S SHEMP="("_Y_")",$P(SRAO(1),"^",2)=SHEMP
"RTN","SROALN3",5,0)
 S SHEMP=$P(SRA(203),"^"),SRAO(2)=SHEMP_"^^274^305" S X=$P(SRA(204),"^") I X D DATE S SHEMP="("_Y_")",$P(SRAO(2),"^",2)=SHEMP
"RTN","SROALN3",6,0)
 S SHEMP=$P(SRA(203),"^",2),SRAO(3)=SHEMP_"^^405^407" S X=$P(SRA(204),"^",2) I X D DATE S SHEMP="("_Y_")",$P(SRAO(3),"^",2)=SHEMP
"RTN","SROALN3",7,0)
 S SHEMP=$P(SRA(203),"^",3),SRAO(4)=SHEMP_"^^275^306" S X=$P(SRA(204),"^",3) I X D DATE S SHEMP="("_Y_")",$P(SRAO(4),"^",2)=SHEMP
"RTN","SROALN3",8,0)
 S SHEMP=$P(SRA(203),"^",4),SRAO(5)=SHEMP_"^^406^408" S X=$P(SRA(204),"^",4) I X D DATE S SHEMP="("_Y_")",$P(SRAO(5),"^",2)=SHEMP
"RTN","SROALN3",9,0)
 S SHEMP=$P(SRA(203),"^",6),SRAO(6)=SHEMP_"^^277^308" S X=$P(SRA(204),"^",6) I X D DATE S SHEMP="("_Y_")",$P(SRAO(6),"^",2)=SHEMP
"RTN","SROALN3",10,0)
 S SHEMP=$P(SRA(203),"^",7),SRAO(7)=SHEMP_"^^278^309" S X=$P(SRA(204),"^",7) I X D DATE S SHEMP="("_Y_")",$P(SRAO(7),"^",2)=SHEMP
"RTN","SROALN3",11,0)
 S SHEMP=$P(SRA(203),"^",8),SRAO(8)=SHEMP_"^^279^310" S X=$P(SRA(204),"^",8) I X D DATE S SHEMP="("_Y_")",$P(SRAO(8),"^",2)=SHEMP
"RTN","SROALN3",12,0)
 S SHEMP=$P(SRA(203),"^",9),SRAO(9)=SHEMP_"^^280^311" S X=$P(SRA(204),"^",9) I X D DATE S SHEMP="("_Y_")",$P(SRAO(9),"^",2)=SHEMP
"RTN","SROALN3",13,0)
 S SHEMP=$P(SRA(203),"^",10),SRAO(10)=SHEMP_"^^281^312" S X=$P(SRA(204),"^",10) I X D DATE S SHEMP="("_Y_")",$P(SRAO(10),"^",2)=SHEMP
"RTN","SROALN3",14,0)
 S SHEMP=$P(SRA(203),"^",12),SRAO(11)=SHEMP_"^^283^314" S X=$P(SRA(204),"^",12) I X D DATE S SHEMP="("_Y_")",$P(SRAO(11),"^",2)=SHEMP
"RTN","SROALN3",15,0)
 S SHEMP=$P(SRA(203),"^",13),SRAO(12)=SHEMP_"^^455^455.1" S X=$P(SRA(204),"^",13) I X D DATE S SHEMP="("_Y_")",$P(SRAO(12),"^",2)=SHEMP
"RTN","SROALN3",16,0)
 S SHEMP=$P(SRA(203),"^",14),SRAO(13)=SHEMP_"^^456^456.1" S X=$P(SRA(204),"^",14) I X D DATE S SHEMP="("_Y_")",$P(SRAO(13),"^",2)=SHEMP
"RTN","SROALN3",17,0)
 S SRPAGE="PAGE: 2 OF 2",SRHDR(.5)="POSTOP LAB RESULTS WITHIN 30 DAYS AFTER SURGERY" D HDR^SROAUTL
"RTN","SROALN3",18,0)
 W !," 1. Highest Anion Gap:",?30,$J($P(SRAO(1),"^"),6),?40,$P(SRAO(1),"^",2)
"RTN","SROALN3",19,0)
 W !," 2. Highest Serum Sodium:",?30,$J($P(SRAO(2),"^"),6),?40,$P(SRAO(2),"^",2)
"RTN","SROALN3",20,0)
 W !," 3. Lowest Serum Sodium:",?30,$J($P(SRAO(3),"^"),6),?40,$P(SRAO(3),"^",2)
"RTN","SROALN3",21,0)
 W !," 4. Highest Potassium:",?30,$J($P(SRAO(4),"^"),6),?40,$P(SRAO(4),"^",2)
"RTN","SROALN3",22,0)
 W !," 5. Lowest Potassium:",?30,$J($P(SRAO(5),"^"),6),?40,$P(SRAO(5),"^",2)
"RTN","SROALN3",23,0)
 W !," 6. Highest Serum Creatinine: ",?30,$J($P(SRAO(6),"^"),6),?40,$P(SRAO(6),"^",2)
"RTN","SROALN3",24,0)
 W !," 7. Highest CPK: ",?30,$J($P(SRAO(7),"^"),6),?40,$P(SRAO(7),"^",2)
"RTN","SROALN3",25,0)
 W !," 8. Highest CPK-MB Band: ",?30,$J($P(SRAO(8),"^"),6),?40,$P(SRAO(8),"^",2)
"RTN","SROALN3",26,0)
 W !," 9. Highest Total Bilirubin: ",?30,$J($P(SRAO(9),"^"),6),?40,$P(SRAO(9),"^",2)
"RTN","SROALN3",27,0)
 W !,"10. Highest WBC:",?30,$J($P(SRAO(10),"^"),6),?40,$P(SRAO(10),"^",2)
"RTN","SROALN3",28,0)
 W !,"11. Lowest Hematocrit:",?30,$J($P(SRAO(11),"^"),6),?40,$P(SRAO(11),"^",2)
"RTN","SROALN3",29,0)
 W !,"12. Highest Troponin I:",?30,$J($P(SRAO(12),"^"),6),?40,$P(SRAO(12),"^",2)
"RTN","SROALN3",30,0)
 W !,"13. Highest Troponin T:",?30,$J($P(SRAO(13),"^"),6),?40,$P(SRAO(13),"^",2)
"RTN","SROALN3",31,0)
 W !! F MOE=1:1:80 W "-"
"RTN","SROALN3",32,0)
 Q
"RTN","SROALN3",33,0)
DATE S Y=X X ^DD("DD")
"RTN","SROALN3",34,0)
 Q
"RTN","SROALOG")
0^27^B16589351^B17382134
"RTN","SROALOG",1,0)
SROALOG ;BIR/MAM - ASSESSMENT LOG ;03/24/06
"RTN","SROALOG",2,0)
 ;;3.0; Surgery ;**38,55,62,77,50,153**;24 Jun 93;Build 11
"RTN","SROALOG",3,0)
 K SRMNA S (SRSOUT,SRFLG,SRSP)=0
"RTN","SROALOG",4,0)
START G:SRSOUT END W @IOF,!,"List of Surgery Risk Assessments",!!,"  1. List of Incomplete Assessments"
"RTN","SROALOG",5,0)
 W !,"  2. List of Completed Assessments",!,"  3. List of Transmitted Assessments"
"RTN","SROALOG",6,0)
 W !,"  4. List of Non-Assessed Major Surgical Cases",!,"  5. List of All Major Surgical Cases"
"RTN","SROALOG",7,0)
 W !,"  6. List of All Surgical Cases",!,"  7. List of Completed/Transmitted Assessments Missing Information"
"RTN","SROALOG",8,0)
 W !,"  8. List of 1-Liner Cases Missing Information"
"RTN","SROALOG",9,0)
 W !!,"Select the Number of the Report Desired: " R X:DTIME I '$T!("^"[X) S SRSOUT=1 G END
"RTN","SROALOG",10,0)
 I X<1!(X>8)!(X\1'=X) D HELP G START
"RTN","SROALOG",11,0)
 S SREPORT=X
"RTN","SROALOG",12,0)
DATE D DATE^SROUTL(.SRSD,.SRED,.SRSOUT) G:SRSOUT END
"RTN","SROALOG",13,0)
 D SEL G:SRSOUT END
"RTN","SROALOG",14,0)
 I SREPORT<7 W @IOF,!,"This report is designed to print to your terminal screen or a printer.  When",!,"using a printer, a 132 column format is used.",!
"RTN","SROALOG",15,0)
 K IOP,%ZIS,POP,IO("Q") S %ZIS("A")="Print the List of Assessments to which Device: ",%ZIS="QM" D ^%ZIS I POP S SRSOUT=1 G END
"RTN","SROALOG",16,0)
 I $D(IO("Q")) K IO("Q") S ZTRTN="EN^SROALOG",ZTDESC="List of Surgery Risk Assessments",(ZTSAVE("SRSD"),ZTSAVE("SRED"),ZTSAVE("SREPORT"),ZTSAVE("SRASP"),ZTSAVE("SRFLG"),ZTSAVE("SRSP"),ZTSAVE("SRSITE*"))="",ZTREQ="@" D ^%ZTLOAD G END
"RTN","SROALOG",17,0)
EN ; entry when queued
"RTN","SROALOG",18,0)
 N SRFRTO S Y=SRSD X ^DD("DD") S SRFRTO="FROM: "_Y_"  TO: ",Y=SRED X ^DD("DD") S SRFRTO=SRFRTO_Y
"RTN","SROALOG",19,0)
 U IO S SRSD=SRSD-.0001,SRED=SRED_".9999",Y=DT X ^DD("DD") S SRPRINT="DATE PRINTED: "_Y
"RTN","SROALOG",20,0)
 S SRINST=SRSITE("SITE"),SRINSTP=SRSITE("DIV")
"RTN","SROALOG",21,0)
 I SREPORT=1 D:SRSP ^SROANTS D:'SRSP ^SROANT G END
"RTN","SROALOG",22,0)
 I SREPORT=2 D:SRSP ^SROALCS D:'SRSP ^SROALC G END
"RTN","SROALOG",23,0)
 I SREPORT=3 D:SRSP ^SROALTS D:'SRSP ^SROALT G END
"RTN","SROALOG",24,0)
 I SREPORT=4 S SRMNA=1 D:SRSP ^SROALLS D:'SRSP ^SROALL G END
"RTN","SROALOG",25,0)
 I SREPORT=5 D:SRSP ^SROALLS D:'SRSP ^SROALL G END
"RTN","SROALOG",26,0)
 I SREPORT=7 D ^SROALM G END
"RTN","SROALOG",27,0)
 I SREPORT=8 D ^SROALMN G END
"RTN","SROALOG",28,0)
 D:SRSP ^SROALSS D:'SRSP ^SROALST
"RTN","SROALOG",29,0)
END I 'SRSOUT,$E(IOST)'="P" W !!,"Press <RET> to continue  " R X:DTIME
"RTN","SROALOG",30,0)
 W:$E(IOST)="P" @IOF K ^TMP("SRA",$J) I $D(ZTQUEUED) Q:$G(ZTSTOP)  S ZTREQ="@" Q
"RTN","SROALOG",31,0)
 D ^%ZISC K SRTN W @IOF D ^SRSKILL
"RTN","SROALOG",32,0)
 Q
"RTN","SROALOG",33,0)
HELP W !!,"Select the number corresponding to the type of report you want to print.",!!,"Press <RET> to continue  " R X:DTIME I '$T!(X["^") S SRSOUT=1
"RTN","SROALOG",34,0)
 Q
"RTN","SROALOG",35,0)
SEL ; select specialty
"RTN","SROALOG",36,0)
 W !!,"Print by Surgical Specialty ?  YES// " R X:DTIME S:'$T X="^" I X="^" S SRSOUT=1 Q
"RTN","SROALOG",37,0)
 S X=$E(X) I "YyNn"'[X W !!,"Enter <RET> to print the report by surgical specialty, or 'N' to print",!,"the report listing all surgical cases." G SEL
"RTN","SROALOG",38,0)
 Q:"Yy"'[X
"RTN","SROALOG",39,0)
SEL1 S SRSP=1 W !!,"Print report for ALL specialties ?  YES// " R X:DTIME S:'$T X="^" I X="^" S SRSOUT=1 Q
"RTN","SROALOG",40,0)
 S X=$E(X) I "YyNn"'[X W !!,"Enter <RET> to print the report for all surgical specialties, or 'N' to ",!,"print the report for a specific surgical specialty." G SEL1
"RTN","SROALOG",41,0)
 I "Yy"'[X W ! S DIC("S")="I '$P(^(0),""^"",3)",DIC("A")="Print the Report for which Surgical Specialty: ",DIC=137.45,DIC(0)="QEAMZ" D ^DIC K DIC I Y>0 S SRASP=+Y,SRFLG=1 Q
"RTN","SROALOG",42,0)
 I Y'>0 S SRSOUT=1 Q
"RTN","SROALOG",43,0)
 Q
"RTN","SROALSS")
0^66^B17218994^B17249054
"RTN","SROALSS",1,0)
SROALSS ;BIR/ADM - ALL CASES BY SPECIALTY ;03/16/06
"RTN","SROALSS",2,0)
 ;;3.0; Surgery ;**38,47,50,100,142,153**;24 Jun 93;Build 11
"RTN","SROALSS",3,0)
 I $E(IOST)="P" D ^SROALSSP Q
"RTN","SROALSS",4,0)
START S SRSOUT=0 K ^TMP("SRA",$J)
"RTN","SROALSS",5,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  I $D(^SRF(SRTN,0)),$$DIV^SROUTL0(SRTN) D UTL
"RTN","SROALSS",6,0)
 D PRINT Q
"RTN","SROALSS",7,0)
UTL ; write to ^TMP("SRA,$J)
"RTN","SROALSS",8,0)
 S SRA(0)=^SRF(SRTN,0)
"RTN","SROALSS",9,0)
 S CAN=$P($G(^SRF(SRTN,30)),"^") I CAN Q
"RTN","SROALSS",10,0)
 S CAN=$P($G(^SRF(SRTN,31)),"^",8) I CAN'="" Q
"RTN","SROALSS",11,0)
 S X=$P($G(^SRF(SRTN,.2)),"^",12) I 'X Q
"RTN","SROALSS",12,0)
 I SRFLG,$P(^SRF(SRTN,0),"^",4)'=SRASP Q
"RTN","SROALSS",13,0)
 S SRSS=$P(^SRF(SRTN,0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALSS",14,0)
 S ^TMP("SRA",$J,SRSS,SRTN)=""
"RTN","SROALSS",15,0)
 Q
"RTN","SROALSS",16,0)
SET ; set variables
"RTN","SROALSS",17,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROALSS",18,0)
 S SRA("RA")=$G(^SRF(SRTN,"RA")),X=$P(SRA("RA"),"^"),STATUS=$S(X="I":"INCOMPLETE",X="C":"COMPLETED",X="T":"TRANSMITTED",1:"EXCLUSION")
"RTN","SROALSS",19,0)
 S (SREXCL,Y)=$P(SRA("RA"),"^",7),C=$P(^DD(130,102,0),"^",2) D Y^DIQ S SREXCL=Y
"RTN","SROALSS",20,0)
 I SREXCL="",STATUS="EXCLUSION" S STATUS="NO ASSESSMENT"
"RTN","SROALSS",21,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALSS",22,0)
 I $L(SRANM)>19 S SRANM=$P(SRANM,",")_","_$E($P(SRANM,",",2))_"."
"RTN","SROALSS",23,0)
 S X=^SRF(SRTN,"OP"),SROPER=$P(X,"^")
"RTN","SROALSS",24,0)
 I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALSS",25,0)
 S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROALSS",26,0)
 K SROPS,MM,MMM S:$L(SROPER)<34 SROPS(1)=SROPER I $L(SROPER)>33 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALSS",27,0)
 S SRSS=$P(SRA(0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALSS",28,0)
 D TECH^SROPRIN
"RTN","SROALSS",29,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALSS",30,0)
 S (SRDOC,Y)=$P($G(^SRF(SRTN,.1)),"^",4),C=$P(^DD(130,.14,0),"^",2) D:Y'="" Y^DIQ I $L(Y)>18 S Z=$P(Y,",")_","_$E($P(Y,",",2))_".",Y=Z
"RTN","SROALSS",31,0)
 S SRDOC=Y
"RTN","SROALSS",32,0)
 Q
"RTN","SROALSS",33,0)
PRINT ;
"RTN","SROALSS",34,0)
 U IO S SRSS="",SRTC=0 D HDR
"RTN","SROALSS",35,0)
 F  S SRSS=$O(^TMP("SRA",$J,SRSS)) Q:SRSS=""!SRSOUT  S SRC=0 D SS S SRTN=0 F  S SRTN=$O(^TMP("SRA",$J,SRSS,SRTN)) D:'SRTN SSCT Q:'SRTN!SRSOUT  D SET,CASE
"RTN","SROALSS",36,0)
 Q:SRSOUT!SRFLG  I $Y+5>IOSL D PAGE Q:SRSOUT  D HDR
"RTN","SROALSS",37,0)
 W !!,"TOTAL CASES FOR ALL SPECIALTIES: ",SRTC
"RTN","SROALSS",38,0)
 Q
"RTN","SROALSS",39,0)
CASE ; print a case
"RTN","SROALSS",40,0)
 S SRC=SRC+1,SRTC=SRTC+1
"RTN","SROALSS",41,0)
 I $Y+5>IOSL D PAGE Q:SRSOUT
"RTN","SROALSS",42,0)
 W !,SRTN,?20,SRANM_"  "_VA("PID"),?55,STATUS,!,SRDT,?20,SROPS(1),?55,SRTECH
"RTN","SROALSS",43,0)
 W !,SRDOC W:$D(SROPS(2)) ?20,SROPS(2) W ?55,SREXCL
"RTN","SROALSS",44,0)
 I $D(SROPS(3)) W !,?20,SROPS(3) I $D(SROPS(4)) W !,?20,SROPS(4)
"RTN","SROALSS",45,0)
 N I,SRPROC,SRL S SRL=48 D CPTS^SROAUTL0 W !,?20,"CPT Codes: "
"RTN","SROALSS",46,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?31,SRPROC(I) W:I'=1 !,?31,SRPROC(I)
"RTN","SROALSS",47,0)
 W ! F LINE=1:1:80 W "-"
"RTN","SROALSS",48,0)
 Q
"RTN","SROALSS",49,0)
SS ; print surgical specialty
"RTN","SROALSS",50,0)
 I $Y+5>IOSL D PAGE Q:SRSOUT
"RTN","SROALSS",51,0)
 W !,"** SURGICAL SPECIALTY: ",SRSS," **",! Q
"RTN","SROALSS",52,0)
PAGE W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROALSS",53,0)
 I X["?" W !!,"If you want to continue listing assessments, enter <RET>.  Enter '^' to",!,"return to the menu." G PAGE
"RTN","SROALSS",54,0)
HDR ; print heading
"RTN","SROALSS",55,0)
 S SRHD="ALL SURGICAL CASES BY SURGICAL SPECIALTY"
"RTN","SROALSS",56,0)
 W @IOF,!,?(80-$L(SRHD)\2),SRHD,!,?(80-$L(SRFRTO)\2),SRFRTO
"RTN","SROALSS",57,0)
 W !!,"CASE #",?20,"PATIENT",?55,"ASSESSMENT STATUS",!,"OPERATION DATE",?20,"PRINCIPAL OPERATIVE PROCEDURE",?55,"ANESTHESIA TECHNIQUE",!,"SURGEON",?55,"EXCLUSION CRITERIA",! F L=1:1:80 W "="
"RTN","SROALSS",58,0)
 W ! Q
"RTN","SROALSS",59,0)
OTHER ; other operations
"RTN","SROALSS",60,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>125 S SRLONG=0,OPER=999,SROPERS=" ..."
"RTN","SROALSS",61,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALSS",62,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALSS",63,0)
 Q
"RTN","SROALSS",64,0)
LOOP ; break procedures
"RTN","SROALSS",65,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<34  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALSS",66,0)
 Q
"RTN","SROALSS",67,0)
SSCT ; write specialty count
"RTN","SROALSS",68,0)
 I $Y+5>IOSL D PAGE Q:SRSOUT
"RTN","SROALSS",69,0)
 W !,"TOTAL ",SRSS,": ",SRC,! F L=1:1:80 W "-"
"RTN","SROALSS",70,0)
 Q
"RTN","SROALSSP")
0^67^B17029510^B17066208
"RTN","SROALSSP",1,0)
SROALSSP ;BIR/ADM - ASSESSMENTS BY SPECIALTY (PRINTER) ;03/16/06
"RTN","SROALSSP",2,0)
 ;;3.0; Surgery ;**32,47,50,100,142,153**;24 Jun 93;Build 11
"RTN","SROALSSP",3,0)
START S SRSOUT=0 K ^TMP("SRA",$J)
"RTN","SROALSSP",4,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN  I $D(^SRF(SRTN,0)),$$DIV^SROUTL0(SRTN) D UTL
"RTN","SROALSSP",5,0)
 D PRINT Q
"RTN","SROALSSP",6,0)
UTL ; write to ^TMP("SRA,$J)
"RTN","SROALSSP",7,0)
 S SRA(0)=^SRF(SRTN,0)
"RTN","SROALSSP",8,0)
 S CAN=$P($G(^SRF(SRTN,30)),"^") I CAN Q
"RTN","SROALSSP",9,0)
 S CAN=$P($G(^SRF(SRTN,31)),"^",8) I CAN'="" Q
"RTN","SROALSSP",10,0)
 S X=$P($G(^SRF(SRTN,.2)),"^",12) I 'X Q
"RTN","SROALSSP",11,0)
 I SRFLG,$P(^SRF(SRTN,0),"^",4)'=SRASP Q
"RTN","SROALSSP",12,0)
 S SRSS=$P(^SRF(SRTN,0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALSSP",13,0)
 S TYPE=$P($G(^SRF(SRTN,"RA")),"^",2) I SRSS="SPECIALTY NOT ENTERED",TYPE="C" S SRSS="N/A"
"RTN","SROALSSP",14,0)
 S ^TMP("SRA",$J,SRSS,SRTN)=""
"RTN","SROALSSP",15,0)
 Q
"RTN","SROALSSP",16,0)
SET ; set variables
"RTN","SROALSSP",17,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROALSSP",18,0)
 S SRA("RA")=$G(^SRF(SRTN,"RA")),X=$P(SRA("RA"),"^"),STATUS=$S(X="I":"INCOMPLETE",X="C":"COMPLETED",X="T":"TRANSMITTED",1:"EXCLUSION")
"RTN","SROALSSP",19,0)
 S (SREXCL,Y)=$P(SRA("RA"),"^",7),C=$P(^DD(130,102,0),"^",2) D Y^DIQ S SREXCL=Y
"RTN","SROALSSP",20,0)
 I SREXCL="",STATUS="EXCLUSION" S STATUS="NO ASSESSMENT"
"RTN","SROALSSP",21,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALSSP",22,0)
 S X=^SRF(SRTN,"OP"),SROPER=$P(X,"^")
"RTN","SROALSSP",23,0)
 I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALSSP",24,0)
 S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROALSSP",25,0)
 K SROPS,MM,MMM S:$L(SROPER)<34 SROPS(1)=SROPER I $L(SROPER)>33 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALSSP",26,0)
 S SRSS=$P(SRA(0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALSSP",27,0)
 D TECH^SROPRIN
"RTN","SROALSSP",28,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALSSP",29,0)
 S (SRDOC,Y)=$P($G(^SRF(SRTN,.1)),"^",4),C=$P(^DD(130,.14,0),"^",2) D:Y'="" Y^DIQ I $L(Y)>23 S Z=$P(Y,",")_","_$E($P(Y,",",2))_".",Y=Z
"RTN","SROALSSP",30,0)
 S SRDOC=Y
"RTN","SROALSSP",31,0)
 Q
"RTN","SROALSSP",32,0)
PRINT ;
"RTN","SROALSSP",33,0)
 U IO S SRSS="",(SRTC,SRPAGE)=0 D HDR Q:SRSOUT
"RTN","SROALSSP",34,0)
 F  S SRSS=$O(^TMP("SRA",$J,SRSS)) Q:SRSS=""!SRSOUT  S SRC=0 D SS S SRTN=0 F  S SRTN=$O(^TMP("SRA",$J,SRSS,SRTN)) D:'SRTN SSCT Q:'SRTN!SRSOUT  D SET,CASE
"RTN","SROALSSP",35,0)
 Q:SRFLG  I $Y+5>IOSL D HDR Q:SRSOUT
"RTN","SROALSSP",36,0)
 W !!,"TOTAL MAJOR CASES FOR ALL SPECIALTIES: ",SRTC
"RTN","SROALSSP",37,0)
 Q
"RTN","SROALSSP",38,0)
CASE ; print a case
"RTN","SROALSSP",39,0)
 S SRC=SRC+1,SRTC=SRTC+1
"RTN","SROALSSP",40,0)
 I $Y+5>IOSL D HDR Q:SRSOUT  W !!,"SURGICAL SPECIALTY: ",SRSS,!
"RTN","SROALSSP",41,0)
 W !,SRTN,?20,SRANM_"  "_VA("PID"),?67,STATUS,?107,SRTECH,!,SRDT,?20,SROPS(1),?67,SREXCL W ?107,SRDOC
"RTN","SROALSSP",42,0)
 I $D(SROPS(2)) W !,?20,SROPS(2) I $D(SROPS(3)) W !,?20,SROPS(3) I $D(SROPS(4)) W !,?20,SROPS(4)
"RTN","SROALSSP",43,0)
 N I,SRPROC,SRL S SRL=100 D CPTS^SROAUTL0 W !,?20,"CPT Codes: "
"RTN","SROALSSP",44,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?31,SRPROC(I) W:I'=1 !,?31,SRPROC(I)
"RTN","SROALSSP",45,0)
 W ! F LINE=1:1:132 W "-"
"RTN","SROALSSP",46,0)
 Q
"RTN","SROALSSP",47,0)
SS ; print surgical specialty
"RTN","SROALSSP",48,0)
 I $Y+5>IOSL D HDR Q:SRSOUT
"RTN","SROALSSP",49,0)
 W !!,"SURGICAL SPECIALTY: ",SRSS,! Q
"RTN","SROALSSP",50,0)
HDR ; print heading
"RTN","SROALSSP",51,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SROALSSP",52,0)
 S SRHD="ALL SURGICAL CASES BY SURGICAL SPECIALTY",SRPAGE=SRPAGE+1
"RTN","SROALSSP",53,0)
 W:$Y @IOF W !,?(132-$L(SRHD)\2),SRHD,?120,"PAGE "_SRPAGE,!,?(132-$L(SRINST)\2),SRINST,!,?58,"SURGERY SERVICE",?100,"DATE REVIEWED:"
"RTN","SROALSSP",54,0)
 W !,?(132-$L(SRFRTO)\2),SRFRTO,?100,"REVIEWED BY:"
"RTN","SROALSSP",55,0)
 W !!,"CASE #",?20,"PATIENT",?67,"ASSESSMENT STATUS",?107,"ANESTHESIA TECHNIQUE",!,"OPERATION DATE",?20,"PRINCIPAL OPERATIVE PROCEDURE",?67,"EXCLUSION CRITERIA",?107,"SURGEON",! F L=1:1:132 W "="
"RTN","SROALSSP",56,0)
 Q
"RTN","SROALSSP",57,0)
OTHER ; other operations
"RTN","SROALSSP",58,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>165 S SRLONG=0,OPER=999,SROPERS=" ..."
"RTN","SROALSSP",59,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALSSP",60,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALSSP",61,0)
 Q
"RTN","SROALSSP",62,0)
LOOP ; break procedures
"RTN","SROALSSP",63,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<44  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALSSP",64,0)
 Q
"RTN","SROALSSP",65,0)
SSCT ; write specialty count
"RTN","SROALSSP",66,0)
 I $Y+5>IOSL D HDR Q:SRSOUT
"RTN","SROALSSP",67,0)
 W !!,"TOTAL ",SRSS,": ",SRC,! F L=1:1:132 W "-"
"RTN","SROALSSP",68,0)
 Q
"RTN","SROALST")
0^68^B13569020^B13078748
"RTN","SROALST",1,0)
SROALST ;BIR/MAM - ALL ASSESSMENTS ;03/16/06
"RTN","SROALST",2,0)
 ;;3.0; Surgery ;**38,47,50,100,142,153**;24 Jun 93;Build 11
"RTN","SROALST",3,0)
 I $E(IOST)="P" D ^SROALSTP Q
"RTN","SROALST",4,0)
 S SRSOUT=0 D HDR F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  I $D(^SRF(SRTN,0)),$$DIV^SROUTL0(SRTN) D SET
"RTN","SROALST",5,0)
 Q
"RTN","SROALST",6,0)
SET ; print assessments
"RTN","SROALST",7,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROALST",8,0)
 I $Y+5>IOSL D PAGE I SRSOUT Q
"RTN","SROALST",9,0)
 S SRA(0)=^SRF(SRTN,0)
"RTN","SROALST",10,0)
 S CAN=$P($G(^SRF(SRTN,30)),"^") I CAN Q
"RTN","SROALST",11,0)
 S CAN=$P($G(^SRF(SRTN,31)),"^",8) I CAN'="" Q
"RTN","SROALST",12,0)
 S X=$P($G(^SRF(SRTN,.2)),"^",12) I 'X Q
"RTN","SROALST",13,0)
 S DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALST",14,0)
 S SRA("RA")=$G(^SRF(SRTN,"RA")),X=$P(SRA("RA"),"^"),STATUS=$S(X="I":"INCOMPLETE",X="C":"COMPLETED",X="T":"TRANSMITTED",1:"EXCLUSION")
"RTN","SROALST",15,0)
 S (SREXCL,Y)=$P(SRA("RA"),"^",7),C=$P(^DD(130,102,0),"^",2) D Y^DIQ S SREXCL=Y
"RTN","SROALST",16,0)
 I SREXCL="",STATUS="EXCLUSION" S STATUS="NO ASSESSMENT"
"RTN","SROALST",17,0)
 S X=^SRF(SRTN,"OP"),SROPER=$P(X,"^")
"RTN","SROALST",18,0)
 I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALST",19,0)
 S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROALST",20,0)
 K SROPS,MM,MMM S:$L(SROPER)<34 SROPS(1)=SROPER I $L(SROPER)>33 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALST",21,0)
 S SRSS=$P(SRA(0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALST",22,0)
 D TECH^SROPRIN
"RTN","SROALST",23,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALST",24,0)
 S (SRDOC,Y)=$P($G(^SRF(SRTN,.1)),"^",4),C=$P(^DD(130,.14,0),"^",2) D:Y'="" Y^DIQ I $L(Y)>18 S Z=$P(Y,",")_","_$E($P(Y,",",2))_".",Y=Z
"RTN","SROALST",25,0)
 S SRDOC=Y
"RTN","SROALST",26,0)
 S X=$P($G(^SRO(136,SRTN,0)),"^",2) I X S Y=$S(X:$P($$CPT^ICPTCOD(X),"^",2),1:"") D SSPRIN^SROCPT0 I $L(Y) S SRCPTT=Y
"RTN","SROALST",27,0)
 W !,SRTN,?20,SRANM_" "_VA("PID"),?55,$P(SRSS,"("),!,SRDT,?20,SROPS(1),?55,SRTECH,!,STATUS W:$D(SROPS(2)) ?20,SROPS(2) W ?55,SREXCL
"RTN","SROALST",28,0)
 W !,SRDOC I $D(SROPS(3)) W ?20,SROPS(3) I $D(SROPS(4)) W !,?20,SROPS(4)
"RTN","SROALST",29,0)
 N I,SRPROC,SRL S SRL=48 D CPTS^SROAUTL0 W !,?20,"CPT Codes: "
"RTN","SROALST",30,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?31,SRPROC(I) W:I'=1 !,?31,SRPROC(I)
"RTN","SROALST",31,0)
 W ! F LINE=1:1:80 W "-"
"RTN","SROALST",32,0)
 Q
"RTN","SROALST",33,0)
OTHER ; other operations
"RTN","SROALST",34,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>125 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROALST",35,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALST",36,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALST",37,0)
 Q
"RTN","SROALST",38,0)
LOOP ; break procedures
"RTN","SROALST",39,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<34  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALST",40,0)
 Q
"RTN","SROALST",41,0)
PAGE W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROALST",42,0)
 I X["?" W !!,"If you want to continue listing incomplete assessments, enter <RET>.  Enter",!,"'^' to return to the menu." G PAGE
"RTN","SROALST",43,0)
HDR S SRHD="ALL SURGICAL CASES"
"RTN","SROALST",44,0)
 W @IOF,!,?(80-$L(SRHD)\2),SRHD,!,?(80-$L(SRFRTO)\2),SRFRTO
"RTN","SROALST",45,0)
 W !!,"CASE #",?20,"PATIENT",?55,"SURGICAL SPECIALTY",!,"OPERATION DATE",?20,"PRINCIPAL OPERATION",?55,"ANESTHESIA TECHNIQUE",!,"ASSESSMENT STATUS",?55,"EXCLUSION CRITERIA",!,"SURGEON",! F LINE=1:1:80 W "="
"RTN","SROALST",46,0)
 Q
"RTN","SROALSTP")
0^69^B12052730^B12197759
"RTN","SROALSTP",1,0)
SROALSTP ;BIR/MAM - ALL CASES ;03/16/06
"RTN","SROALSTP",2,0)
 ;;3.0; Surgery ;**32,47,50,100,142,153**;24 Jun 93;Build 11
"RTN","SROALSTP",3,0)
 S SRPAGE=1,(SRSOUT,SRDFN)=0 D HDR Q:SRSOUT
"RTN","SROALSTP",4,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  I $D(^SRF(SRTN,0)),$$DIV^SROUTL0(SRTN) D SET
"RTN","SROALSTP",5,0)
 Q
"RTN","SROALSTP",6,0)
SET ; print assessments
"RTN","SROALSTP",7,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROALSTP",8,0)
 I $Y+5>IOSL S SRPAGE=SRPAGE+1 D HDR I SRSOUT Q
"RTN","SROALSTP",9,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALSTP",10,0)
 S CAN=$P($G(^SRF(SRTN,30)),"^") I CAN Q
"RTN","SROALSTP",11,0)
 S CAN=$P($G(^SRF(SRTN,31)),"^",8) I CAN'="" Q
"RTN","SROALSTP",12,0)
 S X=$P($G(^SRF(SRTN,.2)),"^",12) I 'X Q
"RTN","SROALSTP",13,0)
 S SRA("RA")=$G(^SRF(SRTN,"RA")),X=$P(SRA("RA"),"^"),STATUS=$S(X="I":"INCOMPLETE",X="C":"COMPLETED",X="T":"TRANSMITTED",1:"EXCLUSION")
"RTN","SROALSTP",14,0)
 S (SREXCL,Y)=$P(SRA("RA"),"^",7),C=$P(^DD(130,102,0),"^",2) D Y^DIQ S SREXCL=Y
"RTN","SROALSTP",15,0)
 I SREXCL="",STATUS="EXCLUSION" S STATUS="NO ASSESSMENT"
"RTN","SROALSTP",16,0)
 S X=^SRF(SRTN,"OP"),SROPER=$P(X,"^")
"RTN","SROALSTP",17,0)
 I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALSTP",18,0)
 S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROALSTP",19,0)
 K SROPS,MM,MMM S:$L(SROPER)<34 SROPS(1)=SROPER I $L(SROPER)>33 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALSTP",20,0)
 S SRSS=$P(SRA(0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALSTP",21,0)
 D TECH^SROPRIN
"RTN","SROALSTP",22,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALSTP",23,0)
 S (SRDOC,Y)=$P($G(^SRF(SRTN,.1)),"^",4),C=$P(^DD(130,.14,0),"^",2) D:Y'="" Y^DIQ I $L(Y)>23 S Z=$P(Y,",")_","_$E($P(Y,",",2))_".",Y=Z
"RTN","SROALSTP",24,0)
 S SRDOC=Y
"RTN","SROALSTP",25,0)
 W !,SRTN,?20,SRANM_" "_VA("PID"),?67,$P(SRSS,"("),?107,SRTECH,!,SRDT,?20,SROPS(1),?67,STATUS,?107,SREXCL,!
"RTN","SROALSTP",26,0)
 W:$D(SROPS(2)) ?20,SROPS(2) W ?107,SRDOC
"RTN","SROALSTP",27,0)
 I $D(SROPS(3)) W !,?20,SROPS(3) I $D(SROPS(4)) W !,?20,SROPS(4)
"RTN","SROALSTP",28,0)
 N I,SRPROC,SRL S SRL=100 D CPTS^SROAUTL0 W !,?20,"CPT Codes: "
"RTN","SROALSTP",29,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?31,SRPROC(I) W:I'=1 !,?31,SRPROC(I)
"RTN","SROALSTP",30,0)
 W ! F LINE=1:1:132 W "-"
"RTN","SROALSTP",31,0)
 Q
"RTN","SROALSTP",32,0)
OTHER ; other operations
"RTN","SROALSTP",33,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>165 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROALSTP",34,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALSTP",35,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALSTP",36,0)
 Q
"RTN","SROALSTP",37,0)
LOOP ; break procedures
"RTN","SROALSTP",38,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<44  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALSTP",39,0)
 Q
"RTN","SROALSTP",40,0)
HDR ; print heading
"RTN","SROALSTP",41,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SROALSTP",42,0)
 W:$Y @IOF W !,?56,"ALL SURGICAL CASES",?120,"PAGE "_SRPAGE,!,?(132-$L(SRINST)\2),SRINST,!,?58,"SURGERY SERVICE",?100,"DATE REVIEWED:"
"RTN","SROALSTP",43,0)
 W !,?(132-$L(SRFRTO)\2),SRFRTO,?100,"REVIEWED BY:"
"RTN","SROALSTP",44,0)
 W !!,"CASE #",?20,"PATIENT",?67,"SURGICAL SPECIALTY",?107,"ANESTHESIA TECHNIQUE",!,"OPERATION DATE",?20,"PRINCIPAL OPERATIVE PROCEDURE",?67,"ASSESSMENT STATUS",?107,"EXCLUSION CRITERIA",!,?107,"SURGEON",!
"RTN","SROALSTP",45,0)
 F LINE=1:1:132 W "="
"RTN","SROALSTP",46,0)
 Q
"RTN","SROALT")
0^87^B10482929^B10817407
"RTN","SROALT",1,0)
SROALT ;BIR/MAM - TRANSMITTED ASSESSMENTS ;03/24/06
"RTN","SROALT",2,0)
 ;;3.0; Surgery ;**38,50,142,153**;24 Jun 93;Build 11
"RTN","SROALT",3,0)
 I $E(IOST)="P" D ^SROALTP Q
"RTN","SROALT",4,0)
 S SRSOUT=0 D HDR
"RTN","SROALT",5,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  S SR("RA")=$G(^SRF(SRTN,"RA")) I $P(SR("RA"),"^")="T",$D(^SRF(SRTN,0)),$$DIV^SROUTL0(SRTN) D SET
"RTN","SROALT",6,0)
 Q
"RTN","SROALT",7,0)
SET ; print assessments
"RTN","SROALT",8,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROALT",9,0)
 I $Y+5>IOSL D PAGE I SRSOUT Q
"RTN","SROALT",10,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALT",11,0)
 I $L(SRANM)>19 S SRANM=$P(SRANM,",")_","_$E($P(SRANM,",",2))_"."
"RTN","SROALT",12,0)
 S SROPER=$P(^SRF(SRTN,"OP"),"^") I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALT",13,0)
 S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROALT",14,0)
 K SROPS,MM,MMM S:$L(SROPER)<34 SROPS(1)=SROPER I $L(SROPER)>33 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALT",15,0)
 S SRSS=$P(SRA(0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALT",16,0)
 D TECH^SROPRIN
"RTN","SROALT",17,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALT",18,0)
 W !,SRTN,?20,SRANM_" "_VA("PID"),?55,$P(SRSS,"("),!,SRDT,?20,SROPS(1),?55,SRTECH I $D(SROPS(2)) W !,?20,SROPS(2) I $D(SROPS(3)) W !,?20,SROPS(3)
"RTN","SROALT",19,0)
 N I,SRPROC,SRL S SRL=48 D CPTS^SROAUTL0 W !,?20,"CPT Codes: "
"RTN","SROALT",20,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?31,SRPROC(I) W:I'=1 !,?31,SRPROC(I)
"RTN","SROALT",21,0)
 W ! F LINE=1:1:80 W "-"
"RTN","SROALT",22,0)
 Q
"RTN","SROALT",23,0)
OTHER ; other operations
"RTN","SROALT",24,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>125 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROALT",25,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALT",26,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALT",27,0)
 Q
"RTN","SROALT",28,0)
LOOP ; break procedures
"RTN","SROALT",29,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<34  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALT",30,0)
 Q
"RTN","SROALT",31,0)
PAGE W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROALT",32,0)
 I X["?" W !!,"If you want to continue listing incomplete assessments, enter <RET>.  Enter",!,"'^' to return to the menu." G PAGE
"RTN","SROALT",33,0)
HDR W @IOF,!,?26,"TRANSMITTED RISK ASSESSMENTS",!,?(80-$L(SRFRTO)\2),SRFRTO,!!,"ASSESSMENT #",?20,"PATIENT",?55,"SURGICAL SPECIALTY",!,"OPERATION DATE",?20,"OPERATION(S)",?55,"ANESTHESIA TECHNIQUE",! F LINE=1:1:80 W "="
"RTN","SROALT",34,0)
 Q
"RTN","SROALTP")
0^90^B9843982^B10106538
"RTN","SROALTP",1,0)
SROALTP ;BIR/MAM - TRANSMITTED ASSESSMENTS (PRINTER) ;03/24/06
"RTN","SROALTP",2,0)
 ;;3.0; Surgery ;**32,50,142,153**;24 Jun 93;Build 11
"RTN","SROALTP",3,0)
 S SRPAGE=1,(SRSOUT,SRDFN)=0 D HDR Q:SRSOUT
"RTN","SROALTP",4,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  S SR("RA")=$G(^SRF(SRTN,"RA")) I $P(SR("RA"),"^")="T",$D(^SRF(SRTN,0)),$$DIV^SROUTL0(SRTN) D SET
"RTN","SROALTP",5,0)
 Q
"RTN","SROALTP",6,0)
SET ; print assessments
"RTN","SROALTP",7,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROALTP",8,0)
 I $Y+5>IOSL S SRPAGE=SRPAGE+1 D HDR I SRSOUT Q
"RTN","SROALTP",9,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALTP",10,0)
 S SROPER=$P(^SRF(SRTN,"OP"),"^") I $O(^SRF(SRTN,13,0)) S SROTHER=0 F  S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALTP",11,0)
 S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROALTP",12,0)
 K SROPS,MM,MMM S:$L(SROPER)<81 SROPS(1)=SROPER I $L(SROPER)>80 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALTP",13,0)
 S SRSS=$P(SRA(0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALTP",14,0)
 S TYPE=$P(SR("RA"),"^",2) I SRSS="SPECIALTY NOT ENTERED",TYPE="C" S SRSS="N/A"
"RTN","SROALTP",15,0)
 D TECH^SROPRIN
"RTN","SROALTP",16,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALTP",17,0)
 W !,SRTN,?20,SRANM_" "_VA("PID"),?67,$P(SRSS,"("),?107,SRTECH,!,SRDT,?20,SROPS(1) I $D(SROPS(2)) W !,?20,SROPS(2) I $D(SROPS(3)) W !,?20,SROPS(3) I $D(SROPS(4)) W !,?20,SROPS(4)
"RTN","SROALTP",18,0)
 N I,SRPROC,SRL S SRL=100 D CPTS^SROAUTL0 W !,?20,"CPT Codes: "
"RTN","SROALTP",19,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?31,SRPROC(I) W:I'=1 !,?31,SRPROC(I)
"RTN","SROALTP",20,0)
 W ! F LINE=1:1:132 W "-"
"RTN","SROALTP",21,0)
 Q
"RTN","SROALTP",22,0)
OTHER ; other operations
"RTN","SROALTP",23,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>165 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROALTP",24,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALTP",25,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALTP",26,0)
 Q
"RTN","SROALTP",27,0)
LOOP ; break procedures
"RTN","SROALTP",28,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<44  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALTP",29,0)
 Q
"RTN","SROALTP",30,0)
HDR ; print heading
"RTN","SROALTP",31,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SROALTP",32,0)
 W:$Y @IOF W !,?52,"TRANSMITTED RISK ASSESSMENTS",?120,"PAGE "_SRPAGE,!,?(132-$L(SRINST)\2),SRINST,!,?58,"SURGERY SERVICE",?100,"DATE REVIEWED:"
"RTN","SROALTP",33,0)
 W !,?(132-$L(SRFRTO)\2),SRFRTO,?100,"REVIEWED BY:"
"RTN","SROALTP",34,0)
 W !!,"ASSESSMENT #",?20,"PATIENT",?67,"SURGICAL SPECIALTY",?107,"ANESTHESIA TECHNIQUE",!,"OPERATION DATE",?20,"OPERATIVE PROCEDURE(S)",! F LINE=1:1:132 W "="
"RTN","SROALTP",35,0)
 Q
"RTN","SROALTS")
0^88^B12812472^B13156100
"RTN","SROALTS",1,0)
SROALTS ;BIR/MAM - TRANSMITTED ASSESSMENTS ;03/24/06
"RTN","SROALTS",2,0)
 ;;3.0; Surgery ;**38,50,142,153**;24 Jun 93;Build 11
"RTN","SROALTS",3,0)
 I $E(IOST)="P" D ^SROALTSP Q
"RTN","SROALTS",4,0)
 S SRSOUT=0 D HDR
"RTN","SROALTS",5,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  S SR("RA")=$G(^SRF(SRTN,"RA")) I $P(SR("RA"),"^")="T",$D(^SRF(SRTN,0)),$$DIV^SROUTL0(SRTN) D UTL
"RTN","SROALTS",6,0)
 S SRSS="" F  S SRSS=$O(^TMP("SRA",$J,SRSS)) Q:SRSS=""!SRSOUT  D SS S SRTN=0 F J=0:0 S SRTN=$O(^TMP("SRA",$J,SRSS,SRTN)) Q:'SRTN!SRSOUT  D SET
"RTN","SROALTS",7,0)
 I '$D(^TMP("SRA",$J)) W $$NODATA^SROUTL0()
"RTN","SROALTS",8,0)
 Q
"RTN","SROALTS",9,0)
UTL ; write to ^TMP("SRA",$J)
"RTN","SROALTS",10,0)
 I SRFLG,$P(^SRF(SRTN,0),"^",4)'=SRASP Q
"RTN","SROALTS",11,0)
 S SRSS=$P(^SRF(SRTN,0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALTS",12,0)
 S ^TMP("SRA",$J,SRSS,SRTN)=""
"RTN","SROALTS",13,0)
 Q
"RTN","SROALTS",14,0)
SET ; print assessments
"RTN","SROALTS",15,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROALTS",16,0)
 I $Y+5>IOSL D PAGE I SRSOUT Q
"RTN","SROALTS",17,0)
 S SR("RA")=^SRF(SRTN,"RA"),SRAT="",Y=$E($P(SR("RA"),"^",4),1,7) I Y D D^DIQ S SRAT=Y
"RTN","SROALTS",18,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALTS",19,0)
 I $L(SRANM)>19 S SRANM=$P(SRANM,",")_","_$E($P(SRANM,",",2))_"."
"RTN","SROALTS",20,0)
 S SROPER=$P(^SRF(SRTN,"OP"),"^") I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALTS",21,0)
 S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROALTS",22,0)
 K SROPS,MM,MMM S:$L(SROPER)<34 SROPS(1)=SROPER I $L(SROPER)>33 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALTS",23,0)
 D TECH^SROPRIN
"RTN","SROALTS",24,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALTS",25,0)
 W !,SRTN,?20,SRANM_" "_VA("PID"),?55,SRAT,!,SRDT,?20,SROPS(1),?55,SRTECH S SRAO=1 F I=0:0 S SRAO=$O(SROPS(SRAO)) Q:'SRAO  W !,?20,SROPS(SRAO)
"RTN","SROALTS",26,0)
 N I,SRPROC,SRL S SRL=48 D CPTS^SROAUTL0 W !,?20,"CPT Codes: "
"RTN","SROALTS",27,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?31,SRPROC(I) W:I'=1 !,?31,SRPROC(I)
"RTN","SROALTS",28,0)
 W ! F LINE=1:1:80 W "-"
"RTN","SROALTS",29,0)
 Q
"RTN","SROALTS",30,0)
OTHER ; other operations
"RTN","SROALTS",31,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>125 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROALTS",32,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALTS",33,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALTS",34,0)
 Q
"RTN","SROALTS",35,0)
LOOP ; break procedures
"RTN","SROALTS",36,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<34  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALTS",37,0)
 Q
"RTN","SROALTS",38,0)
PAGE W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROALTS",39,0)
 I X["?" W !!,"If you want to continue listing incomplete assessments, enter <RET>.  Enter",!,"'^' to return to the menu." G PAGE
"RTN","SROALTS",40,0)
HDR W @IOF,!,?26,"TRANSMITTED RISK ASSESSMENTS",!,?(80-$L(SRFRTO)\2),SRFRTO,!!,"ASSESSMENT #",?20,"PATIENT",?55,"TRANSMISSION DATE",!,"OPERATION DATE",?20,"OPERATION(S)",?55,"ANESTHESIA TECHNIQUE",! F LINE=1:1:80 W "="
"RTN","SROALTS",41,0)
 Q
"RTN","SROALTS",42,0)
SS ; print surgical specialty
"RTN","SROALTS",43,0)
 I $Y+5>IOSL D PAGE Q:SRSOUT
"RTN","SROALTS",44,0)
 W !!,"** SURGICAL SPECIALTY: ",SRSS," **",!
"RTN","SROALTS",45,0)
 Q
"RTN","SROALTSP")
0^89^B11921098^B12292692
"RTN","SROALTSP",1,0)
SROALTSP ;BIR/MAM - TRANSMITTED ASSESSMENTS (PRINTER) ;03/24/06
"RTN","SROALTSP",2,0)
 ;;3.0; Surgery ;**32,50,142,153**;24 Jun 93;Build 11
"RTN","SROALTSP",3,0)
 K ^TMP("SRA",$J) S SRPAGE=0,(SRSOUT,SRDFN)=0 D HDR Q:SRSOUT
"RTN","SROALTSP",4,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  S SR("RA")=$G(^SRF(SRTN,"RA")) I $P(SR("RA"),"^")="T",$D(^SRF(SRTN,0)),$$DIV^SROUTL0(SRTN) D UTL
"RTN","SROALTSP",5,0)
 S SRSS="" F  S SRSS=$O(^TMP("SRA",$J,SRSS)) Q:SRSS=""!SRSOUT  D SS S SRTN=0 F  S SRTN=$O(^TMP("SRA",$J,SRSS,SRTN)) Q:'SRTN!SRSOUT  D SET
"RTN","SROALTSP",6,0)
 I '$D(^TMP("SRA",$J)) W $$NODATA^SROUTL0()
"RTN","SROALTSP",7,0)
 Q
"RTN","SROALTSP",8,0)
UTL ; write to ^TMP("SRA",$J)
"RTN","SROALTSP",9,0)
 I SRFLG,$P(^SRF(SRTN,0),"^",4)'=SRASP Q
"RTN","SROALTSP",10,0)
 S SRSS=$P(^SRF(SRTN,0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALTSP",11,0)
 S TYPE=$P(SR("RA"),"^",2) I SRSS="SPECIALTY NOT ENTERED",TYPE="C" S SRSS="N/A"
"RTN","SROALTSP",12,0)
 S ^TMP("SRA",$J,SRSS,SRTN)=""
"RTN","SROALTSP",13,0)
 Q
"RTN","SROALTSP",14,0)
SET ; print assessments
"RTN","SROALTSP",15,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROALTSP",16,0)
 I $Y+5>IOSL D HDR I SRSOUT Q
"RTN","SROALTSP",17,0)
 S SR("RA")=^SRF(SRTN,"RA"),SRAT="",Y=$E($P(SR("RA"),"^",4),1,7) I Y D D^DIQ S SRAT=Y
"RTN","SROALTSP",18,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALTSP",19,0)
 S SROPER=$P(^SRF(SRTN,"OP"),"^") I $O(^SRF(SRTN,13,0)) S SROTHER=0 F  S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALTSP",20,0)
 S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROALTSP",21,0)
 K SROPS,MM,MMM S:$L(SROPER)<81 SROPS(1)=SROPER I $L(SROPER)>80 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALTSP",22,0)
 D TECH^SROPRIN
"RTN","SROALTSP",23,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALTSP",24,0)
 W !,SRTN,?20,SRANM_" "_VA("PID"),?67,SRAT,?107,SRTECH,!,SRDT,?20,SROPS(1) S SRAO=1 F  S SRAO=$O(SROPS(SRAO)) Q:'SRAO  W !,?20,SROPS(SRAO)
"RTN","SROALTSP",25,0)
 N I,SRPROC,SRL S SRL=100 D CPTS^SROAUTL0 W !,?20,"CPT Codes: "
"RTN","SROALTSP",26,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?31,SRPROC(I) W:I'=1 !,?31,SRPROC(I)
"RTN","SROALTSP",27,0)
 D LINE
"RTN","SROALTSP",28,0)
 Q
"RTN","SROALTSP",29,0)
OTHER ; other operations
"RTN","SROALTSP",30,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>165 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROALTSP",31,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALTSP",32,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALTSP",33,0)
 Q
"RTN","SROALTSP",34,0)
LOOP ; break procedures
"RTN","SROALTSP",35,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<44  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALTSP",36,0)
 Q
"RTN","SROALTSP",37,0)
HDR ; print heading
"RTN","SROALTSP",38,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SROALTSP",39,0)
 S SRPAGE=SRPAGE+1 W:$Y @IOF W !,?52,"TRANSMITTED RISK ASSESSMENTS",?120,"PAGE "_SRPAGE,!,?(132-$L(SRINST)\2),SRINST,!,?58,"SURGERY SERVICE",?100,"DATE REVIEWED:"
"RTN","SROALTSP",40,0)
 W !,?(132-$L(SRFRTO)\2),SRFRTO,?100,"REVIEWED BY:"
"RTN","SROALTSP",41,0)
 W !!,"ASSESSMENT #",?20,"PATIENT",?67,"TRANSMISSION DATE",?107,"ANESTHESIA TECHNIQUE",!,"OPERATION DATE",?20,"OPERATIVE PROCEDURE(S)",! F LINE=1:1:132 W "="
"RTN","SROALTSP",42,0)
 Q
"RTN","SROALTSP",43,0)
SS ;print surgical specialty
"RTN","SROALTSP",44,0)
 I $Y+5>IOSL D HDR
"RTN","SROALTSP",45,0)
 W !!,"** SURGICAL SPECIALTY: ",SRSS," **",!
"RTN","SROALTSP",46,0)
 Q
"RTN","SROALTSP",47,0)
LINE W ! F L=1:1:132 W "-"
"RTN","SROALTSP",48,0)
 Q
"RTN","SROAMEAS")
0^49^B451481^B341409
"RTN","SROAMEAS",1,0)
SROAMEAS ;BIR/MAM - INPUT TRANSFORMS, HEIGHT & WEIGHT ;03/20/06
"RTN","SROAMEAS",2,0)
 ;;3.0; Surgery ;**38,125,153**;24 Jun 93;Build 11
"RTN","SROAMEAS",3,0)
H Q:'$D(X)  I X'?.N1"C"&(X'?.N1"c"),(+X'=X) K X Q
"RTN","SROAMEAS",4,0)
 I +X=X S X=X+.5\1 I X'>47.9!(X'<86.1) K X Q
"RTN","SROAMEAS",5,0)
 S:X["c" X=+X_"C"
"RTN","SROAMEAS",6,0)
 I X?.N1"C",(X'>121.9!(X'<218.1)) K X
"RTN","SROAMEAS",7,0)
 Q
"RTN","SROAMEAS",8,0)
W Q:'$D(X)  I +X'=X,(X'?.N1"K")&(X'?.N1"k") K X Q
"RTN","SROAMEAS",9,0)
 I +X=X S X=X+.5\1 I X'>49.9!(X'<700.1) K X Q
"RTN","SROAMEAS",10,0)
 S:X["k" X=+X_"K"
"RTN","SROAMEAS",11,0)
 I X?.N1"K",(X'>22.9!(X'<318.1)) K X
"RTN","SROAMEAS",12,0)
 Q
"RTN","SROANT")
0^79^B10789916^B11065524
"RTN","SROANT",1,0)
SROANT ;BIR/MAM - INCOMPLETE ASSESSMENTS ;03/24/06
"RTN","SROANT",2,0)
 ;;3.0; Surgery ;**38,50,100,142,153**;24 Jun 93;Build 11
"RTN","SROANT",3,0)
 I $E(IOST)="P" D ^SROANTP Q
"RTN","SROANT",4,0)
 S SRSOUT=0 D HDR
"RTN","SROANT",5,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  S SR("RA")=$G(^SRF(SRTN,"RA")) I $P(SR("RA"),"^")="I",$D(^SRF(SRTN,0)),$$DIV^SROUTL0(SRTN) D SET
"RTN","SROANT",6,0)
 Q
"RTN","SROANT",7,0)
SET ; print assessments
"RTN","SROANT",8,0)
 I $P(SR("RA"),"^",6)="N" Q
"RTN","SROANT",9,0)
 I $Y+5>IOSL D PAGE I SRSOUT Q
"RTN","SROANT",10,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROANT",11,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROANT",12,0)
 I $L(SRANM)>19 S SRANM=$P(SRANM,",")_","_$E($P(SRANM,",",2))_"."
"RTN","SROANT",13,0)
 S X=^SRF(SRTN,"OP"),SROPER=$P(X,"^")
"RTN","SROANT",14,0)
 I $O(^SRF(SRTN,13,0)) S SROTHER=0 F  S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROANT",15,0)
 S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROANT",16,0)
 K SROPS,MM,MMM S:$L(SROPER)<34 SROPS(1)=SROPER I $L(SROPER)>33 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROANT",17,0)
 S SRSS=$P(SRA(0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROANT",18,0)
 D TECH^SROPRIN
"RTN","SROANT",19,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROANT",20,0)
 S (SRDOC,Y)=$P($G(^SRF(SRTN,.1)),"^",4),C=$P(^DD(130,.14,0),"^",2) D:Y'="" Y^DIQ I $L(Y)>18 S Z=$P(Y,",")_","_$E($P(Y,",",2))_".",Y=Z
"RTN","SROANT",21,0)
 S SRDOC=Y
"RTN","SROANT",22,0)
 W !,SRTN,?20,SRANM_" "_VA("PID"),?55,$P(SRSS,"("),!,SRDT,?20,SROPS(1),?55,SRTECH,!,SRDOC I $D(SROPS(2)) W !,?20,SROPS(2) I $D(SROPS(3)) W !,?20,SROPS(3)
"RTN","SROANT",23,0)
 N I,SRPROC,SRL S SRL=48 D CPTS^SROAUTL0 W !,?20,"CPT Codes: "
"RTN","SROANT",24,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?31,SRPROC(I) W:I'=1 !,?31,SRPROC(I)
"RTN","SROANT",25,0)
 W ! F LINE=1:1:80 W "-"
"RTN","SROANT",26,0)
 Q
"RTN","SROANT",27,0)
OTHER ; other operations
"RTN","SROANT",28,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>125 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROANT",29,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROANT",30,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROANT",31,0)
 Q
"RTN","SROANT",32,0)
LOOP ; break procedures
"RTN","SROANT",33,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<34  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROANT",34,0)
 Q
"RTN","SROANT",35,0)
PAGE W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROANT",36,0)
 I X["?" W !!,"If you want to continue listing incomplete assessments, enter <RET>.  Enter",!,"'^' to return to the menu." G PAGE
"RTN","SROANT",37,0)
HDR W @IOF,!,?26,"INCOMPLETE RISK ASSESSMENTS",!,?(80-$L(SRFRTO)\2),SRFRTO,!!,"ASSESSMENT #",?20,"PATIENT",?55,"SURGICAL SPECIALTY"
"RTN","SROANT",38,0)
 W !,"OPERATION DATE",?20,"OPERATION(S)",?55,"ANESTHESIA TECHNIQUE",!,"SURGEON",! F LINE=1:1:80 W "="
"RTN","SROANT",39,0)
 Q
"RTN","SROANTP")
0^82^B10996883^B11267319
"RTN","SROANTP",1,0)
SROANTP ;BIR/MAM - INCOMPLETE ASSESSMENTS (PRINTER) ;03/24/06
"RTN","SROANTP",2,0)
 ;;3.0; Surgery ;**32,50,100,142,153**;24 Jun 93;Build 11
"RTN","SROANTP",3,0)
 S SRPAGE=1,(SRSOUT,SRDFN)=0 D HDR Q:SRSOUT
"RTN","SROANTP",4,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  S SR("RA")=$G(^SRF(SRTN,"RA")) I $P(SR("RA"),"^")="I",$D(^SRF(SRTN,0)),$$DIV^SROUTL0(SRTN) D SET
"RTN","SROANTP",5,0)
 Q
"RTN","SROANTP",6,0)
SET ; print assessments
"RTN","SROANTP",7,0)
 I $P(SR("RA"),"^",6)="N" Q
"RTN","SROANTP",8,0)
 I $Y+5>IOSL S SRPAGE=SRPAGE+1 D HDR I SRSOUT Q
"RTN","SROANTP",9,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROANTP",10,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROANTP",11,0)
 S X=^SRF(SRTN,"OP"),SROPER=$P(X,"^")
"RTN","SROANTP",12,0)
 I $O(^SRF(SRTN,13,0)) S SROTHER=0 F  S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROANTP",13,0)
 S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROANTP",14,0)
 K SROPS,MM,MMM S:$L(SROPER)<81 SROPS(1)=SROPER I $L(SROPER)>80 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROANTP",15,0)
 S SRSS=$P(SRA(0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROANTP",16,0)
 S TYPE=$P(SR("RA"),"^",2) I SRSS="SPECIALTY NOT ENTERED",TYPE="C" S SRSS="N/A"
"RTN","SROANTP",17,0)
 D TECH^SROPRIN
"RTN","SROANTP",18,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROANTP",19,0)
 S (SRDOC,Y)=$P($G(^SRF(SRTN,.1)),"^",4),C=$P(^DD(130,.14,0),"^",2) D:Y'="" Y^DIQ I $L(Y)>23 S Z=$P(Y,",")_","_$E($P(Y,",",2))_".",Y=Z
"RTN","SROANTP",20,0)
 S SRDOC=Y
"RTN","SROANTP",21,0)
 W !,SRTN,?20,SRANM_" "_VA("PID"),?67,$P(SRSS,"("),?107,SRTECH,!,SRDT,?20,SROPS(1),?107,SRDOC I $D(SROPS(2)) W !,?20,SROPS(2) I $D(SROPS(3)) W !,?20,SROPS(3) I $D(SROPS(4)) W !,?20,SROPS(4)
"RTN","SROANTP",22,0)
 N I,SRPROC,SRL S SRL=100 D CPTS^SROAUTL0 W !,?20,"CPT Codes: "
"RTN","SROANTP",23,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?31,SRPROC(I) W:I'=1 !,?31,SRPROC(I)
"RTN","SROANTP",24,0)
 W ! F LINE=1:1:132 W "-"
"RTN","SROANTP",25,0)
 Q
"RTN","SROANTP",26,0)
OTHER ; other operations
"RTN","SROANTP",27,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>165 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROANTP",28,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROANTP",29,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROANTP",30,0)
 Q
"RTN","SROANTP",31,0)
LOOP ; break procedures
"RTN","SROANTP",32,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<81  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROANTP",33,0)
 Q
"RTN","SROANTP",34,0)
HDR ; print heading
"RTN","SROANTP",35,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SROANTP",36,0)
 W:$Y @IOF W !,?53,"INCOMPLETE RISK ASSESSMENTS",?120,"PAGE "_SRPAGE,!,?(132-$L(SRINST)\2),SRINST,!,?58,"SURGERY SERVICE",?100,"DATE REVIEWED:"
"RTN","SROANTP",37,0)
 W !,?(132-$L(SRFRTO)\2),SRFRTO,?100,"REVIEWED BY:"
"RTN","SROANTP",38,0)
 W !!,"ASSESSMENT #",?20,"PATIENT",?67,"SURGICAL SPECIALTY",?107,"ANESTHESIA TECHNIQUE",!,"OPERATION DATE",?20,"OPERATIVE PROCEDURE(S)",?107,"SURGEON",! F LINE=1:1:132 W "="
"RTN","SROANTP",39,0)
 Q
"RTN","SROANTS")
0^80^B12415292^B13577952
"RTN","SROANTS",1,0)
SROANTS ;BIR/MAM - INCOMPLETE ASSESSMENTS ;03/24/06
"RTN","SROANTS",2,0)
 ;;3.0; Surgery ;**38,50,100,142,153**;24 Jun 93;Build 11
"RTN","SROANTS",3,0)
 I $E(IOST)="P" D ^SROANTSP Q
"RTN","SROANTS",4,0)
 K ^TMP("SRA",$J)
"RTN","SROANTS",5,0)
 S SRSOUT=0 D HDR
"RTN","SROANTS",6,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  S SR("RA")=$G(^SRF(SRTN,"RA")) I $P(SR("RA"),"^")="I",$D(^SRF(SRTN,0)),$$DIV^SROUTL0(SRTN) D UTL
"RTN","SROANTS",7,0)
 S SRSS="" F  S SRSS=$O(^TMP("SRA",$J,SRSS)) Q:SRSS=""!SRSOUT  D SS S SRTN=0 F  S SRTN=$O(^TMP("SRA",$J,SRSS,SRTN)) Q:'SRTN!SRSOUT  D SET
"RTN","SROANTS",8,0)
 I '$D(^TMP("SRA",$J)) W $$NODATA^SROUTL0()
"RTN","SROANTS",9,0)
 Q
"RTN","SROANTS",10,0)
UTL ; write to ^TMP("SRA",$J)
"RTN","SROANTS",11,0)
 I $P(SR("RA"),"^",6)="N" Q
"RTN","SROANTS",12,0)
 I SRFLG,$P(^SRF(SRTN,0),"^",4)'=SRASP Q
"RTN","SROANTS",13,0)
 S SRSS=$P(^SRF(SRTN,0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROANTS",14,0)
 S ^TMP("SRA",$J,SRSS,SRTN)=""
"RTN","SROANTS",15,0)
 Q
"RTN","SROANTS",16,0)
SET ; print assessments
"RTN","SROANTS",17,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROANTS",18,0)
 I $Y+5>IOSL D PAGE I SRSOUT Q
"RTN","SROANTS",19,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROANTS",20,0)
 I $L(SRANM)>19 S SRANM=$P(SRANM,",")_","_$E($P(SRANM,",",2))_"."
"RTN","SROANTS",21,0)
 S X=^SRF(SRTN,"OP"),SROPER=$P(X,"^")
"RTN","SROANTS",22,0)
 I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROANTS",23,0)
 S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROANTS",24,0)
 K SROPS,MM,MMM S:$L(SROPER)<34 SROPS(1)=SROPER I $L(SROPER)>33 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROANTS",25,0)
 D TECH^SROPRIN
"RTN","SROANTS",26,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROANTS",27,0)
 S (SRDOC,Y)=$P($G(^SRF(SRTN,.1)),"^",4),C=$P(^DD(130,.14,0),"^",2) D:Y'="" Y^DIQ I $L(Y)>23 S Z=$P(Y,",")_","_$E($P(Y,",",2))_".",Y=Z
"RTN","SROANTS",28,0)
 S SRDOC=Y
"RTN","SROANTS",29,0)
 W !,SRTN,?20,SRANM_" "_VA("PID"),?55,SRTECH,!,SRDT,?20,SROPS(1),?55,SRDOC S SRAO=1 F  S SRAO=$O(SROPS(SRAO)) Q:'SRAO  W !,?20,SROPS(SRAO)
"RTN","SROANTS",30,0)
 N I,SRPROC,SRL S SRL=48 D CPTS^SROAUTL0 W !,?20,"CPT Codes: "
"RTN","SROANTS",31,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?31,SRPROC(I) W:I'=1 !,?31,SRPROC(I)
"RTN","SROANTS",32,0)
 W ! F LINE=1:1:80 W "-"
"RTN","SROANTS",33,0)
 Q
"RTN","SROANTS",34,0)
OTHER ; other operations
"RTN","SROANTS",35,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>125 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROANTS",36,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROANTS",37,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROANTS",38,0)
 Q
"RTN","SROANTS",39,0)
LOOP ; break procedures
"RTN","SROANTS",40,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<34  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROANTS",41,0)
 Q
"RTN","SROANTS",42,0)
PAGE W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROANTS",43,0)
 I X["?" W !!,"If you want to continue listing incomplete assessments, enter <RET>.  Enter",!,"'^' to return to the menu." G PAGE
"RTN","SROANTS",44,0)
HDR W @IOF,!!,?26,"INCOMPLETE RISK ASSESSMENTS",!,?(80-$L(SRFRTO)\2),SRFRTO
"RTN","SROANTS",45,0)
 W !!,"ASSESSMENT #",?20,"PATIENT",?55,"ANESTHESIA TECHNIQUE"
"RTN","SROANTS",46,0)
 W !,"OPERATION DATE",?20,"OPERATION(S)",?55,"SURGEON",! F LINE=1:1:80 W "="
"RTN","SROANTS",47,0)
 Q
"RTN","SROANTS",48,0)
SS ; print surgical specialty
"RTN","SROANTS",49,0)
 I $Y+8>IOSL D PAGE Q:SRSOUT
"RTN","SROANTS",50,0)
 W !!,"** SURGICAL SPECIALTY: ",SRSS," **",!
"RTN","SROANTS",51,0)
 Q
"RTN","SROANTSP")
0^81^B12263907^B12522927
"RTN","SROANTSP",1,0)
SROANTSP ;BIR/MAM - INCOMPLETE ASSESSMENTS (PRINTER) ;03/24/06
"RTN","SROANTSP",2,0)
 ;;3.0; Surgery ;**32,50,100,142,153**;24 Jun 93;Build 11
"RTN","SROANTSP",3,0)
 K ^TMP("SRA",$J) S SRPAGE=0,(SRSOUT,SRDFN)=0 D HDR Q:SRSOUT
"RTN","SROANTSP",4,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  S SR("RA")=$G(^SRF(SRTN,"RA")) I $P(SR("RA"),"^")="I",$D(^SRF(SRTN,0)),$$DIV^SROUTL0(SRTN) D UTL
"RTN","SROANTSP",5,0)
 S SRSS="" F  S SRSS=$O(^TMP("SRA",$J,SRSS)) Q:SRSS=""!SRSOUT  D SS S SRTN=0 F  S SRTN=$O(^TMP("SRA",$J,SRSS,SRTN)) D:'SRTN LINE Q:'SRTN!SRSOUT  D SET
"RTN","SROANTSP",6,0)
 Q
"RTN","SROANTSP",7,0)
UTL ; write to ^TMP("SRA",$J)
"RTN","SROANTSP",8,0)
 I $P(SR("RA"),"^",6)="N" Q
"RTN","SROANTSP",9,0)
 I SRFLG,$P(^SRF(SRTN,0),"^",4)'=SRASP Q
"RTN","SROANTSP",10,0)
 S SRSS=$P(^SRF(SRTN,0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SRECIALTY NOT ENTERED")
"RTN","SROANTSP",11,0)
 S ^TMP("SRA",$J,SRSS,SRTN)=""
"RTN","SROANTSP",12,0)
 Q
"RTN","SROANTSP",13,0)
SET ; print assessments
"RTN","SROANTSP",14,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROANTSP",15,0)
 I $Y+5>IOSL D HDR I SRSOUT Q
"RTN","SROANTSP",16,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROANTSP",17,0)
 S X=^SRF(SRTN,"OP"),SROPER=$P(X,"^")
"RTN","SROANTSP",18,0)
 I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROANTSP",19,0)
 S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROANTSP",20,0)
 K SROPS,MM,MMM S:$L(SROPER)<36 SROPS(1)=SROPER I $L(SROPER)>35 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROANTSP",21,0)
 D TECH^SROPRIN
"RTN","SROANTSP",22,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROANTSP",23,0)
 S (SRDOC,Y)=$P($G(^SRF(SRTN,.1)),"^",4),C=$P(^DD(130,.14,0),"^",2) D:Y'="" Y^DIQ I $L(Y)>23 S Z=$P(Y,",")_","_$E($P(Y,",",2))_".",Y=Z
"RTN","SROANTSP",24,0)
 S SRDOC=Y
"RTN","SROANTSP",25,0)
 W !,SRTN,?20,SRANM_" "_VA("PID"),?67,SROPS(1),?107,SRTECH,!,SRDT W:$D(SROPS(2)) ?67,SROPS(2) W ?107,SRDOC S SRAO=2 F  S SRAO=$O(SROPS(SRAO)) Q:'SRAO  W !,?67,SROPS(SRAO)
"RTN","SROANTSP",26,0)
 N I,SRPROC,SRL S SRL=53 D CPTS^SROAUTL0 W !,?67,"CPT Codes: "
"RTN","SROANTSP",27,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?78,SRPROC(I) W:I'=1 !,?78,SRPROC(I)
"RTN","SROANTSP",28,0)
 W ! F LINE=1:1:132 W "-"
"RTN","SROANTSP",29,0)
 Q
"RTN","SROANTSP",30,0)
OTHER ; other operations
"RTN","SROANTSP",31,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>125 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROANTSP",32,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROANTSP",33,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROANTSP",34,0)
 Q
"RTN","SROANTSP",35,0)
LOOP ; break procedures
"RTN","SROANTSP",36,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<35  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROANTSP",37,0)
 Q
"RTN","SROANTSP",38,0)
HDR ; print heading
"RTN","SROANTSP",39,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SROANTSP",40,0)
 S SRPAGE=SRPAGE+1 W:$Y @IOF W !,?53,"INCOMPLETE RISK ASSESSMENTS",?120,"PAGE "_SRPAGE,!,?(132-$L(SRINST)\2),SRINST,!,?58,"SURGERY SERVICE",?100,"DATE REVIEWED:"
"RTN","SROANTSP",41,0)
 W !,?(132-$L(SRFRTO)\2),SRFRTO,?100,"REVIEWED BY:"
"RTN","SROANTSP",42,0)
 W !!,"ASSESSMENT #",?20,"PATIENT",?67,"OPERATIVE PROCEDURE(S)",?107,"ANESTHESIA TECHNIQUE",!,"OPERATION DATE",?107,"SURGEON",! F LINE=1:1:132 W "="
"RTN","SROANTSP",43,0)
 Q
"RTN","SROANTSP",44,0)
SS ; print surgical specialty
"RTN","SROANTSP",45,0)
 I $Y+5>IOSL D HDR
"RTN","SROANTSP",46,0)
 W !!,"** SURGICAL SPECIALTY: ",SRSS," **",!
"RTN","SROANTSP",47,0)
 Q
"RTN","SROANTSP",48,0)
LINE W ! F L=1:1:132 W "-"
"RTN","SROANTSP",49,0)
 Q
"RTN","SROAOP")
0^4^B18332752^B20148443
"RTN","SROAOP",1,0)
SROAOP ;BIR/MAM - ENTER OPERATION INFO ;06/07/06
"RTN","SROAOP",2,0)
 ;;3.0; Surgery ;**19,38,47,63,67,81,86,97,100,125,142,153**;24 Jun 93;Build 11
"RTN","SROAOP",3,0)
 I '$D(SRTN) W !!,"A Surgery Risk Assessment must be selected prior to using this option.",!!,"Press <RET> to continue  " R X:DTIME G END
"RTN","SROAOP",4,0)
 S SRSOUT=0,SRSUPCPT=1 D ^SROAUTL
"RTN","SROAOP",5,0)
START G:SRSOUT END K SRAOTH,SRACON D ^SROAOP1
"RTN","SROAOP",6,0)
ASK W !!,"Select Operative Information to Edit: " R SRASEL:DTIME I '$T!(SRASEL["^") S SRSOUT=1 G END
"RTN","SROAOP",7,0)
 I SRASEL="" G END
"RTN","SROAOP",8,0)
 S SRN=13 S:SRASEL="a" SRASEL="A" I '$D(SRAO(SRASEL)),(SRASEL'?.N1":".N),(SRASEL'="A") D HELP G:SRSOUT END G START
"RTN","SROAOP",9,0)
 I SRASEL="A" S SRASEL="1:"_SRN
"RTN","SROAOP",10,0)
 I SRASEL?.N1":".N S Y=$E(SRASEL),Z=$P(SRASEL,":",2) I Y<1!(Z>SRN)!(Y>Z) D HELP G:SRSOUT END G START
"RTN","SROAOP",11,0)
 S MM=$E(SRASEL) I MM'=3,(MM'=4),(MM'=5) S SRHDR(.5)=SRDOC D HDR^SROAUTL
"RTN","SROAOP",12,0)
 I SRASEL?.N1":".N D RANGE G START
"RTN","SROAOP",13,0)
 Q:'$D(SRAO(SRASEL))
"RTN","SROAOP",14,0)
 S EMILY=SRASEL D  G START
"RTN","SROAOP",15,0)
 .I $$LOCK^SROUTL(SRTN) D ONE,UNLOCK^SROUTL(SRTN)
"RTN","SROAOP",16,0)
END I $D(SRSOUT),'SRSOUT D ^SROAOP2
"RTN","SROAOP",17,0)
 I $D(SRTN) S SROERR=SRTN D ^SROERR0
"RTN","SROAOP",18,0)
 W @IOF D ^SRSKILL
"RTN","SROAOP",19,0)
 Q
"RTN","SROAOP",20,0)
HELP W @IOF,!!!!,"Enter the number or range of numbers you want to edit. Examples of proper"
"RTN","SROAOP",21,0)
 W !,"responses are listed below.",!!,"1. Enter 'A' to update all information."
"RTN","SROAOP",22,0)
 W !!,"2. Enter a number (1-"_SRN_") to update the information in that field. (For"
"RTN","SROAOP",23,0)
 W !,"   example, enter '2' to update Principal Operation.)"
"RTN","SROAOP",24,0)
 W !!,"3. Enter a range of numbers (1-"_SRN_") separated by a ':' to enter a range of"
"RTN","SROAOP",25,0)
 W !,"   information. (For example, enter '6:8' to update PGY of Primary Surgeon,"
"RTN","SROAOP",26,0)
 W !,"   Surgical Priority and Wound Classification.)",!
"RTN","SROAOP",27,0)
PRESS K DIR S DIR(0)="E" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1
"RTN","SROAOP",28,0)
 Q
"RTN","SROAOP",29,0)
RANGE ; range of numbers
"RTN","SROAOP",30,0)
 I $$LOCK^SROUTL(SRTN) D  D UNLOCK^SROUTL(SRTN)
"RTN","SROAOP",31,0)
 .S SHEMP=$P(SRASEL,":"),CURLEY=$P(SRASEL,":",2) F EMILY=SHEMP:1:CURLEY Q:SRSOUT  D ONE
"RTN","SROAOP",32,0)
 Q
"RTN","SROAOP",33,0)
ONE ; edit one item
"RTN","SROAOP",34,0)
 I EMILY=3 D DISP^SROAUTL0 Q
"RTN","SROAOP",35,0)
 I EMILY=10 D ANES Q
"RTN","SROAOP",36,0)
 I EMILY=4 D ^SROTHER Q
"RTN","SROAOP",37,0)
 I EMILY=5 D CONCUR Q
"RTN","SROAOP",38,0)
 ;I EMILY=4!(EMILY=5) D:EMILY=4 ^SROTHER D:EMILY=5 CONCUR Q
"RTN","SROAOP",39,0)
 I EMILY=6,SRASEL[":",($P(SRASEL,":")'=6) S SRPAGE="" S SRHDR(.5)=SRDOC D HDR^SROAUTL
"RTN","SROAOP",40,0)
 K DR,DIE S DA=SRTN,DR=$P(SRAO(EMILY),"^",2)_"T",DIE=130 D ^DIE K DR I $D(Y) S SRSOUT=1
"RTN","SROAOP",41,0)
 I EMILY=2 D ^SROAUTL
"RTN","SROAOP",42,0)
 Q
"RTN","SROAOP",43,0)
RET Q:SRSOUT  W !!,"Press ENTER to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROAOP",44,0)
 Q
"RTN","SROAOP",45,0)
CONCUR ; concurrent case information
"RTN","SROAOP",46,0)
 S SRLINE="" F I=1:1:80 S SRLINE=SRLINE_"-"
"RTN","SROAOP",47,0)
 S CON=$P($G(^SRF(SRTN,"CON")),"^") I CON,($P($G(^SRF(CON,30)),"^")!($P($G(^SRF(CON,31)),"^",8))) S CON=""
"RTN","SROAOP",48,0)
 S SRPAGE="" D HDR^SROAUTL
"RTN","SROAOP",49,0)
 W !,"Concurrent case information cannot be updated using the Risk Assessment",!,"Module. To update the CPT code of a concurrent case, please use an option",!,"contained within the Operation Menu."
"RTN","SROAOP",50,0)
 I CON D CC W !!,"Concurrent Procedure: ",?25,SROPS(1) I $D(SROPS(2)) W !,?25,SROPS(2) I $D(SROPS(3)) W !,?25,SROPS(3) I $D(SROPS(4)) W !,?25,SROPS(4)
"RTN","SROAOP",51,0)
 W !!,"Press ENTER to continue " R X:DTIME
"RTN","SROAOP",52,0)
 Q
"RTN","SROAOP",53,0)
CC ; list concurrent procedure
"RTN","SROAOP",54,0)
 S SROPER=$P(^SRF(CON,"OP"),"^") I $P(^("OP"),"^",2) S SROPER=SROPER_" ("_$P(^("OP"),"^",2)_")"
"RTN","SROAOP",55,0)
 K SROPS,MM,MMM S:$L(SROPER)<45 SROPS(1)=SROPER
"RTN","SROAOP",56,0)
 I $L(SROPER)>44 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROAOP",57,0)
 Q
"RTN","SROAOP",58,0)
LOOP ; break procedures
"RTN","SROAOP",59,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<45  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROAOP",60,0)
 Q
"RTN","SROAOP",61,0)
ANES K DR,DIE,DA S DA=SRTN,DR=".37T;901.1T",DR(2,130.06)=".01T;.05T;42T;12T",DIE=130 D ^DIE K DR
"RTN","SROAOP",62,0)
 Q
"RTN","SROAOP",63,0)
TRAUMA ; airway trauma
"RTN","SROAOP",64,0)
 N SRTECH,SRT,SRZ S SRT=0 F  S SRT=$O(^SRF(SRTN,6,SRT)) Q:'SRT  D ^SROPRIN Q:$D(SRZ)
"RTN","SROAOP",65,0)
 I '$G(SRT) W !!,"Enter Principal Anesthesia Technique first!",! H 2 D ANES Q
"RTN","SROAOP",66,0)
 I $G(SRT) K DA,DR,DIE S DIE="^SRF("_SRTN_",6,",DA(1)=SRTN,DA=SRT,DR="12" D ^DIE K DA,DR,DIE
"RTN","SROAOP",67,0)
 Q
"RTN","SROAOP1")
0^5^B10623526^B18659468
"RTN","SROAOP1",1,0)
SROAOP1 ;BIR/MAM - SET OPERATION INFO ;04/03/06
"RTN","SROAOP1",2,0)
 ;;3.0; Surgery ;**38,47,63,81,88,95,97,125,142,153**;24 Jun 93;Build 11
"RTN","SROAOP1",3,0)
 K SRA,SRAO F I=0,200,"OP" S SRA(I)=$G(^SRF(SRTN,I))
"RTN","SROAOP1",4,0)
 S SRDOC="Surgeon: "_$P(^VA(200,$P(^SRF(SRTN,.1),"^",4),0),"^") F I=3,4,5 S SRAO(I)=""
"RTN","SROAOP1",5,0)
 K SROPS S SROPER=$P(SRA("OP"),"^")
"RTN","SROAOP1",6,0)
 S SRAO(2)="^26"
"RTN","SROAOP1",7,0)
 S:$L(SROPER)<49 SROPS(1)=SROPER K M,MM,MMM I $L(SROPER)>48 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROAOP1",8,0)
 S X=$P(SRA(0),"^",4) S:X X=$P(^SRO(137.45,X,0),"^",1) S SRAO(1)=X_"^.04"
"RTN","SROAOP1",9,0)
 S X=$P(SRA(0),"^",3) S:X'="" X=$S(X="J":"MAJOR",1:"MINOR") S SRAO(12)=X_"^.03"
"RTN","SROAOP1",10,0)
 S SRHDR(.5)=SRDOC,SRPAGE="PAGE: 1 OF 2" D HDR^SROAUTL
"RTN","SROAOP1",11,0)
 S X=$P($G(^SRO(136,SRTN,0)),"^",3) S:X X=$$ICDDX^ICDCODE(X,$P($G(^SRF(SRTN,0)),"^",9)),X=$P(X,"^",2)_"   "_$P(X,"^",4)
"RTN","SROAOP1",12,0)
 W "Postop Diagnosis Code (ICD9): ",$S(X'="":X,1:"NOT ENTERED"),!
"RTN","SROAOP1",13,0)
 W !," 1. Surgical Specialty: ",?33,$P(SRAO(1),"^"),!," 2. Principal Operation: ",?33,SROPS(1) I $D(SROPS(2)) W !,?33,SROPS(2) I $D(SROPS(3)) W !,?33,SROPS(3) I $D(SROPS(4)) W !,?33,SROPS(4)
"RTN","SROAOP1",14,0)
 N SRPROC,SRL S SRL=49 D CPTS^SROAUTL0 W !," 3. CPT Codes (view only):" I SRPROC(1)="" S SRPROC(1)="NOT ENTERED"
"RTN","SROAOP1",15,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?33,SRPROC(I) W:I'=1 !,?33,SRPROC(I)
"RTN","SROAOP1",16,0)
 W !," 4. Other Procedures:" W:$O(^SRF(SRTN,13,0)) ?33,"***INFORMATION ENTERED***"
"RTN","SROAOP1",17,0)
 W !," 5. Concurrent Procedure:" S CON=$P($G(^SRF(SRTN,"CON")),"^") I CON,'($P($G(^SRF(CON,30)),"^")!($P($G(^SRF(CON,31)),"^",8))) W ?33,"***INFORMATION ENTERED***"
"RTN","SROAOP1",18,0)
 S X=$P(SRA(200),"^",52),SRAO(6)=X_"^214",NYUK=$P(SRA(0),"^",10) D EMERG S SRAO(7)=SHEMP_"^.035"
"RTN","SROAOP1",19,0)
 S Y=$P($G(^SRF(SRTN,"1.0")),"^",8),C=$P(^DD(130,1.09,0),"^",2) D:Y'="" Y^DIQ S SRAO(8)=Y_"^1.09"
"RTN","SROAOP1",20,0)
 S Y=$P($G(^SRF(SRTN,1.1)),"^",3),C=$P(^DD(130,1.13,0),"^",2) D:Y'="" Y^DIQ S SRAO(9)=Y_"^1.13"
"RTN","SROAOP1",21,0)
 D TECH^SROPRIN S SRAO(10)=SRTECH
"RTN","SROAOP1",22,0)
 S X=$P(SRA(200),"^",54),SRAO(11)=X_"^340" K SRA(.2)
"RTN","SROAOP1",23,0)
 S Y=$P($G(^SRF(SRTN,200.1)),"^",4),C=$P(^DD(130,443,0),"^",2) D:Y'="" Y^DIQ S SRAO(13)=Y_"^443"
"RTN","SROAOP1",24,0)
 W !," 6. PGY of Primary Surgeon:",?33,$P(SRAO(6),"^"),!," 7. Surgical Priority:",?33,$P(SRAO(7),"^"),!," 8. Wound Classification: ",?33,$P(SRAO(8),"^")
"RTN","SROAOP1",25,0)
 W !," 9. ASA Classification:",?33,$P(SRAO(9),"^")
"RTN","SROAOP1",26,0)
 W !,"10. Princ. Anesthesia Technique: ",$P(SRAO(10),"^")
"RTN","SROAOP1",27,0)
 W !,"11. RBC Units Transfused:",?33,$P(SRAO(11),"^")
"RTN","SROAOP1",28,0)
 W !,"12. Major or Minor:",?33,$P(SRAO(12),"^")
"RTN","SROAOP1",29,0)
 W !,"13. Intraop Disseminated Cancer:",?33,$P(SRAO(13),"^")
"RTN","SROAOP1",30,0)
 W ! F LINE=1:1:80 W "-"
"RTN","SROAOP1",31,0)
 Q
"RTN","SROAOP1",32,0)
YN S SHEMP=$S(NYUK="NS":"NS",NYUK="N":"NO",NYUK="Y":"YES",1:"")
"RTN","SROAOP1",33,0)
 Q
"RTN","SROAOP1",34,0)
LOOP ; break procedures
"RTN","SROAOP1",35,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<49  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROAOP1",36,0)
 Q
"RTN","SROAOP1",37,0)
EMERG ; surgical priority
"RTN","SROAOP1",38,0)
 I NYUK="" S SHEMP="" Q
"RTN","SROAOP1",39,0)
 S Y=NYUK,C=$P(^DD(130,.035,0),"^",2) D Y^DIQ S SHEMP=Y
"RTN","SROAOP1",40,0)
 Q
"RTN","SROAOTH")
0^102^B6104912^B5861466
"RTN","SROAOTH",1,0)
SROAOTH ;BIR/MAM - PRINT OTHER PROCEDURES ;04/11/06
"RTN","SROAOTH",2,0)
 ;;3.0; Surgery ;**34,88,97,142,153**;24 Jun 93;Build 11
"RTN","SROAOTH",3,0)
 N CPTT
"RTN","SROAOTH",4,0)
 W ! S (CNT,OTH)=0,CPTT="" F  S OTH=$O(^SRF(SRTN,13,OTH)) Q:'OTH  S CNT=CNT+1,OPER=$P(^SRF(SRTN,13,OTH,0),"^"),CPT=$P($G(^SRF(SRTN,13,OTH,2)),"^") D LIST
"RTN","SROAOTH",5,0)
 S X=$P($G(^SRO(136,SRTN,0)),"^",2) I X S Y=$S(X:$P($$CPT^ICPTCOD(X),"^",2),1:"") D SSPRIN^SROCPT0 S CPTT=Y I $L(Y),$O(^SRO(136,SRTN,3,0)) D
"RTN","SROAOTH",6,0)
 .S OTH=0 F  S OTH=$O(^SRO(136,SRTN,3,OTH)) Q:'OTH  S OPER=$P($G(^SRO(136,SRTN,3,OTH,0)),"^"),CPT=$P($G(^SRO(136,SRTN,3,OTH,0)),"^") D
"RTN","SROAOTH",7,0)
 ..I CPT S Y=$P($$CPT^ICPTCOD(CPT),"^",2),SRDA=OTH D SSOTH^SROCPT0 S CPT=Y I $L(CPT) S CPTT=CPTT_", "_CPT
"RTN","SROAOTH",8,0)
 W !!,$J("Procedure CPT Codes: ",39)_CPTT
"RTN","SROAOTH",9,0)
 K OTH,CPT,CNT,OPER,SROPS S SROPS(1)=""
"RTN","SROAOTH",10,0)
 S CPT="",CON=$P($G(^SRF(SRTN,"CON")),"^") I CON,($P($G(^SRF(CON,30)),"^")!($P($G(^SRF(CON,31)),"^",8))) S CON=""
"RTN","SROAOTH",11,0)
 I CON S SROPER=$P(^SRF(CON,"OP"),"^"),CPT=$P($G(^SRO(136,CON,0)),"^",2) D
"RTN","SROAOTH",12,0)
 .K SROPS,MM,MMM S:$L(SROPER)<49 SROPS(1)=SROPER I $L(SROPER)>48 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROAOTH",13,0)
 .I CPT S Y=$P($$CPT^ICPTCOD(CPT),"^",2) D CON
"RTN","SROAOTH",14,0)
 .S:CPT="" CPT="MISSING"
"RTN","SROAOTH",15,0)
 W !!,$J("Concurrent Procedure: ",39)_$S(SROPS(1)="":"N/A",1:SROPS(1)) I $D(SROPS(2)) W !,?39,SROPS(2) I $D(SROPS(3)) W !,?39,SROPS(3)
"RTN","SROAOTH",16,0)
 W !,$J("CPT Code: ",39)_$S(CPT="":"N/A",1:CPT)
"RTN","SROAOTH",17,0)
 Q
"RTN","SROAOTH",18,0)
CON ; get CPT modifiers for concurrent procedure
"RTN","SROAOTH",19,0)
 N SRTN S SRTN=CON D SSPRIN^SROCPT0 S CPT=Y
"RTN","SROAOTH",20,0)
 Q
"RTN","SROAOTH",21,0)
LIST I CPT S Y=$P($$CPT^ICPTCOD(CPT),"^",2),SRDA=OTH D SSOTH^SROCPT S CPT=Y
"RTN","SROAOTH",22,0)
 S:CPT="" CPT="MISSING"
"RTN","SROAOTH",23,0)
 W !,$J("Other Procedure ("_CNT_"): ",39)_OPER
"RTN","SROAOTH",24,0)
 Q
"RTN","SROAOTH",25,0)
LOOP ; break procedures
"RTN","SROAOTH",26,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<49  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROAOTH",27,0)
 Q
"RTN","SROAPAS")
0^101^B27516322^B27479579
"RTN","SROAPAS",1,0)
SROAPAS ;BIR/MAM - PRINT A COMPLETE ASSESSMENT ; [ 04/13/04  2:50 PM ]
"RTN","SROAPAS",2,0)
 ;;3.0; Surgery ;**38,47,81,88,111,112,100,125,153**;24 Jun 93;Build 11
"RTN","SROAPAS",3,0)
 S SRSOUT=0,SRPG=0,SR("RA")=$G(^SRF(SRTN,"RA")),SRATYPE=$P(SR("RA"),"^",2) F I=200:1:208,200.1 S SRA(I)=$G(^SRF(SRTN,I))
"RTN","SROAPAS",4,0)
 S SRA("OP")=^SRF(SRTN,"OP"),SRA("CON")=$G(^SRF(SRTN,"CON"))
"RTN","SROAPAS",5,0)
 S SR(0)=^SRF(SRTN,0),DFN=$P(SR(0),"^"),SRSDATE=$P(SR(0),"^",9) D DEM^VADPT S SRANM=VADM(1)_"  "_VA("PID"),Z=$P(VADM(3),"^"),Y=$E(SRSDATE,1,7),AGE=$E(Y,1,3)-$E(Z,1,3)-($E(Y,4,7)<$E(Z,4,7))
"RTN","SROAPAS",6,0)
 I $P(SR("RA"),"^",2)="C" D ^SROAPCA G END
"RTN","SROAPAS",7,0)
 W:$E(IOST)'="P" @IOF D HDR G:SRSOUT END
"RTN","SROAPAS",8,0)
 W !,"Medical Center: "_SRSITE("SITE")
"RTN","SROAPAS",9,0)
 W !,"Age: ",?16,AGE S Y=SRSDATE D D^DIQ W ?40,"Operation Date: ",?59,$P(Y,"@")
"RTN","SROAPAS",10,0)
 S Y=$P($G(^SRF(SRTN,208)),"^",10),C=$P(^DD(130,417,0),"^",2) D Y^DIQ S X=$S(Y'="":Y,1:"NOT ENTERED")
"RTN","SROAPAS",11,0)
 ;
"RTN","SROAPAS",12,0)
 D DEM^VADPT
"RTN","SROAPAS",13,0)
 ;Find patient's ethnicity
"RTN","SROAPAS",14,0)
 S SROETH=""
"RTN","SROAPAS",15,0)
 I $G(VADM(11)) S SROETH=$P(VADM(11,1),U,2)
"RTN","SROAPAS",16,0)
 I '$G(VADM(11)) S SROETH="UNANSWERED"
"RTN","SROAPAS",17,0)
 ;
"RTN","SROAPAS",18,0)
 ;Find all race entries and place into a string with commas inbetween
"RTN","SROAPAS",19,0)
 S SRORC=0,C=1,SRORACE="",SROLINE="",N=1,SROL=""
"RTN","SROAPAS",20,0)
 F  S SRORC=$O(VADM(12,SRORC)) Q:SRORC=""  Q:C=11  D
"RTN","SROAPAS",21,0)
 .I $G(VADM(12,SRORC)) S SRORACE(C)=$P(VADM(12,SRORC),U,2)
"RTN","SROAPAS",22,0)
 .I SROLINE'="" S SROLINE=SROLINE_", "_SRORACE(C)
"RTN","SROAPAS",23,0)
 .I SROLINE="" S SROLINE=SRORACE(C)
"RTN","SROAPAS",24,0)
 .S C=C+1
"RTN","SROAPAS",25,0)
 ;
"RTN","SROAPAS",26,0)
 ;Find total length of 'race' string and wrap the text if necessary
"RTN","SROAPAS",27,0)
 I $L(SROLINE)=29!$L(SROLINE)<29 S SROL(N)=SROLINE,SRNUM1=2
"RTN","SROAPAS",28,0)
 I $L(SROLINE)>29 D WRAP
"RTN","SROAPAS",29,0)
 ;
"RTN","SROAPAS",30,0)
 W !,"Sex: ",?16,$P(VADM(5),"^",2),?40,"Ethnicity:",?51,SROETH
"RTN","SROAPAS",31,0)
 W !,?40,"Race:"
"RTN","SROAPAS",32,0)
 I $G(VADM(12)) F D=1:1:SRNUM1-1 D
"RTN","SROAPAS",33,0)
 .W:D=1 ?51,SROL(D)
"RTN","SROAPAS",34,0)
 .W:D'=1 !,?51,SROL(D)
"RTN","SROAPAS",35,0)
 I '$G(VADM(12)) W ?51,"UNANSWERED"
"RTN","SROAPAS",36,0)
 ;
"RTN","SROAPAS",37,0)
 K SROL,SROLINE,SRORC,SRORACE,SROLN,SROLN1,SROWRAP,SRNUM1
"RTN","SROAPAS",38,0)
 ;
"RTN","SROAPAS",39,0)
 S Y=$P($G(^SRF(SRTN,208)),"^",11),C=$P(^DD(130,413,0),"^",2) D Y^DIQ S X=$S(Y'="":Y,1:"NOT ENTERED") W !,"Transfer Status: ",X
"RTN","SROAPAS",40,0)
 F J=1,2,3 S Y=$P($G(^SRF(SRTN,208.1)),"^",J) D
"RTN","SROAPAS",41,0)
 .I J'=3 X:Y ^DD("DD") S Z=$P(Y,"@")_"  "_$E($P(Y,"@",2),1,5)
"RTN","SROAPAS",42,0)
 .I J=3 S C=$P(^DD(130,454,0),"^",2) D Y^DIQ S Z=Y
"RTN","SROAPAS",43,0)
 .W !,"Observation "_$S(J=1:"Admission Date:",J=2:"Discharge Date:",1:"Treating Specialty:"),?47,Z
"RTN","SROAPAS",44,0)
 F J=14:1:17 S Y=$P($G(^SRF(SRTN,208)),"^",J) X ^DD("DD") S SRPTMODT(J)=Y
"RTN","SROAPAS",45,0)
 S (X,Z)=SRPTMODT(14) S:X'="" Z=$P(X,"@")_"  "_$E($P(X,"@",2),1,5) W !,"Hospital Admission Date:",?47,Z
"RTN","SROAPAS",46,0)
 S (X,Z)=SRPTMODT(15) S:X'="" Z=$P(X,"@")_"  "_$E($P(X,"@",2),1,5) W !,"Hospital Discharge Date:",?47,Z
"RTN","SROAPAS",47,0)
 S (X,Z)=SRPTMODT(16) S:X'="" Z=$P(X,"@")_"  "_$E($P(X,"@",2),1,5) W !,"Admitted/Transferred to Surgical Service:",?47,Z
"RTN","SROAPAS",48,0)
 S (X,Z)=SRPTMODT(17) S:X'="" Z=$P(X,"@")_"  "_$E($P(X,"@",2),1,5) W !,"Discharged/Transferred to Chronic Care:",?47,Z
"RTN","SROAPAS",49,0)
 W !,"In/Out-Patient Status:",?47,$S($P($G(^SRF(SRTN,0)),"^",12)="I":"INPATIENT",$P($G(^SRF(SRTN,0)),"^",12)="O":"OUTPATIENT",1:"")
"RTN","SROAPAS",50,0)
 I $E(IOST)="P" W ! F MOE=1:1:80 W "-"
"RTN","SROAPAS",51,0)
 I $E(IOST)'="P" D PAGE I SRSOUT G END
"RTN","SROAPAS",52,0)
 D ^SROAPRT1 G:SRSOUT END I $Y+20>IOSL D PAGE I SRSOUT G END
"RTN","SROAPAS",53,0)
 D ^SROAPRT2 G:SRSOUT END I $Y+20>IOSL D PAGE I SRSOUT G END
"RTN","SROAPAS",54,0)
 D OPTIMES^SROAPRT3 G:SRSOUT END I $Y+20>IOSL D PAGE I SRSOUT G END
"RTN","SROAPAS",55,0)
 D ^SROAPRT3 G:SRSOUT END I $Y+24>IOSL D PAGE I SRSOUT G END
"RTN","SROAPAS",56,0)
 D ^SROAPRT4 G:SRSOUT END I $Y+20>IOSL D PAGE I SRSOUT G END
"RTN","SROAPAS",57,0)
 D ^SROAPRT5 G:SRSOUT END I $Y+20>IOSL D PAGE I SRSOUT G END
"RTN","SROAPAS",58,0)
 D ^SROAPRT6
"RTN","SROAPAS",59,0)
END Q:$D(SRABATCH)  I 'SRSOUT,$E(IOST)'="P" W !!,"Press <RET> to continue  " R X:DTIME
"RTN","SROAPAS",60,0)
 W:$E(IOST)="P" @IOF I $D(ZTQUEUED) Q:$G(ZTSTOP)  S ZTREQ="@" Q
"RTN","SROAPAS",61,0)
 D ^%ZISC K SRTN W @IOF D ^SRSKILL
"RTN","SROAPAS",62,0)
 Q
"RTN","SROAPAS",63,0)
 ;
"RTN","SROAPAS",64,0)
WRAP ;Wrap multiple race entries so that wrapped line
"RTN","SROAPAS",65,0)
 ;does not break in the middle of a word
"RTN","SROAPAS",66,0)
 ;
"RTN","SROAPAS",67,0)
 S SROLNGTH=$L(SROLINE),E=29,SROWRAP="",SROLN="",SROLN1="",SROL=""
"RTN","SROAPAS",68,0)
 F I=1:29:SROLNGTH S SROLN(I)=SROWRAP_$E(SROLINE,I,E) D
"RTN","SROAPAS",69,0)
 .F K=29:-1:1 I $E(SROLN(I),K)[" " D  Q    ;Break lines at space
"RTN","SROAPAS",70,0)
 ..S SROLN1(I)=$E(SROLN(I),1,K-1)
"RTN","SROAPAS",71,0)
 ..S SROWRAP=$E(SROLN(I),K+1,E)
"RTN","SROAPAS",72,0)
 .S E=E+29
"RTN","SROAPAS",73,0)
 ;
"RTN","SROAPAS",74,0)
 S:'$D(SROLN1(I)) SROLN1(I)=SROLN(I),SROWRAP=""
"RTN","SROAPAS",75,0)
 I $L(SROLN1(I))+$L(SROWRAP)>28 S SROLN1(I+1)=SROWRAP   ;Last line
"RTN","SROAPAS",76,0)
 I $L(SROLN1(I))+$L(SROWRAP)'>28 S SROLN1(I)=SROLN1(I)_" "_SROWRAP
"RTN","SROAPAS",77,0)
 ;
"RTN","SROAPAS",78,0)
 ;Renumber the SROLN1 array to be in numeric order
"RTN","SROAPAS",79,0)
 S SRNUM=0,SRNUM1=1
"RTN","SROAPAS",80,0)
 F  S SRNUM=$O(SROLN1(SRNUM)) Q:SRNUM=""  D
"RTN","SROAPAS",81,0)
 .S SROL(SRNUM1)=SROLN1(SRNUM)
"RTN","SROAPAS",82,0)
 .S SRNUM1=SRNUM1+1
"RTN","SROAPAS",83,0)
 Q
"RTN","SROAPAS",84,0)
 ;
"RTN","SROAPAS",85,0)
LOOP ; break procedures
"RTN","SROAPAS",86,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<55  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROAPAS",87,0)
 Q
"RTN","SROAPAS",88,0)
PAGE I $E(IOST)'="P" W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROAPAS",89,0)
 I X["?" W !!,"Enter <RET> to continue printing the remaining pages of this assessment, or",!,"'^' to exit this option." G PAGE
"RTN","SROAPAS",90,0)
 W @IOF
"RTN","SROAPAS",91,0)
HDR ; print heading
"RTN","SROAPAS",92,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SROAPAS",93,0)
 S SRPG=SRPG+1
"RTN","SROAPAS",94,0)
 I $Y'=0 W @IOF
"RTN","SROAPAS",95,0)
 I SRATYPE="C" W !,"VA CARDIAC RISK ASSESSMENT",?70,"PAGE "_SRPG
"RTN","SROAPAS",96,0)
 I SRATYPE="N" W !,"VA NON-CARDIAC RISK ASSESSMENT             Assessment: "_SRTN,?69,"PAGE "_SRPG
"RTN","SROAPAS",97,0)
 W !,"FOR "_SRANM S X=$P(SR("RA"),"^") W " ("_$S(X="I":"INCOMPLETE",X="C":"COMPLETED",X="T":"TRANSMITTED",1:"NO ASSESSMENT") I X="T" S Y=$P(SR("RA"),"^",4) W " "_$E(Y,4,5)_"/"_$E(Y,6,7)_"/"_$E(Y,2,3)
"RTN","SROAPAS",98,0)
 W ")",! F LINE=1:1:80 W "="
"RTN","SROAPAS",99,0)
 W !
"RTN","SROAPAS",100,0)
 Q
"RTN","SROAPAS",101,0)
CODE ; print CPT Code
"RTN","SROAPAS",102,0)
 S X=$P(^SRF(SRTN,13,SR,0),"^",2) I X W "  ("_$P($$CPT^ICPTCOD(X),"^",2)_")"
"RTN","SROAPAS",103,0)
 Q
"RTN","SROAPCA")
0^50^B25381788^B24951681
"RTN","SROAPCA",1,0)
SROAPCA ;BIR/MAM - PRINT CLINICAL DATA ;09/27/04
"RTN","SROAPCA",2,0)
 ;;3.0; Surgery ;**38,47,71,95,125,134,153**;24 Jun 93;Build 11
"RTN","SROAPCA",3,0)
 F I=0,206,207,208,200.1 S SRA(I)=$G(^SRF(SRTN,I)),$P(LN,"-",79)=""
"RTN","SROAPCA",4,0)
 S X=$P(SRA(0),"^",9),SRADATE=$E(X,4,5)_"/"_$E(X,6,7)_"/"_$E(X,2,3)
"RTN","SROAPCA",5,0)
 W:$Y @IOF W !,?5,"VA CONTINUOUS IMPROVEMENT IN CARDIAC SURGERY PROGRAM (CICSP/CICSP-X)",!
"RTN","SROAPCA",6,0)
 W ! F MOE=1:1:80 W "="
"RTN","SROAPCA",7,0)
 W !,"I. IDENTIFYING DATA",?60,"Case #: "_SRTN
"RTN","SROAPCA",8,0)
 N SRSPH1,SRZIP S (SRSPH1,SRZIP)=""
"RTN","SROAPCA",9,0)
 S STATNUM=+$P($$SITE^SROVAR,"^",3) D ADD^VADPT
"RTN","SROAPCA",10,0)
 W !,"Patient: "_SRANM,?60,"Fac./Div. #: "_STATNUM
"RTN","SROAPCA",11,0)
 W !,"Surgery Date: "_SRADATE,?25,"Address: "_VAPA(1)
"RTN","SROAPCA",12,0)
 S SRSPH1=VAPA(8) S:SRSPH1="" SRSPH1="NS/Unknown" S SRZIP=$S(VAPA(11)'="":$P(VAPA(11),"^",2),1:VAPA(6)) S:SRZIP="" SRZIP="NS/Unknown"
"RTN","SROAPCA",13,0)
 W !,"Phone: "_SRSPH1,?25,"Zip Code: "_SRZIP
"RTN","SROAPCA",14,0)
 S X=VADM(3) W ?53,"Date of Birth: ",$E(X,4,5)_"/"_$E(X,6,7)_"/"_$E(X,2,3)
"RTN","SROAPCA",15,0)
 S SRAO(1)=SRADATE,NYUK=$P(SRA(0),"^",4),SRAO(2)=$P(VADM(5),"^",2)
"RTN","SROAPCA",16,0)
 S SRAO(3)=AGE,NYUK=$P(SRA(206),"^") S:NYUK'="" NYUK=$S(NYUK["C"!(NYUK["c"):+NYUK_" cm",1:+NYUK_" in") S SRAO(4)=NYUK_"^236"
"RTN","SROAPCA",17,0)
 S NYUK=$P(SRA(206),"^",2) S:NYUK'="" NYUK=$S(NYUK["K"!(NYUK["k"):+NYUK_" kg",1:+NYUK_" lb") S SRAO(5)=NYUK_"^237"
"RTN","SROAPCA",18,0)
 S SRA(200)=$G(^SRF(SRTN,200)),SRA(209)=$G(^SRF(SRTN,209))
"RTN","SROAPCA",19,0)
 S NYUK=$P(SRA(209),"^",3),SRAO(6)=$S(NYUK="N":"NO",NYUK="O":"ORAL",NYUK="D":"DIET",NYUK="I":"INSULIN",1:"")_"^475",NYUK=$P(SRA(200),"^",11) D YN S SRAO(7)=SHEMP_"^203"
"RTN","SROAPCA",20,0)
 S SRAO(8)=$P(SRA(206),"^",5)_"^347",NYUK=$P(SRA(206),"^",6) D YN S SRAO(9)=SHEMP_"^209",NYUK=$P(SRA(206),"^",7) D YN S SRAO(10)=SHEMP_"^348"
"RTN","SROAPCA",21,0)
 S Y=$P(SRA(200.1),"^",5),C=$P(^DD(130,510,0),"^",2) D Y^DIQ S SRAO(11)=$S(Y["-":$E($P(Y,"-",2),1,22),1:$E(Y,1,22))_"^510"
"RTN","SROAPCA",22,0)
 S NYUK=$P(SRA(206),"^",11) D YN S SRAO(14)=SHEMP_"^350",NYUK=$P(SRA(200),"^",8),SRAO(15)=$S(NYUK=1:"INDEPENDENT",NYUK=2:"PARTIAL DEPENDENT",NYUK=3:"TOTALLY DEPENDENT",NYUK="NS":"NS",1:"")_"^240"
"RTN","SROAPCA",23,0)
 S NYUK=$P(SRA(206),"^",13),SRAO(16)=$S(NYUK=0:"None",NYUK=1:"NONE RECENT",NYUK=2:"12-72 HRS",NYUK=3:"<12 hrs",NYUK=12:"12 - 72 hrs",NYUK=72:">72 hrs - 7 days",NYUK=7:">7 days",NYUK="NS":"NO STUDY",1:"")_"^351"
"RTN","SROAPCA",24,0)
 S NYUK=$P(SRA(206),"^",14),SRAO(17)=$S(NYUK=0:"NONE",NYUK=1:"< OR = 7 DAYS OF SURG",NYUK=2:"> 7 DAYS OF SURG",NYUK="NS":"NS",1:"")_"^205"
"RTN","SROAPCA",25,0)
 S NYUK=$P(SRA(206),"^",15) S SHEMP=$S(NYUK=0:"NONE",NYUK=">":">3",NYUK="NS":"NS",NYUK="N":"NO",NYUK="Y":"YES",1:NYUK) S SRAO(18)=SHEMP_"^352"
"RTN","SROAPCA",26,0)
 S NYUK=$P(SRA(206),"^",42)
"RTN","SROAPCA",27,0)
 S NYUK=$P(SRA(206),"^",16) D YN S SRAO(19)=SHEMP_"^265",NYUK=$P(SRA(206),"^",17) D YN S SRAO(20)=SHEMP_"^264"
"RTN","SROAPCA",28,0)
 S SRAO(21)=$P(SRA(206),"^",18)_"^267",SRAO(22)=$P(SRA(206),"^",19)_"^207",NYUK=$P(SRA(206),"^",20) D YN S SRAO(23)=SHEMP_"^353",NYUK=$P(SRA(206),"^",21) D YN S SRAO(24)=SHEMP_"^354"
"RTN","SROAPCA",29,0)
 S NYUK=$P(SRA(206),"^",22) D YN S SRAO(25)=SHEMP_"^355"
"RTN","SROAPCA",30,0)
 S NYUK=$P(SRA(209),"^",2),SRAO(26)=$S(NYUK="N":"NONE",NYUK="I":"IABP",NYUK="V":"VAD",NYUK="O":"OTHER",1:NYUK)_"^474"
"RTN","SROAPCA",31,0)
 S NYUK=$P(SRA(206),"^",38) D YN S SRAO(27)=SHEMP_"^463"
"RTN","SROAPCA",32,0)
 S NYUK=$P(SRA(206),"^",10) D YN S SRAO(29)=SHEMP_"^349"
"RTN","SROAPCA",33,0)
DISP ; display fields
"RTN","SROAPCA",34,0)
 W ! F MOE=1:1:80 W "="
"RTN","SROAPCA",35,0)
 W !,"II. CLINICAL DATA"
"RTN","SROAPCA",36,0)
 W !,"Gender:",?26,$P(SRAO(2),"^"),?40,"PCI: ",$J($P(SRAO(16),"^"),34)
"RTN","SROAPCA",37,0)
 W !,"Age:",?26,SRAO(3),?40,"Prior MI:",$J($P(SRAO(17),"^"),30)
"RTN","SROAPCA",38,0)
 W !,"Height:",?26,$P(SRAO(4),"^"),?40,"# of prior heart surgeries:",?75,$P(SRAO(18),"^")
"RTN","SROAPCA",39,0)
 W !,"Weight:",?26,$P(SRAO(5),"^"),?40,"Prior heart surgeries: " D H485
"RTN","SROAPCA",40,0)
 W !,"Diabetes:",?26,$P(SRAO(6),"^"),?40,"Peripheral Vascular Disease:",?75,$P(SRAO(19),"^")
"RTN","SROAPCA",41,0)
 W !,"COPD:",?26,$P(SRAO(7),"^"),?40,"Cerebral Vascular Disease:",?75,$P(SRAO(20),"^")
"RTN","SROAPCA",42,0)
 W !,"FEV1:",?26,$P(SRAO(8),"^")_$S($P(SRAO(8),"^")="":"",$P(SRAO(8),"^")="NS":"",1:" liters"),?40,"Angina (use CCS Class):",?75,$P(SRAO(21),"^")
"RTN","SROAPCA",43,0)
 W !,"Cardiomegaly (X-ray): ",?26,$P(SRAO(9),"^"),?40,"CHF (use NYHA Class):",?75,$P(SRAO(22),"^")
"RTN","SROAPCA",44,0)
 W !,"Pulmonary Rales:",?26,$P(SRAO(10),"^"),?40,"Current Diuretic Use:",?75,$P(SRAO(23),"^")
"RTN","SROAPCA",45,0)
 W !,"Current Smoker: ",$J($P(SRAO(11),"^"),22),?40,"Current Digoxin Use:",?75,$P(SRAO(24),"^")
"RTN","SROAPCA",46,0)
 W !,"Active Endocarditis:",?26,$P(SRAO(29),"^"),?40,"IV NTG 48 Hours Preceding Surgery:",?75,$P(SRAO(25),"^")
"RTN","SROAPCA",47,0)
 W !,"Resting ST Depression:",?26,$P(SRAO(14),"^"),?40,"Preop circulatory Device:",?74,$P(SRAO(26),"^")
"RTN","SROAPCA",48,0)
 W !,"Functional Status: ",$J($P(SRAO(15),"^"),18),?40,"Hypertension:",?75,$P(SRAO(27),"^")
"RTN","SROAPCA",49,0)
 K SRA,SRAO D ^SROAPCA1
"RTN","SROAPCA",50,0)
 Q
"RTN","SROAPCA",51,0)
YN ; store answer
"RTN","SROAPCA",52,0)
 S SHEMP=$S(NYUK="NS":"NS",NYUK="N":"NO",NYUK="Y":"YES",1:"")
"RTN","SROAPCA",53,0)
 Q
"RTN","SROAPCA",54,0)
PAGE I $E(IOST)'="P" W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROAPCA",55,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SROAPCA",56,0)
 W @IOF,!,SRANM,! F MOE=1:1:80 W "="
"RTN","SROAPCA",57,0)
 Q
"RTN","SROAPCA",58,0)
H485 S SHEMP="",X=$P(SRA(206),"^",42) F I=1:1:$L(X,",") D
"RTN","SROAPCA",59,0)
 .S C=$P(X,",",I) S:I>1 SHEMP=SHEMP_", " S SHEMP=SHEMP_$S(C=0:"None",C=1:"CABG-only",C=2:"Valve-only",C=3:"CABG/valve",C=4:"Other",C=5:"CABG/Other",1:"")
"RTN","SROAPCA",60,0)
 S X=SHEMP I $L(X)<17 W $J(X,16) Q
"RTN","SROAPCA",61,0)
 W $J($P(X,",")_",",16) I $L($P(X,", ",2,9))<40 W !,?41,$P(X,", ",2,9) Q
"RTN","SROAPCA",62,0)
 W !,?41,$P(X,", ",2,4)_",",!,?41,$P(X,", ",5,9)
"RTN","SROAPCA",63,0)
 Q
"RTN","SROAPCA1")
0^51^B30711274^B30690413
"RTN","SROAPCA1",1,0)
SROAPCA1 ;BIR/MAM - PRINT CARDIAC CATH INFO ;04/05/04
"RTN","SROAPCA1",2,0)
 ;;3.0; Surgery ;**38,63,71,88,95,125,142,153**;24 Jun 93;Build 11
"RTN","SROAPCA1",3,0)
 N SRX F I=200:1:202,206,208,209,202.1 S SRA(I)=$G(^SRF(SRTN,I))
"RTN","SROAPCA1",4,0)
 I $Y+14>IOSL D PAGE^SROAPCA I SRSOUT Q
"RTN","SROAPCA1",5,0)
 D LAB^SROAPCA4
"RTN","SROAPCA1",6,0)
 I $Y+16>IOSL D PAGE^SROAPCA I SRSOUT Q
"RTN","SROAPCA1",7,0)
 S Y=$P(SRA(209),"^",4),SRAO(1)=$S(Y="C":"CATH",Y="I":"IVUS",Y="B":"BOTH",Y="NS":" NS",1:"")_"^476"
"RTN","SROAPCA1",8,0)
 S Y=$P(SRA(206),"^",24),SRX=357,SRAO(2)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",9,0)
 S Y=$P(SRA(206),"^",25),SRX=358,SRAO(3)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",10,0)
 S Y=$P(SRA(206),"^",26),SRX=359,SRAO(4)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",11,0)
 S Y=$P(SRA(206),"^",27),SRX=360,SRAO(5)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",12,0)
 S NYUK=$P(SRA(206),"^",30) D LV S SRAO(6)=SHEMP_"^363"
"RTN","SROAPCA1",13,0)
 S Y=$P(SRA(206),"^",9),SRX=415,SRAO(7)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",14,0)
 S Y=$P(SRA(209),"^",5),SRX=477,SRAO(8)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",15,0)
 S Y=$P(SRA(206),"^",28),SRX=361,SRAO(9)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",16,0)
 S Y=$P(SRA(206),"^",33),SRX=362.1,SRAO(10)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",17,0)
 S Y=$P(SRA(206),"^",34),SRX=362.2,SRAO(11)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",18,0)
 S Y=$P(SRA(206),"^",35),SRX=362.3,SRAO(12)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",19,0)
 S Y=$P(SRA(209),"^",6),SRX=478,SRAO(13)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",20,0)
 S Y=$P(SRA(209),"^",7),SRX=479,SRAO(14)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",21,0)
 S Y=$P(SRA(209),"^",8),SRX=480,SRAO(15)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",22,0)
 W !!,"IV. CARDIAC CATHETERIZATION AND ANGIOGRAPHIC DATA"
"RTN","SROAPCA1",23,0)
 S Y=$P($G(^SRF(SRTN,207)),"^",21) I Y>1 D DT S Y=X
"RTN","SROAPCA1",24,0)
 D NS W !,"Cardiac Catheterization Date: ",$E(Y,1,8)
"RTN","SROAPCA1",25,0)
 W !,"Procedure:",?26,$P(SRAO(1),"^"),?41,"Native Coronaries:"
"RTN","SROAPCA1",26,0)
 S SRX=$P(SRAO(2),"^") W !,"LVEDP:",?26,$J(SRX,3) D MMHG
"RTN","SROAPCA1",27,0)
 S SRX=$P(SRAO(9),"^") W ?41,"Left Main Stenosis:",?71,$J(SRX,3) I SRX?1.3N W "%"
"RTN","SROAPCA1",28,0)
 S SRX=$P(SRAO(3),"^") W !,"Aortic Systolic Pressure:",?26,$J(SRX,3) D MMHG
"RTN","SROAPCA1",29,0)
 S SRX=$P(SRAO(10),"^") W ?41,"LAD Stenosis:",?71,$J(SRX,3) I SRX?1.3N W "%"
"RTN","SROAPCA1",30,0)
 S SRX=$P(SRAO(11),"^") W !,?41,"Right Coronary Stenosis:",?71,$J(SRX,3) I SRX?1.3N W "%"
"RTN","SROAPCA1",31,0)
 W !,"For patients having right heart cath:" S SRX=$P(SRAO(12),"^") W ?41,"Circumflex Stenosis:",?71,$J(SRX,3) I SRX?1.3N W "%"
"RTN","SROAPCA1",32,0)
 ;
"RTN","SROAPCA1",33,0)
 S SRX=$P(SRAO(4),"^") W !,"PA Systolic Pressure:",?26,$J(SRX,3) D MMHG
"RTN","SROAPCA1",34,0)
 S SRX=$P(SRAO(5),"^") W !,"PAW Mean Pressure:",?26,$J(SRX,3) D MMHG
"RTN","SROAPCA1",35,0)
 W ?41,"If a Re-do, indicate stenosis",!,?44," in graft to:"
"RTN","SROAPCA1",36,0)
 S SRX=$P(SRAO(13),"^") W !,?41,"LAD:",?71,$J(SRX,3) I SRX?1.3N W "%"
"RTN","SROAPCA1",37,0)
 S SRX=$P(SRAO(14),"^") W !,?41,"Right coronary (include PDA): ",$J(SRX,3) I SRX?1.3N W "%"
"RTN","SROAPCA1",38,0)
 S SRX=$P(SRAO(15),"^") W !,?41,"Circumflex:",?71,$J(SRX,3) I SRX?1.3N W "%"
"RTN","SROAPCA1",39,0)
 W !,LN
"RTN","SROAPCA1",40,0)
 W !,"LV Contraction Grade (from contrast or radionuclide angiogram or 2D Echo):",!,?7,"Grade",?17,"Ejection Fraction Range",?51,"Definition"
"RTN","SROAPCA1",41,0)
 W !,?8,$P(SRAO(6),"^")
"RTN","SROAPCA1",42,0)
 W !,LN,!,"Mitral Regurgitation:",?26,$P(SRAO(7),"^")
"RTN","SROAPCA1",43,0)
 W !,"Aortic stenosis:",?26,$P(SRAO(8),"^")
"RTN","SROAPCA1",44,0)
 I $Y+14>IOSL D PAGE^SROAPCA I SRSOUT Q
"RTN","SROAPCA1",45,0)
 K SRAO S Y=$P(SRA(206),"^",31),SRX=364,SRAO(1)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",46,0)
 S Y=$P($G(^SRF(SRTN,1.1)),"^",3),SRX=1.13,SRAO(2)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",47,0)
 S Y=$P(SRA(208),"^",12),SRX=414,SRAO(3)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",48,0)
 S Y=$P(SRA(206),"^",32),SRX=364.1,SRAO("1A")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",49,0)
 S Y=$P(SRA(208),"^",13),SRX=414.1,SRAO("3A")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",50,0)
 S Y=$P($G(^SRF(SRTN,.2)),"^",2),SRX=.22,SRAO(0)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",51,0)
 W !!,"V. OPERATIVE RISK SUMMARY DATA" S X=$P(SRAO(0),"^") I X'="" W ?40,"(Operation Began: "_X_")"
"RTN","SROAPCA1",52,0)
 W !,?5,"Physician's Preoperative" S Y=$P($G(^SRF(SRTN,.2)),"^",3) I Y'="" D DT W ?40,"(Operation Ended: "_X_")"
"RTN","SROAPCA1",53,0)
 W !,?7,"Estimate of Operative Mortality: "_$P(SRAO(1),"^") I $P(SRAO(1),"^")'=""&($P(SRAO(1),"^")'="NS") W "%"
"RTN","SROAPCA1",54,0)
 S X=$P(SRAO("1A"),"^") I X'="" W ?57,"("_X_")"
"RTN","SROAPCA1",55,0)
 W !,?5,"ASA Classification:",?35,$P(SRAO(2),"^"),!,?5,"Surgical Priority:",?35,$P(SRAO(3),"^") S X=$P(SRAO("3A"),"^") I X'="" W ?57,"("_X_")"
"RTN","SROAPCA1",56,0)
 S X=$P($G(^SRO(136,SRTN,0)),"^",2) I X S Y=$P($$CPT^ICPTCOD(X),"^",2) D SSPRIN^SROCPT0 S X=Y
"RTN","SROAPCA1",57,0)
 S X=$S(X'="":X,1:"CPT Code Missing")
"RTN","SROAPCA1",58,0)
 W !,?5,"Principal CPT Code:",?35,X,!,?5,"Other Procedures CPT Codes: "
"RTN","SROAPCA1",59,0)
 S CNT=32,OTH=0 F  S OTH=$O(^SRO(136,SRTN,3,OTH)) Q:'OTH  S CPT=$P($G(^SRO(136,SRTN,3,OTH,0)),"^") D
"RTN","SROAPCA1",60,0)
 .I CPT S Y=$P($$CPT^ICPTCOD(CPT),"^",2) S SRDA=OTH D SSOTH^SROCPT0 S CPT=Y
"RTN","SROAPCA1",61,0)
 .S:CPT="" CPT="NONE" S CNT=CNT+3
"RTN","SROAPCA1",62,0)
 .I CNT+$L(CPT)'>80 W:CNT>35 ";" W ?(CNT),CPT S CNT=CNT+$L(CPT) Q
"RTN","SROAPCA1",63,0)
 .W !,?35,CPT S CNT=35+$L(CPT)
"RTN","SROAPCA1",64,0)
 W !,?5,"Preoperative Risk Factors: "
"RTN","SROAPCA1",65,0)
 I $G(^SRF(SRTN,206.1))'="" S SRQ=0 S X=$G(^SRF(SRTN,206.1)) W:$L(X)<49 X,! I $L(X)>48 S Z=$L(X) D
"RTN","SROAPCA1",66,0)
 .I X'[" " W ?25,X Q
"RTN","SROAPCA1",67,0)
 .S I=0,LINE=1 F  S SRL=$S(LINE=1:48,1:80) D  Q:SRQ
"RTN","SROAPCA1",68,0)
 ..I $E(X,1,SRL)'[" " W X,! S SRQ=1 Q
"RTN","SROAPCA1",69,0)
 ..S J=SRL-I,Y=$E(X,J),I=I+1 I Y=" " W $E(X,1,J-1),!,?5 S X=$E(X,J+1,Z),Z=$L(X),I=0,LINE=LINE+1 I Z<SRL W X S SRQ=1 Q
"RTN","SROAPCA1",70,0)
 I $Y+20>IOSL D PAGE^SROAPCA I SRSOUT Q
"RTN","SROAPCA1",71,0)
 K SRA,SRAO D ^SROAPCA2
"RTN","SROAPCA1",72,0)
 Q
"RTN","SROAPCA1",73,0)
YN ; store answer
"RTN","SROAPCA1",74,0)
 S SHEMP=$S(NYUK="NS":"NS",NYUK="N":"NO",NYUK="Y":"YES",1:"")
"RTN","SROAPCA1",75,0)
 Q
"RTN","SROAPCA1",76,0)
DT I 'Y S X="" Q
"RTN","SROAPCA1",77,0)
 S Z=$E($P(Y,".",2),1,4),Z=Z_"0000",Z=$E(Z,1,4),X=$E(Y,4,5)_"/"_$E(Y,6,7)_"/"_$E(Y,2,3)_" "_$E(Z,1,2)_":"_$E(Z,3,4)
"RTN","SROAPCA1",78,0)
 Q
"RTN","SROAPCA1",79,0)
OUT(SRFLD,SRY) ; get data in output form
"RTN","SROAPCA1",80,0)
 N C,Y
"RTN","SROAPCA1",81,0)
 S Y=SRY,C=$P(^DD(130,SRFLD,0),"^",2) D:Y'="" Y^DIQ
"RTN","SROAPCA1",82,0)
 I Y="NO STUDY" S Y="NS" Q Y
"RTN","SROAPCA1",83,0)
 Q Y
"RTN","SROAPCA1",84,0)
MMHG I SRX="NO STUDY"!(SRX="NS") Q
"RTN","SROAPCA1",85,0)
 W " mm Hg"
"RTN","SROAPCA1",86,0)
 Q
"RTN","SROAPCA1",87,0)
NS S Y=$S(Y="NS":"NO STUDY",1:Y)
"RTN","SROAPCA1",88,0)
 Q
"RTN","SROAPCA1",89,0)
LV K SHEMP S SHEMP=$S(NYUK="I":" I          > or = 0.55                    NORMAL",NYUK="II":"II             0.45-0.54                   MILD DYSFUNCTION",1:NYUK)
"RTN","SROAPCA1",90,0)
 Q:SHEMP'=NYUK  S SHEMP=$S(NYUK="III":"III           0.35-0.44                    MODERATE DYSFUNCTION",1:NYUK)
"RTN","SROAPCA1",91,0)
 Q:SHEMP'=NYUK  S SHEMP=$S(NYUK="IIIa":"IIIa          0.40-0.44                    MODERATE DYSFUNCTION A",1:NYUK)
"RTN","SROAPCA1",92,0)
 Q:SHEMP'=NYUK  S SHEMP=$S(NYUK="IIIb":"IIIb          0.35-0.39                    MODERATE DYSFUNCTION B",1:NYUK)
"RTN","SROAPCA1",93,0)
 Q:SHEMP'=NYUK  S SHEMP=$S(NYUK="IV":"IV            0.25-0.34                    SEVERE DYSFUNCTION",NYUK="V":" V             <0.25                       VERY SEVERE DYSFUNCTION",NYUK="NS":"NO LV STUDY",1:"")
"RTN","SROAPCA1",94,0)
 Q
"RTN","SROAPCA2")
0^52^B19366840^B20501034
"RTN","SROAPCA2",1,0)
SROAPCA2 ;BIR/MAM - PRINT OPERATIVE DATA ;06/28/06
"RTN","SROAPCA2",2,0)
 ;;3.0; Surgery ;**38,71,95,125,153**;24 Jun 93;Build 11
"RTN","SROAPCA2",3,0)
 S SRA(206)=$G(^SRF(SRTN,206)),SRA(207)=$G(^SRF(SRTN,207)),SRA(209)=$G(^SRF(SRTN,209)),SRA(207.1)=$G(^SRF(SRTN,207.1))
"RTN","SROAPCA2",4,0)
 S SRAO(1)=$P(SRA(207),"^")_"^365"
"RTN","SROAPCA2",5,0)
 S SRAO(2)=$P(SRA(207),"^",2)_"^366"
"RTN","SROAPCA2",6,0)
 S SRAO(3)=$P(SRA(207),"^",24)_"^464"
"RTN","SROAPCA2",7,0)
 S SRAO(4)=$P(SRA(207),"^",25)_"^465"
"RTN","SROAPCA2",8,0)
 S SRAO(5)=$P(SRA(207),"^",20)_"^416"
"RTN","SROAPCA2",9,0)
 S NYUK=$P(SRA(207),"^",3) D YN S SRAO(6)=SHEMP_"^367"
"RTN","SROAPCA2",10,0)
 S NYUK=$P(SRA(207),"^",4) D YN S SRAO(7)=SHEMP_"^368"
"RTN","SROAPCA2",11,0)
 S NYUK=$P(SRA(207),"^",5) D YN S SRAO(8)=SHEMP_"^369"
"RTN","SROAPCA2",12,0)
 S NYUK=$P(SRA(207),"^",6) S SRAO(9)=$S(NYUK="Y":"YES",NYUK="N":"NO",NYUK=1:"AORTIC",NYUK=2:"MITRAL",NYUK=3:"TRICUSPID",NYUK=4:"OTHER/COMBINATION",NYUK=5:"NONE",1:"")_"^370"
"RTN","SROAPCA2",13,0)
 S NYUK=$P(SRA(207),"^",7) D YN S SRAO(10)=SHEMP_"^371"
"RTN","SROAPCA2",14,0)
 S NYUK=$P(SRA(209),"^",9) D YN S SRAO(11)=SHEMP_"^481"
"RTN","SROAPCA2",15,0)
 S NYUK=$P(SRA(209),"^",11) D YN S SRAO(12)=SHEMP_"^483"
"RTN","SROAPCA2",16,0)
 S NYUK=$P(SRA(209),"^",14) S SHEMP=$S(NYUK="F":"FULL MAZE",NYUK="N":"NO MAZE PERFORMED",NYUK="M":"MINI MAZE",1:"") S SRAO(13)=SHEMP_"^512"
"RTN","SROAPCA2",17,0)
 S NYUK=$P(SRA(207),"^",12) D YN S SRAO(14)=SHEMP_"^376"
"RTN","SROAPCA2",18,0)
 S NYUK=$P(SRA(207),"^",13) D YN S SRAO(15)=SHEMP_"^380"
"RTN","SROAPCA2",19,0)
 S NYUK=$P(SRA(207),"^",16) D YN S SRAO(16)=SHEMP_"^378"
"RTN","SROAPCA2",20,0)
 S NYUK=$P(SRA(207),"^",14) D YN S SRAO(17)=SHEMP_"^377"
"RTN","SROAPCA2",21,0)
 S NYUK=$P(SRA(207),"^",18) D YN S SRAO(18)=SHEMP_"^379"
"RTN","SROAPCA2",22,0)
 S NYUK=$P(SRA(207),"^",9) D YN S SRAO(19)=SHEMP_"^373"
"RTN","SROAPCA2",23,0)
 S NYUK=$P($G(^SRF(SRTN,209.1)),"^") S SRAO(20)=$S(NYUK="NS":"NS",1:NYUK)_"^484"
"RTN","SROAPCA2",24,0)
 S NYUK=$P(SRA(207),"^",8) D YN S SRAO(21)=SHEMP_"^372"
"RTN","SROAPCA2",25,0)
 S NYUK=$P(SRA(207.1),"^",2) D YN S SRAO("21H")=SHEMP_"^505"
"RTN","SROAPCA2",26,0)
 S NYUK=$P(SRA(207),"^",15) D YN S SRAO(22)=SHEMP_"^381"
"RTN","SROAPCA2",27,0)
 S NYUK=$P(SRA(207),"^",17) D YN S SRAO(23)=SHEMP_"^382"
"RTN","SROAPCA2",28,0)
 S SRAO(24)=$P(SRA(206),"^",37)_"^451"
"RTN","SROAPCA2",29,0)
 S SRAO(25)=$P(SRA(206),"^",36)_"^450"
"RTN","SROAPCA2",30,0)
 S Y=$P(SRA(207),"^",26),C=$P(^DD(130,468,0),"^",2) D:Y'="" Y^DIQ S SRAO(26)=Y_"^468"
"RTN","SROAPCA2",31,0)
 S Y=$P(SRA(207),"^",27),C=$P(^DD(130,469,0),"^",2) D:Y'="" Y^DIQ S SRAO(27)=Y_"^469"
"RTN","SROAPCA2",32,0)
 S NYUK=$P(SRA(209),"^",13) D YN S SRAO(29)=SHEMP_"^502"
"RTN","SROAPCA2",33,0)
 W !!,"VI. OPERATIVE DATA"
"RTN","SROAPCA2",34,0)
 W !,"Cardiac surgical procedures with or without cardiopulmonary bypass",!,"CABG distal anastomoses:",?40,"Bridge to transplant/Device:",?75,$P(SRAO(11),"^")
"RTN","SROAPCA2",35,0)
 W !,?2,"Number with Vein:",?33,$P(SRAO(1),"^"),?40,"TMR:",?75,$P(SRAO(12),"^")
"RTN","SROAPCA2",36,0)
 W !,?2,"Number with IMA:",?33,$P(SRAO(2),"^"),?40,"Maze procedure:",?61,$J($P(SRAO(13),"^"),17)
"RTN","SROAPCA2",37,0)
 W !,?2,"Number with Radial Artery:",?33,$P(SRAO(3),"^"),?40,"ASD repair:",?75,$P(SRAO(14),"^")
"RTN","SROAPCA2",38,0)
 W !,?2,"Number with Other Artery:",?33,$P(SRAO(4),"^"),?40,"VSD repair:",?75,$P(SRAO(15),"^")
"RTN","SROAPCA2",39,0)
 W !,?2,"Number with Other Conduit:",?33,$P(SRAO(5),"^"),?40,"Myectomy for IHSS:",?75,$P(SRAO(16),"^")
"RTN","SROAPCA2",40,0)
 W !,"Aortic Valve Replacement:",?33,$P(SRAO(6),"^"),?40,"Myxoma resection:",?75,$P(SRAO(17),"^")
"RTN","SROAPCA2",41,0)
 W !,"Mitral Valve Replacement:",?33,$P(SRAO(7),"^"),?40,"Other tumor resection:",?75,$P(SRAO(18),"^")
"RTN","SROAPCA2",42,0)
 W !,"Tricuspid Valve Replacement:",?33,$P(SRAO(8),"^"),?40,"Cardiac transplant:",?75,$P(SRAO(19),"^")
"RTN","SROAPCA2",43,0)
 W !,"Valve Repair:",?33,$P(SRAO(9),"^"),?40,"Great Vessel Repair:",?75,$P(SRAO(21),"^")
"RTN","SROAPCA2",44,0)
 W !,"LV Aneurysmectomy:",?33,$P(SRAO(10),"^"),?40,"Endovascular Repair:",?75,$P(SRAO("21H"),"^")
"RTN","SROAPCA2",45,0)
 W !,?40,"Other Cardiac procedure(s):",?75,$P(SRAO(29),"^")
"RTN","SROAPCA2",46,0)
 W !,"* Other Cardiac procedures (Specify): " I $P(SRAO(20),"^")'="" S SRQ=0 S X=$P(SRAO(20),"^") W:$L(X)<49 X,! I $L(X)>48 S Z=$L(X) D
"RTN","SROAPCA2",47,0)
 .I X'[" " W ?29,X Q
"RTN","SROAPCA2",48,0)
 .S I=0,LINE=1 F  S SRL=$S(LINE=1:48,1:80) D  Q:SRQ
"RTN","SROAPCA2",49,0)
 ..I $E(X,1,SRL)'[" " W X,! S SRQ=1 Q
"RTN","SROAPCA2",50,0)
 ..S J=SRL-I,Y=$E(X,J),I=I+1 I Y=" " W $E(X,1,J-1),! S X=$E(X,J+1,Z),Z=$L(X),I=0,LINE=LINE+1 I Z<SRL W X S SRQ=1 Q
"RTN","SROAPCA2",51,0)
 W !!,"Indicate other cardiac procedures only if done with cardiopulmonary bypass"
"RTN","SROAPCA2",52,0)
 W !,"Foreign body removal:",?33,$P(SRAO(22),"^")
"RTN","SROAPCA2",53,0)
 W !,"Pericardiectomy:",?33,$P(SRAO(23),"^")
"RTN","SROAPCA2",54,0)
 W !!,"Other Operative Data details"
"RTN","SROAPCA2",55,0)
 W !,"Total CPB Time: ",?20,$P(SRAO(24),"^")_" min",?42,"Total Ischemic Time: ",$P(SRAO(25),"^")_" min"
"RTN","SROAPCA2",56,0)
 W !,"Incision Type: ",?25,$P(SRAO(26),"^")
"RTN","SROAPCA2",57,0)
 W !,"Conversion Off Pump to CPB: ",$P(SRAO(27),"^")
"RTN","SROAPCA2",58,0)
 I $Y+6>IOSL D PAGE^SROAPCA I SRSOUT Q
"RTN","SROAPCA2",59,0)
 K SRA,SRAO D ^SROAPCA3
"RTN","SROAPCA2",60,0)
 Q
"RTN","SROAPCA2",61,0)
YN ; store answer
"RTN","SROAPCA2",62,0)
 S SHEMP=$S(NYUK="NS":"NS",NYUK="N":"NO",NYUK="Y":"YES",1:"")
"RTN","SROAPCA2",63,0)
 Q
"RTN","SROAPCA4")
0^53^B14863488^B14056741
"RTN","SROAPCA4",1,0)
SROAPCA4 ;BIR/SJA - CARDIAC COMPLIANCE DATA ;07/05/06
"RTN","SROAPCA4",2,0)
 ;;3.0; Surgery ;**95,125,153**;24 Jun 93;Build 11
"RTN","SROAPCA4",3,0)
 ;
"RTN","SROAPCA4",4,0)
 ; Reference to ^DGPM("APTT1" supported by DBIA #565
"RTN","SROAPCA4",5,0)
 ; Reference to File #405 supported by DBIA #3029
"RTN","SROAPCA4",6,0)
 ; Reference to Field #27.02 in File #2 supported by DBIA #1850
"RTN","SROAPCA4",7,0)
 ;
"RTN","SROAPCA4",8,0)
 S SRA(201)=$G(^SRF(SRTN,201)),SRA(202)=$G(^SRF(SRTN,202)),SRA(208)=$G(^SRF(SRTN,208)),SRA(0)=$G(^SRF(SRTN,0)),SRA(202.1)=$G(^SRF(SRTN,202.1))
"RTN","SROAPCA4",9,0)
 N SRPREF,SRREF,SRREFP,SRFOL,SRFOLP,SRSOUT,SRY S (SRPREF,SRREF,SRREFP,SRFOL,SRFOLP)="",SRSOUT=0,(VAIP("D"),SRSDATE)=$P(SRA(0),"^",9) D IN5^VADPT
"RTN","SROAPCA4",10,0)
 I 'VAIP(13) S X1=$P($G(^SRF(SRTN,.2)),"^",12),X2=1 D C^%DTC S SR24=X,SRDT=$O(^DGPM("APTT1",DFN,SRSDATE)) G:'SRDT!(SRDT>SR24) TS S VAIP("D")=SRDT D IN5^VADPT
"RTN","SROAPCA4",11,0)
TS I VAIP(13) K DA,DIC,DIQ,DR S DIC=405,DR=.05,DA=VAIP(13),DIQ="SRY",DIQ(0)="IE" D EN^DIQ1 S SRREF=SRY(405,VAIP(13),.05,"E"),SRREFP=SRY(405,VAIP(13),.05,"I") I SRREFP S SRREFP=$$GET1^DIQ(4,SRREFP,99)
"RTN","SROAPCA4",12,0)
 I VAIP(17) K DA,DIC,DIQ,DR,SRY S DIC=405,DR=.05,DA=VAIP(17),DIQ="SRY",DIQ(0)="IE" D EN^DIQ1 S SRFOL=SRY(405,VAIP(17),.05,"E"),SRFOLP=SRY(405,VAIP(17),.05,"I") I SRFOLP S SRFOLP=$$GET1^DIQ(4,SRFOLP,99)
"RTN","SROAPCA4",13,0)
 K DA,DIC,DIQ,DR,SRY S DIC="^DPT(",DIQ="SRY",DIQ(0)="I",DA=DFN,DR=27.02 D EN^DIQ1 S X=$G(SRY(2,DFN,27.02,"I")) I X S SRPREF=$$GET1^DIQ(4,X,99)
"RTN","SROAPCA4",14,0)
 I $Y+7>IOSL D PAGE^SROAPCA I SRSOUT Q
"RTN","SROAPCA4",15,0)
 D DD
"RTN","SROAPCA4",16,0)
 Q
"RTN","SROAPCA4",17,0)
LAB ;D PAGE^SROAPCA I SRSOUT Q
"RTN","SROAPCA4",18,0)
 W !!,"III. DETAILED LABORATORY INFO - PREOPERATIVE VALUES"
"RTN","SROAPCA4",19,0)
 N SROUN S SROUN=" mg/dl"
"RTN","SROAPCA4",20,0)
 W !,"Creatinine:",?14,$J($P(SRA(201),U,4),4),SROUN S Y=$P(SRA(202),"^",4) D DT W ?25,"("_$E(X,1,8)_")"
"RTN","SROAPCA4",21,0)
 W ?41,"T. Bilirubin:",?57,$J($P(SRA(201),U,24),4),SROUN S Y=$P(SRA(202),"^",24) D DT W ?68,"("_$E(X,1,8)_")"
"RTN","SROAPCA4",22,0)
 W !,"Hemoglobin:",?14,$J($P(SRA(201),U,20),4),SROUN S Y=$P(SRA(202),"^",20) D DT W ?25,"("_$E(X,1,8)_")"
"RTN","SROAPCA4",23,0)
 W ?41,"T. Cholesterol:",?57,$J($P(SRA(201),U,26),4),SROUN S Y=$P(SRA(202),"^",26) D DT W ?68,"("_$E(X,1,8)_")"
"RTN","SROAPCA4",24,0)
 W !,"Albumin:",?14,$J($P(SRA(201),U,8),4)," g/dl" S Y=$P(SRA(202),"^",8) D DT W ?25,"("_$E(X,1,8)_")"
"RTN","SROAPCA4",25,0)
 W ?41,"HDL:",?57,$J($P(SRA(201),U,21),4),SROUN S Y=$P(SRA(202),"^",22) D DT W ?68,"("_$E(X,1,8)_")"
"RTN","SROAPCA4",26,0)
 W !,"Triglyceride:",?14,$J($P(SRA(201),U,22),4),SROUN S Y=$P(SRA(202),"^",22) D DT W ?25,"("_$E(X,1,8)_")"
"RTN","SROAPCA4",27,0)
 W ?41,"LDL:",?57,$J($P(SRA(201),U,25),4),SROUN S Y=$P(SRA(202),"^",25) D DT W ?68,"("_$E(X,1,8)_")"
"RTN","SROAPCA4",28,0)
 W !,"Potassium:",?14,$J($P(SRA(201),U,23),4)," mg/L" S Y=$P(SRA(202),"^",23) D DT W ?25,"("_$E(X,1,8)_")"
"RTN","SROAPCA4",29,0)
 W ?41,"Hemoglobin A1c:",?57,$J($P(SRA(201),U,28),4)," %" S Y=$P(SRA(202.1),"^") D DT W ?68,"("_$E(X,1,8)_")"
"RTN","SROAPCA4",30,0)
 Q
"RTN","SROAPCA4",31,0)
DD ;Detailed Discharge Information
"RTN","SROAPCA4",32,0)
 N VAINDT,SRPTF,SRRES
"RTN","SROAPCA4",33,0)
 S X=$P(SRA(208),"^",15) I X S X=X-.0001
"RTN","SROAPCA4",34,0)
 S VAINDT=X D INP^VADPT S SRPTF=VAIN(10)
"RTN","SROAPCA4",35,0)
 S SRRES="" D RPC^DGPTFAPI(.SRRES,SRPTF)
"RTN","SROAPCA4",36,0)
 I $Y+9>IOSL D PAGE^SROAPCA I SRSOUT Q
"RTN","SROAPCA4",37,0)
 W !!,"X. DETAILED DISCHARGE INFORMATION",!,"   Discharge ICD-9 Codes: " I $G(SRRES(0))>0 S SRRES="" D
"RTN","SROAPCA4",38,0)
 .S SRRES=$P(SRRES(1),U,3)_"  " I $D(SRRES(2)) F I=1:1:9 S:$P(SRRES(2),"^",I)'="" SRRES=SRRES_$P(SRRES(2),"^",I)_"  " I $L(SRRES)>45 W SRRES S SRRES=""
"RTN","SROAPCA4",39,0)
 .W:$D(SRRES) !,?26,SRRES
"RTN","SROAPCA4",40,0)
 W !!,"Type of Disposition: ",$P($G(SRRES(1)),U,1)
"RTN","SROAPCA4",41,0)
 W !,"Place of Disposition: ",$P($G(SRRES(1)),U,2)
"RTN","SROAPCA4",42,0)
 W !,"Preferred VAMC identification code: ",SRPREF
"RTN","SROAPCA4",43,0)
 W !,"Primary care or referral VAMC identification code: ",SRREFP
"RTN","SROAPCA4",44,0)
 W !,"Follow-up VAMC identification code: ",SRFOLP
"RTN","SROAPCA4",45,0)
 Q
"RTN","SROAPCA4",46,0)
YN ; store answer
"RTN","SROAPCA4",47,0)
 S SHEMP=$S(NYUK="NS":"NS",NYUK="N":"NO",NYUK="Y":"YES",1:"")
"RTN","SROAPCA4",48,0)
 Q
"RTN","SROAPCA4",49,0)
DT S X="NS" I Y>1 D DT^SROAPCA1
"RTN","SROAPCA4",50,0)
 Q
"RTN","SROAPR2")
0^1^B10438353^B10438227
"RTN","SROAPR2",1,0)
SROAPR2 ;BIR/MAM - PAGE 2 PREOP SCREEN ;01/19/06
"RTN","SROAPR2",2,0)
 ;;3.0; Surgery ;**38,100,125,142,153**;24 Jun 93;Build 11
"RTN","SROAPR2",3,0)
 K SRA,SRAO
"RTN","SROAPR2",4,0)
START Q:SRSOUT  D:SRACLR RET S SRACLR=0 K SRA,SRAO D ^SROAPS2
"RTN","SROAPR2",5,0)
ASK W !!,"Select Preoperative Information to Edit: " R X:DTIME I '$T!("^"[X) D CONCC^SROAPRE S SRSOUT=1 Q
"RTN","SROAPR2",6,0)
 S:X="a" X="A" S:X="n" X="N"
"RTN","SROAPR2",7,0)
 I $L(X)=2,'$D(SRAO(X)),X?1N1A S Z=$E(X,2),Z=$TR(Z,"abcdefghijklmnopqrstuvwxyz","ABCDEFGHIJKLMNOPQRSTUVWXYZ") I $D(SRAO($E(X)_Z)) S X=$E(X)_Z
"RTN","SROAPR2",8,0)
 I '$D(SRAO(X)),(X'?1N1":"1N),(X'="A"),(X'="N") D HELP Q:SRSOUT  G START
"RTN","SROAPR2",9,0)
 I X="A" S X="1:3"
"RTN","SROAPR2",10,0)
 I X?1N1":"1N S Y=$E(X),Z=$P(X,":",2) I Y<1!(Z>3)!(Y>Z) D HELP Q:SRSOUT  G START
"RTN","SROAPR2",11,0)
 I X="N" D  G START
"RTN","SROAPR2",12,0)
 .W ! K DIR S DIR(0)="Y",DIR("B")="NO",DIR("A")="Are you sure you want to set all fields on this page to NO"
"RTN","SROAPR2",13,0)
 .D ^DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 Q
"RTN","SROAPR2",14,0)
 .I Y D NO2ALL^SROAPRE2
"RTN","SROAPR2",15,0)
 S SRPAGE="" D HDR^SROAUTL
"RTN","SROAPR2",16,0)
 I X?1N1":"1N D RANGE G START
"RTN","SROAPR2",17,0)
 I $D(SRAO(X)),+X=X S EMILY=X D  G START
"RTN","SROAPR2",18,0)
 .I $$LOCK^SROUTL(SRTN) D ^SROAPRE2,UNLOCK^SROUTL(SRTN)
"RTN","SROAPR2",19,0)
 I $D(SRAO(X)) D  G START
"RTN","SROAPR2",20,0)
 .I $$LOCK^SROUTL(SRTN) W !! S DA=SRTN,DIE=130,DR=$P(SRAO(X),"^",2)_"T" D ^DIE K DA,DIE,DR D UNLOCK^SROUTL(SRTN)
"RTN","SROAPR2",21,0)
 S SRSOUT=1 Q
"RTN","SROAPR2",22,0)
HELP W @IOF,!!!!,"Enter the number, number/letter combination, or range of numbers you want to",!,"edit.  Examples of proper responses are listed below."
"RTN","SROAPR2",23,0)
 W !!,"1. Enter 'A' to update all information.",!!,"2. Enter 'N' to set all fields on this page to NO."
"RTN","SROAPR2",24,0)
 W !!,"3. Enter a number (1-3) to update the information in that group.  (For",!,"   example, enter '2' to update all Central Nervous System information)"
"RTN","SROAPR2",25,0)
 W !!,"4. Enter a number/letter combination to update a specific occurrence. (To ",!,"   update Impaired Sensorium, enter '2A')"
"RTN","SROAPR2",26,0)
 W !!,"5. Enter a range of numbers (2-3) separated by a ':' to enter all",!,"   Central Nervous System and Nutritional/Immune/Other information."
"RTN","SROAPR2",27,0)
 W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1
"RTN","SROAPR2",28,0)
 Q
"RTN","SROAPR2",29,0)
RANGE ; range of numbers
"RTN","SROAPR2",30,0)
 I $$LOCK^SROUTL(SRTN) D  D UNLOCK^SROUTL(SRTN)
"RTN","SROAPR2",31,0)
 .F EMILY=1,2,3 D ^SROAPRE2 Q:SRSOUT
"RTN","SROAPR2",32,0)
 Q
"RTN","SROAPR2",33,0)
RET Q:SRSOUT  W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROAPR2",34,0)
 Q
"RTN","SROAPRE2")
0^2^B8990080^B8368374
"RTN","SROAPRE2",1,0)
SROAPRE2 ;BIR/MAM - EDIT PAGE 2 PREOP ;06/27/06
"RTN","SROAPRE2",2,0)
 ;;3.0; Surgery ;**38,47,125,153**;24 Jun 93;Build 11
"RTN","SROAPRE2",3,0)
 D @EMILY Q
"RTN","SROAPRE2",4,0)
1 ; edit renal information
"RTN","SROAPRE2",5,0)
 W ! K DIR S X=$P(SRAO(1),"^") I X'="" S DIR("B")=X
"RTN","SROAPRE2",6,0)
 S DIR(0)="130,243",DIR("A")="RENAL" D ^DIR K DIR I $D(DUOUT) S SRSOUT=1 Q
"RTN","SROAPRE2",7,0)
 I X="@" S SRCAT="Renal" D SURE Q:SRSOUT  G:'SRYN 1 S $P(^SRF(SRTN,200),"^",37)="" S (SRAX,X)="" D NOREN Q
"RTN","SROAPRE2",8,0)
 S SRAX=Y,$P(^SRF(SRTN,200),"^",37)=SRAX I Y["N" D NOREN Q
"RTN","SROAPRE2",9,0)
 I Y["Y" D REN
"RTN","SROAPRE2",10,0)
 Q
"RTN","SROAPRE2",11,0)
2 ; edit CNS information
"RTN","SROAPRE2",12,0)
 W ! K DIR S X=$P(SRAO(2),"^") I X'="" S DIR("B")=X
"RTN","SROAPRE2",13,0)
 S DIR(0)="130,210",DIR("A")="CENTRAL NERVOUS SYSTEM" D ^DIR K DIR I $D(DUOUT) S SRSOUT=1 Q
"RTN","SROAPRE2",14,0)
 I X="@" S SRCAT="Central Nervous System" D SURE Q:SRSOUT  G:'SRYN 2 S $P(^SRF(SRTN,200),"^",18)="" S (SRAX,X)="" D NOCNS Q
"RTN","SROAPRE2",15,0)
 S SRAX=Y,$P(^SRF(SRTN,200),"^",18)=SRAX I Y["N" D NOCNS Q
"RTN","SROAPRE2",16,0)
 I Y["Y" D CNS
"RTN","SROAPRE2",17,0)
 Q
"RTN","SROAPRE2",18,0)
3 ; edit nutritional/immune/other info
"RTN","SROAPRE2",19,0)
 W ! K DIR S X=$P(SRAO(3),"^") I X'="" S DIR("B")=X
"RTN","SROAPRE2",20,0)
 S DIR(0)="130,245",DIR("A")="NUTRITIONAL/IMMUNE/OTHER" D ^DIR K DIR I $D(DUOUT) S SRSOUT=1 Q
"RTN","SROAPRE2",21,0)
 I X="@" S SRCAT="Nutritional/Immune/Other" D SURE Q:SRSOUT  G:'SRYN 3 S $P(^SRF(SRTN,200),"^",44)="" S (SRAX,X)="" D NONUT Q
"RTN","SROAPRE2",22,0)
 S SRAX=Y,$P(^SRF(SRTN,200),"^",44)=SRAX I Y["N" D NONUT Q
"RTN","SROAPRE2",23,0)
 I Y["Y" D NUT
"RTN","SROAPRE2",24,0)
 Q
"RTN","SROAPRE2",25,0)
REN ; renal
"RTN","SROAPRE2",26,0)
 W ! K DR,DIE S DA=SRTN,DIE=130,DR="328T;211T" D ^DIE K DR
"RTN","SROAPRE2",27,0)
 S SRACLR=0
"RTN","SROAPRE2",28,0)
 Q
"RTN","SROAPRE2",29,0)
NOREN ; no renal problems
"RTN","SROAPRE2",30,0)
 F I=38,39 S $P(^SRF(SRTN,200),"^",I)=SRAX
"RTN","SROAPRE2",31,0)
 Q
"RTN","SROAPRE2",32,0)
CNS ; cns
"RTN","SROAPRE2",33,0)
 W ! K DR,DIE S DIE=130,DA=SRTN,DR="332T;333T;400T;334T;335T;336T;401T;399T;398T;" D ^DIE K DR,DIE
"RTN","SROAPRE2",34,0)
 S SRACLR=0
"RTN","SROAPRE2",35,0)
 Q
"RTN","SROAPRE2",36,0)
NOCNS ; no CNS problems
"RTN","SROAPRE2",37,0)
 F I=19,21:1:27,29 S $P(^SRF(SRTN,200),"^",I)=SRAX
"RTN","SROAPRE2",38,0)
 Q
"RTN","SROAPRE2",39,0)
NUT ; nutritional/immune/other
"RTN","SROAPRE2",40,0)
 W ! K DR,DIE S DIE=130,DA=SRTN,DR="338T;218T;339T;215T;216T;217T;338.1T;338.2T;218.1T;269T" D ^DIE K DA,DIE,DR
"RTN","SROAPRE2",41,0)
 S SRACLR=0
"RTN","SROAPRE2",42,0)
 Q
"RTN","SROAPRE2",43,0)
NONUT ; no nutritional/immune/other
"RTN","SROAPRE2",44,0)
 F I=45:1:50 S $P(^SRF(SRTN,200),"^",I)=SRAX
"RTN","SROAPRE2",45,0)
 F I=3,4,8 S $P(^SRF(SRTN,206),"^",I)=SRAX
"RTN","SROAPRE2",46,0)
 S:SRAX="N" $P(^SRF(SRTN,200.1),"^",3)=$S($P($G(VADM(5)),"^")="M":"NA",1:"NO")
"RTN","SROAPRE2",47,0)
 S:SRAX="" $P(^SRF(SRTN,200.1),"^",3)=""
"RTN","SROAPRE2",48,0)
 Q
"RTN","SROAPRE2",49,0)
RET W !! K DIR S DIR(0)="E" D ^DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1
"RTN","SROAPRE2",50,0)
 Q
"RTN","SROAPRE2",51,0)
SURE W ! K DIR S DIR("A")="   Sure you want to delete all "_SRCAT_" information ? ",DIR("B")="NO",DIR(0)="YA" D ^DIR K DIR S SRYN=Y I $D(DTOUT)!$D(DUOUT) S SRSOUT=1
"RTN","SROAPRE2",52,0)
 Q
"RTN","SROAPRE2",53,0)
DEL W !!,?10,"Deleting all "_SRCAT_" information...  "
"RTN","SROAPRE2",54,0)
 Q
"RTN","SROAPRE2",55,0)
NO2ALL ; set all fields to NO
"RTN","SROAPRE2",56,0)
 S SRAX="N",$P(^SRF(SRTN,200),"^",37)=SRAX D NOREN
"RTN","SROAPRE2",57,0)
 S $P(^SRF(SRTN,200),"^",18)=SRAX D NOCNS
"RTN","SROAPRE2",58,0)
 S $P(^SRF(SRTN,200),"^",44)=SRAX D NONUT
"RTN","SROAPRE2",59,0)
 Q
"RTN","SROAPRT1")
0^35^B15011288^B15019125
"RTN","SROAPRT1",1,0)
SROAPRT1 ;BIR/MAM - PREOP INFO (PAGE 1) ;02/23/06
"RTN","SROAPRT1",2,0)
 ;;3.0; Surgery ;**38,47,125,153**;24 Jun 93;Build 11
"RTN","SROAPRT1",3,0)
 N SRX,Y F I=200,206 S SRA(I)=$G(^SRF(SRTN,I))
"RTN","SROAPRT1",4,0)
 S Y=$P(SRA(200),"^"),SRX=402,SRAO(1)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",5,0)
 S Y=$P(SRA(206),"^"),SRX=236,SRAO("1A")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",6,0)
 S Y=$P(SRA(206),"^",2),SRX=237,SRAO("1B")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",7,0)
 S Y=$P(SRA(200),"^",2),SRX=346,SRAO("1C")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",8,0)
 S Y=$P(SRA(200),"^",3),SRX=202,SRAO("1D")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",9,0)
 S Y=$P($G(^SRF(SRTN,208)),"^",9),SRX=202.1,SRAO("1E")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",10,0)
 S Y=$P(SRA(200),"^",4),SRX=246,SRAO("1F")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",11,0)
 S Y=$P(SRA(200),"^",6),SRX=325,SRAO("1G")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",12,0)
 S Y=$P(SRA(200),"^",7),SRX=238,SRAO("1H")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",13,0)
 S Y=$P(SRA(200),"^",8),SRX=240,SRAO("1I")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",14,0)
 S Y=$P($G(^SRF(SRTN,200.1)),"^",2),SRX=492,SRAO("1J")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",15,0)
 S Y=$P(SRA(200),"^",9),SRX=241,SRAO(2)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",16,0)
 S Y=$P(SRA(200),"^",10),SRX=204,SRAO("2A")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",17,0)
 S Y=$P(SRA(200),"^",11),SRX=203,SRAO("2B")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",18,0)
 S Y=$P(SRA(200),"^",12),SRX=326,SRAO("2C")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",19,0)
 S Y=$P(SRA(200),"^",13),SRX=244,SRAO(3)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",20,0)
 S Y=$P(SRA(200),"^",15),SRX=212,SRAO("3A")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",21,0)
 S Y=$P($G(^SRF(SRTN,200.1)),"^"),SRX=486,SRAO(4)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",22,0)
 S Y=$P(SRA(200),"^",16),SRX=213,SRAO("4A")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",23,0)
 S Y=$P(SRA(200),"^",30),SRX=242,SRAO(5)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",24,0)
 S Y=$P(SRA(200),"^",35),SRX=396,SRAO("5A")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",25,0)
 S Y=$P(SRA(200),"^",31),SRX=394,SRAO("5B")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",26,0)
 S Y=$P(SRA(200),"^",32),SRX=220,SRAO("5C")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",27,0)
 S Y=$P(SRA(200),"^",33),SRX=266,SRAO("5D")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",28,0)
 S Y=$P(SRA(200),"^",34),SRX=395,SRAO("5E")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",29,0)
 S Y=$P(SRA(200),"^",36),SRX=208,SRAO("5F")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",30,0)
 S Y=$P(SRA(200),"^",40),SRX=206,SRAO(6)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",31,0)
 S Y=$P(SRA(200),"^",41),SRX=329,SRAO("6A")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",32,0)
 S Y=$P(SRA(200),"^",42),SRX=330,SRAO("6B")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",33,0)
 W:$E(IOST)="P" ! W !,?28,"PREOPERATIVE INFORMATION",!!
"RTN","SROAPRT1",34,0)
 W "GENERAL:",?31,$P(SRAO(1),"^"),?40,"HEPATOBILIARY:",?72,$P(SRAO(3),"^")
"RTN","SROAPRT1",35,0)
 W !,"Height: ",?22,$J($P(SRAO("1A"),"^"),15),?40,"Ascites:",?72,$P(SRAO("3A"),"^")
"RTN","SROAPRT1",36,0)
 W !,"Weight:",?22,$J($P(SRAO("1B"),"^"),15)
"RTN","SROAPRT1",37,0)
 W !,"Diabetes Mellitus:",?31,$P(SRAO("1C"),"^"),?40,"GASTROINTESTINAL:",?72,$P(SRAO(4),"^")
"RTN","SROAPRT1",38,0)
 W !,"Current Smoker W/I 1 Year:",?31,$P(SRAO("1D"),"^"),?40,"Esophageal Varices:",?72,$P(SRAO("4A"),"^")
"RTN","SROAPRT1",39,0)
 W !,"Pack/Years:",?31,$P(SRAO("1E"),"^")
"RTN","SROAPRT1",40,0)
 W !,"ETOH > 2 Drinks/Day:",?31,$P(SRAO("1F"),"^"),?40,"CARDIAC:",?72,$P(SRAO(5),"^")
"RTN","SROAPRT1",41,0)
 W !,"Dyspnea: ",?13,$J($P(SRAO("1G"),"^"),25),?40,"CHF Within 1 Month:",?72,$P(SRAO("5A"),"^")
"RTN","SROAPRT1",42,0)
 W !,"DNR Status: ",?31,$P(SRAO("1H"),"^"),?40,"MI Within 6 Months:",?72,$P(SRAO("5B"),"^")
"RTN","SROAPRT1",43,0)
 W !,"Pre-illness Funct",?40,"Previous PCI:",?72,$P(SRAO("5C"),"^")
"RTN","SROAPRT1",44,0)
 W !,?12,"Status: ",$J($P(SRAO("1I"),"^"),17),?40,"Previous Cardiac Surgery:",?72,$P(SRAO("5D"),"^")
"RTN","SROAPRT1",45,0)
 W !,"Preop Funct Status: ",$J($P(SRAO("1J"),"^"),17),?40,"Angina Within 1 Month:",?72,$P(SRAO("5E"),"^")
"RTN","SROAPRT1",46,0)
 W !,?40,"Hypertension Requiring Meds:",?72,$P(SRAO("5F"),"^")
"RTN","SROAPRT1",47,0)
 W !,"PULMONARY:",?31,$P(SRAO(2),"^")
"RTN","SROAPRT1",48,0)
 W !,"Ventilator Dependent:",?31,$P(SRAO("2A"),"^"),?40,"VASCULAR:",?72,$P(SRAO(6),"^")
"RTN","SROAPRT1",49,0)
 W !,"History of Severe COPD:",?31,$P(SRAO("2B"),"^"),?40,"Revascularization/Amputation:",?72,$P(SRAO("6A"),"^")
"RTN","SROAPRT1",50,0)
 W !,"Current Pneumonia:",?31,$P(SRAO("2C"),"^"),?40,"Rest Pain/Gangrene:",?72,$P(SRAO("6B"),"^")
"RTN","SROAPRT1",51,0)
 Q
"RTN","SROAPRT1",52,0)
OUT(SRFLD,SRY) ; get data in output form
"RTN","SROAPRT1",53,0)
 N C,Y
"RTN","SROAPRT1",54,0)
 S Y=SRY,C=$P(^DD(130,SRFLD,0),"^",2) D:Y'="" Y^DIQ
"RTN","SROAPRT1",55,0)
 I Y="NO STUDY" S Y="NS"
"RTN","SROAPRT1",56,0)
 I SRFLD=236!(SRFLD=237)!(SRFLD=346) S Y=$E(Y,1,15)
"RTN","SROAPRT1",57,0)
 I SRFLD=240!(SRFLD=492) D
"RTN","SROAPRT1",58,0)
 .I SRY=2 S Y="PARTIAL DEPENDENT" Q
"RTN","SROAPRT1",59,0)
 .I SRY=4 S Y=Y_"  "
"RTN","SROAPRT1",60,0)
 I SRFLD=325,$L(Y)=2 S Y=Y_"     "
"RTN","SROAPRT1",61,0)
 Q Y
"RTN","SROAPRT2")
0^36^B11958785^B11069450
"RTN","SROAPRT2",1,0)
SROAPRT2 ;BIR/MAM - PRINT PREOP INFO (PAGE 2) ;02/23/06
"RTN","SROAPRT2",2,0)
 ;;3.0; Surgery ;**38,125,137,153**;24 Jun 93;Build 11
"RTN","SROAPRT2",3,0)
 I $E(IOST)'="P" W !,?28,"PREOPERATIVE INFORMATION"
"RTN","SROAPRT2",4,0)
 N SRX,Y S SRA(200)=$G(^SRF(SRTN,200)),SRA(206)=$G(^SRF(SRTN,206))
"RTN","SROAPRT2",5,0)
 S Y=$P(SRA(200),"^",37),SRX=243,SRAO(1)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT2",6,0)
 S Y=$P(SRA(200),"^",38),SRX=328,SRAO("1A")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT2",7,0)
 S Y=$P(SRA(200),"^",39),SRX=211,SRAO("1B")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT2",8,0)
 S Y=$P(SRA(200),"^",18),SRX=210,SRAO(2)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT2",9,0)
 S Y=$P(SRA(200),"^",44),SRX=245,SRAO(3)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT2",10,0)
 S Y=$P(SRA(200),"^",19),SRX=332,SRAO("2A")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT2",11,0)
 S Y=$P(SRA(200),"^",21),SRX=333,SRAO("2B")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT2",12,0)
 S Y=$P(SRA(200),"^",22),SRX=398,SRAO("2I")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT2",13,0)
 S Y=$P(SRA(200),"^",23),SRX=399,SRAO("2H")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT2",14,0)
 S Y=$P(SRA(200),"^",24),SRX=400,SRAO("2C")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT2",15,0)
 S Y=$P(SRA(200),"^",25),SRX=334,SRAO("2D")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT2",16,0)
 S Y=$P(SRA(200),"^",26),SRX=335,SRAO("2E")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT2",17,0)
 S Y=$P(SRA(200),"^",27),SRX=336,SRAO("2F")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT2",18,0)
 S Y=$P(SRA(200),"^",29),SRX=401,SRAO("2G")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT2",19,0)
 S Y=$P(SRA(200),"^",45),SRX=338,SRAO("3A")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT2",20,0)
 S Y=$P(SRA(200),"^",46),SRX=218,SRAO("3B")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT2",21,0)
 S Y=$P(SRA(200),"^",47),SRX=339,SRAO("3C")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT2",22,0)
 S Y=$P(SRA(200),"^",48),SRX=215,SRAO("3D")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT2",23,0)
 S Y=$P(SRA(200),"^",49),SRX=216,SRAO("3E")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT2",24,0)
 S Y=$P(SRA(200),"^",50),SRX=217,SRAO("3F")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT2",25,0)
 S Y=$P(SRA(206),"^",3),SRX=338.1,SRAO("3G")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT2",26,0)
 S Y=$P(SRA(206),"^",4),SRX=338.2,SRAO("3H")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT2",27,0)
 S Y=$P(SRA(206),"^",8),SRX=218.1,SRAO("3I")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT2",28,0)
 S Y=$P($G(^SRF(SRTN,200.1)),"^",3),SRX=269,SRAO("3J")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT2",29,0)
 W !!,"RENAL:",?31,$P(SRAO(1),"^"),?40,"NUTRITIONAL/IMMUNE/OTHER:",?72,$P(SRAO(3),"^")
"RTN","SROAPRT2",30,0)
 W !,"Acute Renal Failure:",?31,$P(SRAO("1A"),"^"),?40,"Disseminated Cancer:",?72,$P(SRAO("3A"),"^")
"RTN","SROAPRT2",31,0)
 W !,"Currently on Dialysis:",?31,$P(SRAO("1B"),"^"),?40,"Open Wound:",?72,$P(SRAO("3B"),"^")
"RTN","SROAPRT2",32,0)
 W !,?40,"Steroid Use for Chronic Cond.:",?72,$P(SRAO("3C"),"^")
"RTN","SROAPRT2",33,0)
 W !,"CENTRAL NERVOUS SYSTEM:",?31,$P(SRAO(2),"^"),?40,"Weight Loss > 10%:",?72,$P(SRAO("3D"),"^")
"RTN","SROAPRT2",34,0)
 W !,"Impaired Sensorium: ",?31,$P(SRAO("2A"),"^"),?40,"Bleeding Disorders:",?72,$P(SRAO("3E"),"^")
"RTN","SROAPRT2",35,0)
 W !,"Coma:",?31,$P(SRAO("2B"),"^"),?40,"Transfusion > 4 RBC Units:",?72,$P(SRAO("3F"),"^")
"RTN","SROAPRT2",36,0)
 W !,"Hemiplegia:",?31,$P(SRAO("2C"),"^"),?40,"Chemotherapy W/I 30 Days:",?72,$P(SRAO("3G"),"^")
"RTN","SROAPRT2",37,0)
 W !,"History of TIAs:",?31,$P(SRAO("2D"),"^"),?40,"Radiotherapy W/I 90 Days:",?72,$P(SRAO("3H"),"^")
"RTN","SROAPRT2",38,0)
 W !,"CVA/Stroke w. Neuro Deficit:",?31,$P(SRAO("2E"),"^"),?40,"Preoperative Sepsis:",?(75-$L($P(SRAO("3I"),"^"))),$P(SRAO("3I"),"^")
"RTN","SROAPRT2",39,0)
 W !,"CVA/Stroke w/o Neuro Deficit:",?31,$P(SRAO("2F"),"^"),?40,"Pregnancy:",?(75-$L($P(SRAO("3J"),"^"))),$P(SRAO("3J"),"^")
"RTN","SROAPRT2",40,0)
 W !,"Tumor Involving CNS:",?31,$P(SRAO("2G"),"^")
"RTN","SROAPRT2",41,0)
 W !,"Paraplegia:",?31,$P(SRAO("2H"),"^")
"RTN","SROAPRT2",42,0)
 W !,"Quadriplegia:",?31,$P(SRAO("2I"),"^")
"RTN","SROAPRT2",43,0)
 I $E(IOST)="P" W !
"RTN","SROAPRT2",44,0)
 Q
"RTN","SROAPRT2",45,0)
OUT(SRFLD,SRY) ; get data in output form
"RTN","SROAPRT2",46,0)
 N C,Y
"RTN","SROAPRT2",47,0)
 S Y=SRY,C=$P(^DD(130,SRFLD,0),"^",2) D:Y'="" Y^DIQ
"RTN","SROAPRT2",48,0)
 I Y="NO STUDY" S Y="NS "
"RTN","SROAPRT2",49,0)
 Q Y
"RTN","SROAPRT3")
0^37^B15633950^B14821883
"RTN","SROAPRT3",1,0)
SROAPRT3 ;BIR/MAM - PRINT OPERATION INFO ;02/23/06
"RTN","SROAPRT3",2,0)
 ;;3.0; Surgery ;**38,47,63,81,88,95,125,142,153**;24 Jun 93;Build 11
"RTN","SROAPRT3",3,0)
 K SRAO S (SRAO(7),SRAO(8))="",SRA("OP")=^SRF(SRTN,"OP")
"RTN","SROAPRT3",4,0)
 S SRAO(2)="^1" K SROPS S SROPER=$P(SRA("OP"),"^")
"RTN","SROAPRT3",5,0)
 S:$L(SROPER)<49 SROPS(1)=SROPER K M,MM,MMM I $L(SROPER)>48 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROAPRT3",6,0)
 S SRA(0)=^SRF(SRTN,0),X=$P(SRA(0),"^",4) S:X X=$P(^SRO(137.45,X,0),"^") S SRAO(2)=X_"^.04"
"RTN","SROAPRT3",7,0)
 W !,?29,"OPERATIVE INFORMATION",!!,$J("Surgical Specialty: ",39)_$P(SRAO(2),"^")
"RTN","SROAPRT3",8,0)
 W !!,$J("Principal Operation: ",39)_SROPS(1) I $D(SROPS(2)) W !,?40,SROPS(2) I $D(SROPS(3)) W !,?40,SROPS(3)
"RTN","SROAPRT3",9,0)
 D ^SROAOTH
"RTN","SROAPRT3",10,0)
 S X=$P(SRA(200),"^",52),SRAO(9)=X_"^214",NYUK=$P(SRA(0),"^",10),NYUK=$S(NYUK="EM":"YES",1:"NO") S SRAO(10)=NYUK_"^.035"
"RTN","SROAPRT3",11,0)
 S Y=$P($G(^SRF(SRTN,"1.0")),"^",8),C=$P(^DD(130,1.09,0),"^",2) D:Y'="" Y^DIQ S SRAO(11)=Y_"^1.09"
"RTN","SROAPRT3",12,0)
 S NYUK=$P(SRA(200),"^",53) D YN S SRAO(12)=SHEMP_"^201"
"RTN","SROAPRT3",13,0)
 S Y=$P($G(^SRF(SRTN,1.1)),"^",3),C=$P(^DD(130,1.13,0),"^",2) D:Y'="" Y^DIQ S SRAO(13)=Y_"^1.13"
"RTN","SROAPRT3",14,0)
 D TECH^SROPRIN S SRAO(14)=SRTECH D TRAUMA S SRAO(14.1)=SRTRAUMA K SRTRAUMA
"RTN","SROAPRT3",15,0)
 S SRI=$P($G(^SRF(SRTN,.3)),"^",9) D  S SRAO(14.2)=SRI
"RTN","SROAPRT3",16,0)
 .I 'SRI S SRI="NOT ENTERED" Q
"RTN","SROAPRT3",17,0)
 .K DA,DIC,DIQ,SRY S DIC="^SRF(",DA=SRTN,DIQ="SRY",DIQ(0)="E",DR=901 D EN^DIQ1 S SRI=SRY(130,SRTN,901,"E") K DA,DIC,DIQ,DR,SRY
"RTN","SROAPRT3",18,0)
 S X=$P(SRA(200),"^",54),SRAO(15)=X_"^340"
"RTN","SROAPRT3",19,0)
 S Y=$P($G(^SRF(SRTN,.3)),"^",11),C=$P(^DD(130,901.1,0),"^",2) D:Y'="" Y^DIQ S:Y="" Y="NOT ENTERED" S SRAO(16)=Y_"^901.1"
"RTN","SROAPRT3",20,0)
 S Y=$P($G(^SRF(SRTN,200.1)),"^",4),C=$P(^DD(130,443,0),"^",2) D:Y'="" Y^DIQ S SRAO(5)=Y_"^443"
"RTN","SROAPRT3",21,0)
 I $E(IOST)'="P" D PAGE^SROAPAS Q:SRSOUT  W !,?29,"OPERATIVE INFORMATION",!
"RTN","SROAPRT3",22,0)
 W !,$J("PGY of Primary Surgeon: ",39)_$P(SRAO(9),"^") W !,$J("Emergency Case (Y/N): ",39)_$P(SRAO(10),"^")
"RTN","SROAPRT3",23,0)
 S X=$P(SRA(0),"^",3),X=$S(X="J":"MAJOR",X="N":"MINOR",1:""),SRAO(12)=X_"^.03" W !,$J("Major or Minor: ",39)_$P(SRAO(12),"^")
"RTN","SROAPRT3",24,0)
 W !,$J("Wound Classification: ",39)_$P(SRAO(11),"^")
"RTN","SROAPRT3",25,0)
 W !,$J("ASA Classification: ",39)_$P(SRAO(13),"^")
"RTN","SROAPRT3",26,0)
 W !,$J("Airway Trauma: ",39)_$P(SRAO(14.1),"^")
"RTN","SROAPRT3",27,0)
 W !,$J("Mallampati Scale: ",39)_$P(SRAO(16),"^")
"RTN","SROAPRT3",28,0)
 W !,$J("Principal Anesthesia Technique: ",39)_$P(SRAO(14),"^")
"RTN","SROAPRT3",29,0)
 W !,$J("Airway Index: ",39)_$P(SRAO(14.2),"^")
"RTN","SROAPRT3",30,0)
 W !,$J("RBC Units Transfused: ",39)_$P(SRAO(15),"^")
"RTN","SROAPRT3",31,0)
 W !,$J("Intraop Disseminated Cancer: ",39)_$P(SRAO(5),"^")
"RTN","SROAPRT3",32,0)
 I $E(IOST)="P" W !!
"RTN","SROAPRT3",33,0)
 Q
"RTN","SROAPRT3",34,0)
YN S SHEMP=$S(NYUK="NS":"NS",NYUK="N":"NO",NYUK="Y":"YES",1:"")
"RTN","SROAPRT3",35,0)
 Q
"RTN","SROAPRT3",36,0)
LOOP ; break procedures
"RTN","SROAPRT3",37,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<49  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROAPRT3",38,0)
 Q
"RTN","SROAPRT3",39,0)
TRAUMA ; trauma related to anesthesia airway management
"RTN","SROAPRT3",40,0)
 S SRTRAUMA="" S:SRT SRTRAUMA=$P(^SRF(SRTN,6,SRT,0),"^",14) I SRTRAUMA="" S SRTRAUMA="NOT ENTERED" Q
"RTN","SROAPRT3",41,0)
 S Y=SRTRAUMA,C=$P(^DD(130.06,12,0),"^",2) D Y^DIQ S SRTRAUMA=Y
"RTN","SROAPRT3",42,0)
 Q
"RTN","SROAPRT3",43,0)
OPTIMES ; print operation times
"RTN","SROAPRT3",44,0)
 K SRAO F I=1:1:7 S SRAO(I)=""
"RTN","SROAPRT3",45,0)
 W !,?24,"OPERATION DATE/TIMES INFORMATION"
"RTN","SROAPRT3",46,0)
 S X=$G(^SRF(SRTN,.2)),SRAO(1)=$P(X,"^",10),SRAO(2)=$P(X,"^",2),SRAO(3)=$P(X,"^",3),SRAO(4)=$P(X,"^",12),SRAO(5)=$P(X,"^"),SRAO(6)=$P(X,"^",4),SRAO(7)=$P($G(^SRF(SRTN,1.1)),"^",8)
"RTN","SROAPRT3",47,0)
 F SRI=1:1:7 S Y=SRAO(SRI) I Y X ^DD("DD") S X=$P(Y,"@")_"  "_$P(Y,"@",2),SRAO(SRI)=X
"RTN","SROAPRT3",48,0)
 W !!,$J("Patient in Room (PIR): ",39)_SRAO(1),!,$J("Procedure/Surgery Start Time (PST): ",39)_SRAO(2),!,$J("Procedure/Surgery Finish (PF): ",39)_SRAO(3)
"RTN","SROAPRT3",49,0)
 W !,$J("Patient Out of Room (POR): ",39)_SRAO(4),!,$J("Anesthesia Start (AS): ",39)_SRAO(5),!,$J("Anesthesia Finish (AF): ",39)_SRAO(6),!,$J("Discharge from PACU (DPACU): ",39)_SRAO(7)
"RTN","SROAPRT3",50,0)
 I $E(IOST)="P" W !
"RTN","SROAPRT3",51,0)
 Q
"RTN","SROAPRT4")
0^38^B5890683^B5327392
"RTN","SROAPRT4",1,0)
SROAPRT4 ;BIR/MAM - PRINT ASSESSMENT (CONT.) ;06/28/06
"RTN","SROAPRT4",2,0)
 ;;3.0; Surgery ;**38,125,153**;24 Jun 93;Build 11
"RTN","SROAPRT4",3,0)
 ;K SRA S SRA(201)=$G(^SRF(SRTN,201)),SRA(202)=$G(^SRF(SRTN,202))
"RTN","SROAPRT4",4,0)
 K SRA F I=201,202,203,204 S SRA(I)=$G(^SRF(SRTN,I))
"RTN","SROAPRT4",5,0)
 W !,?20,"PREOPERATIVE LABORATORY TEST RESULTS"
"RTN","SROAPRT4",6,0)
 W !!,$J("Anion Gap (in 48 hrs.): ",39) S X=$P(SRA(203),"^",15) W X S X=$P(SRA(204),"^",15) I X D DATE W ?48,"("_Y_")"
"RTN","SROAPRT4",7,0)
 W !,$J("Serum Sodium: ",39) S X=$P(SRA(201),"^") W X S X=$P(SRA(202),"^") I X D DATE W ?48,"("_Y_")"
"RTN","SROAPRT4",8,0)
 W !,$J("Serum Creatinine: ",39) S X=$P(SRA(201),"^",4) W X S X=$P(SRA(202),"^",4) I X D DATE W ?48,"("_Y_")"
"RTN","SROAPRT4",9,0)
 W !,$J("BUN: ",39) S X=$P(SRA(201),"^",5) W X I X S X=$P(SRA(202),"^",5) I X D DATE W ?48,"("_Y_")"
"RTN","SROAPRT4",10,0)
 W !,$J("Serum Albumin: ",39) S X=$P(SRA(201),"^",8) W X I X S X=$P(SRA(202),"^",8) I X D DATE W ?48,"("_Y_")"
"RTN","SROAPRT4",11,0)
 W !,$J("Total Bilirubin: ",39) S X=$P(SRA(201),"^",9) W X S X=$P(SRA(202),"^",9) I X D DATE W ?48,"("_Y_")"
"RTN","SROAPRT4",12,0)
 W !,$J("SGOT: ",39) S X=$P(SRA(201),"^",11) W X I X S X=$P(SRA(202),"^",11) I X D DATE W ?48,"("_Y_")"
"RTN","SROAPRT4",13,0)
 W !,$J("Alkaline Phosphatase: ",39) S X=$P(SRA(201),"^",12) W X I X S X=$P(SRA(202),"^",12) I X D DATE W ?48,"("_Y_")"
"RTN","SROAPRT4",14,0)
 W !,$J("White Blood Count: ",39) S X=$P(SRA(201),"^",13) W X S X=$P(SRA(202),"^",13) I X D DATE W ?48,"("_Y_")"
"RTN","SROAPRT4",15,0)
 W !,$J("Hematocrit: ",39) S X=$P(SRA(201),"^",14) W X I X S X=$P(SRA(202),"^",14) I X D DATE W ?48,"("_Y_")"
"RTN","SROAPRT4",16,0)
 W !,$J("Platelet Count: ",39) S X=$P(SRA(201),"^",15) W X S X=$P(SRA(202),"^",15) I X D DATE W ?48,"("_Y_")"
"RTN","SROAPRT4",17,0)
 W !,$J("PTT: ",39) S X=$P(SRA(201),"^",16) W X S X=$P(SRA(202),"^",16) I X D DATE W ?48,"("_Y_")"
"RTN","SROAPRT4",18,0)
 W !,$J("PT: ",39) S X=$P(SRA(201),"^",17) W X I X S X=$P(SRA(202),"^",17) I X D DATE W ?48,"("_Y_")"
"RTN","SROAPRT4",19,0)
 W !,$J("INR: ",39) S X=$P(SRA(201),"^",27) W X I X S X=$P(SRA(202),"^",27) I X D DATE W ?48,"("_Y_")"
"RTN","SROAPRT4",20,0)
 I $E(IOST)="P" W !!
"RTN","SROAPRT4",21,0)
 Q
"RTN","SROAPRT4",22,0)
DATE S Y=X X ^DD("DD")
"RTN","SROAPRT4",23,0)
 Q
"RTN","SROAPRT5")
0^39^B5810182^B5379666
"RTN","SROAPRT5",1,0)
SROAPRT5 ;BIR/MAM - PRINT ASSESSMENT (CONT) ;06/28/06
"RTN","SROAPRT5",2,0)
 ;;3.0; Surgery ;**38,88,153**;24 Jun 93;Build 11
"RTN","SROAPRT5",3,0)
 K SRA S SRA(203)=$G(^SRF(SRTN,203)),SRA(204)=$G(^SRF(SRTN,204))
"RTN","SROAPRT5",4,0)
 W:$E(IOST)="P" ! W !,?22,"POSTOPERATIVE LABORATORY RESULTS",!!,?29," * Highest Value",!,?29,"** Lowest Value"
"RTN","SROAPRT5",5,0)
 W !!,$J("* Anion Gap: ",39) S X=$P(SRA(203),"^",16) W X S X=$P(SRA(204),"^",16) I X D DATE W ?48,"("_Y_")"
"RTN","SROAPRT5",6,0)
 W !,$J("* Serum Sodium: ",39) S X=$P(SRA(203),"^") W X S X=$P(SRA(204),"^") I X D DATE W ?48,"("_Y_")"
"RTN","SROAPRT5",7,0)
 W !,$J("** Serum Sodium: ",39) S X=$P(SRA(203),"^",2) W X S X=$P(SRA(204),"^",2) I X D DATE W ?48,"("_Y_")"
"RTN","SROAPRT5",8,0)
 W !,$J("* Potassium: ",39) S X=$P(SRA(203),"^",3) W X S X=$P(SRA(204),"^",3) I X D DATE W ?48,"("_Y_")"
"RTN","SROAPRT5",9,0)
 W !,$J("** Potassium: ",39) S X=$P(SRA(203),"^",4) W X S X=$P(SRA(204),"^",4) I X D DATE W ?48,"("_Y_")"
"RTN","SROAPRT5",10,0)
 W !,$J("* Serum Creatinine: ",39) S X=$P(SRA(203),"^",6) W X S X=$P(SRA(204),"^",6) I X D DATE W ?48,"("_Y_")"
"RTN","SROAPRT5",11,0)
 W !,$J("* CPK: ",39) S X=$P(SRA(203),"^",7) W X I X S X=$P(SRA(204),"^",7) I X D DATE W ?48,"("_Y_")"
"RTN","SROAPRT5",12,0)
 W !,$J("* CPK-MB Band: ",39) S X=$P(SRA(203),"^",8) W X S X=$P(SRA(204),"^",8) I X D DATE W ?48,"("_Y_")"
"RTN","SROAPRT5",13,0)
 W !,$J("* Total Bilirubin: ",39) S X=$P(SRA(203),"^",9) W X I X S X=$P(SRA(204),"^",9) I X D DATE W ?48,"("_Y_")"
"RTN","SROAPRT5",14,0)
 W !,$J("* White Blood Count: ",39) S X=$P(SRA(203),"^",10) W X S X=$P(SRA(204),"^",10) I X D DATE W ?48,"("_Y_")"
"RTN","SROAPRT5",15,0)
 W !,$J("** Hematocrit: ",39) S X=$P(SRA(203),"^",12) W X S X=$P(SRA(204),"^",12) I X D DATE W ?48,"("_Y_")"
"RTN","SROAPRT5",16,0)
 W !,$J("* Troponin I: ",39) S X=$P(SRA(203),"^",13) W X S X=$P(SRA(204),"^",13) I X D DATE W ?48,"("_Y_")"
"RTN","SROAPRT5",17,0)
 W !,$J("* Troponin T: ",39) S X=$P(SRA(203),"^",14) W X S X=$P(SRA(204),"^",14) I X D DATE W ?48,"("_Y_")"
"RTN","SROAPRT5",18,0)
 I $E(IOST)="P" W !!
"RTN","SROAPRT5",19,0)
 Q
"RTN","SROAPRT5",20,0)
DATE S Y=X X ^DD("DD")
"RTN","SROAPRT5",21,0)
 Q
"RTN","SROAPS1")
0^71^B19811405^B16884597
"RTN","SROAPS1",1,0)
SROAPS1 ;BIR/MAM - PREOP INFO (PAGE 1) ;06/08/06
"RTN","SROAPS1",2,0)
 ;;3.0; Surgery ;**38,47,125,153**;24 Jun 93;Build 11
"RTN","SROAPS1",3,0)
 N I S SRPAGE="PAGE: 1 OF 2" D HDR^SROAUTL,PRE1
"RTN","SROAPS1",4,0)
 W ! F I=1:1:80 W "-"
"RTN","SROAPS1",5,0)
 Q
"RTN","SROAPS1",6,0)
PRE1 N SRX,Y D HW F I=200,206 S SRA(I)=$G(^SRF(SRTN,I))
"RTN","SROAPS1",7,0)
 S Y=$P(SRA(200),"^"),SRX=402,SRAO(1)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",8,0)
 S Y=$P(SRA(206),"^"),SRX=236,SRAO("1A")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",9,0)
 S Y=$P(SRA(206),"^",2),SRX=237,SRAO("1B")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",10,0)
 S Y=$P(SRA(200),"^",2),SRX=346,SRAO("1C")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",11,0)
 S Y=$P(SRA(200),"^",3),SRX=202,SRAO("1D")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",12,0)
 S Y=$P($G(^SRF(SRTN,208)),"^",9),SRX=202.1,SRAO("1E")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",13,0)
 S Y=$P(SRA(200),"^",4),SRX=246,SRAO("1F")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",14,0)
 S Y=$P(SRA(200),"^",6),SRX=325,SRAO("1G")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",15,0)
 S Y=$P(SRA(200),"^",7),SRX=238,SRAO("1H")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",16,0)
 S Y=$P(SRA(200),"^",8),SRX=240,SRAO("1I")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",17,0)
 S Y=$P($G(^SRF(SRTN,200.1)),"^",2),SRX=492,SRAO("1J")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",18,0)
 S Y=$P(SRA(200),"^",9),SRX=241,SRAO(2)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",19,0)
 S Y=$P(SRA(200),"^",10),SRX=204,SRAO("2A")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",20,0)
 S Y=$P(SRA(200),"^",11),SRX=203,SRAO("2B")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",21,0)
 S Y=$P(SRA(200),"^",12),SRX=326,SRAO("2C")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",22,0)
 S Y=$P(SRA(200),"^",13),SRX=244,SRAO(3)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",23,0)
 S Y=$P(SRA(200),"^",15),SRX=212,SRAO("3A")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",24,0)
 S Y=$P($G(^SRF(SRTN,200.1)),"^"),SRX=486,SRAO(4)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",25,0)
 S Y=$P(SRA(200),"^",16),SRX=213,SRAO("4A")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",26,0)
 S Y=$P(SRA(200),"^",30),SRX=242,SRAO(5)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",27,0)
 S Y=$P(SRA(200),"^",35),SRX=396,SRAO("5A")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",28,0)
 S Y=$P(SRA(200),"^",31),SRX=394,SRAO("5B")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",29,0)
 S Y=$P(SRA(200),"^",32),SRX=220,SRAO("5C")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",30,0)
 S Y=$P(SRA(200),"^",33),SRX=266,SRAO("5D")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",31,0)
 S Y=$P(SRA(200),"^",34),SRX=395,SRAO("5E")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",32,0)
 S Y=$P(SRA(200),"^",36),SRX=208,SRAO("5F")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",33,0)
 S Y=$P(SRA(200),"^",40),SRX=206,SRAO(6)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",34,0)
 S Y=$P(SRA(200),"^",41),SRX=329,SRAO("6A")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",35,0)
 S Y=$P(SRA(200),"^",42),SRX=330,SRAO("6B")=$$OUT(SRX,Y)_"^"_SRX K SRA
"RTN","SROAPS1",36,0)
 W "1. GENERAL:",?32,$P(SRAO(1),"^"),?41,"3. HEPATOBILIARY:",?76,$P(SRAO(3),"^")
"RTN","SROAPS1",37,0)
 W !,"  A. Height:" S Y=$P(SRAO("1A"),"^") W ?($S(Y="NS":19,1:24)),$J($P(Y,"^"),15),?43,"A. Ascites:",?76,$P(SRAO("3A"),"^")
"RTN","SROAPS1",38,0)
 W !,"  B. Weight:" S Y=$P(SRAO("1B"),"^") W ?($S(Y="NS":19,1:24)),$J(Y,15)
"RTN","SROAPS1",39,0)
 W !,"  C. Diabetes Mellitus:",?32,$P(SRAO("1C"),"^"),?41,"4. GASTROINTESTINAL:",?76,$P(SRAO(4),"^")
"RTN","SROAPS1",40,0)
 W !,"  D. Current Smoker W/I 1 Year:",?32,$P(SRAO("1D"),"^"),?43,"A. Esophageal Varices:",?76,$P(SRAO("4A"),"^")
"RTN","SROAPS1",41,0)
 W !,"  E. Pack/Years:",?32,$P(SRAO("1E"),"^")
"RTN","SROAPS1",42,0)
 W !,"  F. ETOH > 2 Drinks/Day:",?32,$P(SRAO("1F"),"^"),?41,"5. CARDIAC:",?76,$P(SRAO(5),"^")
"RTN","SROAPS1",43,0)
 W !,"  G. Dyspnea: ",?14,$J($P(SRAO("1G"),"^"),25),?43,"A. CHF Within 1 Month:",?76,$P(SRAO("5A"),"^")
"RTN","SROAPS1",44,0)
 W !,"  H. DNR Status: ",?32,$P(SRAO("1H"),"^"),?43,"B. MI Within 6 Months:",?76,$P(SRAO("5B"),"^")
"RTN","SROAPS1",45,0)
 W !,"  I. Pre-illness Funct",?43,"C. Previous PCI:",?76,$P(SRAO("5C"),"^")
"RTN","SROAPS1",46,0)
 W !,?17,"Status: ",$J($P(SRAO("1I"),"^"),17),?43,"D. Previous Cardiac Surgery:",?76,$P(SRAO("5D"),"^")
"RTN","SROAPS1",47,0)
 W !,"  J. Preop Funct Status: ",$J($P(SRAO("1J"),"^"),17),?43,"E. Angina Within 1 Month:",?76,$P(SRAO("5E"),"^")
"RTN","SROAPS1",48,0)
 W !,?43,"F. Hypertension Requiring Meds:",?76,$P(SRAO("5F"),"^")
"RTN","SROAPS1",49,0)
 W !,"2. PULMONARY:",?32,$P(SRAO(2),"^")
"RTN","SROAPS1",50,0)
 W !,"  A. Ventilator Dependent:",?32,$P(SRAO("2A"),"^"),?41,"6. VASCULAR:",?76,$P(SRAO(6),"^")
"RTN","SROAPS1",51,0)
 W !,"  B. History of Severe COPD:",?32,$P(SRAO("2B"),"^"),?43,"A. Revascularization/Amputation:",?76,$P(SRAO("6A"),"^")
"RTN","SROAPS1",52,0)
 W !,"  C. Current Pneumonia:",?32,$P(SRAO("2C"),"^"),?43,"B. Rest Pain/Gangrene:",?76,$P(SRAO("6B"),"^")
"RTN","SROAPS1",53,0)
 Q
"RTN","SROAPS1",54,0)
OUT(SRFLD,SRY) ; get data in output form
"RTN","SROAPS1",55,0)
 N C,Y
"RTN","SROAPS1",56,0)
 S Y=SRY,C=$P(^DD(130,SRFLD,0),"^",2) D:Y'="" Y^DIQ
"RTN","SROAPS1",57,0)
 I Y="NO STUDY" S Y="NS"
"RTN","SROAPS1",58,0)
 I SRFLD=236!(SRFLD=237)!(SRFLD=346) S Y=$E(Y,1,15)
"RTN","SROAPS1",59,0)
 I SRFLD=240!(SRFLD=492) D
"RTN","SROAPS1",60,0)
 .I SRY=2 S Y="PARTIAL DEPENDENT" Q
"RTN","SROAPS1",61,0)
 .I SRY=1 S Y=Y_"    " Q
"RTN","SROAPS1",62,0)
 .I SRY=4 S Y=Y_"      "
"RTN","SROAPS1",63,0)
 I SRFLD=325,$L(Y)=2 S Y=Y_"     "
"RTN","SROAPS1",64,0)
 Q Y
"RTN","SROAPS1",65,0)
HW ; get weight & height from Vitals
"RTN","SROAPS1",66,0)
 N SREND,SREX,SRSTRT
"RTN","SROAPS1",67,0)
WT I $P($G(^SRF(SRTN,206)),"^",2)="" D
"RTN","SROAPS1",68,0)
 .S SREND=$P($G(^SRF(SRTN,0)),"^",9),SRSTRT=$$FMADD^XLFDT(SREND,-30),SREX=$$HW^SROACL1(SRSTRT,SREND,"WT")
"RTN","SROAPS1",69,0)
 .I SREX'="" S SREX=SREX+.5\1,$P(^SRF(SRTN,206),"^",2)=SREX
"RTN","SROAPS1",70,0)
HT I $P($G(^SRF(SRTN,206)),"^")="" D
"RTN","SROAPS1",71,0)
 .S SREND=$P($G(^SRF(SRTN,0)),"^",9),SRSTRT=$$FMADD^XLFDT(SREND,-365),SREX=$$HW^SROACL1(SRSTRT,SREND,"HT")
"RTN","SROAPS1",72,0)
 .I SREX'="" S SREX=SREX+.5\1,$P(^SRF(SRTN,206),"^")=SREX
"RTN","SROAPS1",73,0)
 Q
"RTN","SROAPS2")
0^3^B13745888^B12184598
"RTN","SROAPS2",1,0)
SROAPS2 ;BIR/MAM - PREOP INFO (PAGE 2) ;04/11/06
"RTN","SROAPS2",2,0)
 ;;3.0; Surgery ;**38,47,125,153**;24 Jun 93;Build 11
"RTN","SROAPS2",3,0)
 S SRPAGE="PAGE: 2 OF 2" D HDR^SROAUTL,PRE2
"RTN","SROAPS2",4,0)
 W !! F I=1:1:80 W "-"
"RTN","SROAPS2",5,0)
 Q
"RTN","SROAPS2",6,0)
PRE2 N SRX,Y S Y=$P($G(^SRF(SRTN,200.1)),"^",3) I Y="",$P(VADM(5),"^")="M" S $P(^SRF(SRTN,200.1),"^",3)="NA"
"RTN","SROAPS2",7,0)
 S SRA(200)=$G(^SRF(SRTN,200)),SRA(206)=$G(^SRF(SRTN,206)),SRA(200.1)=$G(^SRF(SRTN,200.1))
"RTN","SROAPS2",8,0)
 S Y=$P(SRA(200),"^",37),SRX=243,SRAO(1)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS2",9,0)
 S Y=$P(SRA(200),"^",38),SRX=328,SRAO("1A")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS2",10,0)
 S Y=$P(SRA(200),"^",39),SRX=211,SRAO("1B")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS2",11,0)
 S Y=$P(SRA(200),"^",18),SRX=210,SRAO(2)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS2",12,0)
 S Y=$P(SRA(200),"^",44),SRX=245,SRAO(3)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS2",13,0)
 S Y=$P(SRA(200),"^",19),SRX=332,SRAO("2A")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS2",14,0)
 S Y=$P(SRA(200),"^",21),SRX=333,SRAO("2B")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS2",15,0)
 S Y=$P(SRA(200),"^",22),SRX=398,SRAO("2I")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS2",16,0)
 S Y=$P(SRA(200),"^",23),SRX=399,SRAO("2H")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS2",17,0)
 S Y=$P(SRA(200),"^",24),SRX=400,SRAO("2C")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS2",18,0)
 S Y=$P(SRA(200),"^",25),SRX=334,SRAO("2D")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS2",19,0)
 S Y=$P(SRA(200),"^",26),SRX=335,SRAO("2E")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS2",20,0)
 S Y=$P(SRA(200),"^",27),SRX=336,SRAO("2F")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS2",21,0)
 S Y=$P(SRA(200),"^",29),SRX=401,SRAO("2G")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS2",22,0)
 S Y=$P(SRA(200),"^",45),SRX=338,SRAO("3A")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS2",23,0)
 S Y=$P(SRA(200),"^",46),SRX=218,SRAO("3B")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS2",24,0)
 S Y=$P(SRA(200),"^",47),SRX=339,SRAO("3C")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS2",25,0)
 S Y=$P(SRA(200),"^",48),SRX=215,SRAO("3D")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS2",26,0)
 S Y=$P(SRA(200),"^",49),SRX=216,SRAO("3E")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS2",27,0)
 S Y=$P(SRA(200),"^",50),SRX=217,SRAO("3F")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS2",28,0)
 S Y=$P(SRA(206),"^",3),SRX=338.1,SRAO("3G")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS2",29,0)
 S Y=$P(SRA(206),"^",4),SRX=338.2,SRAO("3H")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS2",30,0)
 S Y=$P(SRA(206),"^",8),SRX=218.1,SRAO("3I")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS2",31,0)
 S Y=$P(SRA(200.1),"^",3),SRX=269,SRAO("3J")=$$OUT(SRX,Y)_"^"_SRX K SRA
"RTN","SROAPS2",32,0)
 W !,"1. RENAL:",?35,$P(SRAO(1),"^"),?40,"3. NUTRITIONAL/IMMUNE/OTHER:",?76,$P(SRAO(3),"^")
"RTN","SROAPS2",33,0)
 W !,"  A. Acute Renal Failure:",?35,$P(SRAO("1A"),"^"),?40,"  A. Disseminated Cancer:",?76,$P(SRAO("3A"),"^")
"RTN","SROAPS2",34,0)
 W !,"  B. Currently on Dialysis:",?35,$P(SRAO("1B"),"^"),?40,"  B. Open Wound:",?76,$P(SRAO("3B"),"^")
"RTN","SROAPS2",35,0)
 W !,?40,"  C. Steroid Use for Chronic Cond.:",?76,$P(SRAO("3C"),"^")
"RTN","SROAPS2",36,0)
 W !,"2. CENTRAL NERVOUS SYSTEM:",?35,$P(SRAO(2),"^"),?40,"  D. Weight Loss > 10%:",?76,$P(SRAO("3D"),"^")
"RTN","SROAPS2",37,0)
 W !,"  A. Impaired Sensorium: ",?35,$P(SRAO("2A"),"^"),?40,"  E. Bleeding Disorders:",?76,$P(SRAO("3E"),"^")
"RTN","SROAPS2",38,0)
 W !,"  B. Coma:",?35,$P(SRAO("2B"),"^"),?40,"  F. Transfusion > 4 RBC Units:",?76,$P(SRAO("3F"),"^")
"RTN","SROAPS2",39,0)
 W !,"  C. Hemiplegia:",?35,$P(SRAO("2C"),"^"),?40,"  G. Chemotherapy W/I 30 Days:",?76,$P(SRAO("3G"),"^")
"RTN","SROAPS2",40,0)
 W !,"  D. History of TIAs:",?35,$P(SRAO("2D"),"^"),?40,"  H. Radiotherapy W/I 90 Days:",?76,$P(SRAO("3H"),"^")
"RTN","SROAPS2",41,0)
 W !,"  E. CVA/Stroke w. Neuro Deficit:",?35,$P(SRAO("2E"),"^"),?40,"  I. Preoperative Sepsis:",?(79-$L($P(SRAO("3I"),"^"))),$P(SRAO("3I"),"^")
"RTN","SROAPS2",42,0)
 W !,"  F. CVA/Stroke w/o Neuro Deficit:",?35,$P(SRAO("2F"),"^"),?40,"  J. Pregnancy:",?(79-$L($P(SRAO("3J"),"^"))),$P(SRAO("3J"),"^")
"RTN","SROAPS2",43,0)
 W !,"  G. Tumor Involving CNS:",?35,$P(SRAO("2G"),"^")
"RTN","SROAPS2",44,0)
 W !,"  H. Paraplegia:",?35,$P(SRAO("2H"),"^")
"RTN","SROAPS2",45,0)
 W !,"  I. Quadriplegia:",?35,$P(SRAO("2I"),"^")
"RTN","SROAPS2",46,0)
 Q
"RTN","SROAPS2",47,0)
OUT(SRFLD,SRY) ; get data in output form
"RTN","SROAPS2",48,0)
 N C,Y
"RTN","SROAPS2",49,0)
 S Y=SRY,C=$P(^DD(130,SRFLD,0),"^",2) D:Y'="" Y^DIQ
"RTN","SROAPS2",50,0)
 I Y="NO STUDY" S Y="NS "
"RTN","SROAPS2",51,0)
 Q Y
"RTN","SROATCM")
0^54^B25329729^B25457402
"RTN","SROATCM",1,0)
SROATCM ;BIR/MAM - TRANSMIT CARDIAC ASSESSMENTS ;03/02/06
"RTN","SROATCM",2,0)
 ;;3.0; Surgery ;**38,55,68,90,93,95,99,125,153**;24 Jun 93;Build 11
"RTN","SROATCM",3,0)
 ;
"RTN","SROATCM",4,0)
 ; Reference to ^DGPM("APTT1" supported by DBIA #565
"RTN","SROATCM",5,0)
 ; Reference to File #405 supported by DBIA #3029
"RTN","SROATCM",6,0)
 ; Reference to Field #27.02 in File #2 supported by DBIA #1850
"RTN","SROATCM",7,0)
 ;
"RTN","SROATCM",8,0)
 K ^TMP("SRA",$J) S SRATOT=0,SRASITE=+$P($$SITE^SROVAR,"^",3),(SRAMNUM,SRACNT)=1
"RTN","SROATCM",9,0)
 S SRADFN=0 F  S SRADFN=$O(^SRF("ARS","C","C",SRADFN)) Q:'SRADFN  S SRTN=0 F  S SRTN=$O(^SRF("ARS","C","C",SRADFN,SRTN)) Q:'SRTN  D STUFF
"RTN","SROATCM",10,0)
 S SRATOTM=SRAMNUM D ^SROATCM2
"RTN","SROATCM",11,0)
 Q
"RTN","SROATCM",12,0)
STUFF ; stuff entries into ^TMP("SRA",$J
"RTN","SROATCM",13,0)
 ; check for fouled up ARS x ref
"RTN","SROATCM",14,0)
 I $P(^SRF(SRTN,"RA"),"^",2)="N" K ^SRF("ARS","C","C",SRADFN,SRTN) K DR S DIE=130,DR="235///C",DA=SRTN D ^DIE K DR Q
"RTN","SROATCM",15,0)
 ; the next line is commented out to allow re-transmissions
"RTN","SROATCM",16,0)
 ;S SRART=$P(^SRF(SRTN,"RA"),"^",3) I SRART S DIE=130,DR="235///T",DA=SRTN D ^DIE K DR,DA,DIE Q
"RTN","SROATCM",17,0)
 I $P(^SRF(SRTN,"RA"),"^",2)'="C" Q
"RTN","SROATCM",18,0)
 I SRACNT>100 S SRACNT=1,SRAMNUM=SRAMNUM+1
"RTN","SROATCM",19,0)
 S SRATOT=SRATOT+1 K SRA,VADM
"RTN","SROATCM",20,0)
 F I=0,200,205:1:208 S SRA(I)=$G(SRF(SRTN,I))
"RTN","SROATCM",21,0)
 D ^SROATCM1,P93
"RTN","SROATCM",22,0)
 K SHEMP,SRA,VADM,VAPA
"RTN","SROATCM",23,0)
 S X=$E($P(^SRF(SRTN,0),"^",9),1,5)_"00",^TMP("SRWL",$J,X)=""
"RTN","SROATCM",24,0)
 Q
"RTN","SROATCM",25,0)
P93 ; referring & follow-up sites, patient address & phone number
"RTN","SROATCM",26,0)
 N SRPREF,SRREF,SRREFP,SRFOL,SRFOLP,SRSOUT,SRY S (SRPREF,SRREF,SRREFP,SRFOL,SRFOLP)="",SRSOUT=0,(VAIP("D"),SRSDATE)=$P(SRA(0),"^",9) D IN5^VADPT
"RTN","SROATCM",27,0)
 ; if not admitted before surgery, look for admission within 24 hours of leaving OR
"RTN","SROATCM",28,0)
 I 'VAIP(13) S X1=$P($G(^SRF(SRTN,.2)),"^",12),X2=1 D C^%DTC S SR24=X,SRDT=$O(^DGPM("APTT1",DFN,SRSDATE)) G:'SRDT!(SRDT>SR24) TS S VAIP("D")=SRDT D IN5^VADPT
"RTN","SROATCM",29,0)
TS I VAIP(13) K DA,DIC,DIQ,DR S DIC=405,DR=.05,DA=VAIP(13),DIQ="SRY",DIQ(0)="IE" D EN^DIQ1 S SRREF=SRY(405,VAIP(13),.05,"E"),SRREFP=SRY(405,VAIP(13),.05,"I") I SRREFP S SRREFP=$$GET1^DIQ(4,SRREFP,99)
"RTN","SROATCM",30,0)
 I VAIP(17) K DA,DIC,DIQ,DR,SRY S DIC=405,DR=.05,DA=VAIP(17),DIQ="SRY",DIQ(0)="IE" D EN^DIQ1 S SRFOL=SRY(405,VAIP(17),.05,"E"),SRFOLP=SRY(405,VAIP(17),.05,"I") I SRFOLP S SRFOLP=$$GET1^DIQ(4,SRFOLP,99)
"RTN","SROATCM",31,0)
 S SHEMP=$E(SHEMP,1,11)_" 18"_$J(VAPA(1),35)_$J(VAPA(2),30),^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SRACNT=SRACNT+1
"RTN","SROATCM",32,0)
 S SHEMP=$E(SHEMP,1,11)_" 19"_$J(VAPA(3),30)_$J(VAPA(4),15)
"RTN","SROATCM",33,0)
 K DA,DIC,DIQ,DR,SRY S X=$P(VAPA(5),"^") I X S DIC=5,DA=X,DR=1,DIQ="SRY",DIQ(0)="E" D EN^DIQ1 S X=SRY(5,$P(VAPA(5),"^"),1,"E")
"RTN","SROATCM",34,0)
 S SHEMP=SHEMP_$J(X,5),^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SRACNT=SRACNT+1,SHEMP=$E(SHEMP,1,11)_" 20"_$J(VAPA(8),20)_$J($TR(SRREF,","," "),30)_$J(SRREFP,6)
"RTN","SROATCM",35,0)
 K DA,DIC,DIQ,DR,SRY S DIC="^DPT(",DIQ="SRY",DIQ(0)="I",DA=DFN,DR=27.02 D EN^DIQ1 S X=$G(SRY(2,DFN,27.02,"I")) I X S SRPREF=$$GET1^DIQ(4,X,99)
"RTN","SROATCM",36,0)
 S SHEMP=SHEMP_$J(SRPREF,6)
"RTN","SROATCM",37,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SRACNT=SRACNT+1,SHEMP=$E(SHEMP,1,11)_" 21"_$J($TR(SRFOL,","," "),30)_$J(SRFOLP,6)
"RTN","SROATCM",38,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SRACNT=SRACNT+1
"RTN","SROATCM",39,0)
 S SHEMP=$E(SHEMP,1,11)_" 22"_$J($P(SRA(201),"^",21),6)_$J($P(SRA(202),"^",21),7)_$J($P(SRA(201),"^",22),6)_$J($P(SRA(202),"^",22),7)
"RTN","SROATCM",40,0)
 S SHEMP=SHEMP_$J($P(SRA(201),"^",23),6)_$J($P(SRA(202),"^",23),7)_$J($P(SRA(201),"^",24),6)_$J($P(SRA(202),"^",24),7)
"RTN","SROATCM",41,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SRACNT=SRACNT+1
"RTN","SROATCM",42,0)
 ;
"RTN","SROATCM",43,0)
 S DFN=$P(^SRF(SRTN,0),"^") D DEM^VADPT S SHEMP=$E(SHEMP,1,11)_" 23"_$J($P(SRA(201),"^",25),6)_$J($P(SRA(202),"^",25),7)_$J($P(SRA(201),"^",26),6)_$J($P(SRA(202),"^",26),7)_$J($P(VADM(3),"^"),7) K VADM
"RTN","SROATCM",44,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SRACNT=SRACNT+1
"RTN","SROATCM",45,0)
 S SHEMP=$E(SHEMP,1,11)_" 24"_$J($P(SRA(208),"^",10),2)_$J($P(SRA(206),"^",38),2)_$J($P(SRA(207),"^",24),2)_$J($P(SRA(207),"^",25),2)_$J($P(SRA(206),"^",39),2)
"RTN","SROATCM",46,0)
 N SR22,SR23 S SR22=$P(SRA(208),"^",22),SR23=$P(SRA(208),"^",23)
"RTN","SROATCM",47,0)
 D NMCS S SHEMP=SHEMP_$J(SRIP,2)_$J(" ",2)_$S(SR22:$J(SR22,12,4),1:$J(SR22,12))_$S(SR23:$J(SR23,12,4),1:$J(SR23,12))_$J($P(SRA(206),"^",41),2)
"RTN","SROATCM",48,0)
 S SHEMP=SHEMP_$J($P(SRA(207),"^",26),3)
"RTN","SROATCM",49,0)
 ;
"RTN","SROATCM",50,0)
 N VAINDT,SRPTF,SRRES,SRDISTYP
"RTN","SROATCM",51,0)
 S VAINDT=$P(SRA(208),"^",15)-.0001 D INP^VADPT S SRPTF=VAIN(10)
"RTN","SROATCM",52,0)
 S SRRES="" D RPC^DGPTFAPI(.SRRES,SRPTF)
"RTN","SROATCM",53,0)
 S SRRES(0)=$G(SRRES(0)),SRRES(1)=$G(SRRES(1)),SRRES(2)=$G(SRRES(2))
"RTN","SROATCM",54,0)
 S SRDISTYP=$P(SRRES(1),U)
"RTN","SROATCM",55,0)
 I SRDISTYP]"" S SRDISTYP=$S(SRDISTYP="REGULAR":1,SRDISTYP="NBC OR WHILE ASIH":2,SRDISTYP="EXPIRATION 6 MONTH LIMIT":3,SRDISTYP="IRREGULAR":4,SRDISTYP="TRANSFER":5,SRDISTYP="DEATH WITH AUTOPSY":6,SRDISTYP="DEATH WITHOUT AUTOPSY":7,1:"")
"RTN","SROATCM",56,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP_$J($P(SRRES(1),U,3),7),SRACNT=SRACNT+1
"RTN","SROATCM",57,0)
 S SHEMP=$E(SHEMP,1,11)_" 25"_$J(SRDISTYP,2) I $D(SRRES(2)) F I=1:1:9 S SHEMP=SHEMP_$J($P(SRRES(2),"^",I),7)
"RTN","SROATCM",58,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SRACNT=SRACNT+1
"RTN","SROATCM",59,0)
 D ^SROATCM3
"RTN","SROATCM",60,0)
 Q
"RTN","SROATCM",61,0)
NMCS S SRIP=$P(SRA(206),"^",40) I SRIP'="Y" Q
"RTN","SROATCM",62,0)
 N SROCC S SROCC=0 F  S SROCC=$O(^SRF(SRTN,10,SROCC)) Q:'SROCC  I $P(^SRF(SRTN,10,SROCC,0),"^",2)=34 S SRIP="I" Q
"RTN","SROATCM",63,0)
 I SRIP="Y" S SROCC=0 F  S SROCC=$O(^SRF(SRTN,16,SROCC)) Q:'SROCC  I $P(^SRF(SRTN,16,SROCC,0),"^",2)=34 S SRIP="P" Q
"RTN","SROATCM",64,0)
 Q
"RTN","SROATCM1")
0^55^B51278524^B51869518
"RTN","SROATCM1",1,0)
SROATCM1 ;BIR/MAM - STUFF TRANMISSION IN ^TMP ;06/08/06
"RTN","SROATCM1",2,0)
 ;;3.0; Surgery ;**38,71,79,90,88,93,95,111,125,135,134,142,153**;24 Jun 93;Build 11
"RTN","SROATCM1",3,0)
 K SRA F I=0,.2,200,201,202,205:1:208,207.1,209,202.1,200.1 S SRA(I)=$G(^SRF(SRTN,I))
"RTN","SROATCM1",4,0)
 S DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANAME=VADM(1),SEX=$P(VADM(5),"^"),Z=$P(VADM(3),"^"),SRSDATE=$P(SRA(0),"^",9),Y=$E(SRSDATE,1,7),AGE=$E(Y,1,3)-$E(Z,1,3)-($E(Y,4,7)<$E(Z,4,7))
"RTN","SROATCM1",5,0)
 S SHEMP="~"_$J(SRASITE,3)_$J(SRTN,7)_" 1 "_DT_$J(AGE,3)_$J(SEX,1)_$J(SRSDATE,12,4)_VA("PID")
"RTN","SROATCM1",6,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 2 ",SRACNT=SRACNT+1
"RTN","SROATCM1",7,0)
 S SRHD=$P(SRA(206),"^")
"RTN","SROATCM1",8,0)
 I SRHD["C" S SRH="C",SRHD=$E(SRHD,1,$L(SRHD)-1)
"RTN","SROATCM1",9,0)
 E  S SRH=" "
"RTN","SROATCM1",10,0)
 S SRWD=$P(SRA(206),"^",2)
"RTN","SROATCM1",11,0)
 I SRWD["K" S SRW="K",SRWD=$E(SRWD,1,$L(SRWD)-1)
"RTN","SROATCM1",12,0)
 E  S SRW=" "
"RTN","SROATCM1",13,0)
 S SHEMP=SHEMP_$J(SRHD,3)_SRH_$J(SRWD,3)_SRW_$J($P(SRA(200),"^",2),2)_$J($P(SRA(200),"^",11),2)_$J($P(SRA(206),"^",5),3)_$J($P(SRA(206),"^",6),2)_$J($P(SRA(206),"^",7),2)
"RTN","SROATCM1",14,0)
 S SRCT=$P($G(^SRF(SRTN,201)),"^",4) S:SRCT["NS" SRCT=""
"RTN","SROATCM1",15,0)
 S SHEMP=SHEMP_$J($P(SRA(200.1),"^",5),2)_$J(SRCT,4)_$J($P(SRA(206),"^",10),2)_$J($P(SRA(206),"^",11),2)_$J($P(SRA(200),"^",8),2)_$J(" ",2)_$J($P(SRA(206),"^",14),2)_$J(" ",2)
"RTN","SROATCM1",16,0)
 S SHEMP=SHEMP_$J($P(SRA(206),"^",16),2)_$J($P(SRA(206),"^",17),2)_$J($P(SRA(206),"^",18),3)_$J($P(SRA(206),"^",19),3)_$J($P(SRA(206),"^",20),2)_$J($P(SRA(206),"^",21),2)_$J($P(SRA(206),"^",22),2)_$J($P(SRA(206),"^",23),2)
"RTN","SROATCM1",17,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 3 ",SRACNT=SRACNT+1
"RTN","SROATCM1",18,0)
 S SHEMP=SHEMP_$J($P(SRA(206),"^",24),2)_$J($P(SRA(206),"^",25),3)_$J($P(SRA(206),"^",26),3)_$J($P(SRA(206),"^",27),3)
"RTN","SROATCM1",19,0)
 ; Left Main (node 3 pos 26-28), LAD (node 3 pos 29-31), Right Coronary (node 3 pos 32-34) & Circumflex Stenosis (node 3 pos 35-37)
"RTN","SROATCM1",20,0)
 S SHEMP=SHEMP_$J($P(SRA(206),"^",28),3)_$J($P($G(SRA(206)),"^",33),3)_$J($P($G(SRA(206)),"^",34),3)_$J($P($G(SRA(206)),"^",35),3)
"RTN","SROATCM1",21,0)
 ; LV Cont Grade (node 3 pos 39-40) & Mitral Regurgitation(node 3 pos 41-42)
"RTN","SROATCM1",22,0)
 N SROLV S SROLV=$P(SRA(206),"^",30)
"RTN","SROATCM1",23,0)
 S SHEMP=SHEMP_$J($S(SROLV="IIIa":"3A",SROLV="IIIb":"3B",1:SROLV),3)_$J($P($G(SRA(206)),"^",9),2)
"RTN","SROATCM1",24,0)
 ; Estimate of Mortality and ASA Class are changed to not transmit "NS"
"RTN","SROATCM1",25,0)
 S SREMDATE=$P($G(SRA(206)),"^",32)
"RTN","SROATCM1",26,0)
 S SREMO=$P($G(^SRF(SRTN,206)),"^",31) S:SREMO["NS" SREMDATE=""
"RTN","SROATCM1",27,0)
 ; Estimate of Mortality (node 3 pos 43-45) & date (node 3 pos 46-57)
"RTN","SROATCM1",28,0)
 S SHEMP=SHEMP_$J(SREMO,3)
"RTN","SROATCM1",29,0)
 S SHEMP=SHEMP_$S(SREMDATE="":$J(SREMDATE,12),1:$J(SREMDATE,12,4))
"RTN","SROATCM1",30,0)
 S X="",Y=$P($G(^SRF(SRTN,1.1)),"^",3) S:Y X=$P($P($G(^SRO(132.8,Y,0)),"^"),"-") S X=$E(X) S:X["N" X=""
"RTN","SROATCM1",31,0)
 S SHEMP=SHEMP_$J(X,1)
"RTN","SROATCM1",32,0)
 ; Cardiac Est. of Surg. Priority(node 3 pos 59) & date(node 3 pos 60-71)
"RTN","SROATCM1",33,0)
 S SHEMP=SHEMP_$J($P($G(SRA(208)),"^",12),1)
"RTN","SROATCM1",34,0)
 N SREMSPDT S SREMSPDT=$P($G(SRA(208)),"^",13)
"RTN","SROATCM1",35,0)
 S SHEMP=SHEMP_$S(SREMSPDT="":$J(SREMSPDT,12),1:$J(SREMSPDT,12,4))
"RTN","SROATCM1",36,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 4 ",SRACNT=SRACNT+1
"RTN","SROATCM1",37,0)
 S SHEMP=SHEMP_$J($P(SRA(207),"^"),2)_$J($P(SRA(207),"^",2),2)_$J($P(SRA(207),"^",3),2)_$J($P(SRA(207),"^",4),2)_$J($P(SRA(207),"^",5),2)_$J(" ",2)_$J($P(SRA(207),"^",7),2)
"RTN","SROATCM1",38,0)
 S SHEMP=SHEMP_$J($P(SRA(207),"^",8),2)_$J($P(SRA(207),"^",9),2)_$J($P(SRA(207),"^",10),2)_$J($P(SRA(207),"^",12),2)_$J($P(SRA(207),"^",13),2)_$J($P(SRA(207),"^",14),2)_$J($P(SRA(207),"^",15),2)
"RTN","SROATCM1",39,0)
 S SHEMP=SHEMP_$J($P(SRA(207),"^",16),2)_$J($P(SRA(207),"^",17),2)_$J($P(SRA(207),"^",18),2)_"  "
"RTN","SROATCM1",40,0)
 S SRDEATH=$P($G(SRA(208)),"^"),SRDDATE=$E($P($G(^DPT(DFN,.35)),"^"),1,12) I SRDDATE'="" S SRDDATE=$$LJ^XLFSTR(SRDDATE,12,0)
"RTN","SROATCM1",41,0)
 S SHEMP=SHEMP_$J(SRDEATH,2)_$J(SRDDATE,12)
"RTN","SROATCM1",42,0)
 S SHEMP=SHEMP_$P(SRA(207),"^",20)
"RTN","SROATCM1",43,0)
 ; transmit no data in node 5
"RTN","SROATCM1",44,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 5 ",SRACNT=SRACNT+1
"RTN","SROATCM1",45,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 6 ",SRACNT=SRACNT+1
"RTN","SROATCM1",46,0)
 S SHEMP=SHEMP_$J($P(SRA(208),"^",2),2)_$J($P(SRA(208),"^",3),2)_$J($P(SRA(205),"^",17),2)_$J($P(SRA(208),"^",4),2)_$J($P(SRA(208),"^",5),2)_$J($P(SRA(205),"^",28),2)_$J($P(SRA(208),"^",6),2)
"RTN","SROATCM1",47,0)
 N SRRCS D RCSP S SHEMP=SHEMP_$J($P(SRA(205),"^",13),2)_$J(SRRCS,2)_$J($P(SRA(205),"^",22),2)_$J($P(SRA(205),"^",21),2)
"RTN","SROATCM1",48,0)
 N SRIP D CPR S SHEMP=SHEMP_$J(SRIP,2)
"RTN","SROATCM1",49,0)
 ;
"RTN","SROATCM1",50,0)
 ;Ethnicity contained in VADM(11)
"RTN","SROATCM1",51,0)
 N SROETCD,SROPTF S SROETCD="",SROPTF=""
"RTN","SROATCM1",52,0)
 S SROETCD=$P($G(VADM(11,1)),U,1)            ;Ethnicity code
"RTN","SROATCM1",53,0)
 S SROPTF=$$PTR2CODE^DGUTL4(SROETCD,2,4)     ;PTF Ethnicity code
"RTN","SROATCM1",54,0)
 S SHEMP=SHEMP_$J($G(SROPTF),1)   ;Ethnicity
"RTN","SROATCM1",55,0)
 ;
"RTN","SROATCM1",56,0)
 ;Multiple races contained in VADM(12)
"RTN","SROATCM1",57,0)
 N SRORAC,SRORCD,SRORCE S SRORCE=0,SRORAC="",SRORACE="",SRORCD=""
"RTN","SROATCM1",58,0)
 F  S SRORCE=$O(VADM(12,SRORCE)) Q:SRORCE=""  D
"RTN","SROATCM1",59,0)
 .S SRORAC=$P($G(VADM(12,SRORCE)),U,1)        ;Race code
"RTN","SROATCM1",60,0)
 .S SRORCD=$$PTR2CODE^DGUTL4(SRORAC,1,4)     ;PTF race code
"RTN","SROATCM1",61,0)
 .S SRORACE=SRORACE_$J(SRORCD,1)
"RTN","SROATCM1",62,0)
 ;
"RTN","SROATCM1",63,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP_SRORACE  ;Eth, race added
"RTN","SROATCM1",64,0)
 ;
"RTN","SROATCM1",65,0)
 S SHEMP=$E(SHEMP,1,11)_" 7 ",SRACNT=SRACNT+1
"RTN","SROATCM1",66,0)
 S SHEMP=SHEMP_$TR(SRANAME,","," ")
"RTN","SROATCM1",67,0)
 I $P($G(^SRF(SRTN,"RA")),"^",3)=1 S SHEMP=SHEMP_$J("***RE-TRANSMISSION",38)
"RTN","SROATCM1",68,0)
 ; zip code, employ status, hemoglobin, hemo date, serum albumin, albumin date, creatitine date, total ischemic time, min invasive, total cpb time, total pre,post ICU & step down unit LOS,
"RTN","SROATCM1",69,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 8 ",SRACNT=SRACNT+1
"RTN","SROATCM1",70,0)
 K VADM D ADD^VADPT S X=$S($P(VAPA(11),"^",2)'="":$P(VAPA(11),"^",2),1:VAPA(6))
"RTN","SROATCM1",71,0)
 S SHEMP=SHEMP_$J(X,10)_$J($P(SRA(208),"^",18),1)_$J($P(SRA(201),"^",20),7)_$J($P(SRA(202),"^",20),7)_$J($P(SRA(201),"^",8),4)_$J($P(SRA(202),"^",8),7)_$J($P(SRA(202),"^",4),7)_$J($P(SRA(206),"^",36),4)
"RTN","SROATCM1",72,0)
 S SHEMP=SHEMP_$J($P(SRA(207),"^",22),1)_$J($P(SRA(206),"^",37),4)_$J($P(SRA(207),"^",23),2)
"RTN","SROATCM1",73,0)
 ; cpt codes
"RTN","SROATCM1",74,0)
NODE9 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 9 ",SRACNT=SRACNT+1
"RTN","SROATCM1",75,0)
 S SRPMOD="",SR10SP="          ",CPT=$P($G(^SRO(136,SRTN,0)),"^",2) D
"RTN","SROATCM1",76,0)
 .I CPT S CPT=$P($$CPT^ICPTCOD(CPT),"^",2),SRCASE=SRTN D MOD^SROATM3 S SRPMOD=SRM
"RTN","SROATCM1",77,0)
 .S SHEMP=SHEMP_$J(CPT,5),SRPMOD=SRPMOD_SR10SP
"RTN","SROATCM1",78,0)
 K CPT F I=1:1:10 S (CPT(I),SRMOD(I))=""
"RTN","SROATCM1",79,0)
 S (OPS,CNT)=0 F  S OPS=$O(^SRO(136,SRTN,3,OPS)) Q:'OPS!(CNT=10)  S CNT=CNT+1,X=$P($G(^SRO(136,SRTN,3,OPS,0)),"^") I X S CPT(CNT)=$P($$CPT^ICPTCOD(X),"^",2) D OTH^SROATM3
"RTN","SROATCM1",80,0)
 S SHEMP=SHEMP_$J(CPT(1),5)_$J(CPT(2),5)_$J(CPT(3),5)_$J(CPT(4),5)_$J(CPT(5),5)_$J(CPT(6),5)_$J(CPT(7),5)_$J(CPT(8),5)_$J(CPT(9),5)_$J(CPT(10),5)
"RTN","SROATCM1",81,0)
 ; card cath date, admission date/time, hospital discharge date/time, anesthesia start & end date/times
"RTN","SROATCM1",82,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 10",SRACNT=SRACNT+1
"RTN","SROATCM1",83,0)
 I $P(SRA(207),"^",21)'="" D
"RTN","SROATCM1",84,0)
 .I $E($P(SRA(207),"^",21),8)="." Q
"RTN","SROATCM1",85,0)
 .E  S $P(SRA(207),"^",21)=$P(SRA(207),"^",21)_"."
"RTN","SROATCM1",86,0)
 S $P(SRA(207),"^",21)=$$LJ^XLFSTR($P(SRA(207),"^",21),12,0)
"RTN","SROATCM1",87,0)
 S SHEMP=SHEMP_$J($E($P(SRA(207),"^",21),1,12),12)
"RTN","SROATCM1",88,0)
 S (SRDATE,SRI)="" F SRI=14,15 S SRDATE=$E($P($G(SRA(208)),"^",SRI),1,12) S SRDATE=$$LJ^XLFSTR(SRDATE,12,0) S SHEMP=SHEMP_SRDATE
"RTN","SROATCM1",89,0)
 S (SRDATE,SRI)="" F SRI=1,4 S SRDATE=$P(SRA(.2),"^",SRI) S SRDATE=$$LJ^XLFSTR(SRDATE,12,0) S SHEMP=SHEMP_SRDATE
"RTN","SROATCM1",90,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 11",SRACNT=SRACNT+1
"RTN","SROATCM1",91,0)
 S (SRDATE,SRI)="" F SRI=10,12,2,3 S SRDATE=$P(SRA(.2),"^",SRI),SRDATE=$$LJ^XLFSTR(SRDATE,12,0) S SHEMP=SHEMP_SRDATE
"RTN","SROATCM1",92,0)
 ; preop risk factors comments
"RTN","SROATCM1",93,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 12",SRACNT=SRACNT+1 S SHEMP=SHEMP_$TR($E($G(^SRF(SRTN,206.1)),1,65),",","^")
"RTN","SROATCM1",94,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 13",SRACNT=SRACNT+1 S SHEMP=SHEMP_$TR($E($G(^SRF(SRTN,206.1)),66,130),",","^")
"RTN","SROATCM1",95,0)
 ; resource data comments
"RTN","SROATCM1",96,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 14",SRACNT=SRACNT+1 S SHEMP=SHEMP_$TR($E($G(^SRF(SRTN,206.2)),1,65),",","^")
"RTN","SROATCM1",97,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 15",SRACNT=SRACNT+1 S SHEMP=SHEMP_$TR($E($G(^SRF(SRTN,206.2)),66,130),",","^")
"RTN","SROATCM1",98,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SRACNT=SRACNT+1,SHEMP=$E(SHEMP,1,11)_" 16"_$E(SRPMOD,1,10) F I=1:1:5 S SHEMP=SHEMP_$E(SRMOD(I)_SR10SP,1,10)
"RTN","SROATCM1",99,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SRACNT=SRACNT+1,SHEMP=$E(SHEMP,1,11)_" 17" F I=6:1:10 S SHEMP=SHEMP_$E(SRMOD(I)_SR10SP,1,10)
"RTN","SROATCM1",100,0)
 S X=$$SITE^SROUTL0(SRTN),SRDIV=$S(X:$P(^SRO(133,X,0),"^"),1:""),SRDIV=$S(SRDIV:$$GET1^DIQ(4,SRDIV,99),1:SRASITE),SHEMP=SHEMP_$J(SRDIV,6)
"RTN","SROATCM1",101,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SRACNT=SRACNT+1
"RTN","SROATCM1",102,0)
 Q
"RTN","SROATCM1",103,0)
RCSP S SRRCS=0,X=$P(SRA(208),"^",7) I X="N" Q
"RTN","SROATCM1",104,0)
 N SROCC S SROCC=0 F  S SROCC=$O(^SRF(SRTN,16,SROCC)) Q:'SROCC  I $P(^SRF(SRTN,16,SROCC,0),"^",2)=27 S X=$P(^SRF(SRTN,16,SROCC,0),"^",5) S:X'="" SRRCS=X Q
"RTN","SROATCM1",105,0)
 Q
"RTN","SROATCM1",106,0)
CPR S SRIP=$P(SRA(205),"^",26) I SRIP'="Y" Q
"RTN","SROATCM1",107,0)
 N SROCC S SROCC=0 F  S SROCC=$O(^SRF(SRTN,10,SROCC)) Q:'SROCC  I $P(^SRF(SRTN,10,SROCC,0),"^",2)=16 S SRIP="I" Q
"RTN","SROATCM1",108,0)
 I SRIP="Y" S SROCC=0 F  S SROCC=$O(^SRF(SRTN,16,SROCC)) Q:'SROCC  I $P(^SRF(SRTN,16,SROCC,0),"^",2)=16 S SRIP="P" Q
"RTN","SROATCM1",109,0)
 Q
"RTN","SROATCM2")
0^76^B8920384^B9160554
"RTN","SROATCM2",1,0)
SROATCM2 ;BIR/MAM - CREATE MESSAGES ;03/22/06
"RTN","SROATCM2",2,0)
 ;;3.0; Surgery ;**27,38,90,93,125,153**;24 Jun 93;Build 11
"RTN","SROATCM2",3,0)
 S SHEMP=3,SRAMNUM=0 F I=0:0 S SRAMNUM=$O(^TMP("SRA",$J,SRAMNUM)) Q:'SRAMNUM  D MSG
"RTN","SROATCM2",4,0)
STATUS ; update status
"RTN","SROATCM2",5,0)
 S (SRAMNUM,SRASS)=0
"RTN","SROATCM2",6,0)
 F I=0:0 S SRAMNUM=$O(^TMP("SRA",$J,SRAMNUM)) Q:'SRAMNUM  S SRACNT=0 F I=0:0 S SRACNT=$O(^TMP("SRA",$J,SRAMNUM,SRACNT)) Q:'SRACNT  S CURLEY=$E(^TMP("SRA",$J,SRAMNUM,SRACNT,0),13,14) I +CURLEY=1 D UPDATE
"RTN","SROATCM2",7,0)
 I 'SRASS G END
"RTN","SROATCM2",8,0)
 S X=$$ACTIVE^XUSER(DUZ) I '+X S XMDUZ=.5
"RTN","SROATCM2",9,0)
 S XMSUB="CARDIAC ASSESSMENT TRANSMISSION COMPLETE"
"RTN","SROATCM2",10,0)
 S XMY("G.RISK ASSESSMENT@"_^XMB("NETNAME"))=""
"RTN","SROATCM2",11,0)
 D NOW^%DTC S Y=% D D^DIQ S SRATIME=$E($P(Y,"@",2),1,5)
"RTN","SROATCM2",12,0)
 S ^TMP("SRAMSG",$J,1,0)="The Cardiac Surgery Risk Assessment Transmission was completed at "_SRATIME_".",^TMP("SRAMSG",$J,2,0)="A total of "_SRASS_$S(SRASS=1:" assessment was sent.",1:" assessments were sent.")
"RTN","SROATCM2",13,0)
 S ^TMP("SRAMSG",$J,3,0)="  "
"RTN","SROATCM2",14,0)
 S XMTEXT="^TMP(""SRAMSG"",$J," N I D ^XMD
"RTN","SROATCM2",15,0)
END K ^TMP("SRA",$J),^TMP("SRAMSG",$J) D ^SRSKILL
"RTN","SROATCM2",16,0)
 Q
"RTN","SROATCM2",17,0)
MSG ; send message to G.CARDIAC RISK ASSESSMENTS at Denver
"RTN","SROATCM2",18,0)
 S ISC=0,NAME=$G(^XMB("NETNAME")) I NAME["FORUM"!(NAME["ISC-")!($E(NAME,1,3)="ISC")!(NAME["ISC.")!(NAME["TST")!(NAME["FO-") S ISC=1
"RTN","SROATCM2",19,0)
 I ISC S XMY("G.RISK ASSESSMENT@"_^XMB("NETNAME"))=""
"RTN","SROATCM2",20,0)
 I 'ISC S (XMY("G.CARDIAC RISK ASSESSMENTS@DENVER.VA.GOV"),XMY("G.SRCARDIAC@ISC-CHICAGO.VA.GOV"))=""
"RTN","SROATCM2",21,0)
 S SRATDATE=$E(DT,4,5)_"/"_$E(DT,6,7)_"/"_$E(DT,2,3)
"RTN","SROATCM2",22,0)
 S X=$$ACTIVE^XUSER(DUZ) I '+X S XMDUZ=.5
"RTN","SROATCM2",23,0)
 S XMSUB=$P($$SITE^SROVAR,"^",2)_": CICSP ("_SRAMNUM_" OF "_SRATOTM_")  "_SRATDATE,XMTEXT="^TMP(""SRA"",$J,"_SRAMNUM_"," N I D ^XMD
"RTN","SROATCM2",24,0)
 Q
"RTN","SROATCM2",25,0)
UPDATE ; change status to 'T'
"RTN","SROATCM2",26,0)
 S MM=$E(^TMP("SRA",$J,SRAMNUM,SRACNT,0),5,11) F X=1:1 S EMILY=$P(MM," ",X) Q:EMILY
"RTN","SROATCM2",27,0)
 N I D NOW^%DTC S SRNOW=$E(%,1,7)
"RTN","SROATCM2",28,0)
 K DR S DA=EMILY,DR="260////"_SRNOW_";235///T",DIE=130 N I D ^DIE
"RTN","SROATCM2",29,0)
 S SRASS=SRASS+1
"RTN","SROATCM2",30,0)
 S DFN=$P(^SRF(EMILY,0),"^") D DEM^VADPT S SRANAME=$P(VADM(1),"^") K VADM S X=$P(^SRF(EMILY,0),"^",9),SRADT=$E(X,4,5)_"/"_$E(X,6,7)_"/"_$E(X,2,3)
"RTN","SROATCM2",31,0)
 S SHEMP=SHEMP+1,^TMP("SRAMSG",$J,SHEMP,0)="ASSESSMENT: "_EMILY_"   "_$J(SRANAME,20)_"        OPERATION DATE: "_SRADT
"RTN","SROATCM2",32,0)
 Q
"RTN","SROATCM3")
0^72^B12262748^B11697552
"RTN","SROATCM3",1,0)
SROATCM3 ;BIR/SJA - STUFF TRANMISSION IN ^TMP ;04/10/06
"RTN","SROATCM3",2,0)
 ;;3.0; Surgery ;**125,135,153**;24 Jun 93;Build 11
"RTN","SROATCM3",3,0)
 N SRDISP,NYUK S SRDISP="",NYUK=$P(SRRES(1),U,2),SRA(209.1)=$G(^SRF(SRTN,209.1)),SRA(207.1)=$G(^SRF(SRTN,207.1))
"RTN","SROATCM3",4,0)
 I NYUK'="" D
"RTN","SROATCM3",5,0)
 .S SRDISP=$S(NYUK="BOARDING HOUSE":16,NYUK="COMMUNITY HOSPITAL":6,NYUK="COMMUNITY NURSING HOME":8,NYUK="FOSTER HOME":14,NYUK="HALFWAY HOUSE":15,NYUK="HOME-BASED PRIMARY CARE (HBPC)":20,1:NYUK)
"RTN","SROATCM3",6,0)
 .Q:SRDISP'=NYUK  S SRDISP=$S(NYUK="HOSPICE CARE":22,NYUK="MILITARY HOSPITAL":3,NYUK="NURSE CARE CONTD ANOTHER COMM ":10,NYUK="NURSING CARE CONT AT SAME NURS":9,NYUK="OTHER FEDERAL HOSPITAL":4,1:NYUK)
"RTN","SROATCM3",7,0)
 .Q:SRDISP'=NYUK  S SRDISP=$S(NYUK="OTHER GOVERNMENT HOSPITAL":5,NYUK="OTHER PLACEMENT/UNKNOWN (NOT S":19,NYUK="PENAL INSTITUTION":17,NYUK="REFER MEDICARE HOME HEALTH CAR":25,NYUK="REFER OTHER AGENCY-PD HOME HEA":26,1:NYUK)
"RTN","SROATCM3",8,0)
 .Q:SRDISP'=NYUK  S SRDISP=$S(NYUK="REFER VA-PD HOME/COMMUNITY HEA":24,NYUK="RESIDENTIAL HOTEL/RESIDENT (IE":18,NYUK="RESPITE CARE":23,NYUK="RETURN TO COMMUNITY-INDEPENDEN":1,NYUK="SPINAL CORD INJURY-VACO APPROV":21,1:NYUK)
"RTN","SROATCM3",9,0)
 .Q:SRDISP'=NYUK  S SRDISP=$S(NYUK="STATE HOME":11,NYUK="STATE HOME":13,NYUK="VA DOMICILLARY":12,NYUK="VA MEDICAL CENTER":2,NYUK="VA NURSING HOME CARE UNIT (NHC":7,1:"")
"RTN","SROATCM3",10,0)
 ;
"RTN","SROATCM3",11,0)
LN26 S SHEMP=$E(SHEMP,1,11)_" 26"_$J(SRDISP,2)_$J($P(SRA(206),"^",13),2)_$J($P(SRA(206),"^",15),2)_$J($P(SRA(207),"^",6),2)_$J($P(SRA(207),"^",27),2)_$J($P(SRA(209),"^"),2)_$J($P(SRA(209),"^",2),2)
"RTN","SROATCM3",12,0)
 S SHEMP=SHEMP_$J($P(SRA(209),"^",3),2)_$J($P(SRA(209),"^",4),2)_$J($P(SRA(209),"^",5),2)_$J($P(SRA(209),"^",6),3)_$J($P(SRA(209),"^",7),3)_$J($P(SRA(209),"^",8),3)_$J($P(SRA(209),"^",9),2)_$J($P(SRA(209),"^",10),2)
"RTN","SROATCM3",13,0)
 S X=$P(SRA(206),"^",42),Y="" F I=1:1:5 S Y=Y_$P(X,",",I)
"RTN","SROATCM3",14,0)
 S SHEMP=SHEMP_$J($P(SRA(209),"^",11),2)_$J(Y,5)
"RTN","SROATCM3",15,0)
 S X=$P(SRA(209),"^",12) S:X="" X="N" S SHEMP=SHEMP_$J(X,2)
"RTN","SROATCM3",16,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SRACNT=SRACNT+1
"RTN","SROATCM3",17,0)
LN27 ;Line #27 - Other Cardiac Procedures
"RTN","SROATCM3",18,0)
 S SHEMP=$E(SHEMP,1,11)_" 27"_$TR($E($G(SRA(209.1)),1,65),",","^")
"RTN","SROATCM3",19,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SRACNT=SRACNT+1
"RTN","SROATCM3",20,0)
LN28 ;Lines 28 - New fields added in 2006 update
"RTN","SROATCM3",21,0)
 S SHEMP=$E(SHEMP,1,11)_" 28"_$J($P(SRA(209),"^",13),2)_$J($P(SRA(209),"^",14),2)_$J($P(SRA(207.1),"^",2),2)_$J($P(SRA(201),"^",28),6)_$J($P(SRA(202.1),"^"),7)
"RTN","SROATCM3",22,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SRACNT=SRACNT+1
"RTN","SROATCM3",23,0)
 Q
"RTN","SROATM1")
0^31^B23786520^B23076488
"RTN","SROATM1",1,0)
SROATM1 ;BIR/MAM - NON CARDIAC TRANSMISSION ;03/30/06
"RTN","SROATM1",2,0)
 ;;3.0; Surgery ;**27,38,47,60,62,81,88,93,95,125,153**;24 Jun 93;Build 11
"RTN","SROATM1",3,0)
 ;** NOTICE: This routine is part of an implementation of a nationally
"RTN","SROATM1",4,0)
 ;**         controlled procedure. Local modifications to this routine
"RTN","SROATM1",5,0)
 ;**         are prohibited.
"RTN","SROATM1",6,0)
 ;
"RTN","SROATM1",7,0)
 ; Reference to ^DIC(45.3 supported by DBIA #218
"RTN","SROATM1",8,0)
 ;
"RTN","SROATM1",9,0)
 N SRINTUB F I=0,200,200.1,206 S SRA(I)=$G(^SRF(SRTN,I))
"RTN","SROATM1",10,0)
 S DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANAME=VADM(1),SEX=$P(VADM(5),"^"),Z=$P(VADM(3),"^"),SRSDATE=$E($P(SRA(0),"^",9),1,12),Y=$E(SRSDATE,1,7),AGE=$E(Y,1,3)-$E(Z,1,3)-($E(Y,4,7)<$E(Z,4,7))
"RTN","SROATM1",11,0)
 S X=$$SITE^SROUTL0(SRTN),SRDIV=$S(X:$P(^SRO(133,X,0),"^"),1:""),SRDIV=$S(SRDIV:$$GET1^DIQ(4,SRDIV,99),1:SRASITE)
"RTN","SROATM1",12,0)
 S SHEMP="!"_$J(SRASITE,3)_$J(SRTN,7)_"  1"_DT_$J(AGE,3)_$J(SEX,1)_$J(SRSDATE,12)_$J(VA("PID"),20)_$J(SRDIV,6)
"RTN","SROATM1",13,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_"  2",SRACNT=SRACNT+1
"RTN","SROATM1",14,0)
 S NYUK=$P(SRA(200),"^",2) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",3) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",4) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200.1),"^",2) D ONE S SHEMP=SHEMP_MOE
"RTN","SROATM1",15,0)
 S NYUK=$P(SRA(200),"^",6) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",7) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",8) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",10) D ONE S SHEMP=SHEMP_MOE
"RTN","SROATM1",16,0)
 S NYUK=$P(SRA(200),"^",11) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",12) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",14) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",15) D ONE S SHEMP=SHEMP_MOE
"RTN","SROATM1",17,0)
 S NYUK=$P(SRA(200),"^",16) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",17) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",31) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",32) D ONE S SHEMP=SHEMP_MOE
"RTN","SROATM1",18,0)
 S NYUK=$P(SRA(200),"^",33) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",34) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",35) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",36) D ONE S SHEMP=SHEMP_MOE
"RTN","SROATM1",19,0)
 S NYUK=$P(SRA(200),"^",38) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",39) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",41) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",42) D ONE S SHEMP=SHEMP_MOE
"RTN","SROATM1",20,0)
 S NYUK=$P(SRA(200),"^",43) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",19) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",20) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",21) D ONE S SHEMP=SHEMP_MOE
"RTN","SROATM1",21,0)
 S NYUK=$P(SRA(200),"^",22) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",23) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",24) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",25) D ONE S SHEMP=SHEMP_MOE
"RTN","SROATM1",22,0)
 S NYUK=$P(SRA(200),"^",26) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",27) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",28) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",29) D ONE S SHEMP=SHEMP_MOE
"RTN","SROATM1",23,0)
 S NYUK=$P(SRA(200),"^",45) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",46) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",47) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",48) D ONE S SHEMP=SHEMP_MOE
"RTN","SROATM1",24,0)
 S NYUK=$P(SRA(200),"^",49) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",50) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200.1),"^",3),SHEMP=SHEMP_$J(NYUK,2)
"RTN","SROATM1",25,0)
 S NYUK=$P(SRA(0),"^",4) S:NYUK NYUK=$E($P(^DIC(45.3,$P(^SRO(137.45,NYUK,0),"^",2),0),"^"),1,3) S SHEMP=SHEMP_$J(NYUK,3)
"RTN","SROATM1",26,0)
 S NYUK=$P(SRA(200),"^",52),SHEMP=SHEMP_$J(NYUK,2),X=$P(SRA(0),"^",10),NYUK=$S(X="EM":"Y",1:"N") D ONE S SHEMP=SHEMP_MOE
"RTN","SROATM1",27,0)
 S NYUK=$P($G(^SRF(SRTN,"1.0")),"^",8),SHEMP=SHEMP_$J(NYUK,2),NYUK=$P(SRA(200),"^",53) D ONE S SHEMP=SHEMP_MOE
"RTN","SROATM1",28,0)
 S SRASA="",Y=$P($G(^SRF(SRTN,1.1)),"^",3) S:Y X=$P($P($G(^SRO(132.8,Y,0)),"^"),"-"),SRASA=X S NYUK=$E(SRASA,1,1) D ONE S SHEMP=SHEMP_MOE
"RTN","SROATM1",29,0)
 K SRTECH,SRZ,SRTRAUMA S SRT=0 F  S SRT=$O(^SRF(SRTN,6,SRT)) Q:'SRT  D ^SROPRIN Q:$D(SRZ)
"RTN","SROATM1",30,0)
 I $D(SRTECH) S SRTRAUMA=$P(^SRF(SRTN,6,SRT,0),"^",14),SRINTUB=$P($G(^SRF(SRTN,6,SRT,8)),"^",2)
"RTN","SROATM1",31,0)
 I '$D(SRTECH) S (SRTECH,SRTRAUMA,SRINTUB)=""
"RTN","SROATM1",32,0)
 S SHEMP=SHEMP_$J(SRTECH,1)_$J($E(SRASA,2),1)_$J(SRINTUB,1)
"RTN","SROATM1",33,0)
 S NYUK=$P($G(^SRF(SRTN,.3)),"^",11),SHEMP=SHEMP_$J(NYUK,1),NYUK=$P(SRA(206),"^"),SHEMP=SHEMP_$J(NYUK,4),NYUK=$P(SRA(206),"^",2),SHEMP=SHEMP_$J(NYUK,4)
"RTN","SROATM1",34,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_"  3",SRACNT=SRACNT+1
"RTN","SROATM1",35,0)
 D ^SROATM2
"RTN","SROATM1",36,0)
 Q
"RTN","SROATM1",37,0)
ONE S MOE=$S(NYUK="NS":"S",NYUK="":" ",1:NYUK)
"RTN","SROATM1",38,0)
 Q
"RTN","SROATM2")
0^32^B33905156^B33399568
"RTN","SROATM2",1,0)
SROATM2 ;BIR/MAM - NON CARDIAC TRANSMISSION (CONT) ;03/21/06
"RTN","SROATM2",2,0)
 ;;3.0; Surgery ;**38,39,45,47,57,60,62,68,81,88,97,129,125,142,153**;24 Jun 93;Build 11
"RTN","SROATM2",3,0)
 ;** NOTICE: This routine is part of an implementation of a nationally
"RTN","SROATM2",4,0)
 ;**         controlled procedure. Local modifications to this routine
"RTN","SROATM2",5,0)
 ;**         are prohibited.
"RTN","SROATM2",6,0)
 ;
"RTN","SROATM2",7,0)
 K SRA F I=.2,.3,1.1,200.1,201:1:208,208.1 S SRA(I)=$G(^SRF(SRTN,I))
"RTN","SROATM2",8,0)
 S SRA("CON")=$P($G(^SRF(SRTN,"CON")),"^") I SRA("CON"),$P($G(^SRF(SRA("CON"),30)),"^")!($P($G(^SRF(SRA("CON"),31)),"^",8)) S SRA("CON")=""
"RTN","SROATM2",9,0)
 D RS
"RTN","SROATM2",10,0)
 S SHEMP=SHEMP_$J($E($P(SRA(.2),"^",2),1,12),12)_$J($E($P(SRA(.2),"^",3),1,12),12)_$J(SRATT,2)_$J($P(SRA(200.1),"^",4),2)_$J($P($G(^SRF(SRTN,200)),"^",54),2)
"RTN","SROATM2",11,0)
 S SRICD=$P($G(^SRO(136,SRTN,0)),"^",3) S:SRICD SRICD=$P(^ICD9(SRICD,0),"^") S SHEMP=SHEMP_$J(SRICD,6)_$J($P(SRA(205),"^"),4)_$J($E($P(SRA(205),"^",2)),1)
"RTN","SROATM2",12,0)
 S NYUK=$P($G(^DPT(DFN,.35)),"^"),NYUK=$E(NYUK,1,7),SHEMP=SHEMP_$J(NYUK,7)
"RTN","SROATM2",13,0)
 S NYUK="N",SRET=0 F  S SRET=$O(^SRF(SRTN,29,SRET)) Q:'SRET  S CASE=$P(^SRF(SRTN,29,SRET,0),"^") I $P($G(^SRF(CASE,.2)),"^",10) S NYUK="Y" Q
"RTN","SROATM2",14,0)
 S SHEMP=SHEMP_NYUK_$J($P($G(^SRF(SRTN,.4)),"^",7),1)_$J($E($P($G(^SRF(SRTN,0)),"^",12)),1)_$J($P($G(^SRF(SRTN,0)),"^",3),1)
"RTN","SROATM2",15,0)
 S (SRADMIT,SRADMT)=0 I $P($G(^SRF(SRTN,0)),"^",12)="O" D ADM^SROQ0A S SRADMIT=$S(SRADMT=0:"0",1:"1")
"RTN","SROATM2",16,0)
 S SHEMP=SHEMP_" "_SRADMIT D OCC^SROATMNO S SHEMP=SHEMP_SRTMP_$J(SROCTYPE,1)_$J(SROC(35),2)_$J(SROC(36),2) K SROC,SROCTYPE
"RTN","SROATM2",17,0)
 S NYUK=$E($P(VADM(3),"^"),1,7),SHEMP=SHEMP_$J(NYUK,7) ; date of birth
"RTN","SROATM2",18,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_"  4",SRACNT=SRACNT+1
"RTN","SROATM2",19,0)
 F MOE=1:1:6 S CPT(MOE)=""
"RTN","SROATM2",20,0)
 S (X,CNT)=0 F  S X=$O(^SRF(SRTN,29,X)) Q:'X!(CNT=6)  I $P(^SRF(SRTN,29,X,0),"^",3)="R" S NYUK=$P(^SRF(SRTN,29,X,0),"^") D RETURN
"RTN","SROATM2",21,0)
 S SHEMP=SHEMP_$J(CNT,2)
"RTN","SROATM2",22,0)
 S SHEMP=SHEMP_$J(CPT(1),5)_$J(CPT(2),5)_$J(CPT(3),5)_$J(CPT(4),5)_$J(CPT(5),5)_$J(CPT(6),5)
"RTN","SROATM2",23,0)
 F MOE=1:1:6 S CPT(MOE)=""
"RTN","SROATM2",24,0)
 S (X,CNT)=0 F  S X=$O(^SRF(SRTN,29,X)) Q:'X!(CNT=6)  I $P(^SRF(SRTN,29,X,0),"^",3)'="R" S NYUK=$P(^SRF(SRTN,29,X,0),"^") D RETURN
"RTN","SROATM2",25,0)
 S SHEMP=SHEMP_$J(CNT,2)
"RTN","SROATM2",26,0)
 S SHEMP=SHEMP_$J(CPT(1),5)_$J(CPT(2),5)_$J(CPT(3),5)_$J(CPT(4),5)_$J(CPT(5),5)_$J(CPT(6),5)
"RTN","SROATM2",27,0)
 S SRSDATE=$P(^SRF(SRTN,0),"^",9) K SRSEP D OCC^SROAUTL0 S:'$D(SRO) SRO="",$P(SRO," ",198)="" S SHEMP=SHEMP_$E(SRO,1,112)
"RTN","SROATM2",28,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_"  5",SRACNT=SRACNT+1
"RTN","SROATM2",29,0)
 S NYUK=$P(SRA(205),"^",6) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(205),"^",7) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(205),"^",8) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(205),"^",10) D ONE S SHEMP=SHEMP_MOE
"RTN","SROATM2",30,0)
 S NYUK="N" I $P(SRA(205),"^",11)="Y"!($P(SRA(205),"^",28)="Y") S NYUK="Y"
"RTN","SROATM2",31,0)
 D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(205),"^",12) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(205),"^",13) D ONE S SHEMP=SHEMP_MOE,NYUK=$P($G(SROOC(29)),U)
"RTN","SROATM2",32,0)
 D IFELSE
"RTN","SROATM2",33,0)
 S NYUK=$P(SRA(205),"^",16) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(205),"^",17) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(205),"^",18) D ONE S SHEMP=SHEMP_MOE,NYUK=$P($G(SROOC(31)),U)
"RTN","SROATM2",34,0)
 D IFELSE
"RTN","SROATM2",35,0)
 S NYUK="N",SRCVA=$P(SRA(205),"^",21),SRST=$P(SRA(208),"^",8) I SRCVA="Y"!(SRST="Y") S NYUK="Y"
"RTN","SROATM2",36,0)
 D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(205),"^",22) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(205),"^",23) D ONE S SHEMP=SHEMP_MOE,NYUK=$P($G(SROOC(30)),U)
"RTN","SROATM2",37,0)
 D IFELSE
"RTN","SROATM2",38,0)
 S NYUK=$P(SRA(205),"^",26) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(205),"^",27) D ONE S SHEMP=SHEMP_MOE_" " S NYUK=$P($G(SROOC(32)),U)
"RTN","SROATM2",39,0)
 D IFELSE
"RTN","SROATM2",40,0)
 S NYUK=$P(SRA(205),"^",31) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(205),"^",32) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(205),"^",33) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(205),"^",34) D ONE S SHEMP=SHEMP_MOE
"RTN","SROATM2",41,0)
 S NYUK=$P(SRA(205),"^",35) D ONE S SHEMP=SHEMP_MOE,NYUK=$P($G(SROOC(21)),U) D IFELSE
"RTN","SROATM2",42,0)
 S SHEMP=SHEMP_$E(SRO,113,196),NYUK=$P(SRA(205),"^",37) D ONE S SHEMP=SHEMP_MOE,NYUK=$P($G(SROOC(36)),U) D IFELSE
"RTN","SROATM2",43,0)
 S SHEMP=SHEMP_$E(SRO,197)
"RTN","SROATM2",44,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_"  6",SRACNT=SRACNT+1
"RTN","SROATM2",45,0)
 S SHEMP=SHEMP_$J($P(SRA(201),"^"),5)_$J($P(SRA(202),"^"),7)_$J($P(SRA(201),"^",8),4)_$J($P(SRA(202),"^",8),7)_$J($P(SRA(201),"^",9),5)_$J($P(SRA(202),"^",9),7)_$J($P(SRA(201),"^",5),5)_$J($P(SRA(202),"^",5),7)
"RTN","SROATM2",46,0)
 S SHEMP=SHEMP_$J($P(SRA(201),"^",4),4)_$J($P(SRA(202),"^",4),7)
"RTN","SROATM2",47,0)
 S SHEMP=SHEMP_$J($P(SRA(201),"^",27),5)_$J($P(SRA(202),"^",27),7)
"RTN","SROATM2",48,0)
 S SHEMP=SHEMP_$J($P(SRA(203),"^",15),5)_$J($P(SRA(204),"^",15),7)
"RTN","SROATM2",49,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_"  7",SRACNT=SRACNT+1
"RTN","SROATM2",50,0)
 S SHEMP=SHEMP_$J($E($P(SRA(208),"^",14),1,12),12)_"  "_$J($P($G(SRA(208)),"^",11),2)_$J($P($G(SRA(208)),"^",10),2)_$J($E($P($G(SRA(208)),"^",9),1,4),4)
"RTN","SROATM2",51,0)
 S SHEMP=SHEMP_$J($E($P(SRA(208),"^",15),1,12),12)_"  "_$J($P($G(SRA(.3)),"^",9),2)_$J($P($G(SRA(206)),"^",3),2)_$J($P($G(SRA(206)),"^",4),2)_$J($P($G(SRA(206)),"^",8),2)_$J($G(SRTRAUMA),2)
"RTN","SROATM2",52,0)
 S SHEMP=SHEMP_$J($E($P(SRA(208),"^",16),1,12),12)_$J($E($P(SRA(208),"^",17),1,12),12)_$J($E($P(SRA(.2),"^",12),1,12),12)_$J($E($P(SRA(.2),"^"),1,12),12)
"RTN","SROATM2",53,0)
 S SHEMP=SHEMP_$J($E($P(SRA(1.1),"^",8),1,12),12)_$J($E($P(SRA(208.1),"^"),1,12),12)_$J($E($P(SRA(208.1),"^",2),1,12),12)_$J($E($P(SRA(208.1),"^",3),1,3),3)_$J(SRA("CON"),10)_$J($E($P(SRA(.2),"^",4),1,12),12)
"RTN","SROATM2",54,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_"  8",SRACNT=SRACNT+1
"RTN","SROATM2",55,0)
 S SHEMP=SHEMP_$J($P(SRA(201),"^",11),5)_$J($P(SRA(202),"^",11),7)_$J($P(SRA(201),"^",12),5)_$J($P(SRA(202),"^",12),7)_$J($P(SRA(201),"^",13),4)_$J($P(SRA(202),"^",13),7)_$J($P(SRA(201),"^",14),4)_$J($P(SRA(202),"^",14),7)
"RTN","SROATM2",56,0)
 S SHEMP=SHEMP_$J($P(SRA(201),"^",15),5)_$J($P(SRA(202),"^",15),7)
"RTN","SROATM2",57,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_"  9",SRACNT=SRACNT+1
"RTN","SROATM2",58,0)
 D ^SROATM3
"RTN","SROATM2",59,0)
 Q
"RTN","SROATM2",60,0)
ONE S MOE=$S(NYUK="NS":"S",NYUK="":" ",1:NYUK)
"RTN","SROATM2",61,0)
 Q
"RTN","SROATM2",62,0)
IFELSE I NYUK["NO ICD9" S SHEMP=SHEMP_$J(" ",6)
"RTN","SROATM2",63,0)
 E  S SHEMP=SHEMP_$J(NYUK,6)
"RTN","SROATM2",64,0)
 Q
"RTN","SROATM2",65,0)
RS ; resident supervision (attending code)
"RTN","SROATM2",66,0)
 N SRSR,SRX S (SRATT,SRSR)="",SRX=$G(^SRF(SRTN,.1)) D SRES
"RTN","SROATM2",67,0)
 S SRATT=$P(SRX,"^",10) I SRATT="" D
"RTN","SROATM2",68,0)
 .I SRSR=0 S SRATT=$S($P(^SRF(SRTN,0),"^",9)<3040401:1,1:9) Q
"RTN","SROATM2",69,0)
 .S SRATT=99
"RTN","SROATM2",70,0)
 Q
"RTN","SROATM2",71,0)
SRES ; does site have residents?
"RTN","SROATM2",72,0)
 N SRDIV,SRSITE,Y S SRDIV=$P($G(^SRF(SRTN,8)),"^") I SRDIV S SRSITE=$O(^SRO(133,"B",SRDIV,0)),SRSR=$P(^SRO(133,SRSITE,0),"^",19)
"RTN","SROATM2",73,0)
 Q
"RTN","SROATM2",74,0)
RETURN ; CPT of Returns
"RTN","SROATM2",75,0)
 S Y=$P($G(^SRO(136,NYUK,0)),"^",2) I Y S CNT=CNT+1,CPT(CNT)=$P($$CPT^ICPTCOD(Y),"^",2)
"RTN","SROATM2",76,0)
 Q
"RTN","SROATM3")
0^33^B20814871^B19436720
"RTN","SROATM3",1,0)
SROATM3 ;BIR/MAM - NON CARDIAC TRANSMISSION (CONT) ;02/08/06
"RTN","SROATM3",2,0)
 ;;3.0; Surgery ;**27,38,62,88,97,111,142,153**;24 Jun 93;Build 11
"RTN","SROATM3",3,0)
 ;** NOTICE: This routine is part of an implementation of a nationally
"RTN","SROATM3",4,0)
 ;**         controlled procedure. Local modifications to this routine
"RTN","SROATM3",5,0)
 ;**         are prohibited.
"RTN","SROATM3",6,0)
 ;;
"RTN","SROATM3",7,0)
 N SRCONMOD,SRMOD,SRPMOD,SR10SP
"RTN","SROATM3",8,0)
 S SHEMP=SHEMP_$J($P(SRA(201),"^",16),5)_$J($P(SRA(202),"^",16),7)_$J($P(SRA(201),"^",17),4)_$J($P(SRA(202),"^",17),7)_$J($P(SRA(203),"^"),5)_$J($P(SRA(204),"^"),7)_$J($P(SRA(203),"^",2),5)_$J($P(SRA(204),"^",2),7)
"RTN","SROATM3",9,0)
 S SHEMP=SHEMP_$J($P(SRA(203),"^",16),5)_$J($P(SRA(204),"^",16),7)
"RTN","SROATM3",10,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 10",SRACNT=SRACNT+1
"RTN","SROATM3",11,0)
 S SHEMP=SHEMP_$J($P(SRA(203),"^",3),3)_$J($P(SRA(204),"^",3),7)_$J($P(SRA(203),"^",4),3)_$J($P(SRA(204),"^",4),7)_$J($P(SRA(203),"^",6),4)_$J($P(SRA(204),"^",6),7)
"RTN","SROATM3",12,0)
 S SHEMP=SHEMP_$J($P(SRA(203),"^",7),6)_$J($P(SRA(204),"^",7),7)
"RTN","SROATM3",13,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 11",SRACNT=SRACNT+1
"RTN","SROATM3",14,0)
 S SHEMP=SHEMP_$J($P(SRA(203),"^",8),4)_$J($P(SRA(204),"^",8),7)_$J($P(SRA(203),"^",9),5)_$J($P(SRA(204),"^",9),7)_$J($P(SRA(203),"^",10),4)_$J($P(SRA(204),"^",10),7)
"RTN","SROATM3",15,0)
 S SHEMP=SHEMP_$J($P(SRA(203),"^",12),4)_$J($P(SRA(204),"^",12),7)_$J($P(SRA(203),"^",13),5)_$J($P(SRA(204),"^",13),7)_$J($P(SRA(203),"^",14),5)_$J($P(SRA(204),"^",14),7)
"RTN","SROATM3",16,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 12",SRACNT=SRACNT+1
"RTN","SROATM3",17,0)
 S (SRPMOD,SRCONMOD)="",SR10SP="          " F I="OP","CON" S SRA(I)=$G(^SRF(SRTN,I))
"RTN","SROATM3",18,0)
 S CPT=$P($G(^SRO(136,SRTN,0)),"^",2) D
"RTN","SROATM3",19,0)
 .I SRA("CON"),$P($G(^SRF(SRA("CON"),30)),"^")!($P($G(^SRF(SRA("CON"),31)),"^",8)) S SRA("CON")=""
"RTN","SROATM3",20,0)
 .I CPT S CPT=$P($$CPT^ICPTCOD(CPT),"^",2),SRCASE=SRTN D MOD S SRPMOD=SRM
"RTN","SROATM3",21,0)
 .S SHEMP=SHEMP_$J(CPT,5),SRPMOD=SRPMOD_SR10SP
"RTN","SROATM3",22,0)
 S CPT="",CON=$P(SRA("CON"),"^") S:CON CPT=$P($G(^SRO(136,CON,0)),"^",2) D
"RTN","SROATM3",23,0)
 .I CPT S CPT=$P($$CPT^ICPTCOD(CPT),"^",2),SRCASE=CON D MOD S SRCONMOD=SRM
"RTN","SROATM3",24,0)
 .S SHEMP=SHEMP_$J(CPT,5),SRCONMOD=SRCONMOD_SR10SP
"RTN","SROATM3",25,0)
 S CPT="",SHEMP=SHEMP_$J(CPT,5)
"RTN","SROATM3",26,0)
 K CPT F I=1:1:10 S (CPT(I),SRMOD(I))=""
"RTN","SROATM3",27,0)
 S (OPS,CNT)=0 F  S OPS=$O(^SRO(136,SRTN,3,OPS)) Q:'OPS!(CNT=10)  S CNT=CNT+1,X=$P($G(^SRO(136,SRTN,3,OPS,0)),"^") I X S CPT(CNT)=$P($$CPT^ICPTCOD(X),"^",2) D OTH
"RTN","SROATM3",28,0)
 S SHEMP=SHEMP_$J(CPT(1),5)_$J(CPT(2),5)_$J(CPT(3),5)_$J(CPT(4),5)_$J(CPT(5),5)_$J(CPT(6),5)_$J(CPT(7),5)_$J(CPT(8),5)_$J(CPT(9),5)_$J(CPT(10),5)
"RTN","SROATM3",29,0)
 S SHEMP=SHEMP_$E(SRPMOD,1,10)_$E(SRCONMOD,1,10) F I=1:1:10 S SHEMP=SHEMP_$E(SRMOD(I)_SR10SP,1,10)
"RTN","SROATM3",30,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SRACNT=SRACNT+1
"RTN","SROATM3",31,0)
 ;
"RTN","SROATM3",32,0)
 ;Ethnicity contained in VADM(11)
"RTN","SROATM3",33,0)
 N SROETCD,SROPTF S SHEMP=$E(SHEMP,1,11)_" 13"
"RTN","SROATM3",34,0)
 S SROETCD="",SROPTF=""
"RTN","SROATM3",35,0)
 S SROETCD=$P($G(VADM(11,1)),U,1)            ;Ethnicity code
"RTN","SROATM3",36,0)
 S SROPTF=$$PTR2CODE^DGUTL4(SROETCD,2,4)     ;PTF Ethnicity code
"RTN","SROATM3",37,0)
 S SHEMP=SHEMP_$J($G(SROPTF),1)   ;Ethnicity
"RTN","SROATM3",38,0)
 ;
"RTN","SROATM3",39,0)
 ;Multiple races contained in VADM(12)
"RTN","SROATM3",40,0)
 N SRORAC,SRORCD,SRORCE S SRORCE=0,SRORAC="",SRORACE="",SRORCD=""
"RTN","SROATM3",41,0)
 F  S SRORCE=$O(VADM(12,SRORCE)) Q:SRORCE=""  D
"RTN","SROATM3",42,0)
 .S SRORAC=$P($G(VADM(12,SRORCE)),U,1)       ;Race code
"RTN","SROATM3",43,0)
 .S SRORCD=$$PTR2CODE^DGUTL4(SRORAC,1,4)     ;PTF race code
"RTN","SROATM3",44,0)
 .S SRORACE=SRORACE_$J(SRORCD,1)
"RTN","SROATM3",45,0)
 ;
"RTN","SROATM3",46,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP_SRORACE   ;Line 13
"RTN","SROATM3",47,0)
 S SRACNT=SRACNT+1
"RTN","SROATM3",48,0)
 ;
"RTN","SROATM3",49,0)
 S SHEMP=$E(SHEMP,1,11)_" A1"
"RTN","SROATM3",50,0)
 S SHEMP=SHEMP_SRANAME,^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" A2",SRACNT=SRACNT+1
"RTN","SROATM3",51,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") K SRA,VADM D ADD^VADPT
"RTN","SROATM3",52,0)
 S SHEMP=SHEMP_VAPA(1),^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" A3",SRACNT=SRACNT+1
"RTN","SROATM3",53,0)
 S SHEMP=SHEMP_VAPA(2),^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" A4",SRACNT=SRACNT+1
"RTN","SROATM3",54,0)
 S SHEMP=SHEMP_VAPA(3),^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" A5",SRACNT=SRACNT+1
"RTN","SROATM3",55,0)
 S SHEMP=SHEMP_VAPA(4),^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" A6",SRACNT=SRACNT+1
"RTN","SROATM3",56,0)
 S SHEMP=SHEMP_$P(VAPA(5),"^",2),^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" A7",SRACNT=SRACNT+1
"RTN","SROATM3",57,0)
 S SHEMP=SHEMP_VAPA(6),^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" A8",SRACNT=SRACNT+1
"RTN","SROATM3",58,0)
 S SHEMP=SHEMP_VAPA(8),^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SRACNT=SRACNT+1
"RTN","SROATM3",59,0)
 Q
"RTN","SROATM3",60,0)
MOD ; get principal CPT modifiers
"RTN","SROATM3",61,0)
 S SRI=0,SRCNT=1,SRM="" F  S SRI=$O(^SRO(136,SRCASE,1,SRI)) Q:'SRI  D  Q:SRCNT>5
"RTN","SROATM3",62,0)
 .S X=$P(^SRO(136,SRCASE,1,SRI,0),"^"),Y=$P($$MOD^ICPTMOD(X,"I"),"^",2)
"RTN","SROATM3",63,0)
 .I Y'="" S SRM=SRM_Y,SRCNT=SRCNT+1
"RTN","SROATM3",64,0)
 Q
"RTN","SROATM3",65,0)
OTH ; get other procedure CPT modifiers
"RTN","SROATM3",66,0)
 S SRI=0,SRCNT=1 F  S SRI=$O(^SRO(136,SRTN,3,OPS,1,SRI)) Q:'SRI  D  Q:SRCNT>5
"RTN","SROATM3",67,0)
 .S X=$P(^SRO(136,SRTN,3,OPS,1,SRI,0),"^"),Y=$P($$MOD^ICPTMOD(X,"I"),"^",2)
"RTN","SROATM3",68,0)
 .I Y'="" S SRMOD(CNT)=SRMOD(CNT)_Y,SRCNT=SRCNT+1
"RTN","SROATM3",69,0)
 Q
"RTN","SROATM4")
0^34^B8737618^B8977211
"RTN","SROATM4",1,0)
SROATM4 ;BIR/MAM - CREATE MESSAGES ;03/22/06
"RTN","SROATM4",2,0)
 ;;3.0; Surgery ;**27,38,62,125,153**;24 Jun 93;Build 11
"RTN","SROATM4",3,0)
 ;** NOTICE: This routine is part of an implementation of a nationally
"RTN","SROATM4",4,0)
 ;**         controlled procedure. Local modifications to this routine
"RTN","SROATM4",5,0)
 ;**         are prohibited.
"RTN","SROATM4",6,0)
 ;
"RTN","SROATM4",7,0)
 S SHEMP=3,SRAMNUM=0 F I=0:0 S SRAMNUM=$O(^TMP("SRA",$J,SRAMNUM)) Q:'SRAMNUM  D MSG
"RTN","SROATM4",8,0)
STATUS ; update status
"RTN","SROATM4",9,0)
 S (SRAMNUM,SRASS)=0
"RTN","SROATM4",10,0)
 F  S SRAMNUM=$O(^TMP("SRA",$J,SRAMNUM)) Q:'SRAMNUM  S SRACNT=0 F  S SRACNT=$O(^TMP("SRA",$J,SRAMNUM,SRACNT)) Q:'SRACNT  S CURLEY=$E(^TMP("SRA",$J,SRAMNUM,SRACNT,0),12,14),CURLEY=$P(CURLEY," ",3) I +CURLEY=1 D UPDATE
"RTN","SROATM4",11,0)
 I 'SRASS G END
"RTN","SROATM4",12,0)
 S X=$$ACTIVE^XUSER(DUZ) I '+X S XMDUZ=.5
"RTN","SROATM4",13,0)
 S XMSUB="RISK ASSESSMENT TRANSMISSION COMPLETE"
"RTN","SROATM4",14,0)
 S XMY("G.RISK ASSESSMENT@"_^XMB("NETNAME"))=""
"RTN","SROATM4",15,0)
 D NOW^%DTC S Y=% D D^DIQ S SRATIME=$E($P(Y,"@",2),1,5)
"RTN","SROATM4",16,0)
 S ^TMP("SRAMSG",$J,1,0)="The Surgery Risk Assessment Transmission was completed at "_SRATIME_".  A total",^TMP("SRAMSG",$J,2,0)="of "_SRASS_$S(SRASS=1:" assessment was ",1:" assessments were ")_"sent."
"RTN","SROATM4",17,0)
 S ^TMP("SRAMSG",$J,3,0)="  "
"RTN","SROATM4",18,0)
 S XMTEXT="^TMP(""SRAMSG"",$J," N I D ^XMD
"RTN","SROATM4",19,0)
END K ^TMP("SRA",$J),^TMP("SRAMSG",$J),SRTN D ^SRSKILL
"RTN","SROATM4",20,0)
 Q
"RTN","SROATM4",21,0)
MSG ; send message to G.SURGERY RISK at Hines
"RTN","SROATM4",22,0)
 S ISC=0,NAME=$G(^XMB("NETNAME")) I NAME["FORUM"!(NAME["ISC-")!($E(NAME,1,3)="ISC")!(NAME["ISC.")!(NAME["TST")!(NAME["FO-") S ISC=1
"RTN","SROATM4",23,0)
 I ISC S XMY("G.RISK ASSESSMENT@"_^XMB("NETNAME"))=""
"RTN","SROATM4",24,0)
 I 'ISC S XMY("G.RISK ASSESSMENT@FO-HINES.MED.VA.GOV")=""
"RTN","SROATM4",25,0)
 S SRATDATE=$E(DT,4,5)_"/"_$E(DT,6,7)_"/"_$E(DT,2,3)
"RTN","SROATM4",26,0)
 S X=$$ACTIVE^XUSER(DUZ) I '+X S XMDUZ=.5
"RTN","SROATM4",27,0)
 S XMSUB=$P($$SITE^SROVAR,"^",2)_": NSQIP ("_SRAMNUM_" OF "_SRATOTM_")  "_SRATDATE,XMTEXT="^TMP(""SRA"",$J,"_SRAMNUM_"," N I D ^XMD
"RTN","SROATM4",28,0)
 Q
"RTN","SROATM4",29,0)
UPDATE ; Updating is done by the server SROASITE after acknowledgement message is received at the site from the National Database
"RTN","SROATM4",30,0)
 ; Notification message of assessments transmitted is built below
"RTN","SROATM4",31,0)
 S MM=$E(^TMP("SRA",$J,SRAMNUM,SRACNT,0),5,11) F X=1:1 S EMILY=$P(MM," ",X) Q:EMILY
"RTN","SROATM4",32,0)
 S SRASS=SRASS+1
"RTN","SROATM4",33,0)
 S DFN=$P(^SRF(EMILY,0),"^") D DEM^VADPT S SRANAME=$P(VADM(1),"^") K VADM S X=$P(^SRF(EMILY,0),"^",9),SRADT=$E(X,4,5)_"/"_$E(X,6,7)_"/"_$E(X,2,3)
"RTN","SROATM4",34,0)
 S SHEMP=SHEMP+1,^TMP("SRAMSG",$J,SHEMP,0)="ASSESSMENT: "_EMILY_"   "_$J(SRANAME,20)_"        OPERATION DATE: "_SRADT
"RTN","SROATM4",35,0)
 Q
"RTN","SROATMIT")
0^30^B7128937^B6639642
"RTN","SROATMIT",1,0)
SROATMIT ;BIR/MAM - STUFF TRANMISSION IN ^TMP ;03/22/06
"RTN","SROATMIT",2,0)
 ;;3.0; Surgery ;**18,27,38,55,62,68,153**;24 Jun 93;Build 11
"RTN","SROATMIT",3,0)
 ;** NOTICE: This routine is part of an implementation of a nationally
"RTN","SROATMIT",4,0)
 ;**         controlled procedure. Local modifications to this routine
"RTN","SROATMIT",5,0)
 ;**         are prohibited.
"RTN","SROATMIT",6,0)
 ;
"RTN","SROATMIT",7,0)
 K ^TMP("SRA",$J),^TMP("SRAMSG",$J),^TMP("SRWL",$J) S SRATOT=0,SRASITE=+$P($$SITE^SROVAR,"^",3),(SRAMNUM,SRACNT)=1
"RTN","SROATMIT",8,0)
 S SRADFN=0 F  S SRADFN=$O(^SRF("ARS","N","I",SRADFN)) Q:'SRADFN  S SRTN=0 F  S SRTN=$O(^SRF("ARS","N","I",SRADFN,SRTN)) Q:'SRTN  S SR("RA")=$G(^SRF(SRTN,"RA")) I $P(SR("RA"),"^",2)="N" D CANCHK
"RTN","SROATMIT",9,0)
 S SRADFN=0 F  S SRADFN=$O(^SRF("ARS","C","I",SRADFN)) Q:'SRADFN  S SRTN=0 F  S SRTN=$O(^SRF("ARS","C","I",SRADFN,SRTN)) Q:'SRTN  S SR("RA")=$G(^SRF(SRTN,"RA")) D CANCHK
"RTN","SROATMIT",10,0)
 S SRADFN=0 F  S SRADFN=$O(^SRF("ARS","N","C",SRADFN)) Q:'SRADFN  S SRTN=0 F  S SRTN=$O(^SRF("ARS","N","C",SRADFN,SRTN)) Q:'SRTN  S SR("RA")=$G(^SRF(SRTN,"RA")) D STUFF
"RTN","SROATMIT",11,0)
 S SRATOTM=SRAMNUM D ^SROATM4
"RTN","SROATMIT",12,0)
 D ^SROATCM
"RTN","SROATMIT",13,0)
 D ^SROATMNO
"RTN","SROATMIT",14,0)
 D WL
"RTN","SROATMIT",15,0)
 I $D(ZTQUEUED) S ZTREQ="@"
"RTN","SROATMIT",16,0)
 Q
"RTN","SROATMIT",17,0)
STUFF ; stuff entries into ^TMP("SRA"
"RTN","SROATMIT",18,0)
 ; check ARS cross-reference
"RTN","SROATMIT",19,0)
 I $P(^SRF(SRTN,"RA"),"^",2)="C" K ^SRF("ARS","N","C",SRADFN,SRTN) K DR S DIE=130,DR="235///C",DA=SRTN D ^DIE K DR Q
"RTN","SROATMIT",20,0)
 I $P(SR("RA"),"^",2)'="N" Q
"RTN","SROATMIT",21,0)
 D CANCHK I 'OK Q
"RTN","SROATMIT",22,0)
 I $P(SR("RA"),"^",6)="N" S ^SRF("ARS","N","C",SRADFN,SRTN)=1 Q
"RTN","SROATMIT",23,0)
 I SRACNT+15>100 S SRACNT=1,SRAMNUM=SRAMNUM+1
"RTN","SROATMIT",24,0)
 S SRATOT=SRATOT+1,X=$E($P(^SRF(SRTN,0),"^",9),1,5)_"00",^TMP("SRWL",$J,X)=""
"RTN","SROATMIT",25,0)
 K SRA,VADM D ^SROATM1 K SHEMP,VADM,SRA
"RTN","SROATMIT",26,0)
 Q
"RTN","SROATMIT",27,0)
CANCHK ; check to see if case has been cancelled
"RTN","SROATMIT",28,0)
 S OK=1,X=$P($G(^SRF(SRTN,30)),"^") I X S OK=0
"RTN","SROATMIT",29,0)
 S X=$P($G(^SRF(SRTN,31)),"^",8) I X'="" S OK=0
"RTN","SROATMIT",30,0)
 I 'OK K DA,DIE,DR S DA=SRTN,DIE=130,DR="102///@;235///@;284///@;323///@" D ^DIE K DR,DA,DIE
"RTN","SROATMIT",31,0)
 Q
"RTN","SROATMIT",32,0)
WL ; send workload updates
"RTN","SROATMIT",33,0)
 N SRSEL S SRP=0,SRT=1,X=$$SITE^SROVAR,SRINST=$P(X,"^",2),SRSTATN=+$P(X,"^",3),SRDT=0,SRNOACK=1 D DTCHK
"RTN","SROATMIT",34,0)
 F  S SRDT=$O(^TMP("SRWL",$J,SRDT)) Q:'SRDT  I SRDT>SRLO S SRSEL=1 D ^SROAWL1
"RTN","SROATMIT",35,0)
 K ^TMP("SRWL",$J),SRLO
"RTN","SROATMIT",36,0)
 Q
"RTN","SROATMIT",37,0)
DTCHK N X,Y
"RTN","SROATMIT",38,0)
 S X=$E(DT,1,3),Y=+$E(DT,4,7),SRLO=$S(Y<1000:X-2,1:X-1)_"0900"
"RTN","SROATMIT",39,0)
 Q
"RTN","SROATMNO")
0^63^B26731177^B25963736
"RTN","SROATMNO",1,0)
SROATMNO ;BIR/MAM - TRANSMIT NO ASSESSMENT ;04/19/06
"RTN","SROATMNO",2,0)
 ;;3.0; Surgery ;**27,38,47,62,68,79,83,81,88,93,95,97,129,125,142,153**;24 Jun 93;Build 11
"RTN","SROATMNO",3,0)
 ;** NOTICE: This routine is part of an implementation of a nationally
"RTN","SROATMNO",4,0)
 ;**         controlled procedure. Local modifications to this routine
"RTN","SROATMNO",5,0)
 ;**         are prohibited.
"RTN","SROATMNO",6,0)
 ;
"RTN","SROATMNO",7,0)
 ; Reference to ^DIC(45.3 supported by DBIA #218
"RTN","SROATMNO",8,0)
 ;
"RTN","SROATMNO",9,0)
 N SR10SP,SRINTUB,SR95PO,SRLO,TDATE K ^TMP("SRA",$J) S SRATOT=0,SRASITE=+$P($$SITE^SROVAR,"^",3),(SRAMNUM,SRACNT)=1
"RTN","SROATMNO",10,0)
 S Z=$E(DT,1,3)-1,SRLO=Z_"0214"
"RTN","SROATMNO",11,0)
 S TDATE=0 F  S TDATE=$O(^SRF("AQ",TDATE)) Q:TDATE=""  I DT'<TDATE S SRTN=0 F  S SRTN=$O(^SRF("AQ",TDATE,SRTN)) Q:'SRTN  D SET
"RTN","SROATMNO",12,0)
 S SRATOTM=SRAMNUM D ^SROATM4
"RTN","SROATMNO",13,0)
 Q
"RTN","SROATMNO",14,0)
SET I $P($G(^SRF(SRTN,.4)),"^",2)="T"!(TDATE<SRLO) K ^SRF("AQ",TDATE,SRTN) Q
"RTN","SROATMNO",15,0)
 I $P($G(^SRF(SRTN,30)),"^")!$P($G(^SRF(SRTN,31)),"^",8)!'$P($G(^SRF(SRTN,.2)),"^",12)!($P($G(^SRF(SRTN,"NON")),"^")="Y") K ^SRF("AQ",TDATE,SRTN) S $P(^SRF(SRTN,.4),"^",2)="" Q
"RTN","SROATMNO",16,0)
 I $P($G(^SRF(SRTN,"RA")),"^",6)="Y",$P($G(^SRF(SRTN,"RA")),"^",2)="N" K ^SRF("AQ",TDATE,SRTN) Q
"RTN","SROATMNO",17,0)
 S SR10SP="          " K DA,DIE,DR S DA=SRTN,DIE=130,DR="905///R" D ^DIE K DR,DA,DIE
"RTN","SROATMNO",18,0)
 S SRA(0)=^SRF(SRTN,0),DATE=$E($P(SRA(0),"^",9),1,7),SPEC=$P(SRA(0),"^",4) S:SPEC SPEC=$P(^DIC(45.3,$P(^SRO(137.45,SPEC,0),"^",2),0),"^")
"RTN","SROATMNO",19,0)
 S EMERG=$P(SRA(0),"^",10),EMERG=$S(EMERG="EM":"Y",1:"N")
"RTN","SROATMNO",20,0)
 K SRTECH,SRZ S SRT=0 F  S SRT=$O(^SRF(SRTN,6,SRT)) Q:'SRT  D ^SROPRIN Q:$D(SRZ)
"RTN","SROATMNO",21,0)
 I $D(SRTECH) S SRINTUB=$P($G(^SRF(SRTN,6,SRT,8)),"^",2)
"RTN","SROATMNO",22,0)
 I '$D(SRTECH) S (SRTECH,SRINTUB)=""
"RTN","SROATMNO",23,0)
 S CPT=$P($G(^SRO(136,SRTN,0)),"^",2),SRPMOD="" I CPT S CPT=$P($$CPT^ICPTCOD(CPT),"^",2) D
"RTN","SROATMNO",24,0)
 .S SRM=0,SRCNT=1 F  S SRM=$O(^SRO(136,SRTN,1,SRM)) Q:'SRM  D  Q:SRCNT>5
"RTN","SROATMNO",25,0)
 ..S X=$P(^SRO(136,SRTN,1,SRM,0),"^") I X S Y=$P($$MOD^ICPTMOD(X,"I"),"^",2),SRPMOD=SRPMOD_Y,SRCNT=SRCNT+1
"RTN","SROATMNO",26,0)
 S DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRDOB=$E($P(VADM(3),"^"),1,7)
"RTN","SROATMNO",27,0)
 S X=$$SITE^SROUTL0(SRTN),SRDIV=$S(X:$P(^SRO(133,X,0),"^"),1:""),SRDIV=$S(SRDIV:$$GET1^DIQ(4,SRDIV,99),1:SRASITE)
"RTN","SROATMNO",28,0)
 D RS^SROATM2
"RTN","SROATMNO",29,0)
 S SRMAJMIN=$E($P($G(^SRF(SRTN,0)),U,3),1)
"RTN","SROATMNO",30,0)
 S SRDEATH=$E($P($G(^DPT(DFN,.35)),U),1,7)
"RTN","SROATMNO",31,0)
 S SRDTHUR=$E($P($G(^SRF(SRTN,.4)),U,7),1)
"RTN","SROATMNO",32,0)
 S SRSTATUS=$E($P($G(^SRF(SRTN,0)),U,12),1) I SRSTATUS'="I"&(SRSTATUS'="O") S VAIP("D")=$P(SRA(0),"^",9) D IN5^VADPT S SRSTATUS=$S(VAIP(13):"I",1:"O") K VAIP
"RTN","SROATMNO",33,0)
 S SRAGE="" I $P(VADM(3),"^") S SRAGE=$E(DATE,1,3)-$E($P(VADM(3),"^"),1,3)-($E(DATE,4,7)<$E($P(VADM(3),"^"),4,7))
"RTN","SROATMNO",34,0)
 S SRASA="",Y=$P($G(^SRF(SRTN,1.1)),"^",3) S:Y X=$P($P($G(^SRO(132.8,Y,0)),"^"),"-"),SRASA=$E(X,1,2)
"RTN","SROATMNO",35,0)
 ; Admission wi 14 days following outpatient surgery due to an Occurrence 
"RTN","SROATMNO",36,0)
 S (SRADMIT,SRADMT)=0 I SRSTATUS="O" D ADM^SROQ0A S SRADMIT=$S(SRADMT=0:"0",1:"1")
"RTN","SROATMNO",37,0)
 S EXC=$P($G(^SRF(SRTN,"RA")),"^",7),SRWOUND=$P($G(^SRF(SRTN,"1.0")),"^",8)
"RTN","SROATMNO",38,0)
 D OCC
"RTN","SROATMNO",39,0)
 S SRNODE="  X" S:$P($G(^SRF(SRTN,"RA")),U,6)="N" SRNODE="  *" S:$P($G(^SRF(SRTN,"RA")),U,2)="C" SRNODE="  C"
"RTN","SROATMNO",40,0)
 S SRTEMP="_"_$J(SRASITE,3)_$J(SRTN,7)_SRNODE_DATE_$J(SRTECH,3)_$J(EMERG,1)_$J(SPEC,3)_$J(CPT,5)_$J(EXC,1)_$J(VA("PID"),20)_$J(SRDIV,6)_" "
"RTN","SROATMNO",41,0)
 S SRTEMP=SRTEMP_$J(SRMAJMIN,1)_$J(SRDEATH,7)_$J(SRDTHUR,1)_$J(SRSTATUS,1)_$J(SRAGE,3)_$J(SRASA,2)_$J(SRADMIT,1)_SRTMP
"RTN","SROATMNO",42,0)
 K CPT,SRMOD F SRZ=1:1:10 S (CPT(SRZ),SRMOD(SRZ))=""
"RTN","SROATMNO",43,0)
 S (OPS,CNT)=0 F  S OPS=$O(^SRO(136,SRTN,3,OPS)) Q:'OPS!(CNT=10)  S CNT=CNT+1,X=$P($G(^SRO(136,SRTN,3,OPS,0)),"^") I X S CPT(CNT)=$P($$CPT^ICPTCOD(X),"^",2) D MOD
"RTN","SROATMNO",44,0)
 S SRCC=$P($G(^SRF(SRTN,"CON")),"^"),SRBLANK="          "
"RTN","SROATMNO",45,0)
 I SRCC,$P($G(^SRF(SRCC,30)),"^")!($P($G(^SRF(SRCC,31)),"^",8)) S SRCC=""
"RTN","SROATMNO",46,0)
 S SRTEMP=SRTEMP_$J(CPT(1),5)_$J(CPT(2),5)_$J(CPT(3),5)_$J(CPT(4),5)_$J(CPT(5),5)_$J(CPT(6),5)_$J(CPT(7),5)_$J(CPT(8),5)_$J(CPT(9),5)_$J(CPT(10),5)_$J(SRWOUND,2)_$J(SROCTYPE,1)_SRBLANK_$J(SRCC,10)
"RTN","SROATMNO",47,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SRTEMP,SRACNT=SRACNT+1
"RTN","SROATMNO",48,0)
 S SRICD=$P($G(^SRO(136,SRTN,0)),"^",3) S:SRICD SRICD=$P(^ICD9(SRICD,0),"^")
"RTN","SROATMNO",49,0)
 S SRA(.2)=$G(^SRF(SRTN,.2))
"RTN","SROATMNO",50,0)
 S SRTEMP="_"_$J(SRASITE,3)_$J(SRTN,7)_"  B"_$J($E($P(SRA(.2),"^"),1,12),12)_$J($E($P(SRA(.2),"^",4),1,12),12)_$E(SRPMOD_SR10SP,1,10)
"RTN","SROATMNO",51,0)
 F I=1:1:10 S SRTEMP=SRTEMP_$E(SRMOD(I)_SR10SP,1,10)
"RTN","SROATMNO",52,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SRTEMP_$J(SRINTUB,1)_SR95PO_$J(SRATT,2)_$J(SRDOB,7)_$J(SRICD,6),SRACNT=SRACNT+1
"RTN","SROATMNO",53,0)
 I SRACNT>100 S SRACNT=1,SRAMNUM=SRAMNUM+1
"RTN","SROATMNO",54,0)
 S SRATOT=SRATOT+1
"RTN","SROATMNO",55,0)
 S X=$E($P(^SRF(SRTN,0),"^",9),1,5)_"00",^TMP("SRWL",$J,X)=""
"RTN","SROATMNO",56,0)
 K DATE,ANES,EMERG,EXC,SPEC,SRADMIT,SRADMT,SRATT,SRBLANK,SRCC,SRDIV,SRDOB,SRDTHUR,SRICD,SRIO,SRMAJMIN,SROCTYPE,SRTEMP,SRTMP,SRWOUND,SRZ,SR14,CPT
"RTN","SROATMNO",57,0)
 Q
"RTN","SROATMNO",58,0)
OCC ; total of each occurrence by category
"RTN","SROATMNO",59,0)
 N SRIOFLAG,SRPOFLAG
"RTN","SROATMNO",60,0)
 F SRK=1:1:37 S SROC(SRK)=""
"RTN","SROATMNO",61,0)
 S (SRPO,SRIOFLAG)=0 F  S SRPO=$O(^SRF(SRTN,10,SRPO)) Q:'SRPO  S SRSUB=$P(^SRF(SRTN,10,SRPO,0),U,2) I SRSUB'="" D
"RTN","SROATMNO",62,0)
 .S SROC(SRSUB)=SROC(SRSUB)+1,SRIOFLAG=1
"RTN","SROATMNO",63,0)
 S (SRPO,SRPOFLAG)=0 F  S SRPO=$O(^SRF(SRTN,16,SRPO)) Q:'SRPO  S SRSUB=$P(^SRF(SRTN,16,SRPO,0),U,2) I SRSUB'="" D
"RTN","SROATMNO",64,0)
 .S SROC(SRSUB)=SROC(SRSUB)+1,SRPOFLAG=1
"RTN","SROATMNO",65,0)
 S (SROCTYPE,SRTMP)="" F SRK=1:1:10 S SRTMP=SRTMP_$J(SROC(SRK),2)
"RTN","SROATMNO",66,0)
 S SRTMP=SRTMP_$J(SROC(37),2) F SRK=12:1:32 S SRTMP=SRTMP_$J(SROC(SRK),2)
"RTN","SROATMNO",67,0)
 S SR95PO=$J(SROC(33),2)_$J(SROC(34),2)_$J(SROC(35),2)_$J(SROC(36),2)
"RTN","SROATMNO",68,0)
 I SRIOFLAG=1,(SRPOFLAG=0) S SROCTYPE="I"
"RTN","SROATMNO",69,0)
 I SRIOFLAG=0,(SRPOFLAG=1) S SROCTYPE="P"
"RTN","SROATMNO",70,0)
 I SRIOFLAG=1,(SRPOFLAG=1) S SROCTYPE="B"
"RTN","SROATMNO",71,0)
 I SRIOFLAG=0,(SRPOFLAG=0) S SROCTYPE=""
"RTN","SROATMNO",72,0)
 Q
"RTN","SROATMNO",73,0)
MOD N SRM S SRM=0,SRCNT=1 F  S SRM=$O(^SRO(136,SRTN,3,OPS,1,SRM)) Q:'SRM  D  Q:SRCNT>5
"RTN","SROATMNO",74,0)
 .S X=$P(^SRO(136,SRTN,3,OPS,1,SRM,0),"^"),Y=$P($$MOD^ICPTMOD(X,"I"),"^",2)
"RTN","SROATMNO",75,0)
 .I Y'="" S SRMOD(CNT)=SRMOD(CNT)_Y,SRCNT=SRCNT+1
"RTN","SROATMNO",76,0)
 Q
"RTN","SROAUTL")
0^6^B40591108^B41539294
"RTN","SROAUTL",1,0)
SROAUTL ;BIR/ADM - RISK ASSESSMENT UTILITY ;02/24/06
"RTN","SROAUTL",2,0)
 ;;3.0; Surgery ;**38,46,47,63,81,88,95,112,100,125,134,142,153**;24 Jun 93;Build 11
"RTN","SROAUTL",3,0)
 I $G(SRSUPCPT)=2 G NCODE
"RTN","SROAUTL",4,0)
 N SRCMOD,SRCOMMA,X K SRHDR S DFN=$P(^SRF(SRTN,0),"^") D DEM^VADPT S SRHDR=VADM(1)_" ("_VA("PID")_")        Case #"_SRTN,Y=$E($P(^SRF(SRTN,0),"^",9),1,7) X ^DD("DD") S SRSDATE=Y
"RTN","SROAUTL",5,0)
 S X=^SRF(SRTN,"OP"),SROPER=$P(X,"^"),Y=$P(X,"^",2),SRCPT=$S(Y:$P($$CPT^ICPTCOD(Y),"^",2),1:"CPT MISSING") I SRCPT,$O(^SRF(SRTN,"OPMOD",0)) D
"RTN","SROAUTL",6,0)
 .S (SRCOMMA,SRI)=0,SRCMOD="",SRCPT=SRCPT_"-" F  S SRI=$O(^SRF(SRTN,"OPMOD",SRI)) Q:'SRI  D
"RTN","SROAUTL",7,0)
 ..S SRM=$P(^SRF(SRTN,"OPMOD",SRI,0),"^"),SRCMOD=$P($$MOD^ICPTMOD(SRM,"I"),"^",2)
"RTN","SROAUTL",8,0)
 ..S SRCPT=SRCPT_$S(SRCOMMA:",",1:"")_SRCMOD,SRCOMMA=1
"RTN","SROAUTL",9,0)
 S SRCPT=$S($G(SRSUPCPT)=1:"",1:"("_SRCPT_")")
"RTN","SROAUTL",10,0)
 S SROPER=SROPER_" "_SRCPT D LOOP S SRHDR(1)=SRSDATE_"   "_SRHDR(1)
"RTN","SROAUTL",11,0)
 Q
"RTN","SROAUTL",12,0)
NCODE N SRCMOD,SRCOMMA,X K SRHDR S DFN=$P(^SRF(SRTN,0),"^") D DEM^VADPT S SRHDR=VADM(1)_" ("_VA("PID")_")        Case #"_SRTN
"RTN","SROAUTL",13,0)
 S Y=$E($P(^SRF(SRTN,0),"^",9),1,7) X ^DD("DD") S SRSDATE=Y
"RTN","SROAUTL",14,0)
 S X=^SRF(SRTN,"OP"),SROPER=$P(X,"^"),Y=$P($G(^SRO(136,SRTN,0)),"^",2),SRCPT=$S(Y:$P($$CPT^ICPTCOD(Y),"^",2),1:"CPT MISSING") I SRCPT,$O(^SRO(136,SRTN,1,0)) D
"RTN","SROAUTL",15,0)
 .S (SRCOMMA,SRI)=0,SRCMOD="",SRCPT=SRCPT_"-" F  S SRI=$O(^SRO(136,SRTN,1,SRI)) Q:'SRI  D
"RTN","SROAUTL",16,0)
 ..S SRM=$P(^SRO(136,SRTN,1,SRI,0),"^"),SRCMOD=$P($$MOD^ICPTMOD(SRM,"I"),"^",2)
"RTN","SROAUTL",17,0)
 ..S SRCPT=SRCPT_$S(SRCOMMA:",",1:"")_SRCMOD,SRCOMMA=1
"RTN","SROAUTL",18,0)
 S SRCPT="(CPT Code: "_SRCPT_")"
"RTN","SROAUTL",19,0)
 S SROPER=SROPER_" "_SRCPT D LOOP S SRHDR(1)=SRSDATE_"   "_SRHDR(1)
"RTN","SROAUTL",20,0)
 Q
"RTN","SROAUTL",21,0)
LOOP I $L(SROPER)<68 S SRHDR(1)=SROPER Q
"RTN","SROAUTL",22,0)
 I $L(SROPER)>67 S X=SROPER,K=1 F  D  I $L(X)<68 S SRHDR(K)=X Q
"RTN","SROAUTL",23,0)
 .F I=0:1:66 S J=67-I,Y=$E(X,J) I Y=" " S SRHDR(K)=$E(X,1,J-1),X=$E(X,J+1,$L(X)) S K=K+1 Q
"RTN","SROAUTL",24,0)
 Q
"RTN","SROAUTL",25,0)
HDR ; print screen header
"RTN","SROAUTL",26,0)
 W @IOF,!,SRHDR W:$D(SRPAGE) ?(79-$L(SRPAGE)),SRPAGE
"RTN","SROAUTL",27,0)
 S I=0 F  S I=$O(SRHDR(I)) Q:'I  W !,SRHDR(I)
"RTN","SROAUTL",28,0)
 K SRHDR(.5),SRPAGE W ! F I=1:1:80 W "-"
"RTN","SROAUTL",29,0)
 W !
"RTN","SROAUTL",30,0)
 Q
"RTN","SROAUTL",31,0)
FUNCT() ; called by screen on functional health status field (#240)
"RTN","SROAUTL",32,0)
 N SRSCR S SRSCR="I 1"
"RTN","SROAUTL",33,0)
 I $$CARD S SRSCR="I Y'=4"
"RTN","SROAUTL",34,0)
 Q SRSCR
"RTN","SROAUTL",35,0)
CARD() ; is this a cardiac assessed case?
"RTN","SROAUTL",36,0)
 N SRX S SRX=$S($D(SRTN):SRTN,$D(DA):DA,1:"") I 'SRX Q 0
"RTN","SROAUTL",37,0)
 I $P($G(^SRF(SRX,"RA")),"^",2)="C" Q 1
"RTN","SROAUTL",38,0)
 Q 0
"RTN","SROAUTL",39,0)
NC ; called from input transform to kill X if case is cardiac assessed
"RTN","SROAUTL",40,0)
 I $$CARD,X="NA"!(X="NS") K X
"RTN","SROAUTL",41,0)
 Q
"RTN","SROAUTL",42,0)
DATE ; called by output transmform on several date fields
"RTN","SROAUTL",43,0)
 I $D(Y),Y="NA"!(Y="NS") Q
"RTN","SROAUTL",44,0)
 N SRY S SRY=Y D DD^%DT
"RTN","SROAUTL",45,0)
 Q
"RTN","SROAUTL",46,0)
INDX ; set airway index
"RTN","SROAUTL",47,0)
 S SRY=$S(SRI>4:5,SRI>3:4,SRI>2:3,SRI>0:2,1:1),$P(^SRF(DA,.3),"^",9)=SRY
"RTN","SROAUTL",48,0)
 K SRI,SRMS,SROP,SRY
"RTN","SROAUTL",49,0)
 Q
"RTN","SROAUTL",50,0)
OP ; set logic for AOP cross reference on Oral-Pharyngeal field (901.1)
"RTN","SROAUTL",51,0)
 N SRI,SRMS,SRY S SRMS=$P(^SRF(DA,.3),"^",12) I SRMS'="" S SRMS=SRMS*.1,SRI=2.5*X-SRMS D INDX
"RTN","SROAUTL",52,0)
 Q
"RTN","SROAUTL",53,0)
MS ; set logic for AMS cross reference on Mandibular Space field (901.2)
"RTN","SROAUTL",54,0)
 N SRI,SRY,SRMS,SROP S SROP=$P(^SRF(DA,.3),"^",11) I SROP'="" S SRMS=X*.1,SRI=2.5*SROP-SRMS D INDX
"RTN","SROAUTL",55,0)
 Q
"RTN","SROAUTL",56,0)
K901 ; kill logic for AOP and AMS cross references
"RTN","SROAUTL",57,0)
 S $P(^SRF(DA,.3),"^",9)=""
"RTN","SROAUTL",58,0)
 Q
"RTN","SROAUTL",59,0)
DUP ; duplicate preop information from prior operation within 60 days
"RTN","SROAUTL",60,0)
 S SR200=$G(^SRF(SRTN,200)) S NOGO="" F I=1,9,13,18,30,37,44 S X=$P(SR200,"^",I) I X'="" S NOGO=1 K SR200 Q
"RTN","SROAUTL",61,0)
 S X=$P($G(^SRF(SRTN,200.1)),"^") I X'="" S NOGO=1
"RTN","SROAUTL",62,0)
 I NOGO K NOGO Q
"RTN","SROAUTL",63,0)
 K SRCASE S SR=^SRF(SRTN,0),DFN=$P(SR,"^"),(SRSDATE,X1)=$P(SR,"^",9),X2=-60 D C^%DTC S SRENDT=X,SRCASE=0 F  S SRCASE=$O(^SRF("B",DFN,SRCASE)) Q:'SRCASE  I SRCASE,SRCASE'=SRTN D
"RTN","SROAUTL",64,0)
 .S SRX=$P(^SRF(SRCASE,0),"^",9) I SRX>SRSDATE!(SRX<SRENDT) Q
"RTN","SROAUTL",65,0)
 .Q:$P($G(^SRF(SRCASE,"NON")),"^")="Y"!$P($G(^SRF(SRCASE,30)),"^")!$P($G(^SRF(SRCASE,31)),"^",8)!($P($G(^SRF(SRCASE,"CON")),"^")=SRTN)!'$P($G(^SRF(SRCASE,.2)),"^",12)
"RTN","SROAUTL",66,0)
 .S SRX=9999999-SRX,SRCASE(SRX,SRCASE)=""
"RTN","SROAUTL",67,0)
 K SRDT S (SRX,Y)=0 F  S SRX=$O(SRCASE(SRX)) Q:'SRX!$D(SRDT)  S SRCASE="" F  S SRCASE=$O(SRCASE(SRX,SRCASE)) Q:'SRCASE  S SR=$G(^SRF(SRCASE,"RA")) I $P(SR,"^",2)="N",$P(SR,"^",6)="Y" D  Q
"RTN","SROAUTL",68,0)
 .S Y=$P(^SRF(SRCASE,0),"^",9) X ^DD("DD") S SRDT=Y K DIR
"RTN","SROAUTL",69,0)
 .W !! S DIR("A",1)="This patient had a previous non-cardiac operation on "_SRDT_".",DIR("A",2)="",DIR("A",3)="Case #"_SRCASE_"  "_$P(^SRF(SRCASE,"OP"),"^")
"RTN","SROAUTL",70,0)
 .S DIR("A",4)="",DIR("A",5)="Do you want to duplicate the preoperative information from the earlier",DIR("A")="assessment in this assessment? "
"RTN","SROAUTL",71,0)
 .S DIR("B")="YES",DIR(0)="YA" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 Q
"RTN","SROAUTL",72,0)
 .D:Y STUFF
"RTN","SROAUTL",73,0)
 Q
"RTN","SROAUTL",74,0)
STUFF ; stuff preop information from previous case
"RTN","SROAUTL",75,0)
 I $$LOCK^SROUTL(SRCASE) D  D UNLOCK^SROUTL(SRCASE)
"RTN","SROAUTL",76,0)
 .K DA,DIC,DIQ,DR,SRY S DIC="^SRF(",DA=SRCASE,DIQ="SRY",DIQ(0)="I" D PREHD D EN^DIQ1 K DA,DIC,DIQ,DR
"RTN","SROAUTL",77,0)
 .S SRZ=0 F  S SRZ=$O(SRY(130,SRCASE,SRZ)) Q:'SRZ  S DIE=130,DA=SRTN,DR=SRZ_"////"_SRY(130,SRCASE,SRZ,"I") D ^DIE K DA,DIE,DR
"RTN","SROAUTL",78,0)
 Q
"RTN","SROAUTL",79,0)
CHK ; check for missing non-cardiac assessment data items
"RTN","SROAUTL",80,0)
 N SRSEP K SRX
"RTN","SROAUTL",81,0)
 F SRC="PREOP","DEM" K DA,DIC,DIQ,DR,SRY S DIC="^SRF(",DA=SRTN,DIQ="SRY",DIQ(0)="I" D @SRC D EN^DIQ1 D ^SROAUTL1
"RTN","SROAUTL",82,0)
 F SRC="LAB","REM" K DA,DIC,DIQ,DR,SRY S DIC="^SRF(",DA=SRTN,DIQ="SRY",DIQ(0)="I" D @SRC D EN^DIQ1 D ^SROAUTL2
"RTN","SROAUTL",83,0)
OTH K DA,DIC,DIQ,DR,SRY,SRZ D TECH^SROPRIN I SRTECH="NOT ENTERED" S SRX("ANESTHESIA TECHNIQUE")="Anesthesia Technique"
"RTN","SROAUTL",84,0)
 ;D RELATE^SROAUTL2
"RTN","SROAUTL",85,0)
OCC D EN^SROCCAT S SRSDATE=$E($P(^SRF(SRTN,0),"^",9),1,7) K ^TMP("SROCC",$J),SRO
"RTN","SROAUTL",86,0)
 S SRPO=0 F  S SRPO=$O(^SRF(SRTN,10,SRPO)) Q:'SRPO  S ^TMP("SROCC",$J,$P(^SRF(SRTN,10,SRPO,0),"^",2),SRSDATE)=""
"RTN","SROAUTL",87,0)
 S SRPO=0 F  S SRPO=$O(^SRF(SRTN,16,SRPO)) Q:'SRPO  S SRDATE=$E($P(^SRF(SRTN,16,SRPO,0),"^",7),1,7) D
"RTN","SROAUTL",88,0)
 .S SRSEP=$P(^SRF(SRTN,16,SRPO,0),"^",4)
"RTN","SROAUTL",89,0)
 .I '$G(SRDATE) S SRDATE="NO DATE"
"RTN","SROAUTL",90,0)
 .S ^TMP("SROCC",$J,$P(^SRF(SRTN,16,SRPO,0),"^",2),SRDATE)=SRSEP
"RTN","SROAUTL",91,0)
 I '$D(^TMP("SROCC",$J)) D OCCEND Q
"RTN","SROAUTL",92,0)
 S SRPO=0 F  S SRPO=$O(^TMP("SROCC",$J,SRPO)) Q:'SRPO  S SRDATE="" F  S SRDATE=$O(^TMP("SROCC",$J,SRPO,SRDATE)) Q:SRDATE  S SRX("POSTOP OCCURRENCE DATE"_SRPO)="Date Noted on "_$P(^SRO(136.5,SRPO,0),"^")_" (Postop Occurrence)" Q
"RTN","SROAUTL",93,0)
 S SRDATE="",SRDATE=$O(^TMP("SROCC",$J,3,SRDATE)) Q:SRDATE=""  I ^TMP("SROCC",$J,3,SRDATE)="" S SRX("SEPSIS CATEGORY")="SEPSIS CATEGORY on SYSTEMIC SEPSIS (Postop Occurrence)"
"RTN","SROAUTL",94,0)
OCCEND K ^TMP("SROCC",$J)
"RTN","SROAUTL",95,0)
 Q
"RTN","SROAUTL",96,0)
PREOP S DR="236;237;346;202;202.1;246;325;238;240;492;204;203;326;212;213;396;394;220;266;395;208;329;330;328;211;332;333;398;399;400;334;335;336;401;338;218;339;215;216;217;338.1;338.2;218.1;269"
"RTN","SROAUTL",97,0)
 Q
"RTN","SROAUTL",98,0)
DEM S DR="413;.011;247;418;419;420;421;452;453;454"
"RTN","SROAUTL",99,0)
 Q
"RTN","SROAUTL",100,0)
LAB S DR="270;304;224;291;223;290;225;292;228;295;227;294;229;296;230;297;234;301;231;298;233;300;232;299;487;487.1;274;305;405;407;275;306;406;408;277;308;278;309;279;310;280;311;281;312;283;314;455;455.1;456;456.1;444;444.1;445;445.1"
"RTN","SROAUTL",101,0)
 Q
"RTN","SROAUTL",102,0)
REM S DR=".03;214;.035;1.09;1.13;.22;.23;340;443"
"RTN","SROAUTL",103,0)
 Q
"RTN","SROAUTL",104,0)
PREHD D PREOP S DR=DR_";402;241;244;242;243;210;245"
"RTN","SROAUTL",105,0)
 Q
"RTN","SROAUTL0")
0^61^B17506140^B23028000
"RTN","SROAUTL0",1,0)
SROAUTL0 ;BIR/ADM/SLM - RISK ASSESSMENT UTILITY ;03/30/06
"RTN","SROAUTL0",2,0)
 ;;3.0; Surgery ;**38,47,57,60,61,63,81,125,153**;24 Jun 93;Build 11
"RTN","SROAUTL0",3,0)
PREOP K DR S SRQ=1,DR="325;238;240;204;203;396;332;333;338;339;215;217"
"RTN","SROAUTL0",4,0)
 Q
"RTN","SROAUTL0",5,0)
PREMD K DR S SRQ=1,DR=".011;247;413;417;418;419;420;421;452;453;454"
"RTN","SROAUTL0",6,0)
 Q
"RTN","SROAUTL0",7,0)
OPER K DR S SRQ=0,DR=".03;.04;26;27;214;.42;.035;1.09;1.13;.37;.22;.23;340;66"
"RTN","SROAUTL0",8,0)
 Q
"RTN","SROAUTL0",9,0)
LR K DR S SRQ=0,DR="225;292;228;295;224;291;234;301;230;297;227;294"
"RTN","SROAUTL0",10,0)
 Q
"RTN","SROAUTL0",11,0)
OUT1 ; man preop edit scr
"RTN","SROAUTL0",12,0)
 Q
"RTN","SROAUTL0",13,0)
LAB ; man lab edit scrn
"RTN","SROAUTL0",14,0)
 Q
"RTN","SROAUTL0",15,0)
CPTS ; put CPT codes in array for display
"RTN","SROAUTL0",16,0)
 N SRDA,K,X,XX,Y K SRPROC S K=1,Y=$P($G(^SRO(136,SRTN,0)),"^",2),Y=$S(Y:$P($$CPT^ICPTCOD(Y),"^",2),1:"")
"RTN","SROAUTL0",17,0)
 I $L(Y) D SSPRIN^SROCPT0
"RTN","SROAUTL0",18,0)
 S SRPROC(K)=$S($L(Y):Y,1:"NO PRIN CODE")
"RTN","SROAUTL0",19,0)
 S SRDA=0 F  S SRDA=$O(^SRO(136,SRTN,3,SRDA)) Q:'SRDA  D
"RTN","SROAUTL0",20,0)
 .S Y=$P($G(^SRO(136,SRTN,3,SRDA,0)),"^"),Y=$S(Y:$P($$CPT^ICPTCOD(Y),"^",2),1:"")
"RTN","SROAUTL0",21,0)
 .I $L(Y) D SSOTH^SROCPT0
"RTN","SROAUTL0",22,0)
 .I $L(Y)+$L(SRPROC(K))'>SRL S SRPROC(K)=SRPROC(K)_", "_Y Q
"RTN","SROAUTL0",23,0)
 .S K=K+1,SRPROC(K)=Y
"RTN","SROAUTL0",24,0)
 I SRPROC(1)=""!(SRPROC(1)="NO PRIN CODE") S SRPROC(1)="NOT ENTERED"
"RTN","SROAUTL0",25,0)
 Q
"RTN","SROAUTL0",26,0)
DISP ; display CPT code info
"RTN","SROAUTL0",27,0)
 N SRFIRST,SRMO,SRMOD S SRPAGE="" D HDR^SROAUTL S SRFIRST=0,SRW="NOT ENTERED"
"RTN","SROAUTL0",28,0)
 S Y=$P($G(^SRO(136,SRTN,0)),"^",2) I Y S Y=$P($$CPT^ICPTCOD(Y),"^",2) D DES^SROCPT0
"RTN","SROAUTL0",29,0)
 W "Principal CPT Code: "_SRW I $G(SRDES(1))'="" F I=1:1 Q:$L(SRDES(I))'>1  W !,?5,SRDES(I)
"RTN","SROAUTL0",30,0)
 I $O(^SRO(136,SRTN,1,0)) W !,?3,"Modifier: " D
"RTN","SROAUTL0",31,0)
 .S SRMOD=0 F  S SRMOD=$O(^SRO(136,SRTN,1,SRMOD)) Q:'SRMOD  D
"RTN","SROAUTL0",32,0)
 ..S SRMO=$P(^SRO(136,SRTN,1,SRMOD,0),"^")
"RTN","SROAUTL0",33,0)
 ..W:SRFIRST !,?13 W $P($$MOD^ICPTMOD(SRMO,"I"),"^",2),"-",$P($$MOD^ICPTMOD(SRMO,"I"),"^",3)
"RTN","SROAUTL0",34,0)
 ..S SRFIRST=1
"RTN","SROAUTL0",35,0)
 K SRDES W !
"RTN","SROAUTL0",36,0)
OTH S SROTH=0 F  S SROTH=$O(^SRO(136,SRTN,3,SROTH)) Q:'SROTH  D  K SRDES W !
"RTN","SROAUTL0",37,0)
 .S Y=$P($G(^SRO(136,SRTN,3,SROTH,0)),"^"),Y=$S(Y:$P($$CPT^ICPTCOD(Y),"^",2),1:"") D DES^SROCPT0
"RTN","SROAUTL0",38,0)
 .W !,"Other CPT Code:     "_SRW I $G(SRDES(1))'="" F I=1:1 Q:$L(SRDES(I))'>1  W !,?5,SRDES(I)
"RTN","SROAUTL0",39,0)
 .I $O(^SRO(136,SRTN,3,SROTH,1,0)) S SRFIRST=0 W !,?3,"Modifier: " D
"RTN","SROAUTL0",40,0)
 ..S SRMOD=0 F  S SRMOD=$O(^SRO(136,SRTN,3,SROTH,1,SRMOD)) Q:'SRMOD  D
"RTN","SROAUTL0",41,0)
 ...S SRMO=$P(^SRO(136,SRTN,3,SROTH,1,SRMOD,0),"^")
"RTN","SROAUTL0",42,0)
 ...W:SRFIRST !,?13 W $P($$MOD^ICPTMOD(SRMO,"I"),"^",2),"-",$P($$MOD^ICPTMOD(SRMO,"I"),"^",3)
"RTN","SROAUTL0",43,0)
 ...S SRFIRST=1
"RTN","SROAUTL0",44,0)
PRESS K DIR S DIR(0)="FOA",DIR("A")="Press ENTER to continue." D ^DIR K DIR
"RTN","SROAUTL0",45,0)
 Q
"RTN","SROAUTL0",46,0)
OCC ; occur data
"RTN","SROAUTL0",47,0)
 D EN^SROCCAT K ^TMP("SROCC",$J),SRO,SROC,SROOC
"RTN","SROAUTL0",48,0)
 F SRK=1:1:37 S SROC(SRK)="       "
"RTN","SROAUTL0",49,0)
 S (SRFLG,SRIO,SRPO)=0 F  S SRIO=$O(^SRF(SRTN,10,SRIO)) Q:'SRIO  D
"RTN","SROAUTL0",50,0)
 .S SROCC=$P(^SRF(SRTN,10,SRIO,0),U,2) Q:'SROCC
"RTN","SROAUTL0",51,0)
 .S ^TMP("SROCC",$J,SROCC,$E($P(^SRF(SRTN,0),U,9),1,7),10)=SRIO
"RTN","SROAUTL0",52,0)
 F  S SRPO=$O(^SRF(SRTN,16,SRPO)) Q:'SRPO  D
"RTN","SROAUTL0",53,0)
 .S SRDATE=$E($P(^SRF(SRTN,16,SRPO,0),U,7),1,7)
"RTN","SROAUTL0",54,0)
 .S X1=$E(SRSDATE,1,7),X2=30 D C^%DTC
"RTN","SROAUTL0",55,0)
 .I SRDATE>X Q
"RTN","SROAUTL0",56,0)
 .I '$G(SRDATE) S SRDATE="       "
"RTN","SROAUTL0",57,0)
 .S SROCC=$P(^SRF(SRTN,16,SRPO,0),U,2) Q:'SROCC
"RTN","SROAUTL0",58,0)
 .S ^TMP("SROCC",$J,SROCC,SRDATE,16)=SRPO
"RTN","SROAUTL0",59,0)
 I '$D(^TMP("SROCC",$J)) D OCCEND Q
"RTN","SROAUTL0",60,0)
 ;remove multiples
"RTN","SROAUTL0",61,0)
 S SROCC=0 F  S SROCC=$O(^TMP("SROCC",$J,SROCC)) Q:'SROCC  S SROCCDT=$O(^TMP("SROCC",$J,SROCC,0)),SRTYPE=$O(^TMP("SROCC",$J,SROCC,SROCCDT,0)) D
"RTN","SROAUTL0",62,0)
 .I SROCC=21!(SROCC>28&(SROCC<33))!(SROCC=36) D
"RTN","SROAUTL0",63,0)
 ..S SRDA=^TMP("SROCC",$J,SROCC,SROCCDT,SRTYPE),SRICD=$P(^SRF(SRTN,SRTYPE,SRDA,0),U,3)
"RTN","SROAUTL0",64,0)
 ..I SRICD S SROOC(SROCC)=$P(^ICD9(SRICD,0),U)_"^"_$P(^SRF(SRTN,SRTYPE,SRDA,0),U)
"RTN","SROAUTL0",65,0)
 ..E  S SROOC(SROCC)="NO ICD9 CODE ENTERED"
"RTN","SROAUTL0",66,0)
 .S ^TMP("SROCC",$J,"SR",SROCC,SROCCDT)=""
"RTN","SROAUTL0",67,0)
 S SRK=1,SRO="",SROCC=0 F  S SROCC=$O(^TMP("SROCC",$J,"SR",SROCC)) Q:'SROCC  S SROCCDT="" F  S SROCCDT=$O(^TMP("SROCC",$J,"SR",SROCC,SROCCDT)) Q:SROCCDT=""  D
"RTN","SROAUTL0",68,0)
 .I SROCC=3 S SRPO=^TMP("SROCC",$J,SROCC,SROCCDT,16) I SRPO S X=$P(^SRF(SRTN,16,SRPO,0),"^",4) S:X SRSEP=X
"RTN","SROAUTL0",69,0)
 .S SROC(SROCC)=SROCCDT
"RTN","SROAUTL0",70,0)
 F I=1:1:22,29:1:32,35,36 S SRO=SRO_$J(SROC(I),7)
"RTN","SROAUTL0",71,0)
 S X=$G(SRSEP),SRO=SRO_X I X S SRSEP=$S(X=2:"SEPSIS",X=3:"SEPTIC SHOCK",1:"SIRS")
"RTN","SROAUTL0",72,0)
OCCEND K ^TMP("SROCC",$J),SRPOCC,SRPOCCD,SRSDATE,SRTYPE,SRDATE,SRDA,SRFLG,SRICD,SRJ,SRK,SROCC,SROCCDT,SRPO,X1,X2
"RTN","SROAUTL0",73,0)
 Q
"RTN","SROAUTL1")
0^29^B18465226^B18184832
"RTN","SROAUTL1",1,0)
SROAUTL1 ;BIR/ADM - RISK ASSESSMENT UTILITY ;02/07/06
"RTN","SROAUTL1",2,0)
 ;;3.0; Surgery ;**38,47,81,125,153**;24 Jun 93;Build 11
"RTN","SROAUTL1",3,0)
 S SRZ=0 F  S SRZ=$O(SRY(130,SRTN,SRZ)) Q:'SRZ  I SRY(130,SRTN,SRZ,"I")="" D TR S X=$T(@SRP),SRFLD=$P(X,";;",2),SRX(SRZ)=$P(SRFLD,"^",2)
"RTN","SROAUTL1",4,0)
 Q
"RTN","SROAUTL1",5,0)
TR S SRP=SRZ,SRP=$TR(SRP,"1234567890.","ABCDEFGHIJP")
"RTN","SROAUTL1",6,0)
 Q
"RTN","SROAUTL1",7,0)
GET S X=$T(@J)
"RTN","SROAUTL1",8,0)
 Q
"RTN","SROAUTL1",9,0)
BJH ;;208^History of Hypertension Requiring Medication (Y/N)^Hypertension Requiring Meds^
"RTN","SROAUTL1",10,0)
BAC ;;213^Esophageal Varices (Y/N)^Esophogeal Varices^
"RTN","SROAUTL1",11,0)
BBJ ;;220^Previous PCI (Y/N)^Previous PCI^
"RTN","SROAUTL1",12,0)
BFF ;;266^Previous Cardiac Surgery (Y/N)^Previous Cardiac Surgery^
"RTN","SROAUTL1",13,0)
CBI ;;329^History of Revascularization/Amputation for PVD (Y/N)^Revascularization/Amputation^
"RTN","SROAUTL1",14,0)
CCJ ;;330^Rest Pain/Gangrene (Y/N)^Rest Pain/Gangrene^
"RTN","SROAUTL1",15,0)
CID ;;394^History of MI Within Past 6 Months (Y/N)^MI Within 6 Months^
"RTN","SROAUTL1",16,0)
CIE ;;395^Angina within One Month Preceding Surgery (Y/N)^Angina Within 1 Month^
"RTN","SROAUTL1",17,0)
CIH ;;398^Quadriplegia (Y/N)^Quadriplegia^
"RTN","SROAUTL1",18,0)
CII ;;399^Paraplegia (Y/N)^Paraplegia^
"RTN","SROAUTL1",19,0)
BCF ;;236^Patient's Height^Height^
"RTN","SROAUTL1",20,0)
BCG ;;237^Patient's Weight^Weight^
"RTN","SROAUTL1",21,0)
CDF ;;346^Diabetes^Diabetes Mellitus^
"RTN","SROAUTL1",22,0)
BJB ;;202^Current Smoker within 1 Year prior to Surgery (Y/N)^Current SmokerW/I 1 Year^
"RTN","SROAUTL1",23,0)
BJBPA ;;202.1^Pack/Years^Pack/Years^
"RTN","SROAUTL1",24,0)
BDF ;;246^ETOH Greater than 2 Drinks/Day (Y/N)^ETOH > 2 Drinks/Day^
"RTN","SROAUTL1",25,0)
CBE ;;325^Dyspnea^Dyspnea^
"RTN","SROAUTL1",26,0)
BCH ;;238^DNR Status (Y/N)^DNR Status^
"RTN","SROAUTL1",27,0)
BDJ ;;240^Functional Health Status Prior to Current Illness^Pre-Illness Functional Status^
"RTN","SROAUTL1",28,0)
DIB ;;492^Functional Health Status at Evaluation for Surgery^Preop Functional Status
"RTN","SROAUTL1",29,0)
BJD ;;204^Ventilator Dependent Greater than 48 Hrs (Y/N)^Ventilator Dependent^
"RTN","SROAUTL1",30,0)
BJC ;;203^History of COPD (Y/N)^History of Severe COPD^
"RTN","SROAUTL1",31,0)
CBF ;;326^Current Pneumonia (Y/N)^Current Pneumonia^
"RTN","SROAUTL1",32,0)
BAB ;;212^Ascites (Y/N)^Ascites^
"RTN","SROAUTL1",33,0)
CIF ;;396^CHF within One Month Preceding Surgery (Y/N)^CHF Within 1 Month^
"RTN","SROAUTL1",34,0)
CBH ;;328^Acute Renal Failure (Y/N)^Acute Renal Failure^
"RTN","SROAUTL1",35,0)
BAA ;;211^Currently on Dialysis (Y/N)^Currently on Dialysis^
"RTN","SROAUTL1",36,0)
CCB ;;332^Impaired Sensorium (Y/N)^Impaired Sensorium^
"RTN","SROAUTL1",37,0)
CCC ;;333^Coma (Y/N)^Coma^
"RTN","SROAUTL1",38,0)
DJJ ;;400^Hemiplegia (Y/N)^Hemiplegia^
"RTN","SROAUTL1",39,0)
CCD ;;334^History of TIAs (Y/N)^History of TIAs^
"RTN","SROAUTL1",40,0)
CCE ;;335^CVA/Residual Neurologic Deficit (Y/N)^CVA/Residual Neuro Deficit^
"RTN","SROAUTL1",41,0)
CCF ;;336^CVA/No Neurologic Deficit (Y/N)^CVA/No Neuro Deficit^
"RTN","SROAUTL1",42,0)
DJA ;;401^Tumor Involving CNS (Y/N)^Tumor Involving CNS^
"RTN","SROAUTL1",43,0)
CCH ;;338^Disseminated Cancer (Y/N)^Disseminated Cancer^
"RTN","SROAUTL1",44,0)
BAH ;;218^Open Wound or Skin Infection (Y/N)^Open Wound or Infection^
"RTN","SROAUTL1",45,0)
CCI ;;339^Steroid Use for Chronic Condition (Y/N)^Steroid Use for Chronic Cond.^
"RTN","SROAUTL1",46,0)
BAE ;;215^Weight Loss > 10% of Usual Body Weight (Y/N)^Weight Loss > 10%^
"RTN","SROAUTL1",47,0)
BAF ;;216^History of Bleeding Disorders (Y/N)^Bleeding Disorders^
"RTN","SROAUTL1",48,0)
BAG ;;217^Transfusion Greater than 4 RBC Units this Admission (Y/N)^Transfusion > 4 RBC Units^
"RTN","SROAUTL1",49,0)
CCHPA ;;338.1^Chemotherapy Within Last 30 Days (Y/N)^Chemotherapy W/I 30 Days^
"RTN","SROAUTL1",50,0)
CCHPB ;;338.2^Radiotherapy Within Last 90 Days (Y/N)^Radiotherapy W/I 90 Days^
"RTN","SROAUTL1",51,0)
BAHPA ;;218.1^Preoperative Sepsis (Y/N)^Preoperative Sepsis^
"RTN","SROAUTL1",52,0)
BFI ;;269^Pregnancy Status^Pregnancy Status^
"RTN","SROAUTL1",53,0)
DAC ;;413^Transfer Status^Transfer Status^
"RTN","SROAUTL1",54,0)
PJAA ;;.011^In/Out-Patient Status
"RTN","SROAUTL1",55,0)
BDG ;;247^Length of Postoperative Hospital Stay
"RTN","SROAUTL1",56,0)
DAG ;;417^Patient's Race
"RTN","SROAUTL1",57,0)
DAH ;;418^Hospital Admission Date
"RTN","SROAUTL1",58,0)
DAI ;;419^Hospital Discharge Date
"RTN","SROAUTL1",59,0)
DBJ ;;420^Admitted/Transferred to Surgical Service
"RTN","SROAUTL1",60,0)
DBA ;;421^Discharged/Transferred to Chronic Care
"RTN","SROAUTL1",61,0)
DEB ;;452^Observation Admission Date/Time
"RTN","SROAUTL1",62,0)
DEC ;;453^Observation Discharge Date/Time
"RTN","SROAUTL1",63,0)
DED ;;454^Observation Treating Specialty
"RTN","SROAUTL2")
0^28^B32578707^B27226324
"RTN","SROAUTL2",1,0)
SROAUTL2 ;BIR/ADM - RISK ASSESSMENT UTILITY ;02/07/06
"RTN","SROAUTL2",2,0)
 ;;3.0; Surgery ;**38,47,63,88,125,153**;24 Jun 93;Build 11
"RTN","SROAUTL2",3,0)
 S SRZ=0 F  S SRZ=$O(SRY(130,SRTN,SRZ)) Q:'SRZ  D
"RTN","SROAUTL2",4,0)
 .I SRY(130,SRTN,SRZ,"I")="" D TR S X=$T(@SRP),SRFLD=$P(X,";;",2),SRX(SRZ)=$P(SRFLD,"^",2)
"RTN","SROAUTL2",5,0)
 .I SRY(130,SRTN,SRZ,"I")="NS" D TR S X=$T(@SRP),SRFLD=$P(X,";;",2),SRDT=$P(SRFLD,"^",4) S:SRDT'="" SRLR(SRDT)=""
"RTN","SROAUTL2",6,0)
 S SRDT=0 F  S SRDT=$O(SRLR(SRDT)) Q:'SRDT  K SRX(SRDT)
"RTN","SROAUTL2",7,0)
 Q
"RTN","SROAUTL2",8,0)
RELATE S DFN=$P(^SRF(SRTN,0),"^"),SRDEATH=$P($G(^DPT(DFN,.35)),"^") I 'SRDEATH Q
"RTN","SROAUTL2",9,0)
 S X2=$P(^SRF(SRTN,0),"^",9),X1=SRDEATH D ^%DTC I X>90 Q
"RTN","SROAUTL2",10,0)
 S X=$P($G(^SRF(SRTN,.4)),"^",7) I X="" S SRX(903)="Death Unrelated/Related"
"RTN","SROAUTL2",11,0)
 Q
"RTN","SROAUTL2",12,0)
TR S SRP=SRZ,SRP=$TR(SRP,"1234567890.","ABCDEFGHIJP")
"RTN","SROAUTL2",13,0)
 Q
"RTN","SROAUTL2",14,0)
GET S X=$T(@J)
"RTN","SROAUTL2",15,0)
 Q
"RTN","SROAUTL2",16,0)
PJC ;;.03^Major or Minor^Major or Minor^
"RTN","SROAUTL2",17,0)
PDB ;;.42^Other Procedures^^
"RTN","SROAUTL2",18,0)
PCG ;;.37^Anesthesia Technique^^
"RTN","SROAUTL2",19,0)
CE ;;35^Concurrent Case^Concurrent Case^
"RTN","SROAUTL2",20,0)
PJD ;;.04^Surgery Specialty^Surgical Specialty^
"RTN","SROAUTL2",21,0)
BF ;;26^Principal Procedure^Principal Operation^
"RTN","SROAUTL2",22,0)
BGJ ;;270^Preoperative Serum Sodium^Serum Sodium^304
"RTN","SROAUTL2",23,0)
CJD ;;304^Date Preoperative Serum Sodium was Performed^^
"RTN","SROAUTL2",24,0)
BBD ;;224^Preoperative BUN (mg/dl)^BUN^291
"RTN","SROAUTL2",25,0)
BIA ;;291^Date Preoperative BUN was Performed^^
"RTN","SROAUTL2",26,0)
BBC ;;223^Preoperative Serum Creatinine (mg/dl)^Serum Creatinine^290
"RTN","SROAUTL2",27,0)
BIJ ;;290^Date Preoperative Serum Creatinine was Performed^^
"RTN","SROAUTL2",28,0)
BBE ;;225^Preoperative Serum Albumin (g/dl)^Serum Albumin^292
"RTN","SROAUTL2",29,0)
BIB ;;292^Date Preoperative Serum Albumin was Performed^^
"RTN","SROAUTL2",30,0)
BBH ;;228^Preoperative Total Bilirubin (mg/dl)^Total Bilirubin^295
"RTN","SROAUTL2",31,0)
BIE ;;295^Date Preoperative Total Bilrubin was Performed^^
"RTN","SROAUTL2",32,0)
BBG ;;227^Preoperative SGOT (mU/ml)^SGOT^294
"RTN","SROAUTL2",33,0)
BID ;;294^Date Preoperative SGOT was Performed^^
"RTN","SROAUTL2",34,0)
BBI ;;229^Preoperative Alkaline Phosphatase (mU/ml)^Alkaline Phosphatase^296
"RTN","SROAUTL2",35,0)
BIF ;;296^Date Preoperative Alkaline Phosphatase was Performed^^
"RTN","SROAUTL2",36,0)
BCJ ;;230^Preoperative WBC (X 1000/mm3)^WBC^297
"RTN","SROAUTL2",37,0)
BIG ;;297^Date Preoperative WBC was Performed
"RTN","SROAUTL2",38,0)
BCD ;;234^Preoperative Hematocrit^Hematocrit^301
"RTN","SROAUTL2",39,0)
CJA ;;301^Date Preoperative Hematocrit was Performed^^
"RTN","SROAUTL2",40,0)
BCA ;;231^Preoperative Platelet Count (X 1000/mm3)^Platelet Count^298
"RTN","SROAUTL2",41,0)
BIH ;;298^Date Preoperative Platelet Count was Performed^^
"RTN","SROAUTL2",42,0)
BCC ;;233^Preoperative PTT (seconds)^PTT^300
"RTN","SROAUTL2",43,0)
CJJ ;;300^Date Preoperative PTT was Performed^^
"RTN","SROAUTL2",44,0)
BCB ;;232^Preoperative PT (seconds)^PT^299
"RTN","SROAUTL2",45,0)
BII ;;299^Date Preoperative PT was Performed^^
"RTN","SROAUTL2",46,0)
BGD ;;274^Highest Postoperative Serum Sodium^Highest Serum Sodium^305
"RTN","SROAUTL2",47,0)
CJE ;;305^Date Highest Serum Sodium was Recorded^^
"RTN","SROAUTL2",48,0)
DJE ;;405^Lowest Serum Sodium^Lowest Serum Sodium^407
"RTN","SROAUTL2",49,0)
DJG ;;407^Date of Lowest Serum Sodium^^
"RTN","SROAUTL2",50,0)
BGE ;;275^Highest Postoperative Potassium^Highest Potassium^306
"RTN","SROAUTL2",51,0)
CJF ;;306^Date Highest Potassium was Recorded^^
"RTN","SROAUTL2",52,0)
DJF ;;406^Lowest Postoperative Potassium^Lowest Potassium^408
"RTN","SROAUTL2",53,0)
DJH ;;408^Date of Lowest Postoperative Potassium^^
"RTN","SROAUTL2",54,0)
BGG ;;277^Highest Postoperative Serum Creatinine^Highest Serum Creatinine^308
"RTN","SROAUTL2",55,0)
CJH ;;308^Date Highest Serum Creatinine was Recorded^^
"RTN","SROAUTL2",56,0)
BGH ;;278^Highest Postoperative CPK^Highest CPK^309
"RTN","SROAUTL2",57,0)
CJI ;;309^Date Highest CPK was Recorded^^
"RTN","SROAUTL2",58,0)
BGI ;;279^Highest Postoperative CPK-MB^Highest CPK-MB^310
"RTN","SROAUTL2",59,0)
CAJ ;;310^Date Highest CPK-MB Band was Recorded^^
"RTN","SROAUTL2",60,0)
BHJ ;;280^Highest Postoperative Total Bilirubin^Highest Total Bilirubin^311
"RTN","SROAUTL2",61,0)
CAA ;;311^Date Highest Total Bilirubin was Recorded^^
"RTN","SROAUTL2",62,0)
BHA ;;281^Highest Postoperative WBC^Highest WBC^312
"RTN","SROAUTL2",63,0)
CAB ;;312^Date Highest WBC was Recorded^^
"RTN","SROAUTL2",64,0)
BHC ;;283^Lowest Postoperative Hematocrit^Lowest Hematocrit^314
"RTN","SROAUTL2",65,0)
CAD ;;314^Date Lowest Hematocrit was Recorded^^
"RTN","SROAUTL2",66,0)
DEE ;;455^Highest Postoperative Serum Troponin I^Highest Troponin I^455.1
"RTN","SROAUTL2",67,0)
DEEPA ;;455.1^Date of Highest Postop Troponin I^^
"RTN","SROAUTL2",68,0)
DEF ;;456^Highest Postoperative Serum Troponin T^Highest Troponin T^456.1
"RTN","SROAUTL2",69,0)
DEFPA ;;456.1^Date of Highest Postop Troponin T^^
"RTN","SROAUTL2",70,0)
DHG ;;487^Preoperative INR^INR^487.1
"RTN","SROAUTL2",71,0)
DHGPA ;;487.1^Date Preoperative INR was Performed^^
"RTN","SROAUTL2",72,0)
DDD ;;444^Preoperative Anion Gap^Anion Gap^444.1
"RTN","SROAUTL2",73,0)
DDDPA ;;444.1^Date Preoperative Anion Gap was Recorded^^
"RTN","SROAUTL2",74,0)
DDE ;;445^Highest Postoperative Anion Gap^Highest Anion Gap^445.1
"RTN","SROAUTL2",75,0)
DDEPA ;;445.1^Date Highest Anion Gap was Recorded^^
"RTN","SROAUTL2",76,0)
BG ;;27^Principal Procedure Code (CPT)^Principal CPT Code^
"RTN","SROAUTL2",77,0)
BAD ;;214^PGY of Primary Surgeon ('0' for Staff Surgeon)^PGY of Primary Surgeon^
"RTN","SROAUTL2",78,0)
PJCE ;;.035^Case Schedule Type^Surgical Priority^
"RTN","SROAUTL2",79,0)
APJI ;;1.09^Wound Classification^Wound Classification^
"RTN","SROAUTL2",80,0)
APAC ;;1.13^ASA Class^ASA Classification^
"RTN","SROAUTL2",81,0)
PBB ;;.22^Time the Operation Began^Date/Time Operation Began^
"RTN","SROAUTL2",82,0)
PBC ;;.23^Time the Operation Ends^Date/Time Operation Ended^
"RTN","SROAUTL2",83,0)
CDJ ;;340^Number of RBC Units Transfused^RBC Units Transfused^
"RTN","SROAUTL2",84,0)
DDC ;;443^Intraoperative Disseminated Cancer (Y/N)^Intraoperative Disseminated Cancer^
"RTN","SROAUTL2",85,0)
FF ;;66^Principal Diagnosis Code (ICD9)^Postop Diagnosis Code (ICD9)^
"RTN","SROAUTL2",86,0)
BDG ;;247^Length of Postoperative Stay^Length of Postoperative Hospital Stay^
"RTN","SROAUTL2",87,0)
AJB ;;102^Reason for not Creating an Assessment^Exclusion Criteria^
"RTN","SROAUTL2",88,0)
PJAA ;;.011^In/Out-Patient Status^Hospital Admission Status^
"RTN","SROAUTL2",89,0)
PAFF ;;.166^Attending Code^Attending Code
"RTN","SROAUTL2",90,0)
PBA ;;.21^Anesthesia Care Start Time^Anesthesia Start^
"RTN","SROAUTL2",91,0)
PBD ;;.24^Anesthesia Care End Time^Anesthesia Finish^
"RTN","SROAUTL4")
0^56^B38721061^B38454869
"RTN","SROAUTL4",1,0)
SROAUTL4 ;BIR/ADM - RISK ASSESSMENT UTILITY ;05/31/06
"RTN","SROAUTL4",2,0)
 ;;3.0; Surgery ;**38,71,95,125,153**;24 Jun 93;Build 11
"RTN","SROAUTL4",3,0)
 S SRZ=0 F  S SRZ=$O(SRY(130,SRTN,SRZ)) Q:'SRZ  D
"RTN","SROAUTL4",4,0)
 .I SRY(130,SRTN,SRZ,"I")="" D TR S X=$T(@SRP),SRFLD=$P(X,";;",2),SRX(SRZ)=$P(SRFLD,"^",2)
"RTN","SROAUTL4",5,0)
 .I SRY(130,SRTN,SRZ,"I")="NS" D TR S X=$T(@SRP),SRFLD=$P(X,";;",2),SRDT=$P(SRFLD,"^",4) S:SRDT'="" SRLR(SRDT)=""
"RTN","SROAUTL4",6,0)
 S SRDT=0 F  S SRDT=$O(SRLR(SRDT)) Q:'SRDT  K SRX(SRDT)
"RTN","SROAUTL4",7,0)
 Q
"RTN","SROAUTL4",8,0)
TR S SRP=SRZ,SRP=$TR(SRP,"1234567890.","ABCDEFGHIJP")
"RTN","SROAUTL4",9,0)
 Q
"RTN","SROAUTL4",10,0)
GET S X=$T(@J)
"RTN","SROAUTL4",11,0)
 Q
"RTN","SROAUTL4",12,0)
PBB ;;.22^Time the Operation Began^Date/Time Operation Began^
"RTN","SROAUTL4",13,0)
PBC ;;.23^Time the Operation Ended^Date/Time Operation Ended^
"RTN","SROAUTL4",14,0)
BCF ;;236^Patient's Height^Height^
"RTN","SROAUTL4",15,0)
BCG ;;237^Patient's Weight^Weight^
"RTN","SROAUTL4",16,0)
CDF ;;346^Diabetes^Diabetes^
"RTN","SROAUTL4",17,0)
BJC ;;203^History of COPD (Y/N)^COPD^
"RTN","SROAUTL4",18,0)
CDG ;;347^FEV1^FEV1^
"RTN","SROAUTL4",19,0)
BJI ;;209^Cardiomegaly on Chest X-Ray (Y/N)^Cardiomegaly (X-ray)^
"RTN","SROAUTL4",20,0)
CDH ;;348^Pulmonary Rales (Y/N)^Pulmonary Rales^
"RTN","SROAUTL4",21,0)
EAJ ;;510^Current Smoker^Current Smoker^
"RTN","SROAUTL4",22,0)
BBC ;;223^Preoperative Serum Creatinine^Creatinine^290
"RTN","SROAUTL4",23,0)
CDI ;;349^Active Endocarditis (Y/N)^Active Endocarditis^
"RTN","SROAUTL4",24,0)
CEJ ;;350^Resting ST Depression (Y/N)^Resting ST Depression^
"RTN","SROAUTL4",25,0)
BDJ ;;240^Functional Health Status^Functional Status^
"RTN","SROAUTL4",26,0)
CEA ;;351^PCI Status^PCI^
"RTN","SROAUTL4",27,0)
BJE ;;205^Prior Myocardial Infarction^Prior MI^
"RTN","SROAUTL4",28,0)
CEB ;;352^Prior Heart Surgery (Y/N)^Prior Heart Surgery^
"RTN","SROAUTL4",29,0)
BFE ;;265^Peripheral Vascular Disease (Y/N)^Peripheral Vascular Disease^
"RTN","SROAUTL4",30,0)
BFD ;;264^Cerebral Vascular Disease (Y/N)^Cerebral Vascular Disease^
"RTN","SROAUTL4",31,0)
BFG ;;267^Angina (use NYHA Functional Class)^Angina (use CCS Class)^
"RTN","SROAUTL4",32,0)
BJG ;;207^Congestive Heart Failure (use NYHA Functional Class)^CHF (use NYHA Class)^
"RTN","SROAUTL4",33,0)
CEC ;;353^Current Diuretic Use (Y/N)^Current Diuretic Use^
"RTN","SROAUTL4",34,0)
CED ;;354^Current Digoxin Use (Y/N)^Current Digoxin Use^
"RTN","SROAUTL4",35,0)
CEE ;;355^IV NTG within 48 Hours Preceding Surgery (Y/N)^IV NTG within 48 Hours^
"RTN","SROAUTL4",36,0)
CEF ;;356^Preoperative use of IABP (Y/N)^Preop Use of IABP^
"RTN","SROAUTL4",37,0)
CEG ;;357^Left Ventricular End-Diastolic Pressure^LVEDP^
"RTN","SROAUTL4",38,0)
CEH ;;358^Aortic Systolic Pressure^Aortic Systolic Pressure^
"RTN","SROAUTL4",39,0)
CEI ;;359^PA Systolic Pressure^*PA Systolic Pressure^
"RTN","SROAUTL4",40,0)
CFJ ;;360^PAW Mean Pressure^*PAW Mean Pressure^
"RTN","SROAUTL4",41,0)
CFA ;;361^Left Main Stenosis^Left Main Stenosis^
"RTN","SROAUTL4",42,0)
CFBPA ;;362.1^Left Anterior Descending (LAD) Stenosis^LAD Stenosis^
"RTN","SROAUTL4",43,0)
CFBPB ;;362.2^Right Coronary Artery Stenosis^Right Coronary Stenosis^
"RTN","SROAUTL4",44,0)
CFBPC ;;362.3^Circumflex Coronary Artery Stenosis^Circumflex Stenosis^
"RTN","SROAUTL4",45,0)
CFC ;;363^LV Contraction Grade^LV Contraction Grade  (from contrast or radionuclide angiogram or 2D echo^
"RTN","SROAUTL4",46,0)
DAE ;;415^Mitral Regurgitation^Mitral Regurgitation^
"RTN","SROAUTL4",47,0)
CFD ;;364^Physician's Preoperative Estimate of Operative Mortality^Physician's Preoperative Estimate of Operative Mortality^
"RTN","SROAUTL4",48,0)
CFDPA ;;364.1^Date/Time of Estimate of Operative Mortality^Date/Time of Estimate of Operative Mortality^
"RTN","SROAUTL4",49,0)
APAC ;;1.13^ASA Class^ASA Classification^
"RTN","SROAUTL4",50,0)
DAD ;;414^Cardiac Surgical Priority^Surgical Priority^
"RTN","SROAUTL4",51,0)
DADPA ;;414.1^Date/Time of Cardiac Surgical Priority^Date/Time of Cardiac Surgical Priority^
"RTN","SROAUTL4",52,0)
CHD ;;384^Operative Death (Y/N)^Operative Death^
"RTN","SROAUTL4",53,0)
CFE ;;365^CABG Distal Anastomoses with Vein^^
"RTN","SROAUTL4",54,0)
CFF ;;366^CABG Distal Anastomoses with IMA^^
"RTN","SROAUTL4",55,0)
CFG ;;367^Aortic Valve Replacement (Y/N)^Aortic Valve Replacement^
"RTN","SROAUTL4",56,0)
CFH ;;368^Mitral Valve Replacement (Y/N)^Mitral Valve Replacement^
"RTN","SROAUTL4",57,0)
CFI ;;369^Tricuspid Valve Replacement (Y/N)^Tricuspid Valve Replacement^
"RTN","SROAUTL4",58,0)
CGJ ;;370^Valve Repair (Y/N)^Valve Repair^
"RTN","SROAUTL4",59,0)
CGA ;;371^LV Aneurysmectomy (Y/N)^LV Aneurysmectomy^
"RTN","SROAUTL4",60,0)
CGB ;;372^Great Vessel Repair(Y/N)^Great Vessel Repair^
"RTN","SROAUTL4",61,0)
EJE ;;505^Endovascular Repair of Descending Thoracic Aorta (Y/N)^Endovascular Repair
"RTN","SROAUTL4",62,0)
CGC ;;373^Cardiac Transplant (Y/N)^Cardiac Transplant^
"RTN","SROAUTL4",63,0)
CGF ;;376^ASD Repair (Y/N)^ASD Repair^
"RTN","SROAUTL4",64,0)
CHJ ;;380^VSD Repair (Y/N)^VSD Repair^
"RTN","SROAUTL4",65,0)
CGG ;;377^Myxoma Resection (Y/N)^Myxoma Resection^
"RTN","SROAUTL4",66,0)
CHA ;;381^Foreign Body Removal (Y/N)^Foreign Body Removal^
"RTN","SROAUTL4",67,0)
CGH ;;378^Myectomy for IHSS (Y/N)^Myectomy for IHSS^
"RTN","SROAUTL4",68,0)
CHB ;;382^Pericardiectomy (Y/N)^Pericardiectomy^
"RTN","SROAUTL4",69,0)
CGI ;;379^Other Tumor Resection (Y/N)^Other Tumor Resection^
"RTN","SROAUTL4",70,0)
DAF ;;416^CABG Distal Anastomoses with Other Conduit^^
"RTN","SROAUTL4",71,0)
DDB ;;442^Employment Status
"RTN","SROAUTL4",72,0)
BAI ;;219^Preoperative Hemoglobin^^239
"RTN","SROAUTL4",73,0)
BCI ;;239^Preoperative Hemoglobin Date
"RTN","SROAUTL4",74,0)
BBE ;;225^Preoperative Serum Albumin^^292
"RTN","SROAUTL4",75,0)
BIB ;;292^Preoperative Serum Albumin Date
"RTN","SROAUTL4",76,0)
BIJ ;;290^Creatinine Date
"RTN","SROAUTL4",77,0)
DEJ ;;450^Total Ischemic Time
"RTN","SROAUTL4",78,0)
DEA ;;451^Total CPB Time
"RTN","SROAUTL4",79,0)
DDJ ;;440^Cardiac Catheterization Date
"RTN","SROAUTL4",80,0)
DAH ;;418^Hospital Admission Date And Time
"RTN","SROAUTL4",81,0)
DAI ;;419^Hospital Discharge Date And Time
"RTN","SROAUTL4",82,0)
DFC ;;463^Hypertension^
"RTN","SROAUTL4",83,0)
DFD ;;464^Number with Radial Artery^
"RTN","SROAUTL4",84,0)
DFE ;;465^Number with Other Artery^
"RTN","SROAUTL4",85,0)
DFH ;;468^Incision Type^
"RTN","SROAUTL4",86,0)
DFI ;;469^Covert From Off Pump to CPB
"RTN","SROAUTL4",87,0)
DGJ ;;470^Date and Time Patient Extubated
"RTN","SROAUTL4",88,0)
DGA ;;471^Date and Time Patient Discharged from ICU
"RTN","SROAUTL4",89,0)
DGB ;;472^Cardiac Surgery to NON-VA Facility
"RTN","SROAUTL4",90,0)
PBJE ;;.205^Time Patient In OR
"RTN","SROAUTL4",91,0)
PBCB ;;.232^Time Patient Out OR
"RTN","SROAUTL4",92,0)
DEG ;;457^HDL^^457.1
"RTN","SROAUTL4",93,0)
DEGPA ;;457.1^HDL, Date
"RTN","SROAUTL4",94,0)
DEH ;;458^Serum Triglyceride^^458.1
"RTN","SROAUTL4",95,0)
DEHPA ;;458.1^Serum Triglyceride, Date
"RTN","SROAUTL4",96,0)
DEI ;;459^Serum Potassium^^459.1
"RTN","SROAUTL4",97,0)
DEIPA ;;459.1^Serum Potassium, Date
"RTN","SROAUTL4",98,0)
DFJ ;;460^Serum Total Bilirubin^^460.1
"RTN","SROAUTL4",99,0)
DFJPA ;;460.1^Serum Total Bilirubin, Date
"RTN","SROAUTL4",100,0)
DFA ;;461^LDL^^461.1
"RTN","SROAUTL4",101,0)
DFAPA ;;461.1^LDL, Date
"RTN","SROAUTL4",102,0)
DFB ;;462^Total Cholesterol^^462.1
"RTN","SROAUTL4",103,0)
DFBPA ;;462.1^Total Cholesterol, Date
"RTN","SROAUTL4",104,0)
EJD ;;504^Hemoglobin A1c^^504.1
"RTN","SROAUTL4",105,0)
EJDPA ;;504.1^Hemoglobin A1c, Date
"RTN","SROAUTL4",106,0)
DGE ;;475^Diabetes (Cardiac)
"RTN","SROAUTL4",107,0)
DGD ;;474^Preop use of circulatory Device
"RTN","SROAUTL4",108,0)
DGF ;;476^Procedure Type
"RTN","SROAUTL4",109,0)
DGG ;;477^Aortic Stenosis
"RTN","SROAUTL4",110,0)
DGH ;;478^Re-Do Lad Stenosis
"RTN","SROAUTL4",111,0)
DGI ;;479^Re-Do Right Coronary Stenosis
"RTN","SROAUTL4",112,0)
DHJ ;;480^Re-Do Circumflex Stenosis
"RTN","SROAUTL4",113,0)
DHA ;;481^Bridge to transplant/Device
"RTN","SROAUTL4",114,0)
EAB ;;512^Maze Procedure
"RTN","SROAUTL4",115,0)
DHC ;;483^Transmyocardial Laser Revascularization
"RTN","SROAUTL4",116,0)
EJB ;;502^Other Cardiac Procedures (Y/N)
"RTN","SROAUTL4",117,0)
DHD ;;484^Other cardiac procedures (specify)
"RTN","SROAUTL4",118,0)
DHE ;;485^Prior Heart Surgeries
"RTN","SROAUTLC")
0^57^B27492049^B27254291
"RTN","SROAUTLC",1,0)
SROAUTLC ;BIR/ADM - CARDIAC RISK ASSESSMENT UTILITY ;05/03/04
"RTN","SROAUTLC",2,0)
 ;;3.0; Surgery ;**38,71,90,88,95,97,102,96,125,153**;24 Jun 93;Build 11
"RTN","SROAUTLC",3,0)
 ;
"RTN","SROAUTLC",4,0)
 ; Reference to ^DIC(45.3 supported by DBIA #218
"RTN","SROAUTLC",5,0)
 ;
"RTN","SROAUTLC",6,0)
SITE ; determine if site is a cardiac facility
"RTN","SROAUTLC",7,0)
 I $$CARD Q
"RTN","SROAUTLC",8,0)
 W @IOF,!,"The SURGERY SITE PARAMETERS file indicates this site/division does not use ",!,"the Cardiac Risk Assessment module. Therefore, this option is not available",!,"for use.",!
"RTN","SROAUTLC",9,0)
 S XQUIT="" W !!,"Press RETURN to continue  " R X:DTIME W @IOF
"RTN","SROAUTLC",10,0)
 Q
"RTN","SROAUTLC",11,0)
CARD() ; extrinsic call to determine if site is cardiac facility
"RTN","SROAUTLC",12,0)
 N CARD S CARD=0 Q:'$G(SRSITE) CARD
"RTN","SROAUTLC",13,0)
 I $P($G(^SRO(133,SRSITE,0)),"^",5)="Y" S CARD=1
"RTN","SROAUTLC",14,0)
 Q CARD
"RTN","SROAUTLC",15,0)
NOW ; update date/time of surgical priority entry
"RTN","SROAUTLC",16,0)
 N X I $$CARD,$P($G(^SRF(DA,208)),"^",12)'="" D NOW^%DTC S $P(^SRF(DA,208),"^",13)=$E(%,1,12)
"RTN","SROAUTLC",17,0)
 Q
"RTN","SROAUTLC",18,0)
KNOW ; delete date/time of surgical priority entry
"RTN","SROAUTLC",19,0)
 I $D(^SRF(DA,208)) S $P(^SRF(DA,208),"^",13)="^"
"RTN","SROAUTLC",20,0)
 Q
"RTN","SROAUTLC",21,0)
EM ; input transform logic on Case Schedule Type field (.035)
"RTN","SROAUTLC",22,0)
 Q:'$$CARD  N DIR,SREM,SRNOT,SRQ,SRSP
"RTN","SROAUTLC",23,0)
 I X'="EM" S:X="U" $P(^SRF(DA,208),"^",12)=2 S:X'="U" $P(^SRF(DA,208),"^",12)=1 D NOW Q
"RTN","SROAUTLC",24,0)
 S SRQ=0,SRSP=$P(^DIC(45.3,$P(^SRO(137.45,$P(^SRF(DA,0),"^",4),0),"^",2),0),"^") Q:SRSP'=500&(SRSP'=58)  D:SRSP=58 YN Q:SRQ
"RTN","SROAUTLC",25,0)
 D CAT
"RTN","SROAUTLC",26,0)
 Q
"RTN","SROAUTLC",27,0)
CAT N X K DIR S DIR("A",1)="",DIR("A",2)="     Enter category of emergency.",DIR("A",3)="     1. Emergent (ongoing ischemia)",DIR("A",4)="     2. Emergent (hemodynamic compromise)",DIR("A",5)="     3. Emergent (arrest with CPR)"
"RTN","SROAUTLC",28,0)
 S DIR("A",6)="",DIR("A")="     Enter number (1, 2 or 3): ",DIR(0)="NA^1:3",DIR("?")="^D HELP^SROAUTLC" D ^DIR I $D(DTOUT)!$D(DUOUT) Q
"RTN","SROAUTLC",29,0)
 S SREM=Y,$P(^SRF(DA,208),"^",12)=SREM+2 D NOW
"RTN","SROAUTLC",30,0)
 Q
"RTN","SROAUTLC",31,0)
YN N X K DIR S DIR("A",1)="",DIR("A",2)="     Is this emergency case a cardiac procedure requiring cardiopulmonary",DIR("A")="     bypass (Y/N)? ",DIR(0)="YA" D ^DIR I $D(DTOUT)!$D(DUOUT) S SRQ=1 Q
"RTN","SROAUTLC",32,0)
 I 'Y S SRQ=1
"RTN","SROAUTLC",33,0)
 Q
"RTN","SROAUTLC",34,0)
HELP K SRHLP S SRHLP(1)="This is the category of emergency reflecting the patient's cardiovascular",SRHLP(2)="condition at the time of transport to the operating room:",SRHLP(3)=""
"RTN","SROAUTLC",35,0)
 S SRHLP(4)="1. Emergent (ongoing ischemia) - Clinical condition mandates immediate",SRHLP(5)="surgery usually on day of catheterization because of ischemia despite"
"RTN","SROAUTLC",36,0)
 S SRHLP(6)="medical therapy, such as intravenous nitroglycerine.  Ischemia should",SRHLP(7)="be manifested as chest pain and/or ST-segment depression."
"RTN","SROAUTLC",37,0)
 S SRHLP(8)="",SRHLP(9)="2. Emergent (hemodynamic compromise) - Persistent hypotension (arterial",SRHLP(10)="systolic pressure < 80 mm Hg) and/or low cardiac output (cardiac index"
"RTN","SROAUTLC",38,0)
 S SRHLP(11)="< 2.0 L/min/MxM) despite iontropic and/or mechanical circulatory",SRHLP(12)="support mandates immediates surgery within hours of the cardiac",SRHLP(13)="catheterization."
"RTN","SROAUTLC",39,0)
 S SRHLP(14)="",SRHLP(15)="3. Emergent (arrest with CPR) - Patient is taken to the operating room in",SRHLP(16)="full cardiac arrest with the circulation supported by cardiopulmonary"
"RTN","SROAUTLC",40,0)
 S SRHLP(17)="resuscitation (excludes patients being adequately perfused by a",SRHLP(18)="cardiopulmonary support system).",SRHLP(19)=""
"RTN","SROAUTLC",41,0)
 S SRHLP(20)="Enter the appropriate number to designate the category of emergency.",SRHLP(21)="",SRHLP(22)="" D EN^DDIOL(.SRHLP) K SRHLP
"RTN","SROAUTLC",42,0)
 N DIR S DIR(0)="FOA",DIR("A")="Enter RETURN to continue: " D ^DIR I $D(DTOUT)!$D(DUOUT) S SRQ=1 Q
"RTN","SROAUTLC",43,0)
 Q
"RTN","SROAUTLC",44,0)
CHK ; check for missing cardiac assessment information
"RTN","SROAUTLC",45,0)
 K SRX F SRC="CLIN","COC","CP","CLR" K DA,DIC,DIQ,DR,SRY S DIC="^SRF(",DA=SRTN,DIQ="SRY",DIQ(0)="I" D @SRC D EN^DIQ1 D ^SROAUTL4
"RTN","SROAUTLC",46,0)
 Q
"RTN","SROAUTLC",47,0)
CLIN S DR="236;237;475;203;347;209;348;510;223;290;219;239;225;292;349;350;240;351;205;352;485;265;264;267;207;353;354;355;463;474"
"RTN","SROAUTLC",48,0)
 Q
"RTN","SROAUTLC",49,0)
COC S DR="476;477;357;358;359;360;361;362.1;362.2;362.3;363;415;474;364;364.1;1.13;414;414.1;384;.22;.23;472;478;479;480"
"RTN","SROAUTLC",50,0)
 Q
"RTN","SROAUTLC",51,0)
CP S DR="365;366;464;465;416;367;368;369;370;371;372;505;450;451;373;376;380;377;381;378;382;379;468;469;.205;.232;470;471;418;419;440;481;512;483;502"
"RTN","SROAUTLC",52,0)
 I $P($G(^SRF(SRTN,209)),"^",13)="Y"!($P($G(^SRF(SRTN,209)),"^",13)="") S DR=DR_";484"
"RTN","SROAUTLC",53,0)
 Q
"RTN","SROAUTLC",54,0)
CLR S DR="457;457.1;458;458.1;459;459.1;460;460.1;461;461.1;462;462.1;504;504.1"
"RTN","SROAUTLC",55,0)
 Q
"RTN","SROAWL")
0^9^B32512298^B25459866
"RTN","SROAWL",1,0)
SROAWL ;BIR/ADM - REPORT OF MONTHLY CASE WORKLOAD TOTALS ;06/13/06
"RTN","SROAWL",2,0)
 ;;3.0; Surgery ;**38,47,50,86,141,153**;24 Jun 93;Build 11
"RTN","SROAWL",3,0)
 N SRINSTP,SRSEL S (SRSOUT,SRT)=0,SRP=1,SRINST=SRSITE("SITE"),SRINSTP=SRSITE("DIV")
"RTN","SROAWL",4,0)
START G:SRSOUT END W @IOF,!,"Report of Monthly Case Workload Totals",!!
"RTN","SROAWL",5,0)
 K DIR S DIR("A",1)="Print which report?",DIR("A",2)="",DIR("A",3)="1. Report for Single Month"
"RTN","SROAWL",6,0)
 S DIR("A",4)="2. Report for Range of Months",DIR("A",5)="",DIR("A")="Select Number (1 or 2): ",DIR("B")="1"
"RTN","SROAWL",7,0)
 S DIR(0)="NA^1:2:0" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 G END
"RTN","SROAWL",8,0)
 S SRSEL=Y I SRSEL=2 D TWO Q
"RTN","SROAWL",9,0)
 W @IOF,"This option provides a report of the monthly risk assessment surgical case",!,"workload totals which include the following categories:",!
"RTN","SROAWL",10,0)
 W ?5,"1. All cases performed",!,?5,"2. Excluded cases",!,?5,"3. Assessed cases",!,?5,"4. Not logged major cases",!,?5,"5. Cardiac cases",!,?5,"6. Non-cardiac cases",!,?5,"7. Assessed cases per day (based on 20 days/month)"
"RTN","SROAWL",11,0)
 W !!,"The second part of this report provides the total number of incomplete",!,"assessments remaining for the month selected and the prior 12 months."
"RTN","SROAWL",12,0)
DATE D GETDT W ! K DIR S DIR("A")="Compile workload totals for which month and year? ",DIR(0)="DA^::MX",DIR("B")=SRM_" "_SRY,DIR("?",1)="Enter the month and year for which to run this report,"
"RTN","SROAWL",13,0)
 S DIR("?")="for example, 'MAY 94', 'MAY 1994', '5/94' or '5 94'." D ^DIR I $D(DTOUT)!$D(DUOUT)!'Y S SRSOUT=1 G END
"RTN","SROAWL",14,0)
 S SRDT=Y D  G:SRSOUT END G:'$D(SRDT) DATE S SRDT=$E(SRDT,1,5)_"00"
"RTN","SROAWL",15,0)
 .Q:SRDT=SRD  S SRY=$E(Y,1,3)+1700,Z=+$E(Y,4,5) D MONTH
"RTN","SROAWL",16,0)
 .W !! K DIR S DIR("A")="Compile totals for "_SRM_" "_SRY,DIR(0)="Y",DIR("B")="YES" D ^DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 Q
"RTN","SROAWL",17,0)
 .I 'Y K SRDT
"RTN","SROAWL",18,0)
DIV S (SRCNT,X)=0 F  S X=$O(^SRO(133,X)) Q:'X  I '$P(^SRO(133,X,0),"^",21) S SRCNT=SRCNT+1
"RTN","SROAWL",19,0)
 I SRCNT=1,SRSEL=1 G TRAN
"RTN","SROAWL",20,0)
 S SRINST=$$INST^SROUTL0() G:SRINST="^" END S SRINSTP=$P(SRINST,"^"),SRINST=$S(SRINST["ALL DIVISIONS":SRINST,1:$P(SRINST,"^",2))
"RTN","SROAWL",21,0)
 I SRINST'["ALL DIVISIONS"!(SRSEL=2) G IO
"RTN","SROAWL",22,0)
TRAN W ! K DIR S DIR("A",1)="This report may be printed and/or transmitted to the national database.",DIR("A",2)=""
"RTN","SROAWL",23,0)
 S DIR("A")="Do you want this report to be transmitted to the central database",DIR("B")="NO",DIR("?",1)="Enter YES to have this report automatically transmitted to the central"
"RTN","SROAWL",24,0)
 S DIR("?")="database.  Enter NO if you do NOT want this report transmitted.",DIR(0)="Y" D ^DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 G END
"RTN","SROAWL",25,0)
 I 'Y G IO
"RTN","SROAWL",26,0)
PRT S SRT=1,SRP=0 W ! K DIR S DIR("A")="Do you also want to print this report",DIR("B")="YES",DIR("?",1)="Enter NO if you want to have this report transmitted, but do not want to"
"RTN","SROAWL",27,0)
 S DIR("?",2)="have it printed.  Enter YES if you do want to print the report as well as",DIR("?")="have it transmitted.",DIR(0)="Y" D ^DIR S:Y SRP=1 I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 G END
"RTN","SROAWL",28,0)
 I 'SRP G QUE
"RTN","SROAWL",29,0)
IO W ! K %ZIS,IO("Q"),POP S %ZIS("A")="Print report on which Device: ",%ZIS="Q" D ^%ZIS I POP S SRSOUT=1 G END
"RTN","SROAWL",30,0)
 I $D(IO("Q")) K IO("Q") S ZTDESC="Report of Surgical Case Workload" D  S ZTRTN="RUN^SROAWL" D ^%ZTLOAD S SRSOUT=1 G END
"RTN","SROAWL",31,0)
 .S (ZTSAVE("SRDT"),ZTSAVE("SRP"),ZTSAVE("SRT"),ZTSAVE("SRINST"),ZTSAVE("SRINSTP"),ZTSAVE("SRSEL"))=""
"RTN","SROAWL",32,0)
 .I SRSEL=2 S ZTSAVE("SREDT")=""
"RTN","SROAWL",33,0)
RUN ; entry point when queued
"RTN","SROAWL",34,0)
 D ^SROAWL1
"RTN","SROAWL",35,0)
END I 'SRSOUT,$E(IOST)="C" W !! K DIR S DIR(0)="FOA",DIR("A")="Press RETURN to continue" D ^DIR
"RTN","SROAWL",36,0)
 W:$E(IOST)="P" @IOF K ^TMP("SRM",$J) I $D(ZTQUEUED) Q:$G(ZTSTOP)  S ZTREQ="@" Q
"RTN","SROAWL",37,0)
 D ^%ZISC K SRTN W @IOF D ^SRSKILL
"RTN","SROAWL",38,0)
 Q
"RTN","SROAWL",39,0)
TWO S X=$E(DT,1,3)-1,SRD=X_"1000",SRY=X+1700,SRM="OCT "_SRY
"RTN","SROAWL",40,0)
 W ! K DIR S DIR("A")="Start with which month and year? "
"RTN","SROAWL",41,0)
 S DIR(0)="DA^::EMX",DIR("B")=SRM,DIR("?",1)="Enter the starting month and year for this report, for example,"
"RTN","SROAWL",42,0)
 S DIR("?")="'OCT 2005', 'OCT 05', '10/05' or '10 05'." D ^DIR I $D(DTOUT)!$D(DUOUT)!'Y S SRSOUT=1 G END
"RTN","SROAWL",43,0)
 S SRDT=Y D GETDT
"RTN","SROAWL",44,0)
DT2 W ! K DIR S DIR("A")="End with which month and year? ",DIR(0)="DA^::EMX",DIR("B")=SRM_" "_SRY
"RTN","SROAWL",45,0)
 S DIR("?",1)="Enter the ending month and year for this report, for example,"
"RTN","SROAWL",46,0)
 S DIR("?")="'OCT 2005', 'OCT 05', '10/05' or '10 05'." D ^DIR I $D(DTOUT)!$D(DUOUT)!'Y S SRSOUT=1 G END
"RTN","SROAWL",47,0)
 S SREDT=Y G:'$G(SREDT) DT2 S SREDT=$E(SREDT,1,5)_"00"
"RTN","SROAWL",48,0)
 I SREDT<SRDT W !!,"Ending date must not be earlier than starting date!" K SREDT G TWO
"RTN","SROAWL",49,0)
 G DIV
"RTN","SROAWL",50,0)
 Q
"RTN","SROAWL",51,0)
GETDT S X=+$E(DT,4,5) S:X'=1 Z=X-1 S:X=1 Z=12 D MONTH S X=$E(DT,1,3) S:Z=12 X=X-1 S Z=$S($L(Z)=1:"0"_Z,1:Z) S SRY=X+1700,SRD=X_Z_"00"
"RTN","SROAWL",52,0)
 Q
"RTN","SROAWL",53,0)
MONTH ; get name of month
"RTN","SROAWL",54,0)
 S SRM=$S(Z=2:"FEB",Z=3:"MAR",Z=4:"APR",Z=5:"MAY",Z=6:"JUN",Z=7:"JUL",Z=8:"AUG",Z=9:"SEP",Z=10:"OCT",Z=11:"NOV",Z=12:"DEC",1:"JAN")
"RTN","SROAWL",55,0)
 Q
"RTN","SROAWL",56,0)
QUE ; queue transmission of report to national database
"RTN","SROAWL",57,0)
 W ! K %DT S %DT("A")="Queue report to run at what date/time? ",%DT(0)="NOW",%DT("B")="NOW",%DT="AEFXT" D ^%DT I 'Y S SRSOUT=1 G END
"RTN","SROAWL",58,0)
 S ZTDTH=Y,ZTIO="",ZTDESC="Report of Surgical Case Workload",(ZTSAVE("SRDT"),ZTSAVE("SRP"),ZTSAVE("SRT"),ZTSAVE("SRINST"),ZTSAVE("SRINSTP"),ZTSAVE("SRSTATN"),ZTSAVE("SRSEL"))="",ZTRTN="RUN^SROAWL" D ^%ZTLOAD G END
"RTN","SROAWL",59,0)
 Q
"RTN","SROAWL",60,0)
TASK ; automatic transmission of workload report called by nightly process
"RTN","SROAWL",61,0)
 D NOW^%DTC Q:+%I(2)<9  S SRDAY=+%I(2),SRNOW=$E(%,1,12) D GETDT S SRDT=SRD
"RTN","SROAWL",62,0)
 S SRS=$O(^SRO(133,0)) Q:'SRS  S SRL=$P(^SRO(133,SRS,0),"^",13) I SRL=SRD G STOP
"RTN","SROAWL",63,0)
 S SRP=0,SRT=1,X=$$SITE^SROVAR,SRINST=$P(X,"^",2),SRINSTP="ALL DIVISIONS",SRSEL=1
"RTN","SROAWL",64,0)
 D ^SROAWL1 S SRS=$O(^SRO(133,0)),$P(^SRO(133,SRS,0),"^",13)=SRDT
"RTN","SROAWL",65,0)
STOP D ^SRSKILL K SRTN
"RTN","SROAWL",66,0)
 Q
"RTN","SROAWL1")
0^10^B32202367^B30717268
"RTN","SROAWL1",1,0)
SROAWL1 ;BIR/ADM - REPORT OF CASE WORKLOAD TOTALS (CONTINUED) ;03/22/06
"RTN","SROAWL1",2,0)
 ;;3.0; Surgery ;**38,47,60,62,68,50,86,88,92,153**;24 Jun 93;Build 11
"RTN","SROAWL1",3,0)
 ; SRTOTAL(1) = total of all cases completed (excluding aborted cases)
"RTN","SROAWL1",4,0)
 ; SRTOTAL(2) = excluded cases
"RTN","SROAWL1",5,0)
 ; SRTOTAL(3) = assessed cases
"RTN","SROAWL1",6,0)
 ; SRTOTAL(4) = not logged major cases
"RTN","SROAWL1",7,0)
 ; SRTOTAL(5) = cardiac cases
"RTN","SROAWL1",8,0)
 ; SRTOTAL(6) = non-cardiac cases
"RTN","SROAWL1",9,0)
 ; SRTOTAL(7) = assessed cases per day (at 20 days per month)
"RTN","SROAWL1",10,0)
 ; SRTOTAL(8) = total major cases
"RTN","SROAWL1",11,0)
 ; SRTOTAL(9) = total minor cases
"RTN","SROAWL1",12,0)
 ;
"RTN","SROAWL1",13,0)
 I SRP U IO
"RTN","SROAWL1",14,0)
 N SRDIV,SRMULT S (SRDIV,SRMULT,SRSOUT)=0
"RTN","SROAWL1",15,0)
 I SRT S (SRCNT,X)=0 D
"RTN","SROAWL1",16,0)
 .F  S X=$O(^SRO(133,X)) Q:'X  I '$P($G(^SRO(133,X,0)),"^",21) S SRCNT=SRCNT+1,SRDIV(X)=$P(^SRO(133,X,0),"^")
"RTN","SROAWL1",17,0)
 .I SRCNT>1 S SRMULT=1
"RTN","SROAWL1",18,0)
BEG S SRSDATE=SRDT I SRSEL=1 S X=+$E(SRDT,4,5),X=$S(X'=12:X+1,1:1),Y=$E(SRDT,1,3),Y=$S(X>1:Y,1:Y+1),SRED=Y_$S($L(X)=1:"0"_X,1:X)_"00"
"RTN","SROAWL1",19,0)
 I SRSEL=2 S X=$E(SREDT,1,5),SRED=X_"99"
"RTN","SROAWL1",20,0)
 K SRTOTAL F I=1:1:9 S SRTOTAL(I)=0
"RTN","SROAWL1",21,0)
 N SREXCL F I=0:1:9 S SREXCL(I)=0
"RTN","SROAWL1",22,0)
 S:'$D(SRINSTP) SRINSTP="ALL DIVISIONS"
"RTN","SROAWL1",23,0)
 I SRSEL=1 D MOS S Y=SRDT X ^DD("DD") S SRM="FOR "_Y,SRTITLE="REPORT OF MONTHLY SURGICAL CASE WORKLOAD"
"RTN","SROAWL1",24,0)
 I SRSEL=2 S SRTITLE="REPORT OF SURGICAL CASE WORKLOAD" D
"RTN","SROAWL1",25,0)
 .S Y=SRDT X ^DD("DD") S SRM="FOR "_Y_" THROUGH " S Y=SREDT X ^DD("DD") S SRM=SRM_Y
"RTN","SROAWL1",26,0)
 F  S SRSDATE=$O(^SRF("AC",SRSDATE)) Q:SRSDATE>SRED!'SRSDATE  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSDATE,SRTN)) Q:'SRTN  I $D(^SRF(SRTN,0)),$$MANDIV^SROUTL0(SRINSTP,SRTN) D CASE
"RTN","SROAWL1",27,0)
 F K="C","N" S SRDFN=0 F  S SRDFN=$O(^SRF("ARS",K,"I",SRDFN)) Q:'SRDFN  S SRTN=0 F  S SRTN=$O(^SRF("ARS",K,"I",SRDFN,SRTN)) Q:'SRTN  I $D(^SRF(SRTN,0)),$$MANDIV^SROUTL0(SRINSTP,SRTN) D OPDATE
"RTN","SROAWL1",28,0)
 I SRSEL=1 S SRTOTAL(7)=SRTOTAL(3)/20 D:'SRP INC D:SRP OUT G:SRSOUT END D:SRT TMIT
"RTN","SROAWL1",29,0)
 I SRSEL=2 D OUT
"RTN","SROAWL1",30,0)
END K SRINSTP,SRTOTAL,^TMP("SRM",$J) I SRT,SRMULT S SRP=0 S SRDIV=$O(SRDIV(SRDIV)) Q:'SRDIV  D SITE,BEG
"RTN","SROAWL1",31,0)
 Q
"RTN","SROAWL1",32,0)
CASE ; examine case
"RTN","SROAWL1",33,0)
 Q:$P($G(^SRF(SRTN,30)),"^")!$P($G(^SRF(SRTN,31)),"^",8)!'($P($G(^SRF(SRTN,.2)),"^",12)!($P($G(^SRF(SRTN,.2)),"^",3)))
"RTN","SROAWL1",34,0)
 S SRTOTAL(1)=SRTOTAL(1)+1,SRMAJ=$S($P(^SRF(SRTN,0),"^",3)="J":1,1:0) S:SRMAJ SRTOTAL(8)=SRTOTAL(8)+1 I 'SRMAJ S SRTOTAL(9)=SRTOTAL(9)+1
"RTN","SROAWL1",35,0)
 S SRA=$G(^SRF(SRTN,"RA")),SRTYPE=$P(SRA,"^",2) S:SRTYPE=""&SRMAJ SRTOTAL(4)=SRTOTAL(4)+1 S:SRTYPE="C" SRTOTAL(5)=SRTOTAL(5)+1
"RTN","SROAWL1",36,0)
 S SRASS=$P(SRA,"^",6) D
"RTN","SROAWL1",37,0)
 .I SRASS="N" S SRTOTAL(2)=SRTOTAL(2)+1,X=$P(SRA,"^",7) S:X SREXCL(X)=SREXCL(X)+1
"RTN","SROAWL1",38,0)
 .I SRASS="Y" S SRTOTAL(3)=SRTOTAL(3)+1
"RTN","SROAWL1",39,0)
 I SRTYPE="N",SRASS="Y" S SRTOTAL(6)=SRTOTAL(6)+1
"RTN","SROAWL1",40,0)
 Q
"RTN","SROAWL1",41,0)
OPDATE ; get date of operation
"RTN","SROAWL1",42,0)
 S SRA=$G(^SRF(SRTN,"RA")) I $P(SRA,"^")'="I" K ^SRF("ARS",K,"I",SRDFN,SRTN) Q
"RTN","SROAWL1",43,0)
 S SRTYPE=$P(SRA,"^",2) I SRTYPE'=K K ^SRF("ARS",K,"I",SRDFN,SRTN) Q
"RTN","SROAWL1",44,0)
 I SRSEL=1 S SRMONTH=$E($P(^SRF(SRTN,0),"^",9),1,5)_"00" I $D(^TMP("SRM",$J,SRMONTH,K)) S ^TMP("SRM",$J,SRMONTH,K)=^TMP("SRM",$J,SRMONTH,K)+1
"RTN","SROAWL1",45,0)
 Q
"RTN","SROAWL1",46,0)
OUT ; print report
"RTN","SROAWL1",47,0)
 W:$Y @IOF W !,?(80-$L(SRINST)\2),SRINST,!,?(80-$L(SRTITLE)\2),SRTITLE,!,?(80-$L(SRM)\2),SRM,!,?15 F I=1:1:50 W "-"
"RTN","SROAWL1",48,0)
 W !,?20,"TOTAL CASES PERFORMED",?54,"=",$J(SRTOTAL(1),6),!,?24,"TOTAL MAJOR CASES",?54,"=",$J(SRTOTAL(8),6)
"RTN","SROAWL1",49,0)
 W !,?24,"TOTAL MINOR CASES",?54,"=",$J(SRTOTAL(9),6),!,?20,"CASES MEETING EXCLUSION CRITERIA",?54,"=",$J(SRTOTAL(2),6)
"RTN","SROAWL1",50,0)
 W !,?24,"NON-SURGEON CASE",?54,"=",$J(SREXCL(0),6),!,?24,"ANESTHESIA TYPE",?54,"=",$J(SREXCL(1),6)
"RTN","SROAWL1",51,0)
 W !,?24,"EXCEEDS MAX. ASSESSMENTS",?54,"=",$J(SREXCL(2),6),!,?24,"EXCEEDS MAXIMUM TURPS",?54,"=",$J(SREXCL(3),6)
"RTN","SROAWL1",52,0)
 W !,?24,"STUDY CRITERIA",?54,"=",$J(SREXCL(4),6),!,?24,"SCNR WAS ON A/L",?54,"=",$J(SREXCL(6),6)
"RTN","SROAWL1",53,0)
 W !,?24,"CONCURRENT CASE",?54,"=",$J(SREXCL(8),6),!,?24,"EXCEEDS MAXIMUM HERNIAS",?54,"=",$J(SREXCL(9),6)
"RTN","SROAWL1",54,0)
 W !,?20,"ASSESSED CASES",?54,"=",$J(SRTOTAL(3),6),!,?20,"NOT LOGGED MAJOR CASES",?54,"=",$J(SRTOTAL(4),6)
"RTN","SROAWL1",55,0)
 W !,?20,"CARDIAC CASES",?54,"=",$J(SRTOTAL(5),6),!,?20,"NON-CARDIAC CASES",?54,"=",$J(SRTOTAL(6),6)
"RTN","SROAWL1",56,0)
 W:SRSEL=1 !,?20,"ASSESSED CASES PER DAY",?54,"=",$J(SRTOTAL(7),9,2) W !,?15 F I=1:1:50 W "-"
"RTN","SROAWL1",57,0)
 Q:SRSEL=2  I $E(IOST)="C" D PRESS Q:SRSOUT  W @IOF
"RTN","SROAWL1",58,0)
INC S (SRCT,SRT1,SRTC)=0 W:SRP !!!!,?12,"NUMBER OF INCOMPLETE ASSESSMENTS REMAINING FOR PAST YEAR",!!,?29,"CARDIAC",?40,"NON-CARDIAC",?56,"TOTAL",!,?29,"-------",?40,"-----------",?56,"-----"
"RTN","SROAWL1",59,0)
 S SRMONTH=0,SRSST="" F  S SRMONTH=$O(^TMP("SRM",$J,SRMONTH)) Q:'SRMONTH  D
"RTN","SROAWL1",60,0)
 .I SRP S Y=SRMONTH X ^DD("DD") W !,?19,Y
"RTN","SROAWL1",61,0)
 .S SRC=^TMP("SRM",$J,SRMONTH,"C"),SRN=^TMP("SRM",$J,SRMONTH,"N"),SRTO=SRC+SRN,SRCT=SRCT+SRC,SRT1=SRT1+SRN,SRTC=SRTC+SRTO,SRSST=SRSST_SRMONTH_"^"_SRC_"^"_SRN_"^"
"RTN","SROAWL1",62,0)
 .W:SRP ?30,$J(SRC,5),?43,$J(SRN,5),?55,$J(SRTO,5)
"RTN","SROAWL1",63,0)
 W:SRP !,?29,"-------",?40,"-----------",?56,"-----",!,?30,$J(SRCT,5),?43,$J(SRT1,5),?55,$J(SRTC,5)
"RTN","SROAWL1",64,0)
 Q
"RTN","SROAWL1",65,0)
TMIT ; transmit report to national database
"RTN","SROAWL1",66,0)
 S ISC=0,SRD=^XMB("NETNAME") I $E(SRD,1,3)="FO-"!(SRD["ISC-")!(SRD["ISC.")!(SRD["FORUM")!(SRD["TST")!(SRD[".FO-") S ISC=1
"RTN","SROAWL1",67,0)
 K SRMSG S SRSTATN=$P($$SITE^SROVAR,"^",3)_$S(SRDIV:"-"_SRDIV,1:""),SRMSG(1)=SRSTATN_"^"_SRDT_"^"_DT F I=1:1:9 S SRMSG(1)=SRMSG(1)_"^"_SRTOTAL(I)
"RTN","SROAWL1",68,0)
 F I=1,2,3,4,6,8,9 S SRMSG(1)=SRMSG(1)_"^"_SREXCL(I)
"RTN","SROAWL1",69,0)
 I SRDIV S SRMSG(1)=SRMSG(1)_"^"_SRINST_"^"_$$GET1^DIQ(4,SRINSTP,99)
"RTN","SROAWL1",70,0)
 S SRMSG(2)=SRSTATN_"^"_SRSST
"RTN","SROAWL1",71,0)
 I $D(SRNOACK) S SRMSG(3)=SRSTATN_"^"_SRNOACK
"RTN","SROAWL1",72,0)
 S X=$$ACTIVE^XUSER(DUZ) I '+X S XMDUZ=.5
"RTN","SROAWL1",73,0)
 S XMSUB="SURGERY WORKLOAD "_SRM
"RTN","SROAWL1",74,0)
 I ISC S XMY("G.RISK ASSESSMENT")=""
"RTN","SROAWL1",75,0)
 I 'ISC S (XMY("S.SRAWSERV@FO-HINES.MED.VA.GOV"),XMY("G.SRCOSERV@FO-HINES.MED.VA.GOV"))=""
"RTN","SROAWL1",76,0)
 S XMTEXT="SRMSG(" D ^XMD K XMSUB,XMY,XMDUZ,XMTEXT
"RTN","SROAWL1",77,0)
 Q
"RTN","SROAWL1",78,0)
MOS ; set up array for past 12 months
"RTN","SROAWL1",79,0)
 K SRMONTH S SRYR=$E(SRDT,1,3),SRMONTH=+$E(SRDT,4,5)
"RTN","SROAWL1",80,0)
 S J=1 F  S:$L(SRMONTH)=1 SRMONTH="0"_SRMONTH S SRMONTH(J)=SRYR_SRMONTH_"00" S SRMONTH=+SRMONTH,SRMONTH=$S(SRMONTH=1:12,1:SRMONTH-1),SRYR=$S(SRMONTH=12:SRYR-1,1:SRYR),J=J+1 Q:J>13
"RTN","SROAWL1",81,0)
 K ^TMP("SRM",$J) F I=1:1:13 F J="C","N" S ^TMP("SRM",$J,SRMONTH(I),J)=0
"RTN","SROAWL1",82,0)
 Q
"RTN","SROAWL1",83,0)
PRESS Q:$E(IOST)'="C"  W ! K DIR S DIR(0)="E" D ^DIR K DIR I 'Y S SRSOUT=1
"RTN","SROAWL1",84,0)
 Q
"RTN","SROAWL1",85,0)
SITE S SRINSTP=SRDIV(SRDIV),SRINST=$$GET1^DIQ(4,SRINSTP,.01)
"RTN","SROAWL1",86,0)
 Q
"RTN","SROCCAT")
0^58^B16152950^B15686629
"RTN","SROCCAT",1,0)
SROCCAT ;BIR/MAM - PERIOPERATIVE OCCURRENCE UPDATE (Y/N) FIELDS ;03/13/06
"RTN","SROCCAT",2,0)
 ;;3.0; Surgery ;**38,47,95,138,153**;24 Jun 93;Build 11
"RTN","SROCCAT",3,0)
 S ZTDTH=$H,ZTIO="",ZTRTN="EN^SROCCAT",ZTSAVE("SRTN")="",ZTDESC="Update Perioperative Occurrences for Individual Patient" D ^%ZTLOAD
"RTN","SROCCAT",4,0)
 Q
"RTN","SROCCAT",5,0)
EN ; entry when queued
"RTN","SROCCAT",6,0)
 K SRCOMPS S (CNT,CMP)=0 F  S CMP=$O(^SRF(SRTN,10,CMP)) Q:'CMP  S COMP=$P(^SRF(SRTN,10,CMP,0),"^",2) I COMP S CNT=CNT+1,SRCOMPS(CNT)=COMP_"^"_$P(^(0),"^",3)
"RTN","SROCCAT",7,0)
 S CMP=0 F  S CMP=$O(^SRF(SRTN,16,CMP)) Q:'CMP  S COMP=$P(^SRF(SRTN,16,CMP,0),"^",2) I COMP S SRDATE="" D
"RTN","SROCCAT",8,0)
 .S SRDATE=$E($P(^SRF(SRTN,16,CMP,0),"^",7),1,7) I SRDATE S X1=$E($P(^SRF(SRTN,0),"^",9),1,7),X2=30 D C^%DTC I SRDATE>X Q
"RTN","SROCCAT",9,0)
 .S CNT=CNT+1,SRCOMPS(CNT)=COMP_"^"_$P(^SRF(SRTN,16,CMP,0),"^",3)
"RTN","SROCCAT",10,0)
 K DR,DIE,DA S DA=SRTN,DIE=130,DR="[SRO-NOCOMP]" D ^DIE K DR,DA
"RTN","SROCCAT",11,0)
 I '$D(SRCOMPS(1)) S ZTREQ="@" Q
"RTN","SROCCAT",12,0)
 S CNT=0 F  S CNT=$O(SRCOMPS(CNT)) Q:'CNT  S COMPL=$P(SRCOMPS(CNT),"^") D UPDATE
"RTN","SROCCAT",13,0)
 S ZTREQ="@"
"RTN","SROCCAT",14,0)
 Q
"RTN","SROCCAT",15,0)
UPDATE ; update Y/N questions
"RTN","SROCCAT",16,0)
 I COMPL=1 K DA,DR,DIE S DA=SRTN,DIE=130,DR="403////Y;248////Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",17,0)
 I COMPL=2 K DA,DR,DIE S DA=SRTN,DIE=130,DR="403////Y;249////Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",18,0)
 I COMPL=3 K DA,DR,DIE S DA=SRTN,DIE=130,DR="322////Y;250////Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",19,0)
 I COMPL=4 K DA,DR,DIE S DA=SRTN,DIE=130,DR="318////Y;251////Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",20,0)
 I COMPL=5 K DA,DR,DIE S DA=SRTN,DIE=130,DR="318////Y;252///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",21,0)
 I COMPL=6 K DA,DR,DIE S DA=SRTN,DIE=130,DR="318////Y;285///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",22,0)
 I COMPL=7 K DA,DR,DIE S DA=SRTN,DIE=130,DR="318////Y;412///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",23,0)
 I COMPL=8 K DA,DR,DIE S DA=SRTN,DIE=130,DR="319////Y;409///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",24,0)
 I COMPL=9 K DA,DR,DIE S DA=SRTN,DIE=130,DR="319////Y;254///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",25,0)
 I COMPL=10 K DA,DR,DIE S DA=SRTN,DIE=130,DR="319////Y;255///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",26,0)
 I COMPL=11 K DA,DR,DIE S DA=SRTN,DIE=130,DR="321////Y;259///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",27,0)
 I COMPL=12!(COMPL=28) K DA,DR,DIE S DA=SRTN,DIE=130,DR="320////Y;256///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",28,0)
 I COMPL=13 K DA,DR,DIE S DA=SRTN,DIE=130,DR="320////Y;410///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",29,0)
 I COMPL=14 K DA,DR,DIE S DA=SRTN,DIE=130,DR="320////Y;287///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",30,0)
 I COMPL=15 K DA,DR,DIE S DA=SRTN,DIE=130,DR="322////Y;257///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",31,0)
 I COMPL=16 K DA,DR,DIE S DA=SRTN,DIE=130,DR="321////Y;411///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",32,0)
 I COMPL=17 K DA,DR,DIE S DA=SRTN,DIE=130,DR="385///Y;321////Y;258///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",33,0)
 I COMPL=18 K DA,DR,DIE S DA=SRTN,DIE=130,DR="322////Y;345///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",34,0)
 I COMPL=19 K DA,DR,DIE S DA=SRTN,DIE=130,DR="322////Y;261///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",35,0)
 I COMPL=20 K DA,DR,DIE S DA=SRTN,DIE=130,DR="322////Y;263///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",36,0)
 I COMPL=21 K DA,DR,DIE S DA=SRTN,DIE=130,DR="322////Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",37,0)
 I COMPL=22 K DA,DR,DIE S DA=SRTN,DIE=130,DR="403////Y;404///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",38,0)
 I COMPL=23 K DA,DR,DIE S DA=SRTN,DIE=130,DR="386////Y" D ^DIE K DR,DIE,DA Q
"RTN","SROCCAT",39,0)
 I COMPL=24 K DA,DR,DIE S DA=SRTN,DIE=130,DR="387////Y" D ^DIE K DR,DIE,DA Q
"RTN","SROCCAT",40,0)
 I COMPL=25 K DA,DR,DIE S DA=SRTN,DIE=130,DR="388////Y" D ^DIE K DR,DIE,DA Q
"RTN","SROCCAT",41,0)
 I COMPL=26 K DA,DR,DIE S DA=SRTN,DIE=130,DR="389////Y" D ^DIE K DR,DIE,DA Q
"RTN","SROCCAT",42,0)
 I COMPL=27 K DA,DR,DIE S DA=SRTN,DIE=130,DR="391////Y" D ^DIE K DR,DIE,DA Q
"RTN","SROCCAT",43,0)
 I COMPL=29 K DA,DR,DIE S DA=SRTN,DIE=130,DR="318////Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",44,0)
 I COMPL=30 K DA,DR,DIE S DA=SRTN,DIE=130,DR="320////Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",45,0)
 I COMPL=31 K DA,DR,DIE S DA=SRTN,DIE=130,DR="319////Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",46,0)
 I COMPL=32 K DA,DR,DIE S DA=SRTN,DIE=130,DR="321////Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",47,0)
 I COMPL=33 K DA,DR,DIE S DA=SRTN,DIE=130,DR="466////Y" D ^DIE K DR,DIE,DA Q
"RTN","SROCCAT",48,0)
 I COMPL=34 K DA,DR,DIE S DA=SRTN,DIE=130,DR="467////Y" D ^DIE K DR,DIE,DA Q
"RTN","SROCCAT",49,0)
 I COMPL=35 K DA,DR,DIE S DA=SRTN,DIE=130,DR="322////Y;488////Y" D ^DIE K DR,DIE,DA Q
"RTN","SROCCAT",50,0)
 I COMPL=36 K DA,DR,DIE S DA=SRTN,DIE=130,DR="403////Y" D ^DIE K DR,DIE,DA Q
"RTN","SROCCAT",51,0)
 I COMPL=37 K DA,DR,DIE S DA=SRTN,DIE=130,DR="318////Y;490///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",52,0)
 Q
"RTN","SROCL1")
0^41^B10860164^B10392468
"RTN","SROCL1",1,0)
SROCL1 ;BIR/SJA - LOAD CARDIAC LAB DATA ;03/16/06
"RTN","SROCL1",2,0)
 ;;3.0; Surgery ;**95,125,153**;24 Jun 93;Build 11
"RTN","SROCL1",3,0)
 ;
"RTN","SROCL1",4,0)
 ; Reference to ^LR( supported by DBIA #194
"RTN","SROCL1",5,0)
 ;
"RTN","SROCL1",6,0)
 Q:'$D(SRTN)  K SRAD,SRAT S SRSOUT=0
"RTN","SROCL1",7,0)
 W !!,"This selection loads the most recent cardiac lab data for tests performed",!,"preoperatively."
"RTN","SROCL1",8,0)
YEP W !!,"Do you want to automatically load cardiac lab data ?  YES//" R SRYN:DTIME G:'$T!(SRYN["^") END
"RTN","SROCL1",9,0)
 S SRYN=$E(SRYN) I "YyNn"'[SRYN W !!,"Enter <RET> to automatically load cardiac lab data from the patient's lab",!,"record, or 'NO' to return to the menu." G YEP
"RTN","SROCL1",10,0)
 I "Yy"'[SRYN W !!,"Lab data NOT loaded." G END
"RTN","SROCL1",11,0)
START S SRALR=$S($D(^DPT($P(^SRF(SRTN,0),"^"),"LR")):$P(^("LR"),"^"),1:"")
"RTN","SROCL1",12,0)
 S SRAOP=$P($G(^SRF(SRTN,.2)),U,2) I 'SRAOP S SRAOP=$P($G(^(0)),U,9) I 'SRAOP S SRSOUT=1 W !!,"No Date of Operation found !" G END
"RTN","SROCL1",13,0)
 N SREND0,SREND1,SREND1 S SRST=9999999-SRAOP,X1=SRAOP,X2=-90 D C^%DTC S SREND0=9999999-X
"RTN","SROCL1",14,0)
 S X1=SRAOP,X2=-30 D C^%DTC S SREND1=9999999-X
"RTN","SROCL1",15,0)
 S X1=SRAOP,X2=-1000 D C^%DTC S SREND2=9999999-X
"RTN","SROCL1",16,0)
SRAT ; Get test and data name(s) for test from file 139.2.
"RTN","SROCL1",17,0)
 W !!,"..Searching lab record for latest test data...."
"RTN","SROCL1",18,0)
 K DIC S DIC=61,DIC(0)="",X="SERUM" D ^DIC S SRSER=+Y K DIC S DIC=61,DIC(0)="",X="PLASMA" D ^DIC K DIC S SRP=+Y
"RTN","SROCL1",19,0)
 F SRAT=1,5,7,11,14,21:1:24,27 S SREND=$S("117"[SRAT:SREND1,SRAT>20:SREND2,1:SREND0) D SP^SROAL1
"RTN","SROCL1",20,0)
 D CARDIAC^SROAL11 S SRCON=$P($G(^SRF(SRTN,"CON")),"^") I SRCON D CONCC
"RTN","SROCL1",21,0)
END I 'SRSOUT W !!,"Press <RET> to continue  " R X:DTIME
"RTN","SROCL1",22,0)
 W @IOF
"RTN","SROCL1",23,0)
 Q
"RTN","SROCL1",24,0)
CONCC ; update concurrent case
"RTN","SROCL1",25,0)
 S SRTN1=SRTN,SRTN=SRCON D CARDIAC^SROAL11 S SRTN=SRTN1
"RTN","SROCL1",26,0)
 Q
"RTN","SROCL1",27,0)
SP S SRASP=$P(^SRO(139.2,II,2),"^") K SRADT F SRADN=0:0 S SRADN=$O(^SRO(139.2,II,1,SRADN)) Q:SRADN'>0  S SRATN=$P(^(SRADN,0),"^") D LABCHK
"RTN","SROCL1",28,0)
 Q
"RTN","SROCL1",29,0)
LABCHK ; Get latest test values from patient's lab record.
"RTN","SROCL1",30,0)
 I SRALR F SRAIDT=SRST:0 S SRAIDT=$O(^LR(SRALR,"CH",SRAIDT)) Q:SRAIDT'>0!(SRAIDT>SREND)  I $D(^(SRAIDT,SRATN)) S SRSP=$P(^(0),"^",5) D
"RTN","SROCL1",31,0)
 .I SRSP=SRSER!(SRSP=SRP) D COMP Q
"RTN","SROCL1",32,0)
 I '$D(SRAT(SRAT)) S SRAT(SRAT)="NS",SRAD(SRAT)=""
"RTN","SROCL1",33,0)
 Q
"RTN","SROCL1",34,0)
COMP S SRX=$P(^LR(SRALR,"CH",SRAIDT,SRATN),"^") I $P(^LR(SRALR,"CH",SRAIDT,0),"^",3)'="","canccommentpending"'[SRX,SRX'["CANC" D DATA
"RTN","SROCL1",35,0)
 Q
"RTN","SROCL1",36,0)
DATA I $D(SRADT),SRAIDT>SRADT Q
"RTN","SROCL1",37,0)
 I +SRX'=SRX D
"RTN","SROCL1",38,0)
 .N X1,X2 S SRZ="" I "<>"[$E(SRX) S SRZ=$E(SRX),SRX=$E(SRX,2,99)
"RTN","SROCL1",39,0)
 .I SRX?.N0.1".".N D  Q
"RTN","SROCL1",40,0)
 ..S X1=$P(SRX,"."),X1=+X1 S:X1=0 X1=""
"RTN","SROCL1",41,0)
 ..S X2="."_$P(SRX,".",2),X2=+X2 S:X2=0 X2=""
"RTN","SROCL1",42,0)
 ..S SRX=X1_X2,SRX=+SRX,SRX=SRZ_SRX
"RTN","SROCL1",43,0)
 .S SRX="*"
"RTN","SROCL1",44,0)
 S SRAT(SRAT)=SRX D:SRAT(SRAT)["." DEC S SRAD(SRAT)=$E($P(^LR(SRALR,"CH",SRAIDT,0),"^"),1,7),SRADT=SRAIDT
"RTN","SROCL1",45,0)
 Q
"RTN","SROCL1",46,0)
DEC ; convert to proper decimal place
"RTN","SROCL1",47,0)
 I +SRAT(SRAT)=SRAT(SRAT)  S SRAT(SRAT)=SRAT(SRAT)+.05\.1*.1 Q
"RTN","SROCL1",48,0)
 S SR1=$E(SRAT(SRAT)),SR2=$E(SRAT(SRAT),2,99),SR2=SR2+.05\.1*.1,SRAT(SRAT)=SR1_SR2
"RTN","SROCL1",49,0)
 Q
"RTN","SROCMP")
0^23^B26995986^B18244220
"RTN","SROCMP",1,0)
SROCMP ;BIR/MAM - PERIOPERATIVE OCCURRENCES ;05/15/06
"RTN","SROCMP",2,0)
 ;;3.0; Surgery ;**22,26,29,38,50,143,153**;24 Jun 93;Build 11
"RTN","SROCMP",3,0)
BEG U IO S SRSOUT=0,PAGE=1 K ^TMP("SR",$J) S Y=DT X ^DD("DD") S SRPRINT="DATE PRINTED: "_Y,SRSDT=SRSD-.0001,SREDT=SRED+.9999
"RTN","SROCMP",4,0)
 N SRFRTO S Y=SRSD X ^DD("DD") S SRFRTO="FROM: "_Y_"  TO: ",Y=SRED X ^DD("DD") S SRFRTO=SRFRTO_Y
"RTN","SROCMP",5,0)
 F  S SRSDT=$O(^SRF("AC",SRSDT)) Q:SRSDT>SREDT!('SRSDT)!(SRSOUT)  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSDT,SRTN)) Q:'SRTN!(SRSOUT)  I $O(^SRF(SRTN,10,0))!$O(^SRF(SRTN,16,0)),$D(^SRF(SRTN,0)),$$MANDIV^SROUTL0(SRINSTP,SRTN) D UTIL
"RTN","SROCMP",6,0)
 S (SRSS,SRHDR)=0 F  S SRSS=$O(^TMP("SR",$J,SRSS)) Q:SRSS=""!(SRSOUT)  D HDR^SROCMP2 S SRSDATE=0 F  S SRSDATE=$O(^TMP("SR",$J,SRSS,SRSDATE)) Q:'SRSDATE!(SRSOUT)  D MORE
"RTN","SROCMP",7,0)
 G:SRSOUT END
"RTN","SROCMP",8,0)
 I '$D(^TMP("SR",$J)) D HDR^SROCMP2 G:SRSOUT END W !!,"There are no perioperative occurrences recorded for the selected date range."
"RTN","SROCMP",9,0)
 F I=$Y:1:IOSL-9 W !
"RTN","SROCMP",10,0)
 S X="" D FOOT^SROCMP2
"RTN","SROCMP",11,0)
 I SRBOTH S SRSOUT=0 D BEG^SROMORT S SRSOUT=1
"RTN","SROCMP",12,0)
END W:$E(IOST)="P" @IOF I $D(ZTQUEUED) K ^TMP("SR",$J) Q:$G(ZTSTOP)  S ZTREQ="@" Q
"RTN","SROCMP",13,0)
 D ^%ZISC,^SRSKILL K SRTN W @IOF
"RTN","SROCMP",14,0)
 Q
"RTN","SROCMP",15,0)
MORE S SRTN=0 F  S SRTN=$O(^TMP("SR",$J,SRSS,SRSDATE,SRTN)) Q:'SRTN  D SET
"RTN","SROCMP",16,0)
 Q
"RTN","SROCMP",17,0)
ATT N SRDIV,SRY S SRY=$P($G(^SRF(SRTN,.1)),"^",13) I SRY D
"RTN","SROCMP",18,0)
 .S Y=SRY,C=$P(^DD(130,.164,0),"^",2) D Y^DIQ S SRSS=Y
"RTN","SROCMP",19,0)
 I SRY="" S SRDIV=$$SITE^SROUTL0(SRTN) I SRDIV,'$P(^SRO(133,SRDIV,0),"^",19) D
"RTN","SROCMP",20,0)
 .S SRY=$P($G(^SRF(SRTN,.1)),"^",4) I SRY D
"RTN","SROCMP",21,0)
 ..S Y=SRY,C=$P(^DD(130,.14,0),"^",2) D Y^DIQ S SRSS=Y
"RTN","SROCMP",22,0)
 S:'SRY SRY="ZZ" I SRSP,'$D(SRSP(SRY)) Q
"RTN","SROCMP",23,0)
 S:'SRY SRSS="ATTENDING SURGEON NOT ENTERED"
"RTN","SROCMP",24,0)
 S ^TMP("SR",$J,SRSS,SRSDT,SRTN)=""
"RTN","SROCMP",25,0)
 Q
"RTN","SROCMP",26,0)
UTIL ; set ^TMP
"RTN","SROCMP",27,0)
 I SRSEL=1 D  Q
"RTN","SROCMP",28,0)
 .S Y=$P(^SRF(SRTN,0),"^",4) S:'Y Y="ZZ" I SRSP,'$D(SRSP(Y)) Q
"RTN","SROCMP",29,0)
 .S SRSS=$S(Y:$P(^SRO(137.45,Y,0),"^"),1:"SURGICAL SPECIALTY NOT ENTERED")
"RTN","SROCMP",30,0)
 .S ^TMP("SR",$J,SRSS,SRSDT,SRTN)=""
"RTN","SROCMP",31,0)
 I SRSEL=2 D ATT Q
"RTN","SROCMP",32,0)
 I SRSEL=3 F SRI=10,16 S SROCC=0 F  S SROCC=$O(^SRF(SRTN,SRI,SROCC)) Q:'SROCC  S Y=$P(^SRF(SRTN,SRI,SROCC,0),"^",2) D:Y
"RTN","SROCMP",33,0)
 .I SRSP,'$D(SRSP(Y)) Q
"RTN","SROCMP",34,0)
 .S SRSS=$S(Y:$P(^SRO(136.5,Y,0),"^"),1:"OCCURRENCE CATEGORY NOT ENTERED")
"RTN","SROCMP",35,0)
 .S ^TMP("SR",$J,SRSS,SRSDT,SRTN)=""
"RTN","SROCMP",36,0)
 Q
"RTN","SROCMP",37,0)
SET ; set variables to print
"RTN","SROCMP",38,0)
 K SRC S DFN=$P(^SRF(SRTN,0),"^") D DEM^VADPT S SRNM=VADM(1),SRSSN=VA("PID"),Y=$P(^SRF(SRTN,0),"^",9) D D^DIQ S SROD=$E(Y,1,18)
"RTN","SROCMP",39,0)
OPS S SROPER=$P(^SRF(SRTN,"OP"),"^"),OPER=0 F  S OPER=$O(^SRF(SRTN,13,OPER)) Q:OPER=""  D OTHER
"RTN","SROCMP",40,0)
 K SRP,Z S:$L(SROPER)<50 SRP(1)=SROPER I $L(SROPER)>49 S SROPER=SROPER_"  " F M=1:1 D OPER Q:Z=""
"RTN","SROCMP",41,0)
 S SRATT="",Y=$P($G(^SRF(SRTN,.1)),"^",13) I Y S C=$P(^DD(130,.164,0),"^",2) D Y^DIQ S SRATT=Y
"RTN","SROCMP",42,0)
 I SRATT="" S SRDIV=$$SITE^SROUTL0(SRTN) I SRDIV,'$P(^SRO(133,SRDIV,0),"^",19) D
"RTN","SROCMP",43,0)
 .S Y=$P($G(^SRF(SRTN,.1)),"^",4),C=$P(^DD(130,.14,0),"^",2) D Y^DIQ S SRATT=Y
"RTN","SROCMP",44,0)
 I SRATT="" S SRATT="ATTENDING SURGEON NOT ENTERED"
"RTN","SROCMP",45,0)
 S Y=$P(^SRF(SRTN,0),"^",4),SRSPEC=$S(Y:$P(^SRO(137.45,Y,0),"^"),1:"SURGICAL SPECIALTY NOT ENTERED")
"RTN","SROCMP",46,0)
COMP ; perioperative occurrences
"RTN","SROCMP",47,0)
 S (SRFG,SRIC,SRPC)=0 F  S SRIC=$O(^SRF(SRTN,10,SRIC)) Q:SRIC=""  S SRFG=SRFG+1,SRC(SRFG)=$P(^(SRIC,0),"^")_"^"_$P(^(0),"^",6)_"^^"_$S($D(^SRF(SRTN,10,SRIC,2)):$P(^(2),"^"),1:"")_"^10^"_SRIC
"RTN","SROCMP",48,0)
 S SRPC=0 F  S SRPC=$O(^SRF(SRTN,16,SRPC)) Q:SRPC=""  D
"RTN","SROCMP",49,0)
 .S SRFG=SRFG+1,SRC(SRFG)=$P(^SRF(SRTN,16,SRPC,0),"^")_" *^"_$P(^(0),"^",6)_"^"_$P(^(0),"^",7)_"^"_$S($D(^SRF(SRTN,16,SRPC,2)):$P(^(2),"^"),1:"")_"^16^"_SRPC
"RTN","SROCMP",50,0)
 .I $P(^SRF(SRTN,16,SRPC,0),"^",2)=3 S SRC(SRFG)=SRC(SRFG)_"^"_$P(^SRF(SRTN,16,SRPC,0),"^",4)
"RTN","SROCMP",51,0)
PRINT ; print perioperative occurrence information
"RTN","SROCMP",52,0)
 I $Y+10>IOSL D HDR^SROCMP2 I SRSOUT Q
"RTN","SROCMP",53,0)
 S SRHDR=1 W !!,SRNM,?29,$S(SRSEL=2:SRSPEC,1:SRATT) S SRC=$O(SRC(0)) W ?80,$P(SRC(SRC),"^") D DATE W ?129,$P(SRC(SRC),"^",2)
"RTN","SROCMP",54,0)
 I SRSEL=3 D PRNT3 Q
"RTN","SROCMP",55,0)
 W !,VA("PID"),?29,SRP(1),?80,$P(SRC(SRC),"^",4)
"RTN","SROCMP",56,0)
 W !,SROD W:$D(SRP(2)) ?29,SRP(2) D TEXT W:$D(SRP(3))!SRT ! W:$D(SRP(3)) ?29,SRP(3) D:SRT WP
"RTN","SROCMP",57,0)
SRC I SRC F  S SRC=$O(SRC(SRC)) Q:'SRC!SRSOUT  D
"RTN","SROCMP",58,0)
 .I $Y+10>IOSL D HDR^SROCMP2 I SRSOUT Q
"RTN","SROCMP",59,0)
 .W !,?80,$P(SRC(SRC),"^") D DATE W ?129,$P(SRC(SRC),"^",2),!,?80,$P(SRC(SRC),"^",4),! D TEXT I SRT W ! D WP
"RTN","SROCMP",60,0)
 Q
"RTN","SROCMP",61,0)
PRNT3 W !,VA("PID"),?29,SRSPEC,?80,$P(SRC(SRC),"^",4)
"RTN","SROCMP",62,0)
 W !,SROD W ?29,SRP(1) D TEXT W:$D(SRP(2))!SRT ! W:$D(SRP(2)) ?29,SRP(2) D:SRT WP
"RTN","SROCMP",63,0)
 D SRC
"RTN","SROCMP",64,0)
 Q
"RTN","SROCMP",65,0)
WP ; print perioperative occurrence comments
"RTN","SROCMP",66,0)
 K ^UTILITY($J,"W") S CM=0 F  S CM=$O(^SRF(SRTN,SRX,SRY,1,CM)) Q:'CM  S X=^SRF(SRTN,SRX,SRY,1,CM,0),DIWL=81,DIWR=132 D ^DIWP
"RTN","SROCMP",67,0)
 I $D(^UTILITY($J,"W")) F J=1:1:^UTILITY($J,"W",81) D
"RTN","SROCMP",68,0)
 .I $Y+7>IOSL D HDR^SROCMP2 W ! I SRSOUT Q
"RTN","SROCMP",69,0)
 .W ?81,^UTILITY($J,"W",81,J,0),!
"RTN","SROCMP",70,0)
 Q
"RTN","SROCMP",71,0)
TEXT ; check for comments
"RTN","SROCMP",72,0)
 S SRT=0,SRX=$P(SRC(SRC),"^",5),SRY=$P(SRC(SRC),"^",6) I $O(^SRF(SRTN,SRX,SRY,1,0)) S SRT=1 I SRT W ?80,">>> Comments:"
"RTN","SROCMP",73,0)
 Q
"RTN","SROCMP",74,0)
OTHER ; other operations
"RTN","SROCMP",75,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,OPER,0),"^"))>250 S SRLONG=0,OPER=999,SROPERS=" ..."
"RTN","SROCMP",76,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,OPER,0),"^")
"RTN","SROCMP",77,0)
 S SROPER=SROPER_$S(SROPERS=" ...":SROPERS,1:", "_SROPERS)
"RTN","SROCMP",78,0)
 Q
"RTN","SROCMP",79,0)
OPER ; break procedure if greater than 50 characters
"RTN","SROCMP",80,0)
 S SRP(M)="" F LOOP=1:1 S Z=$P(SROPER," ") Q:Z=""  Q:$L(SRP(M))+$L(Z)'<50  S SRP(M)=SRP(M)_Z_" ",SROPER=$P(SROPER," ",2,200)
"RTN","SROCMP",81,0)
 Q
"RTN","SROCMP",82,0)
DATE N SRSEP
"RTN","SROCMP",83,0)
 S X=$P(SRC(SRC),"^",7) I X S SRSEP=$S(X=2:"SEPSIS",X=3:"SEPTIC SHOCK",1:"SIRS") W " /"_SRSEP
"RTN","SROCMP",84,0)
 I $P(SRC(SRC),"^",3)'="" S SRDT=$P(SRC(SRC),"^",3) I SRDT W "  ("_$E(SRDT,4,5)_"/"_$E(SRDT,6,7)_"/"_$E(SRDT,2,3)_")"
"RTN","SROCMP",85,0)
 Q
"RTN","SROCMP1")
0^24^B17735351^B6872580
"RTN","SROCMP1",1,0)
SROCMP1 ;BIR/MAM - PERIOPERATIVE OCCURRENCES ;02/02/06
"RTN","SROCMP1",2,0)
 ;;3.0; Surgery ;**38,50,153**;24 Jun 93;Build 11
"RTN","SROCMP1",3,0)
EN ; entry point
"RTN","SROCMP1",4,0)
 N SRSEL S (SRATT,SRSOUT,SRSP)=0,SRSEL=1 G:SRBOTH DEV
"RTN","SROCMP1",5,0)
BY W @IOF K DIR S DIR(0)="N^1:3",DIR("A",1)="Print report by",DIR("A",2)=" 1. Surgical Specialty"
"RTN","SROCMP1",6,0)
 S DIR("A",3)=" 2. Attending Surgeon",DIR("A",4)=" 3. Occurrence Category",DIR("A",5)="",DIR("A")="Select 1, 2 or 3",DIR("B")=1
"RTN","SROCMP1",7,0)
 S DIR("?")="Select a number" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 D END Q
"RTN","SROCMP1",8,0)
 S SRSEL=Y
"RTN","SROCMP1",9,0)
 I SRSEL=2 D ATTND Q
"RTN","SROCMP1",10,0)
 I SRSEL=3 D OCC Q
"RTN","SROCMP1",11,0)
SPEC W @IOF K DIR S DIR("A")="Do you want to print this report for all Surgical Specialties ",DIR("B")="YES",DIR(0)="Y"
"RTN","SROCMP1",12,0)
 S DIR("?",1)="  Press ENTER to print this report for all surgical specialties, or"
"RTN","SROCMP1",13,0)
 S DIR("?")="  enter NO to select a specific specialty."
"RTN","SROCMP1",14,0)
 D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 D END Q
"RTN","SROCMP1",15,0)
 I 'Y D SP I SRSOUT D END Q
"RTN","SROCMP1",16,0)
DEV S SRGRAMM=$S(SRBOTH:"These reports are ",1:"This report is ")
"RTN","SROCMP1",17,0)
 K IOP,%ZIS,POP,IO("Q") S %ZIS("A")="Print the Report on which Device: ",%ZIS="QM" W !!,SRGRAMM_"designed to use a 132 column format.",! D ^%ZIS I POP S SRSOUT=1 G END
"RTN","SROCMP1",18,0)
 I $D(IO("Q")) K IO("Q") S ZTDESC="PERIOPERATIVE OCCURRENCES",ZTRTN="BEG^SROCMP",(ZTSAVE("SRBOTH"),ZTSAVE("SRED"),ZTSAVE("SRSD"),ZTSAVE("SRINST"),ZTSAVE("SRINSTP"),ZTSAVE("SRSP*"),ZTSAVE("SRSEL"))="" D ^%ZTLOAD G END
"RTN","SROCMP1",19,0)
 D BEG^SROCMP
"RTN","SROCMP1",20,0)
END ;
"RTN","SROCMP1",21,0)
 Q:'$D(SRSOUT)  I 'SRSOUT W !!,"Press RETURN to continue  " R X:DTIME
"RTN","SROCMP1",22,0)
 D ^%ZISC,^SRSKILL K SRTN W @IOF
"RTN","SROCMP1",23,0)
 Q
"RTN","SROCMP1",24,0)
ATTND W @IOF K DIR S DIR("A")="Do you want to print this report for all Attending Surgeons ",DIR("B")="YES",DIR(0)="Y"
"RTN","SROCMP1",25,0)
 S DIR("?",1)="  Press ENTER to print this report for all attending surgeons, or"
"RTN","SROCMP1",26,0)
 S DIR("?")="  enter NO to select a specific attending surgeon."
"RTN","SROCMP1",27,0)
 D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 D END Q
"RTN","SROCMP1",28,0)
 I 'Y D ATSUR I SRSOUT D END Q
"RTN","SROCMP1",29,0)
 D DEV
"RTN","SROCMP1",30,0)
 Q
"RTN","SROCMP1",31,0)
ATSUR W !! S SRSP=1 K DIR S DIR(0)="130,.164AO",DIR("A")="Print the report for which Attending Surgeon ? "
"RTN","SROCMP1",32,0)
 D ^DIR K DIR I $D(DTOUT)!$D(DUOUT)!(+Y'>0) S SRSOUT=1 Q
"RTN","SROCMP1",33,0)
 S SRCT=+Y,SRSP(SRCT)=+Y
"RTN","SROCMP1",34,0)
MOAT ; ask for more attending surgeons
"RTN","SROCMP1",35,0)
 K DIR S DIR(0)="130,.164AO",DIR("A")="Select an Additional Attending Surgeon: "
"RTN","SROCMP1",36,0)
 D ^DIR K DIR I $D(DTOUT)!$D(DUOUT)!'+Y Q
"RTN","SROCMP1",37,0)
 S SRCT=+Y,SRSP(SRCT)=+Y G MOAT
"RTN","SROCMP1",38,0)
 Q
"RTN","SROCMP1",39,0)
OCC W @IOF K DIR S DIR("A")="Do you want to print this report for all Occurrence Categories",DIR("B")="YES",DIR(0)="Y"
"RTN","SROCMP1",40,0)
 S DIR("?",1)="  Press ENTER to print this report for all occurrence categoies, or"
"RTN","SROCMP1",41,0)
 S DIR("?")="  enter NO to select an ocurrence category."
"RTN","SROCMP1",42,0)
 D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 D END Q
"RTN","SROCMP1",43,0)
 I 'Y D CAT I SRSOUT D END Q
"RTN","SROCMP1",44,0)
 D DEV
"RTN","SROCMP1",45,0)
 Q
"RTN","SROCMP1",46,0)
CAT W !! S SRSP=1 K DIR S DIR(0)="PAO^136.5:QEM",DIR("A")="Print the report for which Occurrence Category ? "
"RTN","SROCMP1",47,0)
 S DIR("S")="I '$P(^(0),U,2)" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT)!(+Y'>0) S SRSOUT=1 Q
"RTN","SROCMP1",48,0)
 S SRCT=+Y,SRSP(SRCT)=+Y
"RTN","SROCMP1",49,0)
MOCAT ; ask for more occurrence categories
"RTN","SROCMP1",50,0)
 K DIR S DIR(0)="PAO^136.5:QEM",DIR("A")="Select an Additional Occurrence Category: "
"RTN","SROCMP1",51,0)
 S DIR("S")="I '$P(^(0),U,2)" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT)!(+Y'>0) Q
"RTN","SROCMP1",52,0)
 S SRCT=+Y,SRSP(SRCT)=+Y G MOCAT
"RTN","SROCMP1",53,0)
 Q
"RTN","SROCMP1",54,0)
SP W !! S SRSP=1 K DIC S DIC("S")="I '$P(^(0),""^"",3)",DIC=137.45,DIC(0)="QEAMZ",DIC("A")="Print the report for which Specialty ?  " D ^DIC I Y<0 S SRSOUT=1 Q
"RTN","SROCMP1",55,0)
 S SRCT=+Y,SRSP(SRCT)=+Y
"RTN","SROCMP1",56,0)
MORE ; ask for more surgical specialties
"RTN","SROCMP1",57,0)
 K DIC S DIC("S")="I '$P(^(0),""^"",3)",DIC=137.45,DIC(0)="QEAMZ",DIC("A")="Select an Additional Specialty:  " D ^DIC I Y>0 S SRCT=+Y,SRSP(SRCT)=+Y G MORE
"RTN","SROCMP1",58,0)
 Q
"RTN","SROCMP2")
0^25^B4362143^B3226308
"RTN","SROCMP2",1,0)
SROCMP2 ;BIR/MAM - PERIOPERATIVE OCCURRENCES REPORT ;02/02/06
"RTN","SROCMP2",2,0)
 ;;3.0; Surgery ;**38,50,153**;24 Jun 93;Build 11
"RTN","SROCMP2",3,0)
HDR ; print heading
"RTN","SROCMP2",4,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SROCMP2",5,0)
 I SRHDR D HDR2 Q:SRSOUT  S SRHDR=0
"RTN","SROCMP2",6,0)
 W:$Y @IOF W !,?(132-$L(SRINST)\2),SRINST,?120,"PAGE ",PAGE,!,?58,"SURGICAL SERVICE",?100,"REVIEWED BY: ",!,?53,"PERIOPERATIVE OCCURRENCES",?100,"DATE REVIEWED: "
"RTN","SROCMP2",7,0)
 W !,?(132-$L(SRFRTO)\2),SRFRTO,?100,SRPRINT
"RTN","SROCMP2",8,0)
 W !!!,?1,"PATIENT",?29,$S(SRSEL=2:"SURGICAL SPECIALTY",1:"ATTENDING SURGEON"),?80,"OCCURRENCE(S) - (DATE)",?125,"OUTCOME"
"RTN","SROCMP2",9,0)
 W !,?3,"ID#",?29,$S(SRSEL=3:"SURGICAL SPECIALTY",1:"PRINCIPAL OPERATION"),?80,"TREATMENT",!,"OPERATION DATE",?29,$S(SRSEL=3:"PRINCIPAL OPERATION",1:""),!
"RTN","SROCMP2",10,0)
 F I=1:1:132 W "="
"RTN","SROCMP2",11,0)
 S PAGE=PAGE+1 I '$D(^TMP("SR",$J)) Q
"RTN","SROCMP2",12,0)
 N SRY S SRY=$S(SRSEL=2:"ATTENDING",SRSEL=3:"CATEGORY",1:"SPECIALTY")_": "_SRSS W !,?(132-$L(SRY)\2),SRY,! F LINE=1:1:132 W "-"
"RTN","SROCMP2",13,0)
 Q
"RTN","SROCMP2",14,0)
HDR2 ; more heading
"RTN","SROCMP2",15,0)
 F I=$Y:1:IOSL-9 W !
"RTN","SROCMP2",16,0)
FOOT ; print footer
"RTN","SROCMP2",17,0)
 W ! F LINE=1:1:IOM W "-"
"RTN","SROCMP2",18,0)
 W !,"OUTCOMES:  U - UNRESOLVED, I - IMPROVED, W - WORSE, D - DEATH"
"RTN","SROCMP2",19,0)
 W !,?11,"'*' Represents Postoperative Occurrences",! F LINE=1:1:IOM W "-"
"RTN","SROCMP2",20,0)
 S SRHDR=0 I $E(IOST)'="P" W !!,"Press RETURN to continue, or '^' to quit:  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROCMP2",21,0)
 Q
"RTN","SROCMPED")
0^64^B27790437^B34799560
"RTN","SROCMPED",1,0)
SROCMPED ;BIR/MAM - ENTER/EDIT OCCURRENCES ;03/14/06
"RTN","SROCMPED",2,0)
 ;;3.0; Surgery ;**26,38,47,125,153**;24 Jun 93;Build 11
"RTN","SROCMPED",3,0)
 I '$P(^SRF(SRTN,SRTYPE,SRENTRY,0),"^",2) D NOCAT I SRSOUT S SRSOUT=0 Q
"RTN","SROCMPED",4,0)
 I '$D(^SRF(SRTN,SRTYPE,SRENTRY,0)) K SRENTRY S SRSOUT=0 Q
"RTN","SROCMPED",5,0)
START I '$D(^SRF(SRTN,SRTYPE,SRENTRY)) K SRENTRY S SRSOUT=0 Q
"RTN","SROCMPED",6,0)
 S SRSOUT=0,SR=^SRF(SRTN,SRTYPE,SRENTRY,0)
"RTN","SROCMPED",7,0)
 I $G(SRNEW),$P(SR,"^",2)=3,SRTYPE=16 D SEPSIS G:SRSOUT END G START
"RTN","SROCMPED",8,0)
 I $G(SRNEW),$P(SR,"^",2)=27,SRTYPE=16,$P($G(^SRF(SRTN,"RA")),"^",2)="C" D RCP G:SRSOUT END G START
"RTN","SROCMPED",9,0)
 D HDR^SROAUTL W !
"RTN","SROCMPED",10,0)
 S SRO(1)=$P(SR,"^")_"^.01",X=$P(SR,"^",2),SRO(2)=X_"^"_$S(SRTYPE=10:3,1:5) I X S $P(SRO(2),"^")=$P(^SRO(136.5,X,0),"^")
"RTN","SROCMPED",11,0)
 I $P(SR,"^",2)=3 S Y=$P(SR,"^",4),C=$P(^DD(130.22,7,0),"^",2) D:Y'="" Y^DIQ S SRO(3)=Y_"^7"
"RTN","SROCMPED",12,0)
 I $P(SR,"^",2)'=3 D
"RTN","SROCMPED",13,0)
 .I $P(SR,"^",2)=27,$P($G(^SRF(SRTN,"RA")),"^",2)="C" S Y=$P(SR,"^",5),C=$P(^DD(130.22,8,0),"^",2) D:Y'="" Y^DIQ S SRO(3)=Y_"^8" Q
"RTN","SROCMPED",14,0)
 .S X=$P(SR,"^",3) S:X X=$P(^ICD9(X,0),"^")_"  "_$P(^(0),"^",2) S SRO(3)=X_"^"_$S(SRTYPE=10:4,1:6)
"RTN","SROCMPED",15,0)
 S SR(2)=$G(^SRF(SRTN,SRTYPE,SRENTRY,2)),SRO(4)=$P(SR(2),"^")_"^"_$S(SRTYPE=10:2,1:3)
"RTN","SROCMPED",16,0)
 S X=$P(SR,"^",6),SHEMP=$S(X="U":"UNRESOLVED",X="I":"IMPROVED",X="D":"DEATH",X="W":"WORSE",1:""),SRO(5)=SHEMP_"^.05"
"RTN","SROCMPED",17,0)
 K SRO(6) I SRTYPE=16 S X=$P(SR,"^",7) S:X X=$E(X,4,5)_"/"_$E(X,6,7)_"/"_$E(X,2,3) S SRO(6)=X_"^2"
"RTN","SROCMPED",18,0)
DISP W !,"1. Occurrence: ",?26,$P(SRO(1),"^"),!,"2. Occurrence Category: ",?26,$P(SRO(2),"^")
"RTN","SROCMPED",19,0)
 W !,"3. "_$S($P(SR,"^",2)=3:"Sepsis Type",$P(SR,"^",2)=27&($P($G(^SRF(SRTN,"RA")),"^",2)="C"):"CPB Status",1:"ICD Diagnosis Code")_":",?26,$P(SRO(3),"^")
"RTN","SROCMPED",20,0)
 W !,"4. Treatment Instituted:",?26,$P(SRO(4),"^"),!,"5. Outcome to Date:",?26,$P(SRO(5),"^")
"RTN","SROCMPED",21,0)
 I $D(SRO(6)) W !,"6. Date Noted: ",?26,$P(SRO(6),"^")
"RTN","SROCMPED",22,0)
 S SRX=$S(SRTYPE=10:6,1:7),SRO(SRX)="^" I $O(^SRF(SRTN,SRTYPE,SRENTRY,1,0)) S SRO(SRX)="*** INFORMATION ENTERED ***"_SRO(SRX)
"RTN","SROCMPED",23,0)
 S X=$S(SRTYPE=10:1,1:4),SRO(SRX)=SRO(SRX)_X,SRMAX=SRX
"RTN","SROCMPED",24,0)
 W !,SRX_". Occurrence Comments: ",?26,$P(SRO(SRX),"^")
"RTN","SROCMPED",25,0)
 W !!,SRLINE
"RTN","SROCMPED",26,0)
 W !!,"Select Occurrence Information: " R X:DTIME I '$T!("^"[X) S:X["^" SRSOUT=1 G END
"RTN","SROCMPED",27,0)
 I "Aa"[X S X="1:"_SRMAX
"RTN","SROCMPED",28,0)
 I X'?.N1":".N,'$D(SRO(X)) D HELP G:SRSOUT END W @IOF G START
"RTN","SROCMPED",29,0)
 I X?.N1":".N S Y=$E(X),Z=$P(X,":",2) I Y<1!(Z>SRMAX)!(Y>Z) D HELP G:SRSOUT END W @IOF G START
"RTN","SROCMPED",30,0)
 D HDR^SROAUTL W !
"RTN","SROCMPED",31,0)
 I X?.N1":".N D RANGE G START
"RTN","SROCMPED",32,0)
 I $$LOCK^SROUTL(SRTN) D  D UNLOCK^SROUTL(SRTN) D:SRZ=2 PRESS
"RTN","SROCMPED",33,0)
 .S SRZ=X K DIE,DA,DR S DA(1)=SRTN,DA=SRENTRY,DIE="^SRF("_SRTN_","_SRTYPE_",",DR=$P(SRO(X),"^",2)_"T" D ^DIE K DR,DA
"RTN","SROCMPED",34,0)
 G START
"RTN","SROCMPED",35,0)
 Q
"RTN","SROCMPED",36,0)
HELP W @IOF,!!!!,"Enter the number, or range of numbers you want to edit.  Examples of proper",!,"responses are listed below."
"RTN","SROCMPED",37,0)
 W !!,"1. Enter 'A' to update all occurrence information."
"RTN","SROCMPED",38,0)
 S RANGE="(1-"_SRMAX_")"
"RTN","SROCMPED",39,0)
 W !!,"2. Enter a number "_RANGE_" to update a specific occurrence element.  (For",!,"   example, enter '2' to update the occurrence category)"
"RTN","SROCMPED",40,0)
 W !!,"3. Enter a range of numbers "_RANGE_" separated by a ':' to enter a range of",!,"   elements.  (For example, enter '1:3' to enter occurrence, occurrence",!,"   category, and ICD diagnosis code)"
"RTN","SROCMPED",41,0)
 W ! D PRESS
"RTN","SROCMPED",42,0)
 Q
"RTN","SROCMPED",43,0)
RANGE ; range of numbers
"RTN","SROCMPED",44,0)
 I $$LOCK^SROUTL(SRTN) D  D UNLOCK^SROUTL(SRTN)
"RTN","SROCMPED",45,0)
 .S SHEMP=$P(X,":"),CURLEY=$P(X,":",2) F EMILY=SHEMP:1:CURLEY Q:SRSOUT  D ONE
"RTN","SROCMPED",46,0)
 I CURLEY=2 D PRESS
"RTN","SROCMPED",47,0)
 Q
"RTN","SROCMPED",48,0)
ONE ; edit one item
"RTN","SROCMPED",49,0)
 K DR,DA,DIE S DR=$P(SRO(EMILY),"^",2)_"T",DA=SRENTRY,DA(1)=SRTN,DIE="^SRF("_SRTN_","_SRTYPE_"," D ^DIE K DR,DA I '$D(^SRF(SRTN,SRTYPE,SRENTRY))!$D(DTOUT)!$D(Y) S SRSOUT=1
"RTN","SROCMPED",50,0)
 Q
"RTN","SROCMPED",51,0)
END K SRO,SR,X,DA,DIE,DR,Y
"RTN","SROCMPED",52,0)
 Q
"RTN","SROCMPED",53,0)
SEPSIS D HDR^SROAUTL K DA,DIE,DR
"RTN","SROCMPED",54,0)
 S DA=SRENTRY,DA(1)=SRTN,DR="7T",DIE="^SRF("_SRTN_","_SRTYPE_"," D ^DIE K DR,DA
"RTN","SROCMPED",55,0)
 K DA,DIE,DR S SRNEW=0 I $D(DTOUT)!$D(Y) S SRSOUT=1 Q
"RTN","SROCMPED",56,0)
 Q
"RTN","SROCMPED",57,0)
RCP D HDR^SROAUTL K DA,DIE,DR
"RTN","SROCMPED",58,0)
 S DA=SRENTRY,DA(1)=SRTN,DR="8T",DIE="^SRF("_SRTN_","_SRTYPE_"," D ^DIE K DR,DA
"RTN","SROCMPED",59,0)
 K DA,DIE,DR S SRNEW=0 I $D(DTOUT)!$D(Y) S SRSOUT=1 Q
"RTN","SROCMPED",60,0)
 Q
"RTN","SROCMPED",61,0)
NOCAT W @IOF,!,"The occurrence selected does not have a corresponding category.  A category",!,"must be selected at this time, or the occurrence will be deleted.",!
"RTN","SROCMPED",62,0)
 K DIE,DIC,X,Y,SRCAT
"RTN","SROCMPED",63,0)
 S DIC=136.5,DIC(0)="QEAMZ",DIC("A")="Select Occurrence Category: ",DIC("S")="I '$P(^(0),U,2)" S:SRTYPE=10 DIC("S")=DIC("S")_",$P(^(0),U,3)" D ^DIC
"RTN","SROCMPED",64,0)
 I +Y>0 S SRCAT=+Y K DIE,DR,DA S DA(1)=SRTN,DA=SRENTRY,DIE="^SRF("_DA_","_SRTYPE_",",DR=$S(SRTYPE=10:3,1:5)_"////"_SRCAT D ^DIE K DR,DA
"RTN","SROCMPED",65,0)
 I $D(SRCAT) K SRCAT Q
"RTN","SROCMPED",66,0)
DEL W !!,"Are you sure that you want to delete this occurrence ? NO// " R SRYN:DTIME I '$T!(SRYN["^") D YUP S SRSOUT=1 Q
"RTN","SROCMPED",67,0)
 I "YyNn"'[SRYN W !!,"Enter 'YES' to delete this occurrence from the patient's record.  Enter 'NO'",!,"to backup and enter a category for this occurrence." G DEL
"RTN","SROCMPED",68,0)
 I "Nn"[SRYN G NOCAT
"RTN","SROCMPED",69,0)
YUP ; delete occurrence
"RTN","SROCMPED",70,0)
 K DIK,DA S DA=SRENTRY,DA(1)=SRTN,DIK="^SRF("_SRTN_","_SRTYPE_"," D ^DIK S SRSOUT=1
"RTN","SROCMPED",71,0)
 Q
"RTN","SROCMPED",72,0)
PRESS W ! K DIR S DIR(0)="E" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1
"RTN","SROCMPED",73,0)
 Q
"RTN","SROES")
0^103^B26256773^B26203884
"RTN","SROES",1,0)
SROES ;BIR/ADM - SURGERY E-SIG UTILITY ;06/07/06
"RTN","SROES",2,0)
 ;;3.0; Surgery ;**100,153**;24 Jun 93;Build 11
"RTN","SROES",3,0)
 ;
"RTN","SROES",4,0)
 ;** NOTICE: This routine is part of an implementation of a nationally
"RTN","SROES",5,0)
 ;**         controlled procedure.  Local modifications to this routine
"RTN","SROES",6,0)
 ;**         are prohibited.
"RTN","SROES",7,0)
 ;
"RTN","SROES",8,0)
 ; Reference to EXTRACT^TIULQ supported by DBIA #2693
"RTN","SROES",9,0)
 ;
"RTN","SROES",10,0)
SRA N SRRISK S SRRISK=1
"RTN","SROES",11,0)
ENTER Q:'$G(SRTN)
"RTN","SROES",12,0)
 N SRSOUT D CHECK I $G(SRSOUT) K SRSOUT S XQUIT=""
"RTN","SROES",13,0)
 Q
"RTN","SROES",14,0)
CHECK ; pre-edit capture of nurse and anesthesia reports for addenda
"RTN","SROES",15,0)
 N I,SRA,SRAUDIT,SRCCASE,SRESAR,SRESNR,SRN,SROP,SRSIGN,SRTIU,SRX,SRY,X S (SRAUDIT,SRSOUT)=0
"RTN","SROES",16,0)
 S (SRA(SRTN),SRAUDIT(SRTN),SRN(SRTN))=0,SRTIU=$G(^SRF(SRTN,"TIU")),SRESNR=$P(SRTIU,"^",2),SRESAR=$P(SRTIU,"^",4),SROP=SRTN D DOCS
"RTN","SROES",17,0)
 S SRCCASE=$P($G(^SRF(SRTN,"CON")),"^") I SRCCASE S (SRA(SRCCASE),SRAUDIT(SRCCASE),SRN(SRCCASE))=0,SRTIU=$G(^SRF(SRCCASE,"TIU")),SRESNR=$P(SRTIU,"^",2),SRESAR=$P(SRTIU,"^",4),SROP=SRCCASE D DOCS
"RTN","SROES",18,0)
 S X=0 F  S X=$O(SRAUDIT(X)) Q:'X  I SRAUDIT(X) S SRAUDIT=1 Q
"RTN","SROES",19,0)
 Q:'SRAUDIT
"RTN","SROES",20,0)
 D:'$G(SRRISK) WARN I SRSOUT Q
"RTN","SROES",21,0)
 D KTMP
"RTN","SROES",22,0)
 N SRLCK S SRLCK=$$LOCK^SROUTL(SRTN) I 'SRLCK S XQUIT="",SRSOUT=1 Q
"RTN","SROES",23,0)
 S SROP=0 F  S SROP=$O(SRAUDIT(SROP)) Q:'SROP  D PRE
"RTN","SROES",24,0)
 Q
"RTN","SROES",25,0)
KTMP ; kill TMP globals
"RTN","SROES",26,0)
 F I="SRADDEND","SRAR","SRNR","SRASAVE","SRNSAVE" K ^TMP(I,$J)
"RTN","SROES",27,0)
 F I=1,2 F J="SRAD","SRADM","SRARAD","SRARMULT","SRNRAD","SRNRMULT" K ^TMP(J_I,$J)
"RTN","SROES",28,0)
 Q
"RTN","SROES",29,0)
DOCS ; determine if signed
"RTN","SROES",30,0)
 I SRESNR S SRX=SRESNR,SRSIGN=0 D SIGNED I SRSIGN S SRN(SROP)=1
"RTN","SROES",31,0)
 I SRESAR S SRX=SRESAR,SRSIGN=0 D SIGNED I SRSIGN S SRA(SROP)=1
"RTN","SROES",32,0)
 Q
"RTN","SROES",33,0)
SIGNED I SRX N SRERR D EXTRACT^TIULQ(SRX,"SRY",.SRERR,".05") I SRY(SRX,.05,"I")=7 S SRSIGN=1,SRAUDIT(SROP)=1
"RTN","SROES",34,0)
 K SRY
"RTN","SROES",35,0)
 Q
"RTN","SROES",36,0)
PRE ; save pr-edit copy of case data
"RTN","SROES",37,0)
 N SRTN S SRTN=SROP
"RTN","SROES",38,0)
 D:SRN(SRTN)=1 IN^SROESNR D:SRA(SRTN)=1 IN^SROESAR
"RTN","SROES",39,0)
 Q
"RTN","SROES",40,0)
WARN ; warning message that addendum may be required
"RTN","SROES",41,0)
 D HDR W !!!,?30,">>>  WARNING  <<<"
"RTN","SROES",42,0)
 W !!,"   Electronically signed reports are associated with this case.  Editing",!,"   of data that appear on electronically signed reports will require the",!,"   creation of addenda to the signed reports.",!!!
"RTN","SROES",43,0)
 K DIR S DIR(0)="E" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1
"RTN","SROES",44,0)
 Q
"RTN","SROES",45,0)
HDR S DFN=$P(^SRF(SRTN,0),"^") D DEM^VADPT S Y=$E($P(^SRF(SRTN,0),"^",9),1,7) X ^DD("DD") S SRSDATE=Y
"RTN","SROES",46,0)
 W @IOF,!," "_VADM(1)_" ("_VA("PID")_")   Case #"_SRTN_" - "_SRSDATE
"RTN","SROES",47,0)
 Q
"RTN","SROES",48,0)
EXIT ; post-edit check to see if addenda to nurse/anes. reports are required
"RTN","SROES",49,0)
 Q:'$D(SRTN)  D WAIT^DICD
"RTN","SROES",50,0)
 D:$D(^TMP("SRNRAD1",$J,SRTN)) EX^SROESNR
"RTN","SROES",51,0)
 D:$D(^TMP("SRARAD1",$J,SRTN)) EX^SROESAR
"RTN","SROES",52,0)
 I $D(^TMP("SRNRAD1",$J,SRTN))!$D(^TMP("SRARAD1",$J,SRTN))!$D(^TMP("SRNRAD2",$J,SRTN))!$D(^TMP("SRARAD2",$J,SRTN)) D ^SROESAD1
"RTN","SROES",53,0)
 N SRCCASE,SRTN1 S SRCCASE=$P($G(^SRF(SRTN,"CON")),"^") I SRCCASE S SRTN1=SRTN S SRTN=SRCCASE D
"RTN","SROES",54,0)
 .D:$D(^TMP("SRNRAD1",$J,SRTN)) EX^SROESNR
"RTN","SROES",55,0)
 .D:$D(^TMP("SRARAD1",$J,SRTN)) EX^SROESAR
"RTN","SROES",56,0)
 .I $D(^TMP("SRNRAD1",$J,SRTN))!$D(^TMP("SRARAD1",$J,SRTN)) D ^SROESAD1
"RTN","SROES",57,0)
 .S SRTN=SRTN1
"RTN","SROES",58,0)
DOC N SRADOC,SRDOC,SRNDOC S (SRADOC,SRDOC,SRNDOC)=0
"RTN","SROES",59,0)
 I $O(^TMP("SRNR",$J,SRTN,0)) S SRNDOC=SRNDOC+1,SRDOC=SRDOC+1,SRNDOC(SRTN)="Nurse Intraoperative Report - Case #"_SRTN
"RTN","SROES",60,0)
 I SRCCASE,$O(^TMP("SRNR",$J,SRCCASE,0)) S SRNDOC=SRNDOC+1,SRDOC=SRDOC+1,SRNDOC(SRCCASE)="Nurse Intraoperative Report - Concurrent Case #"_SRCCASE
"RTN","SROES",61,0)
 I $O(^TMP("SRAR",$J,SRTN,0)) S SRADOC=SRADOC+1,SRDOC=SRDOC+1,SRADOC(SRTN)="Anesthesia Report - Case #"_SRTN
"RTN","SROES",62,0)
 I SRCCASE,$O(^TMP("SRAR",$J,SRCCASE,0)) S SRADOC=SRADOC+1,SRDOC=SRDOC+1,SRADOC(SRCCASE)="Anesthesia Report - Concurrent Case #"_SRCCASE
"RTN","SROES",63,0)
 I 'SRDOC Q
"RTN","SROES",64,0)
 D HDR W !!,"An addendum to each of the following electronically signed document(s) is",!,"required:",!
"RTN","SROES",65,0)
 S X=0 F  S X=$O(SRNDOC(X)) Q:'X  W !,?10,SRNDOC(X)
"RTN","SROES",66,0)
 S X=0 F  S X=$O(SRADOC(X)) Q:'X  W !,?10,SRADOC(X)
"RTN","SROES",67,0)
 W !!,"If you choose not to create an addendum, the original data will be restored",!,"to the modified fields appearing on the signed reports.",!!
"RTN","SROES",68,0)
 N SRESNOT S SRESNOT=0 K DIR S DIR(0)="Y",DIR("A")="Create addendum",DIR("B")="YES" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT)!'Y S SRESNOT=1 D ALLREV Q
"RTN","SROES",69,0)
 D ^SROESAD I SRESNOT D REVRS,PRESS
"RTN","SROES",70,0)
 I SRCCASE S SRTN1=SRTN,SRTN=SRCCASE,SRESNOT=0 D ^SROESAD D:SRESNOT REVRS,PRESS S SRTN=SRTN1
"RTN","SROES",71,0)
UNLOCK D UNLOCK^SROUTL(SRTN),KTMP
"RTN","SROES",72,0)
 Q
"RTN","SROES",73,0)
PRESS W ! K DIR S DIR(0)="FOA",DIR("A")="Press RETURN to continue... " D ^DIR K DIR
"RTN","SROES",74,0)
 Q
"RTN","SROES",75,0)
ALLREV ; restore modified fields for both concurrent cases
"RTN","SROES",76,0)
 W !!,"No addendum created.  Original data will be restored.",!!
"RTN","SROES",77,0)
 D REVRS S SRCCASE=$P($G(^SRF(SRTN,"CON")),"^") I SRCCASE S SRTN1=SRTN,SRTN=SRCCASE D REVRS S SRTN=SRTN1
"RTN","SROES",78,0)
 D UNLOCK,PRESS
"RTN","SROES",79,0)
 Q
"RTN","SROES",80,0)
REVRS ; restore modified fields on signed reports
"RTN","SROES",81,0)
 D REVRS^SROESNR0,REVRS^SROESAR0
"RTN","SROES",82,0)
 S SROERR=SRTN D ^SROERR0
"RTN","SROES",83,0)
 Q
"RTN","SROESNR0")
0^73^B30368515^B29620281
"RTN","SROESNR0",1,0)
SROESNR0 ;BIR/ADM - NURSE REPORT E-SIG UTILITY ;02/27/04
"RTN","SROESNR0",2,0)
 ;;3.0; Surgery ;**100,129,147,153**;24 Jun 93;Build 11
"RTN","SROESNR0",3,0)
 ;** NOTICE: This routine is part of an implementation of a nationally
"RTN","SROESNR0",4,0)
 ;**         controlled procedure. Local modifications to this routine
"RTN","SROESNR0",5,0)
 ;**         are prohibited.
"RTN","SROESNR0",6,0)
 ;
"RTN","SROESNR0",7,0)
 ; Reference to ^TMP("CSLSUR1" supported by DBIA #3498
"RTN","SROESNR0",8,0)
 ;
"RTN","SROESNR0",9,0)
VIEW N SRJ,SRCAT,SRFIELD,SRFLD,SRFILE,SRLN,SRNP,SRN,SRP,SRSUB,SRW,X,Y
"RTN","SROESNR0",10,0)
 F SRJ=1:1 S SRFLD=$P($T(FIELD+SRJ),";;",2) Q:SRFLD=""  D
"RTN","SROESNR0",11,0)
 .S SRNP=$P(SRFLD,"^",3),SRN=$P(SRNP,";"),SRP=$P(SRNP,";",2)
"RTN","SROESNR0",12,0)
 .S (SRSUB,X)=$P(SRFLD,"^",2),Y=$P(X,"-",2),SRFILE=$P(Y,","),SRFIELD=$P(Y,",",2)
"RTN","SROESNR0",13,0)
 .I SRFIELD=27 Q:'$P($G(^SRF(SRTN,"TIU")),"^",6)
"RTN","SROESNR0",14,0)
 .I SRFIELD=66 Q:'$P($G(^SRF(SRTN,"TIU")),"^",7)
"RTN","SROESNR0",15,0)
 .S SRCAT=$P(SRFLD,"^") S SRCAT=$S(SRCAT="":SRFILE,1:SRCAT)
"RTN","SROESNR0",16,0)
 .S SRW=$S($P(Y,";",2)["W":1,1:0) I SRW D  Q
"RTN","SROESNR0",17,0)
 ..S ^TMP("SRNRAD"_SRS,$J,SRTN,SRCAT,SRSUB,0)=$G(^SRF(SRTN,SRN,0))
"RTN","SROESNR0",18,0)
 ..I SRS=1 S ^TMP("SRNSAVE",$J,SRTN,SRCAT,SRSUB,0)=$G(^SRF(SRTN,SRN,0))
"RTN","SROESNR0",19,0)
 ..S SRLN=0 F  S SRLN=$O(^SRF(SRTN,SRN,SRLN)) Q:'SRLN  S ^TMP("SRNRAD"_SRS,$J,SRTN,SRCAT,SRSUB,SRLN)=$G(^SRF(SRTN,SRN,SRLN,0)) I SRS=1 S ^TMP("SRNSAVE",$J,SRTN,SRCAT,SRSUB,SRLN)=$G(^SRF(SRTN,SRN,SRLN,0))
"RTN","SROESNR0",20,0)
 .S ^TMP("SRNRAD"_SRS,$J,SRTN,SRCAT,SRSUB)=$P($G(^SRF(SRTN,SRN)),"^",SRP)
"RTN","SROESNR0",21,0)
 .I SRS=1 S ^TMP("SRNSAVE",$J,SRTN,SRCAT,SRSUB)=$P($G(^SRF(SRTN,SRN)),"^",SRP)
"RTN","SROESNR0",22,0)
 Q
"RTN","SROESNR0",23,0)
REVRS ; restore before-edit data
"RTN","SROESNR0",24,0)
 N I,SRCAT,SRCNT,SRE,SRE1,SRFF,SRFIELD,SRFILE,SRFLD,SRI,SRIEN,SRJ,SRK,SRL,SRLN,SRN,SRNP,SRP,SRSUB,SRVAL,SRW,X,Y
"RTN","SROESNR0",25,0)
 F SRJ=1:1 S SRFLD=$P($T(FIELD+SRJ),";;",2) Q:SRFLD=""  D
"RTN","SROESNR0",26,0)
 .S SRNP=$P(SRFLD,"^",3),SRN=$P(SRNP,";"),SRP=$P(SRNP,";",2)
"RTN","SROESNR0",27,0)
 .S (SRSUB,X)=$P(SRFLD,"^",2),Y=$P(X,"-",2),SRFILE=$P(Y,","),SRFIELD=$P(Y,",",2)
"RTN","SROESNR0",28,0)
 .S SRCAT=$P(SRFLD,"^") S SRCAT=$S(SRCAT="":SRFILE,1:SRCAT)
"RTN","SROESNR0",29,0)
 .Q:'$D(^TMP("SRNRAD1",$J,SRTN,130,SRSUB))
"RTN","SROESNR0",30,0)
 .S SRW=$S($P(Y,";",2)["W":1,1:0) I SRW D  Q
"RTN","SROESNR0",31,0)
 ..K ^SRF(SRTN,SRN) S ^SRF(SRTN,SRN,0)=$G(^TMP("SRNSAVE",$J,SRTN,130,SRSUB,0))
"RTN","SROESNR0",32,0)
 ..S SRLN=0 F  S SRLN=$O(^TMP("SRNSAVE",$J,SRTN,130,SRSUB,SRLN)) Q:'SRLN  S ^SRF(SRTN,SRN,SRLN,0)=$G(^TMP("SRNSAVE",$J,SRTN,130,SRSUB,SRLN))
"RTN","SROESNR0",33,0)
 .S SRVAL=$G(^TMP("SRNSAVE",$J,SRTN,130,SRSUB)) I SRFIELD=27 D  Q
"RTN","SROESNR0",34,0)
 ..S $P(^SRF(SRTN,"OP"),"^",2)=SRVAL K DA,DIK S DA=SRTN,DIK="^SRF(",DIK(1)="27" D EN^DIK K DA,DIK
"RTN","SROESNR0",35,0)
 ..;Set ^TMP("CSLSUR1",$J) in order to send an update trans. via Surgery/CoreFLS interface
"RTN","SROESNR0",36,0)
 ..S ^TMP("CSLSUR1",$J)=""
"RTN","SROESNR0",37,0)
 .I SRVAL="" S SRVAL="@"
"RTN","SROESNR0",38,0)
 .K DA,DIE,DR S DA=SRTN,DIE=130,DR=SRFIELD_"////^S X=SRVAL" D ^DIE K DA,DIE,DR
"RTN","SROESNR0",39,0)
 D REVRS^SROESNRA
"RTN","SROESNR0",40,0)
 Q
"RTN","SROESNR0",41,0)
TR S SRP=SRI,SRP=$TR(SRP,"1234567890.,","ABCDEFGHIJPK")
"RTN","SROESNR0",42,0)
 Q
"RTN","SROESNR0",43,0)
FIELD ; list of fields (^field name on report-file,field^node;piece)
"RTN","SROESNR0",44,0)
KPJB ;;^Operating Room-130,.02^0;2
"RTN","SROESNR0",45,0)
KPJCE ;;^Surgical Priority-130,.035^0;10
"RTN","SROESNR0",46,0)
KPBJC ;;^Time Patient Arrived in Holding Area-130,.203^.2;15
"RTN","SROESNR0",47,0)
KPBJE ;;^Time Patient In the O.R.-130,.205^.2;10
"RTN","SROESNR0",48,0)
KPBB ;;^Time the Operation Began-130,.22^.2;2
"RTN","SROESNR0",49,0)
KPBC ;;^Time the Operation Ends-130,.23^.2;3
"RTN","SROESNR0",50,0)
KPBJF ;;^Surgeon Present Time-130,.206^.2;9
"RTN","SROESNR0",51,0)
KPBCB ;;^Time Patient Out of the O.R.-130,.232^.2;12
"RTN","SROESNR0",52,0)
KPAD ;;^Surgeon-130,.14^.1;4
"RTN","SROESNR0",53,0)
KPAE ;;^First Assistant-130,.15^.1;5
"RTN","SROESNR0",54,0)
KPAFD ;;^Attending Surgeon-130,.164^.1;13
"RTN","SROESNR0",55,0)
KPAF ;;^Second Assistant-130,.16^.1;6
"RTN","SROESNR0",56,0)
KPCA ;;^Principal Anesthetist-130,.31^.3;1
"RTN","SROESNR0",57,0)
KPCC ;;^Assistant Anesthetist-130,.33^.3;3
"RTN","SROESNR0",58,0)
KPAI ;;^Preoperative Mood-130,.19^.1;9
"RTN","SROESNR0",59,0)
KPAIF ;;^Preoperative Consciousness-130,.196^.1;15
"RTN","SROESNR0",60,0)
KPJG ;;^Preoperative Skin Integrity-130,.07^0;7
"RTN","SROESNR0",61,0)
KPAIE ;;^Preoperative Conversation-130,.195^.1;14
"RTN","SROESNR0",62,0)
KPFI ;;^Person Confirming ID Band and Valid Consent-130,.69^.6;9
"RTN","SROESNR0",63,0)
KGA ;;^Time Out Verification Completed (Y/N)-130,71^VER;3
"RTN","SROESNR0",64,0)
KGB ;;^Preoperative Imaging Confirmed-130,72^VER;4
"RTN","SROESNR0",65,0)
KGC ;;^Mark on Surgical Site Confirmed-130,73^VER;5
"RTN","SROESNR0",66,0)
KGD ;;^Correct Surgery Comments-130,74;W^74;0
"RTN","SROESNR0",67,0)
KHB ;;^Time Out Verified Comments-130,82;W^82;0
"RTN","SROESNR0",68,0)
KHC ;;^Imaging Confirmed Comments-130,83;W^83;0
"RTN","SROESNR0",69,0)
KHD ;;^Marked Site Comments-130,84;W^84;0
"RTN","SROESNR0",70,0)
KPAH ;;^Skin Prepped By-130,.18^.1;8
"RTN","SROESNR0",71,0)
KPAGE ;;^Skin Preparation Agent-130,.175^.1;7
"RTN","SROESNR0",72,0)
KD ;;^Skin Prepped By (2)-130,4^.1;12
"RTN","SROESNR0",73,0)
KH ;;^Second Skin Preparation Agent-130,8^31;2
"RTN","SROESNR0",74,0)
KPAB ;;^Preop Hair Removal by-130,.12^.1;2
"RTN","SROESNR0",75,0)
KEJF ;;^Hair Removal Method-130,506^VER;6
"RTN","SROESNR0",76,0)
KEJH ;;^Hair Removal Comments-130,508;W^49;0
"RTN","SROESNR0",77,0)
KPGE ;;^Electrocautery Unit-130,.75^.7;5
"RTN","SROESNR0",78,0)
KPEE ;;^Electroground Placement-130,.55^.5;4
"RTN","SROESNR0",79,0)
KF ;;^Electroground Position (2)-130,6^.5;13
"RTN","SROESNR0",80,0)
KEG ;;^ESU Coagulation Range-130,57^.7;1
"RTN","SROESNR0",81,0)
KEGC ;;^ESU Cutting Range-130,58^.7;2
"RTN","SROESNR0",82,0)
KPJC ;;^Major or Minor-130,.03^0;3
"RTN","SROESNR0",83,0)
KBF ;;^Principal Procedure-130,26^OP;1
"RTN","SROESNR0",84,0)
KBG ;;^Principal CPT Code-130,27^OP;2
"RTN","SROESNR0",85,0)
KFF ;;^Principal Diagnosis Code-130,66^34;2
"RTN","SROESNR0",86,0)
KBB ;;^Tubes and Drains-130,22^3;1
"RTN","SROESNR0",87,0)
KDD ;;^Final Sponge Count Correct (Y/N)-130,44^25;1
"RTN","SROESNR0",88,0)
KDE ;;^Final Sharps Count Correct (Y/N)-130,45^25;2
"RTN","SROESNR0",89,0)
KDF ;;^Final Instrument Count Correct (Y/N)-130,46^25;3
"RTN","SROESNR0",90,0)
KDG ;;^Person Responsible for Final Counts-130,47^25;4
"RTN","SROESNR0",91,0)
KDH ;;^Count Verifier-130,48^25;5
"RTN","SROESNR0",92,0)
KDA ;;^Dressing(s)-130,41^35;1
"RTN","SROESNR0",93,0)
KPHGE ;;^Packing Type-130,.875^.8;11
"RTN","SROESNR0",94,0)
KPBE ;;^Intraoperative Blood Loss (ml)-130,.25^.2;5
"RTN","SROESNR0",95,0)
KPBEE ;;^Total Urine Output (ml)-130,.255^.2;16
"RTN","SROESNR0",96,0)
KPHA ;;^Postoperative Mood-130,.81^.8;1
"RTN","SROESNR0",97,0)
KPHBA ;;^Postoperative Consciousness-130,.821^.8;10
"RTN","SROESNR0",98,0)
KPGF ;;^Postoperative Skin Integrity-130,.76^.7;6
"RTN","SROESNR0",99,0)
KPGG ;;^Postoperative Skin Color-130,.77^.7;7
"RTN","SROESNR0",100,0)
KABH ;;^Type of Laser-130,128^.7;8
"RTN","SROESNR0",101,0)
KABG ;;^Sequential Compression Device (Y/N)-130,127^.7;3
"RTN","SROESNR0",102,0)
KAPJI ;;^Wound Classification-130,1.09^1.0;8
"RTN","SROESNR0",103,0)
KPDF ;;^Postoperative Disposition-130,.46^.4;6
"RTN","SROESNR0",104,0)
KBE ;;^Patient Discharged Via-130,25^.7;4
"RTN","SROESNR0",105,0)
KACA ;;^Device(s)-130,131^46;1
"RTN","SROESNR0",106,0)
KDI ;;^Specimens-130,49;W^9;0
"RTN","SROESNR0",107,0)
KFD ;;^Cultures-130,64;W^41;0
"RTN","SROESNR0",108,0)
KPBI ;;^Nursing Care Comments-130,.29;W^7;0
"RTN","SRONIN")
0^74^B64007780^B60628354
"RTN","SRONIN",1,0)
SRONIN ;BIR/MAM,ADM - NURSE INTRAOPERATIVE REPORT ;05/30/06
"RTN","SRONIN",2,0)
 ;;3.0; Surgery ;**68,50,100,129,134,153**;24 Jun 93;Build 11
"RTN","SRONIN",3,0)
 ;** NOTICE: This routine is part of an implementation of a nationally
"RTN","SRONIN",4,0)
 ;**         controlled procedure. Local modifications to this routine
"RTN","SRONIN",5,0)
 ;**         are prohibited.
"RTN","SRONIN",6,0)
 ;
"RTN","SRONIN",7,0)
 ; Reference to UPDATE^TIUSRVP supported by DBIA #3535
"RTN","SRONIN",8,0)
 ; Reference to ES^TIUSROI supported by DBIA #3537
"RTN","SRONIN",9,0)
 ; Reference to EXTRACT^TIULQ supported by DBIA #2693
"RTN","SRONIN",10,0)
 ;
"RTN","SRONIN",11,0)
 I '$D(SRSITE) D ^SROVAR G:'$D(SRSITE) END S SRSITE("KILL")=1
"RTN","SRONIN",12,0)
 I '$D(SRTN) K SRNEWOP D ^SROPS G:'$D(SRTN) END S SRTN("KILL")=1
"RTN","SRONIN",13,0)
 N SRAGE,SRDIV,SRDIVNM,SRDO,SRFUNCT,SRHDR,SRINUSE,SRLEAVE,SRLOC,SRPARAM,SRPRINT,SRSEL,SRSINED,SRDTITL,SRTIU,SRSTAT,SRXX
"RTN","SRONIN",14,0)
 S SRDTITL="Nurse Intraoperative Report"
"RTN","SRONIN",15,0)
 S (SRFUNCT,SRLEAVE,SRSINED)=0,SRTIU=$P($G(^SRF(SRTN,"TIU")),"^",2)
"RTN","SRONIN",16,0)
 I SRTIU,$$STATUS^SROESUTL(SRTIU)=7 S SRSINED=1
"RTN","SRONIN",17,0)
 D:SRSINED FUNCT D:'SRSINED EN
"RTN","SRONIN",18,0)
ENF I 'SRLEAVE,SRFUNCT S SRSEL="" D FUNCT
"RTN","SRONIN",19,0)
 D END
"RTN","SRONIN",20,0)
 Q
"RTN","SRONIN",21,0)
DISPLY I SRSINED S SRTIU=$P($G(^SRF(SRTN,"TIU")),"^",2) I SRTIU D PRNT^SROESPR(SRTN,SRTIU,SRDTITL) S SRLEAVE=1 Q
"RTN","SRONIN",22,0)
 K %ZIS,IO("Q") S %ZIS="Q" D ^%ZIS I POP S SRLEAVE=1 Q
"RTN","SRONIN",23,0)
 I $D(IO("Q")) K IO("Q") N ZTRTN,ZTDESC,ZTSAVE,ZTQUEUED S ZTRTN="PRNT^SRONIN",ZTDESC=SRDTITL,(ZTSAVE("SRTN"),ZTSAVE("SRSITE*"))="" D ^%ZTLOAD,^%ZISC Q
"RTN","SRONIN",24,0)
EN D RPT^SRONRPT(SRTN) S DFN=$P(^SRF(SRTN,0),"^"),VAINDT=$P(^SRF(SRTN,0),"^",9)
"RTN","SRONIN",25,0)
 S Y=$E(VAINDT,1,7) D D^DIQ S SRSDATE=Y D OERR^VADPT
"RTN","SRONIN",26,0)
 S SRHDR=" "_VADM(1)_" ("_VA("PID")_")   Case #"_SRTN_" - "_SRSDATE
"RTN","SRONIN",27,0)
 S Y=$E($$NOW^XLFDT,1,12) D DD^%DT S SRPRINT="Printed: "_Y
"RTN","SRONIN",28,0)
 S SRLOC=" Pt Loc: "_$P(VAIN(4),"^",2)_"  "_VAIN(5)
"RTN","SRONIN",29,0)
 S SRAGE="",Z=$P(VADM(3),"^") I Z S X=$E($P(^SRF(SRTN,0),"^",9),1,12),Y=$E(X,1,7),SRAGE=$E(Y,1,3)-$E(Z,1,3)-($E(Y,4,7)<$E(Z,4,7))
"RTN","SRONIN",30,0)
 S SRDIV=$$SITE^SROUTL0(SRTN),SRDIVNM="" I SRDIV S X=$P(^SRO(133,SRDIV,0),"^"),SRDIVNM=$$EXTERNAL^DILFD(133,.01,"",X)
"RTN","SRONIN",31,0)
 S SRDIVNM=$S(SRDIVNM'="":SRDIVNM,1:SRSITE("SITE"))
"RTN","SRONIN",32,0)
 U IO S (SRPAGE,SRSOUT)=0,$P(SRLINE,"-",80)="" D HDR
"RTN","SRONIN",33,0)
 S SRI=0 F  S SRI=$O(^TMP("SRNIR",$J,SRTN,SRI)) Q:'SRI  D  Q:SRSOUT
"RTN","SRONIN",34,0)
 .I $E(IOST)="P",$Y+11>IOSL D FOOT Q:SRSOUT  D HDR
"RTN","SRONIN",35,0)
 .I $E(IOST)'="P",$Y+4>IOSL D FOOT Q:SRSOUT  D HDR
"RTN","SRONIN",36,0)
 .W !,^TMP("SRNIR",$J,SRTN,SRI)
"RTN","SRONIN",37,0)
 I SRSOUT D ^%ZISC Q 
"RTN","SRONIN",38,0)
 D FOOT D  D ^%ZISC
"RTN","SRONIN",39,0)
 .I $D(SRALRT) S SRFUNCT=1 Q
"RTN","SRONIN",40,0)
 .I '$G(SRFUNCT) S SRLEAVE=1
"RTN","SRONIN",41,0)
 Q
"RTN","SRONIN",42,0)
SRHDR S DFN=$P(^SRF(SRTN,0),"^") D DEM^VADPT
"RTN","SRONIN",43,0)
 S Y=$E($P(^SRF(SRTN,0),"^",9),1,7) D D^DIQ S SRSDATE=Y
"RTN","SRONIN",44,0)
 S SRHDR=" "_VADM(1)_" ("_VA("PID")_")   Case #"_SRTN_" - "_SRSDATE
"RTN","SRONIN",45,0)
 Q
"RTN","SRONIN",46,0)
PRNT N SRDIV,SRFUNCT,SRLEAVE D EN
"RTN","SRONIN",47,0)
END K ^TMP("SRNIR",$J)
"RTN","SRONIN",48,0)
 W @IOF I $D(ZTQUEUED) Q:$G(ZTSTOP)  S ZTREQ="@" Q
"RTN","SRONIN",49,0)
 D ^SRSKILL K VAIN,VAINDT I $D(SRSITE("KILL")) K SRSITE
"RTN","SRONIN",50,0)
 I $D(SRTN("KILL")) K SRTN
"RTN","SRONIN",51,0)
 Q
"RTN","SRONIN",52,0)
PAGE I $D(SRNOEDIT) D LAST Q
"RTN","SRONIN",53,0)
 S (SRFUNCT,SRSOUT)=0
"RTN","SRONIN",54,0)
 W ! K DIR S DIR(0)="FOA",DIR("A",1)=" Press <return> to continue, 'A' to access Nurse Intraoperative Report",DIR("A")=" functions, or '^' to exit: " D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S (SRLEAVE,SRSOUT)=1 Q
"RTN","SRONIN",55,0)
 I X="A"!(X="a") S (SRFUNCT,SRSOUT)=1
"RTN","SRONIN",56,0)
 Q
"RTN","SRONIN",57,0)
LAST W ! K DIR S DIR(0)="E" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1
"RTN","SRONIN",58,0)
 Q
"RTN","SRONIN",59,0)
FOOT ; print footer
"RTN","SRONIN",60,0)
 Q:SRSOUT  I $E(IOST)'="P" D PAGE Q
"RTN","SRONIN",61,0)
 I IOSL-9>$Y F X=$Y:1:(IOSL-10) W !
"RTN","SRONIN",62,0)
 W !,SRLINE,!,VADM(1),?50,SRPRINT,!,VA("PID")_"  Age: "_SRAGE,?50,SRLOC,!,SRDIVNM,?59,"Vice SF 509",!,SRLINE
"RTN","SRONIN",63,0)
 Q
"RTN","SRONIN",64,0)
HDR ; heading
"RTN","SRONIN",65,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SRONIN",66,0)
 S SRPAGE=SRPAGE+1 I $Y'=0 W @IOF
"RTN","SRONIN",67,0)
 I $E(IOST)'="P",SRPAGE=1 S DFN=$P(^SRF(SRTN,0),"^") D DEM^VADPT S SRXX=VADM(1)_" ("_VA("PID")_")" W !,?(80-$L(SRXX)\2),SRXX
"RTN","SRONIN",68,0)
 W:$E(IOST)="P" !!!!,SRLINE W !,?3,"MEDICAL RECORD       NURSE INTRAOPERATIVE REPORT - CASE #"_SRTN,?(79-$L("PAGE "_SRPAGE)),"PAGE "_SRPAGE,!
"RTN","SRONIN",69,0)
 W:$E(IOST)="P" SRLINE,!
"RTN","SRONIN",70,0)
 Q
"RTN","SRONIN",71,0)
FUNCT ; nurse intraop report functions
"RTN","SRONIN",72,0)
 K SRALRT
"RTN","SRONIN",73,0)
 D:'$D(SRHDR) SRHDR S SRSOUT=0,SRTIU=$P($G(^SRF(SRTN,"TIU")),"^",2)
"RTN","SRONIN",74,0)
 I 'SRSINED,SRTIU,$$STATUS^SROESUTL(SRTIU)=7 S SRSINED=1
"RTN","SRONIN",75,0)
 W @IOF,!,SRHDR I SRSINED W !!," * * The Nurse Intraoperative Report has been electronically signed. * *"
"RTN","SRONIN",76,0)
 W !!," Nurse Intraoperative Report Functions:",!
"RTN","SRONIN",77,0)
 S DIR("A",1)="  1. Edit report information",DIR("A",2)="  2. Print/View report from beginning"
"RTN","SRONIN",78,0)
 S DIR("A",3)=$S('SRTIU:"",'SRSINED:"  3. Sign the report electronically",1:"") I SRTIU,'SRSINED S DIR("A",4)=""
"RTN","SRONIN",79,0)
 S DIR("A")="Select number: ",DIR("B")=2,DIR(0)="SAM^1:Edit report information;2:Print/View report from beginning"_$S(('SRSINED&SRTIU):";3:Sign the report electronically",1:"")
"RTN","SRONIN",80,0)
 D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S (SRLEAVE,SRSOUT)=1 D END Q
"RTN","SRONIN",81,0)
 S SRSEL=Y,SRDO=$S(SRSEL=1:"EDIT",SRSEL=3:"SIGN",1:"DISPLY")
"RTN","SRONIN",82,0)
 D @SRDO D UNLOCK^SROUTL(SRTN)
"RTN","SRONIN",83,0)
 S SRSOUT=0,SRFUNCT=1 D ENF
"RTN","SRONIN",84,0)
 Q
"RTN","SRONIN",85,0)
EDIT ; edit report data fields
"RTN","SRONIN",86,0)
 D CHECK^SROES I SRSOUT Q
"RTN","SRONIN",87,0)
 N SROLOCK,SRX,SRZ D ^SROLOCK I SROLOCK S Q3("VIEW")=""
"RTN","SRONIN",88,0)
 N SRLCK S SRLCK=$$LOCK^SROUTL(SRTN) I 'SRLCK Q
"RTN","SRONIN",89,0)
 K DA,DR,DIE S SRDTIME=DTIME,DTIME=3600,DIE=130,DA=SRTN,DR="[SRONRPT]",ST="NURSE INTRAOP"_$S(SROLOCK:" **LOCKED",1:"") D EN2^SROVAR,^SRCUSS S DTIME=SRDTIME K Q3("VIEW")
"RTN","SRONIN",90,0)
 I '$P(^SRF(SRTN,0),"^",20) D ^SROPCE1
"RTN","SRONIN",91,0)
 I $D(SRODR) D ^SROCON1
"RTN","SRONIN",92,0)
 S SROERR=SRTN D ^SROERR0
"RTN","SRONIN",93,0)
 D EXIT^SROES
"RTN","SRONIN",94,0)
 Q
"RTN","SRONIN",95,0)
SIGN ; sign report if appropriate user
"RTN","SRONIN",96,0)
 N SRLCK,SRESIG S SRESIG=1,SRLCK=$$LOCK^SROUTL(SRTN) I 'SRLCK Q
"RTN","SRONIN",97,0)
 N SRMISS,SRNUR,SROK,SRA,SRII,SRJ,Y S SRII=$P($G(^SRF(SRTN,"TIU")),"^",2)
"RTN","SRONIN",98,0)
 S (SROK,SRNUR,SRJ)=0 F  S SRNUR=$O(^SRF(SRTN,19,SRNUR)) Q:'SRNUR  S SRJ=1 I $P(^SRF(SRTN,19,SRNUR,0),"^")=DUZ S SROK=1 Q
"RTN","SRONIN",99,0)
 I $D(^XUSEC("SROCHIEF",DUZ)) S SROK=1
"RTN","SRONIN",100,0)
 I 'SROK,'SRJ,SRII D EXTRACT^TIULQ(SRII,"SRA",.SRERR,"1302") I +$G(SRA(SRII,1302,"I"))=DUZ S SROK=1
"RTN","SRONIN",101,0)
 I 'SROK W !!,"Sorry, you are not authorized to sign this report." H 2 Q
"RTN","SRONIN",102,0)
 S SRMISS=0 D ALLIN Q:SRSOUT!SRMISS
"RTN","SRONIN",103,0)
ES D RPT^SRONRPT(SRTN) N SRAY,SRERR,SRI,SRP,SRSIG,SRTIU,X1
"RTN","SRONIN",104,0)
 S SRTIU=$P($G(^SRF(SRTN,"TIU")),"^",2)
"RTN","SRONIN",105,0)
 D SIG^XUSESIG I X1="" W !!,"Signature failed." H 2 Q
"RTN","SRONIN",106,0)
 F I=1:1 Q:'$D(^TMP("SRNIR",$J,SRTN,I))  S SRAY("TEXT",I,0)=^TMP("SRNIR",$J,SRTN,I)
"RTN","SRONIN",107,0)
 S SRAY(.05)=5 D UPDATE^TIUSRVP(.SRERR,SRTIU,.SRAY,1) K SRAY
"RTN","SRONIN",108,0)
 I +SRERR S SRSINED=1 D
"RTN","SRONIN",109,0)
 .D ES^TIUSROI(SRTIU,DUZ)
"RTN","SRONIN",110,0)
 .S XQAID="SRNIR-"_SRTN,XQAKILL=0 D DELETEA^XQALERT
"RTN","SRONIN",111,0)
 W ! K DIR S DIR(0)="FOA",DIR("A")="Press RETURN to continue... " D ^DIR K DIR
"RTN","SRONIN",112,0)
 Q
"RTN","SRONIN",113,0)
ALLIN N SRFLD,SRI,SRJJ,SRJK,SRMISS1,SRMISS2,SRMISS82,SRMISS83,SRMISS84,SRMIS508,SRP,SRX,SRY,SRZ
"RTN","SRONIN",114,0)
 K DA,DIC,DIQ,DR S (SREDIT,SRMISS,SRMISS1,SRMISS2,SRMISS3,SRMISS82,SRMISS83,SRMISS84,SRMIS508,SRSOUT)=0
"RTN","SRONIN",115,0)
 S DIC="^SRF(",DA=SRTN,DIQ="SRY",DIQ(0)="I",DR=".205;.232;44;45;46;47;48;71;72;73;506" D EN^DIQ1
"RTN","SRONIN",116,0)
 F SRJJ=82,83,84,49 I '$O(^SRF(SRTN,SRJJ,0)) S SRJK=$S(SRJJ=49:508,1:SRJJ),SRY(130,SRTN,SRJK,"I")=""
"RTN","SRONIN",117,0)
 K DA,DIC,DIQ,DR D LIST
"RTN","SRONIN",118,0)
 I $G(SRX(.205))'=""!($G(SRX(.232))'="")!($G(SRX(71))'="")!($G(SRX(72))'="")!($G(SRX(73))'="")!($G(SRX(506))'="") S SRMISS1=1
"RTN","SRONIN",119,0)
 F SRJJ=71,72,73 I (SRY(130,SRTN,SRJJ,"I")="N")!(SRY(130,SRTN,SRJJ,"I")=""),('$O(^SRF(SRTN,SRJJ+11,0))) S @("SRMISS"_(SRJJ+11))=1
"RTN","SRONIN",120,0)
 I SRY(130,SRTN,506,"I")="S"!(SRY(130,SRTN,506,"I")="O"),('$O(^SRF(SRTN,49,0))) S SRMIS508=1
"RTN","SRONIN",121,0)
 I $G(SRX(48))="" F SRZ=44,45,46,47 I $G(SRX(SRZ))'="" S SRMISS2=1 Q
"RTN","SRONIN",122,0)
 I SRMISS1!SRMISS2!$G(SRMISS82)!$G(SRMISS83)!$G(SRMISS84)!$G(SRMIS508) S SRMISS=1 D MESS Q:SRSOUT  I SREDIT D EDIT Q
"RTN","SRONIN",123,0)
 Q
"RTN","SRONIN",124,0)
MESS ; display list of missing items
"RTN","SRONIN",125,0)
 W @IOF,!,"The following information is required before this report may be signed:",!
"RTN","SRONIN",126,0)
 I SRMISS1 F SRZ=.205,.232,71,72,73,506 I $G(SRX(SRZ))'="" W !,?5,SRX(SRZ)
"RTN","SRONIN",127,0)
 I SRMISS2 F SRZ=44:1:47 I $G(SRX(SRZ))'="" W !,?5,SRX(SRZ)
"RTN","SRONIN",128,0)
 F SRJJ=82,83,84 I $G(@("SRMISS"_SRJJ)),$G(SRX(SRJJ))'="" W !,?5,SRX(SRJJ)
"RTN","SRONIN",129,0)
 I $G(SRMIS508),$G(SRX(508))'="" W !,?5,SRX(508)
"RTN","SRONIN",130,0)
 W ! K DIR S DIR("A")="Do you want to enter this information",DIR("B")="YES",DIR(0)="Y" D ^DIR K DIR,SRX I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 Q
"RTN","SRONIN",131,0)
 I Y S SREDIT=1
"RTN","SRONIN",132,0)
 Q
"RTN","SRONIN",133,0)
CODE ; entry point from coding menu
"RTN","SRONIN",134,0)
 N SRAGE,SRDIV,SRDIVNM,SRDO,SRFUNCT,SRHDR,SRINUSE,SRLEAVE,SRLOC,SRNOEDIT,SRPARAM,SRPRINT,SRSEL,SRSINED,SRDTITL,SRTIU,SRSTAT,SRXX
"RTN","SRONIN",135,0)
 S SRNOEDIT=1,SRDTITL="Nurse Intraoperative Report"
"RTN","SRONIN",136,0)
 S (SRFUNCT,SRLEAVE,SRSINED)=0,SRTIU=$P($G(^SRF(SRTN,"TIU")),"^",2)
"RTN","SRONIN",137,0)
 I SRTIU,$$STATUS^SROESUTL(SRTIU)=7 S SRSINED=1
"RTN","SRONIN",138,0)
 D DISPLY,END
"RTN","SRONIN",139,0)
 Q
"RTN","SRONIN",140,0)
LIST S SRZ=0 F  S SRZ=$O(SRY(130,SRTN,SRZ)) Q:'SRZ  I SRY(130,SRTN,SRZ,"I")="" D TR S X=$T(@SRP),SRFLD=$P(X,";;",2),SRX(SRZ)=$P(SRFLD,"^",2)
"RTN","SRONIN",141,0)
 Q
"RTN","SRONIN",142,0)
TR S SRP=SRZ,SRP=$TR(SRP,"1234567890.","ABCDEFGHIJP")
"RTN","SRONIN",143,0)
 Q
"RTN","SRONIN",144,0)
PBJE ;;.205^TIME PAT IN OR
"RTN","SRONIN",145,0)
PBCB ;;.232^TIME PAT OUT OR
"RTN","SRONIN",146,0)
DD ;;44^SPONGE COUNT CORRECT (Y/N)
"RTN","SRONIN",147,0)
DE ;;45^SHARPS COUNT CORRECT (Y/N)
"RTN","SRONIN",148,0)
DF ;;46^INSTRUMENT COUNT CORRECT (Y/N)
"RTN","SRONIN",149,0)
DG ;;47^SPONGE, SHARPS, & INST COUNTER
"RTN","SRONIN",150,0)
DH ;;48^COUNT VERIFIER
"RTN","SRONIN",151,0)
GA ;;71^TIME OUT VERIFIED
"RTN","SRONIN",152,0)
GB ;;72^PREOPERATIVE IMAGING CONFIRMED
"RTN","SRONIN",153,0)
GC ;;73^MARKED SITE CONFIRMED
"RTN","SRONIN",154,0)
HB ;;82^TIME OUT VERIFY COMMENTS
"RTN","SRONIN",155,0)
HC ;;83^IMAGING CONFIRMED COMMENTS
"RTN","SRONIN",156,0)
HD ;;84^MARKED SITE COMMENTS
"RTN","SRONIN",157,0)
EJF ;;506^HAIR REMOVAL METHOD
"RTN","SRONIN",158,0)
EJH ;;508^HAIR REMOVAL COMMENTS
"RTN","SRONRPT0")
0^75^B53211823^B48530067
"RTN","SRONRPT0",1,0)
SRONRPT0 ;BIR/ADM - NURSE INTRAOP REPORT ;05/31/06
"RTN","SRONRPT0",2,0)
 ;;3.0; Surgery ;**100,129,147,153**;24 Jun 93;Build 11
"RTN","SRONRPT0",3,0)
 ;** NOTICE: This routine is part of an implementation of a nationally
"RTN","SRONRPT0",4,0)
 ;**         controlled procedure. Local modifications to this routine
"RTN","SRONRPT0",5,0)
 ;**         are prohibited.
"RTN","SRONRPT0",6,0)
 ;
"RTN","SRONRPT0",7,0)
 D LINE(2) S @SRG@(SRI)="OR Support Personnel:" D LINE(1) S @SRG@(SRI)="  Scrubbed",@SRG@(SRI)=@SRG@(SRI)_$$SPACE(40)_"Circulating" D NURSE
"RTN","SRONRPT0",8,0)
 S SRLF=1,SRLINE="Other Persons in OR: " I '$O(^SRF(SRTN,32,0)),SRALL D LINE(1) S @SRG@(SRI)=SRLINE_"N/A"
"RTN","SRONRPT0",9,0)
 I $O(^SRF(SRTN,32,0)) D LINE(1) S @SRG@(SRI)=SRLINE D
"RTN","SRONRPT0",10,0)
 .S OTH=0 F  S OTH=$O(^SRF(SRTN,32,OTH)) Q:'OTH  D
"RTN","SRONRPT0",11,0)
 ..S X=^SRF(SRTN,32,OTH,0),SRLINE="  "_$P(X,"^")
"RTN","SRONRPT0",12,0)
 ..S Y=$P(X,"^",2) S:Y'="" SRLINE=SRLINE_" ("_Y_")"
"RTN","SRONRPT0",13,0)
 ..D LINE(1) S @SRG@(SRI)=SRLINE
"RTN","SRONRPT0",14,0)
 S SRLF=1
"RTN","SRONRPT0",15,0)
 S X=$P(SR(.1),"^",9),SRMOOD=$S(X:$E($P(^SRO(135.3,X,0),"^"),1,20),1:"N/A")
"RTN","SRONRPT0",16,0)
 S X=$P(SR(.1),"^",15),SRCONS=$S(X:$E($P(^SRO(135.4,X,0),"^"),1,24),1:"N/A")
"RTN","SRONRPT0",17,0)
 S X=$P(SR(0),"^",7),SRSKIN=$S(X:$E($P(^SRO(135.2,X,0),"^"),1,20),1:"N/A")
"RTN","SRONRPT0",18,0)
 S Y=$P(SR(.1),"^",14),C=$P(^DD(130,.195,0),"^",2) D:Y'="" Y^DIQ S SRCONV=$S(Y'="":Y,1:"N/A")
"RTN","SRONRPT0",19,0)
 I 'SRALL,SRMOOD="N/A",SRCONS="N/A" G SKIN
"RTN","SRONRPT0",20,0)
 D LINE(1) S @SRG@(SRI)="Preop Mood:",@SRG@(SRI)=@SRG@(SRI)_$$SPACE(18)_SRMOOD,@SRG@(SRI)=@SRG@(SRI)_$$SPACE(40)_"Preop Consc:",@SRG@(SRI)=@SRG@(SRI)_$$SPACE(56)_SRCONS
"RTN","SRONRPT0",21,0)
SKIN I 'SRALL,SRSKIN="N/A",SRCONV="N/A" G VAL
"RTN","SRONRPT0",22,0)
 D LINE(1) S @SRG@(SRI)="Preop Skin Integ: "_SRSKIN,@SRG@(SRI)=@SRG@(SRI)_$$SPACE(40)_"Preop Converse: "_SRCONV
"RTN","SRONRPT0",23,0)
VAL S SRLF=1,Y=$P(SR(.6),"^",9),C=$P(^DD(130,.69,0),"^",2) D:Y'="" Y^DIQ S SRUSER=$S(Y="":"N/A",1:Y)
"RTN","SRONRPT0",24,0)
 I 'SRALL,SRUSER="N/A" G VER
"RTN","SRONRPT0",25,0)
 D LINE(1) S @SRG@(SRI)="Valid Consent/ID Band Confirmed By: "_SRUSER
"RTN","SRONRPT0",26,0)
 ;
"RTN","SRONRPT0",27,0)
VER N II,SROIM,SROUT,SROIN,SRHRM
"RTN","SRONRPT0",28,0)
 S Y=$P(SR("VER"),"^",5),SROIN=$S(Y="Y":"YES",Y="M":"MARKING NOT REQUIRED FOR THIS PROCEDURE",Y="N":"NO - MARKING REQUIRED BUT NOT DONE (see CORRECT SURGERY COMMENTS)",1:"* NOT ENTERED *")
"RTN","SRONRPT0",29,0)
 D LINE(1) S @SRG@(SRI)="Mark on Surgical Site Confirmed: "_$S($L(SROIN)>43:"",1:SROIN)
"RTN","SRONRPT0",30,0)
 I $L(SROIN)>43 D LINE(1) S @SRG@(SRI)=$$SPACE(2)_SROIN
"RTN","SRONRPT0",31,0)
 S II=84 D ENSC,LINE(1)
"RTN","SRONRPT0",32,0)
 S Y=$P(SR("VER"),"^",4),SROIM=$S(Y="Y":"YES",Y="I":"IMAGING NOT REQUIRED FOR THIS PROCEDURE",Y="N":"IMAGING REQUIRED BUT NOT VIEWED (see CORRECT SURGERY COMMENTS)",1:"* NOT ENTERED *")
"RTN","SRONRPT0",33,0)
 D LINE(1) S @SRG@(SRI)="Preoperative Imaging Confirmed:  "_$S($L(SROIM)>43:"",1:SROIM)
"RTN","SRONRPT0",34,0)
 I $L(SROIM)>43 D LINE(1) S @SRG@(SRI)=$$SPACE(2)_SROIM
"RTN","SRONRPT0",35,0)
 S II=83 D ENSC,LINE(1)
"RTN","SRONRPT0",36,0)
 S Y=$P(SR("VER"),"^",3),SROUT=$S(Y="Y":"YES",Y="N":"NO (see SEE CORRECT SURGERY COMMENTS)",1:"* NOT ENTERED *")
"RTN","SRONRPT0",37,0)
 D LINE(1) S @SRG@(SRI)="Time Out Verification Completed: "_$S($L(SROUT)>43:"",1:SROUT)
"RTN","SRONRPT0",38,0)
 S II=82 D ENSC
"RTN","SRONRPT0",39,0)
 S SRLF=1
"RTN","SRONRPT0",40,0)
 ;
"RTN","SRONRPT0",41,0)
PREP N SRSKIP S SRSKIP=0
"RTN","SRONRPT0",42,0)
 S Y=$P(SR(.1),"^",8),C=$P(^DD(130,.18,0),"^",2) D:Y'="" Y^DIQ,N(25) S SRUSER=$S(Y="":"N/A",1:Y)
"RTN","SRONRPT0",43,0)
 S Y=$P(SR(.1),"^",7),C=$P(^DD(130,.175,0),"^",2) D:Y'="" Y^DIQ S SRAGNT=$S(Y="":"N/A",1:$E(Y,1,22))
"RTN","SRONRPT0",44,0)
 I 'SRALL,SRUSER="N/A",SRAGNT="N/A" G PREP2
"RTN","SRONRPT0",45,0)
 D LINE(1) S @SRG@(SRI)="Skin Prep By: "_SRUSER,@SRG@(SRI)=@SRG@(SRI)_$$SPACE(40)_"Skin Prep Agent: "_SRAGNT
"RTN","SRONRPT0",46,0)
 S SRSKIP=1
"RTN","SRONRPT0",47,0)
PREP2 S Y=$P(SR(.1),"^",12),C=$P(^DD(130,4,0),"^",2) D:Y'="" Y^DIQ,N(21) S SRUSER=$S(Y="":"N/A",1:Y)
"RTN","SRONRPT0",48,0)
 S Y=$P(SR(31),"^",2),C=$P(^DD(130,8,0),"^",2) D:Y'="" Y^DIQ S SRAGNT=$S(Y="":"N/A",1:$E(Y,1,18))
"RTN","SRONRPT0",49,0)
 I 'SRALL,SRUSER="N/A",SRAGNT="N/A" G PREOP
"RTN","SRONRPT0",50,0)
 D LINE(1) S @SRG@(SRI)="Skin Prep By (2): "_SRUSER,@SRG@(SRI)=@SRG@(SRI)_$$SPACE(40)_"2nd Skin Prep Agent: "_SRAGNT
"RTN","SRONRPT0",51,0)
 S SRSKIP=0 D LINE(1)
"RTN","SRONRPT0",52,0)
PREOP S Y=$P(SR(.1),"^",2),C=$P(^DD(130,.12,0),"^",2) D:Y'="" Y^DIQ S SRUSER=$S(Y="":"N/A",1:Y)
"RTN","SRONRPT0",53,0)
 D:SRSKIP LINE(1) D LINE(1) S @SRG@(SRI)="Preop Surgical Site Hair Removal by: "_SRUSER
"RTN","SRONRPT0",54,0)
 S Y=$P(SR("VER"),"^",6),C=$P(^DD(130,506,0),"^",2) D:Y'="" Y^DIQ S SRHRM=$S(Y="":"* NOT ENTERED *",1:Y)
"RTN","SRONRPT0",55,0)
 D LINE(1) S @SRG@(SRI)="Surgical Site Hair Removal Method: "_$S($L(SRHRM)>43:"",1:SRHRM)
"RTN","SRONRPT0",56,0)
 I $L(SRHRM)>43 D LINE(1) S @SRG@(SRI)=$$SPACE(2)_SRHRM
"RTN","SRONRPT0",57,0)
 S II=49 D ENSC
"RTN","SRONRPT0",58,0)
 ;
"RTN","SRONRPT0",59,0)
POS S SRLF=1,SRLINE="Surgery Position(s): " I '$O(^SRF(SRTN,42,0)),SRALL D LINE(1) S @SRG@(SRI)=SRLINE_"N/A"
"RTN","SRONRPT0",60,0)
 I $O(^SRF(SRTN,42,0)) D LINE(1) S @SRG@(SRI)=SRLINE D
"RTN","SRONRPT0",61,0)
 .S SRP=0 F  S SRP=$O(^SRF(SRTN,42,SRP)) Q:'SRP  S X=^SRF(SRTN,42,SRP,0),Z=$P(X,"^"),Y=$P(X,"^",2) D
"RTN","SRONRPT0",62,0)
 ..S SRPOS=$P(^SRO(132,Z,0),"^") D:Y D^DIQ S SRTIME=$S(Y'="":$P(Y,"@")_"  "_$P(Y,"@",2),1:"N/A")
"RTN","SRONRPT0",63,0)
 ..D LINE(1) S @SRG@(SRI)="  "_SRPOS,@SRG@(SRI)=@SRG@(SRI)_$$SPACE(40)_"Placed: "_SRTIME
"RTN","SRONRPT0",64,0)
 S SRLF=1,SRLINE="Restraints and Position Aids: "
"RTN","SRONRPT0",65,0)
 I '$O(^SRF(SRTN,20,0)),SRALL D LINE(1) S @SRG@(SRI)=SRLINE_"N/A"
"RTN","SRONRPT0",66,0)
 I $O(^SRF(SRTN,20,0)) N SRRP D LINE(1) S @SRG@(SRI)=SRLINE,(SRRP,CNT)=0 F  S SRRP=$O(^SRF(SRTN,20,SRRP)) Q:'SRRP  S CNT=CNT+1,X=^SRF(SRTN,20,SRRP,0),Z=$P(X,"^"),Y=$P(X,"^",2),W=$P(X,"^",3) D
"RTN","SRONRPT0",67,0)
 .S SREST=$P(^SRO(132.05,Z,0),"^"),C=$P(^DD(130.31,1,0),"^",2) D:Y'="" Y^DIQ,N(31) S:Y="" Y="N/A"
"RTN","SRONRPT0",68,0)
 .D LINE(1) S @SRG@(SRI)="  "_SREST,@SRG@(SRI)=@SRG@(SRI)_$$SPACE(36)_"Applied By: "_Y
"RTN","SRONRPT0",69,0)
 .I W'="" D LINE(1) S @SRG@(SRI)="      Comments: "_W
"RTN","SRONRPT0",70,0)
 S SRLF=1,X=$P(SR(.7),"^",5),SREL=$S(X'="":X,1:"N/A")
"RTN","SRONRPT0",71,0)
 S X=$P(SR(.5),"^",4),SRELP=$S(X:$P(^SRO(138,X,0),"^"),1:"N/A")
"RTN","SRONRPT0",72,0)
 S X=$P(SR(.5),"^",13),SRELP2=$S(X:$P(^SRO(138,X,0),"^"),1:"")
"RTN","SRONRPT0",73,0)
 S X=$P(SR(.7),"^"),SRC=$S(X'="":X,1:"N/A"),X=$P(SR(.7),"^",2),SRCT=$S(X'="":X,1:"N/A")
"RTN","SRONRPT0",74,0)
 I 'SRALL,SREL="N/A",SRELP="N/A",SRELP2="" G LAB
"RTN","SRONRPT0",75,0)
 D LINE(1) S @SRG@(SRI)="Electrocautery Unit:       "_SREL
"RTN","SRONRPT0",76,0)
 D LINE(1) S @SRG@(SRI)="ESU Coagulation Range:     "_SRC
"RTN","SRONRPT0",77,0)
 D LINE(1) S @SRG@(SRI)="ESU Cutting Range:         "_SRCT
"RTN","SRONRPT0",78,0)
 D LINE(1) S @SRG@(SRI)="Electroground Position(s): "_SRELP
"RTN","SRONRPT0",79,0)
 I SRELP2'="" D LINE(1) S @SRG@(SRI)=$$SPACE(27)_SRELP2
"RTN","SRONRPT0",80,0)
LAB S SRLF=1 I $O(^SRF(SRTN,9,0))!SRALL D LAB1
"RTN","SRONRPT0",81,0)
 S SRLF=1 I $O(^SRF(SRTN,6,0)) D LINE(1) S @SRG@(SRI)="Anesthesia Technique(s):" S ANE=0 F  S ANE=$O(^SRF(SRTN,6,ANE)) Q:'ANE  D ANE
"RTN","SRONRPT0",82,0)
 I '$O(^SRF(SRTN,6,0)),SRALL D LINE(1) S @SRG@(SRI)="Anesthesia Technique(s): N/A"
"RTN","SRONRPT0",83,0)
 D ^SRONRPT1
"RTN","SRONRPT0",84,0)
 Q
"RTN","SRONRPT0",85,0)
NURSE ; nurse info
"RTN","SRONRPT0",86,0)
 N CNT,CIRC,I,NURSE,SCRU,X,Y,Z
"RTN","SRONRPT0",87,0)
 S (CNT,CIRC)=0 F  S CIRC=$O(^SRF(SRTN,19,CIRC)) Q:'CIRC  S CNT=CNT+1 D
"RTN","SRONRPT0",88,0)
 .S Z=^SRF(SRTN,19,CIRC,0),Y=$P(Z,"^"),C=$P(^DD(130.28,.01,0),"^",2) D Y^DIQ,N(21) S SRX=Y
"RTN","SRONRPT0",89,0)
 .S Y=$P(Z,"^",3),C=$P(^DD(130.28,3,0),"^",2) D:Y'="" Y^DIQ S CIRC(CNT)=SRX_" ("_Y_")"
"RTN","SRONRPT0",90,0)
 S (CNT,SCRU)=0 F  S SCRU=$O(^SRF(SRTN,23,SCRU)) Q:'SCRU  S CNT=CNT+1 D
"RTN","SRONRPT0",91,0)
 .S Z=^SRF(SRTN,23,SCRU,0),Y=$P(Z,"^"),C=$P(^DD(130.36,.01,0),"^",2) D Y^DIQ,N(21) S SRX=Y
"RTN","SRONRPT0",92,0)
 .S Y=$P(Z,"^",3),C=$P(^DD(130.36,3,0),"^",2) D:Y'="" Y^DIQ S SCRU(CNT)=SRX_" ("_Y_")"
"RTN","SRONRPT0",93,0)
 S:'$D(SCRU(1)) SCRU(1)="N/A" S:'$D(CIRC(1)) CIRC(1)="N/A"
"RTN","SRONRPT0",94,0)
 F I=1:1 Q:('$D(SCRU(I))&'$D(CIRC(I)))  S NURSE(I)=$S($D(SCRU(I)):SCRU(I),1:"")_"^"_$S($D(CIRC(I)):CIRC(I),1:"")
"RTN","SRONRPT0",95,0)
 S I=0 F  S I=$O(NURSE(I)) Q:'I  D LINE(1) S @SRG@(SRI)=$$SPACE(2)_$P(NURSE(I),"^") S @SRG@(SRI)=@SRG@(SRI)_$$SPACE(40)_$P(NURSE(I),"^",2)
"RTN","SRONRPT0",96,0)
 Q
"RTN","SRONRPT0",97,0)
LAB1 N SRSP S SRLF=1 D LINE(1) S @SRG@(SRI)="Material Sent to Laboratory for Analysis: "
"RTN","SRONRPT0",98,0)
 I 'SRALL,'$O(^SRF(SRTN,9,0)),'$O(^SRF(SRTN,41,0)) S @SRG@(SRI)=@SRG@(SRI)_"N/A" Q
"RTN","SRONRPT0",99,0)
 D LINE(1) S @SRG@(SRI)="Specimens: " D
"RTN","SRONRPT0",100,0)
 .I '$O(^SRF(SRTN,9,0)) S @SRG@(SRI)=@SRG@(SRI)_"N/A" Q
"RTN","SRONRPT0",101,0)
 .S SRSP=0 F  S SRSP=$O(^SRF(SRTN,9,SRSP)) Q:'SRSP  D LINE(1) S @SRG@(SRI)=$$SPACE(2)_^SRF(SRTN,9,SRSP,0)
"RTN","SRONRPT0",102,0)
 D LINE(1) S @SRG@(SRI)="Cultures:  " D
"RTN","SRONRPT0",103,0)
 .I '$O(^SRF(SRTN,41,0)) S @SRG@(SRI)=@SRG@(SRI)_"N/A" Q
"RTN","SRONRPT0",104,0)
 .S SRSP=0 F  S SRSP=$O(^SRF(SRTN,41,SRSP)) Q:'SRSP  D LINE(1) S @SRG@(SRI)=$$SPACE(2)_^SRF(SRTN,41,SRSP,0)
"RTN","SRONRPT0",105,0)
 Q
"RTN","SRONRPT0",106,0)
N(SRL) N SRN I $L(Y)>SRL S SRN=$P(Y,",")_","_$E($P(Y,",",2))_".",Y=SRN
"RTN","SRONRPT0",107,0)
 Q
"RTN","SRONRPT0",108,0)
SPACE(NUM) ; create spaces
"RTN","SRONRPT0",109,0)
 ;pass in position returns number of needed spaces
"RTN","SRONRPT0",110,0)
 I '$D(@SRG@(SRI)) S @SRG@(SRI)=""
"RTN","SRONRPT0",111,0)
 Q $J("",NUM-$L(@SRG@(SRI)))
"RTN","SRONRPT0",112,0)
LINE(NUM) ; create carriage returns
"RTN","SRONRPT0",113,0)
 I $G(SRLF) S NUM=NUM+1,SRLF=0
"RTN","SRONRPT0",114,0)
 F J=1:1:NUM S SRI=SRI+1,@SRG@(SRI)=""
"RTN","SRONRPT0",115,0)
 Q
"RTN","SRONRPT0",116,0)
ANE ; print anesthesia technique
"RTN","SRONRPT0",117,0)
 N A,AGNT,C,CNT,DRUG
"RTN","SRONRPT0",118,0)
 S A=^SRF(SRTN,6,ANE,0),Y=$P(A,"^"),C=$P(^DD(130.06,.01,0),"^",2) D:Y'="" Y^DIQ D LINE(1) S Y=Y_$S($P(A,"^",3)="Y":"  (PRINCIPAL)",1:""),@SRG@(SRI)=$$SPACE(2)_Y
"RTN","SRONRPT0",119,0)
 Q
"RTN","SRONRPT0",120,0)
ENSC N X,SRLINE
"RTN","SRONRPT0",121,0)
 D LINE(1) S @SRG@(SRI)="  "_$S(II=82:"Time Out Verified Comments: ",II=83:"Imaging Confirmed Comments: ",II=84:"Marked Site Comments: ",II=49:"Hair Removal Comments: ",1:"") D
"RTN","SRONRPT0",122,0)
 .I '$O(^SRF(SRTN,II,0)) S @SRG@(SRI)=@SRG@(SRI)_"NO COMMENTS ENTERED" Q
"RTN","SRONRPT0",123,0)
 .S SRLINE=0 F  S SRLINE=$O(^SRF(SRTN,II,SRLINE)) Q:'SRLINE  S X=^SRF(SRTN,II,SRLINE,0) D COMM^SRONRPT3(X,3)
"RTN","SRONRPT0",124,0)
 Q
"RTN","SROQ0")
0^60^B16257215^B26738234
"RTN","SROQ0",1,0)
SROQ0 ;BIR/ADM - QUARTERLY REPORT (CONTINUED) ;03/21/06
"RTN","SROQ0",2,0)
 ;;3.0; Surgery ;**62,70,77,50,95,123,129,153**;24 Jun 93;Build 11
"RTN","SROQ0",3,0)
 ;** NOTICE: This routine is part of an implementation of a nationally
"RTN","SROQ0",4,0)
 ;**         controlled procedure. Local modifications to this routine
"RTN","SROQ0",5,0)
 ;**         are prohibited.
"RTN","SROQ0",6,0)
 ;
"RTN","SROQ0",7,0)
 ; Reference to ^DIC(45.3 supported by DBIA #218
"RTN","SROQ0",8,0)
 ;
"RTN","SROQ0",9,0)
 S SR(0)=^SRF(SRTN,0),DFN=$P(SR(0),"^") I '$D(^TMP("SRDPT",$J,DFN)) S ^TMP("SRDPT",$J,DFN)="",SRDPT=SRDPT+1
"RTN","SROQ0",10,0)
 D DEM^VADPT S X1=SRSD,X2=$P(VADM(3),"^"),SRAGE=$E(X1,1,3)-$E(X2,1,3)-($E(X1,4,7)<$E(X2,4,7)) I SRAGE>60 S SR60=SR60+1
"RTN","SROQ0",11,0)
 S SRDEATH=0,SRREL="" I $P(VADM(6),"^"),SRSD<$P(VADM(6),"^") S X1=SRSD,X2=30 D C^%DTC I $P(VADM(6),"^")'>X S SRDEATH=1
"RTN","SROQ0",12,0)
 I SRDEATH S ^TMP("SRDTH",$J,DFN)=""
"RTN","SROQ0",13,0)
 S SRMM=$P(SR(0),"^",3) I SRMM="J" S SRMAJOR=SRMAJOR+1
"RTN","SROQ0",14,0)
 S SRIOSTAT=$P(SR(0),"^",12) I SRIOSTAT'="I"&(SRIOSTAT'="O") S VAIP("D")=SRSD D IN5^VADPT S SRIOSTAT=$S(VAIP(13):"I",1:"O") K VAIP
"RTN","SROQ0",15,0)
 I SRIOSTAT="I" S SRINPAT=SRINPAT+1
"RTN","SROQ0",16,0)
 S Y=$P($G(^SRF(SRTN,1.1)),"^",3),C=$P(^DD(130,1.13,0),"^",2) D:Y'="" Y^DIQ S SRASA=$P(Y,"-")
"RTN","SROQ0",17,0)
 S SREM=$P(SR(0),"^",10) I SREM="EM"!(SRASA["E") S SREMERG=SREMERG+1
"RTN","SROQ0",18,0)
COMP ; check for post-op complications
"RTN","SROQ0",19,0)
 S SRPOC=0 I $O(^SRF(SRTN,16,0)) S SRPOC=1,SRCOMP=SRCOMP+1
"RTN","SROQ0",20,0)
ASA ; find ASA class for major procedures
"RTN","SROQ0",21,0)
 I SRMM="J" S Z=$E(SRASA) S:Z="" Z=7 S SRASA(Z)=SRASA(Z)+1
"RTN","SROQ0",22,0)
SP ; find specialty data
"RTN","SROQ0",23,0)
 S X=$P(SR(0),"^",4),Y=$S(X:$P(^SRO(137.45,X,0),"^",2),1:"ZZ") S SRSS=$S(Y:$P(^DIC(45.3,Y,0),"^"),1:Y) I '$D(SRSPEC(SRSS)) S SRSS="ZZ"
"RTN","SROQ0",24,0)
 F I=1:1:4 S SRP(I)=$P(^TMP("SRSS",$J,SRSS),"^",I)
"RTN","SROQ0",25,0)
 I '$D(^TMP("SRDPT",$J,DFN,SRSS)) S ^TMP("SRDPT",$J,DFN,SRSS)="",SRP(1)=SRP(1)+1
"RTN","SROQ0",26,0)
 S SRP(2)=SRP(2)+1 S:SRMM="J" SRP(3)=SRP(3)+1 S:SRMM'="J" SRP(4)=SRP(4)+1
"RTN","SROQ0",27,0)
 S ^TMP("SRSS",$J,SRSS)=SRP(1)_"^"_SRP(2)_"^"_SRP(3)_"^"_SRP(4) K SRP
"RTN","SROQ0",28,0)
 D ^SROQ0A
"RTN","SROQ0",29,0)
WC ; clean wound ?
"RTN","SROQ0",30,0)
 S SRCLEAN=0 I $P($G(^SRF(SRTN,"1.0")),"^",8)="C" S SRWC=SRWC+1,SRCLEAN=1
"RTN","SROQ0",31,0)
CAT ; complication categories
"RTN","SROQ0",32,0)
 S SRW=0
"RTN","SROQ0",33,0)
 I SRPOC S SRC=0 F  S SRC=$O(^SRF(SRTN,16,SRC)) Q:'SRC  S SRCAT=$P(^SRF(SRTN,16,SRC,0),"^",2) I SRCAT D
"RTN","SROQ0",34,0)
 .S SRC(SRCAT)=SRC(SRCAT)+1 I SRCLEAN,(SRCAT=1!(SRCAT=2)) S SRW=1
"RTN","SROQ0",35,0)
 I $O(^SRF(SRTN,10,0)) S SRC=0 F  S SRC=$O(^SRF(SRTN,10,SRC)) Q:'SRC  S SRCAT=$P(^SRF(SRTN,10,SRC,0),"^",2) I SRCAT D
"RTN","SROQ0",36,0)
 .S SRC(SRCAT)=SRC(SRCAT)+1 I SRCLEAN,(SRCAT=1!(SRCAT=2)) S SRW=1
"RTN","SROQ0",37,0)
 I SRW S SRIN=SRIN+1
"RTN","SROQ0",38,0)
ENSURE ; check ensuring correct surgery compliance
"RTN","SROQ0",39,0)
 S SRVER=$G(^SRF(SRTN,"VER"))
"RTN","SROQ0",40,0)
TOV ; process time out verified field
"RTN","SROQ0",41,0)
 S SR71=$P(SRVER,"^",3) D
"RTN","SROQ0",42,0)
 .I SR71="Y" S SRTOV=SRTOV+1 Q
"RTN","SROQ0",43,0)
 .I SR71="N" S SRTONO=SRTONO+1 Q
"RTN","SROQ0",44,0)
 .S SRTONE=SRTONE+1
"RTN","SROQ0",45,0)
IC ; process imaging confirmed field
"RTN","SROQ0",46,0)
 S SR72=$P(SRVER,"^",4) D
"RTN","SROQ0",47,0)
 .I SR72="Y" S SRICY=SRICY+1 Q
"RTN","SROQ0",48,0)
 .I SR72="I" S SRICNR=SRICNR+1 Q
"RTN","SROQ0",49,0)
 .I SR72="N" S SRICNO=SRICNO+1 Q
"RTN","SROQ0",50,0)
 .S SRICNE=SRICNE+1
"RTN","SROQ0",51,0)
MRK ; process mark on surgical site confirmed field
"RTN","SROQ0",52,0)
 S SR73=$P(SRVER,"^",5) D
"RTN","SROQ0",53,0)
 .I SR73="Y" S SRSCY=SRSCY+1 Q
"RTN","SROQ0",54,0)
 .I SR73="M" S SRSCNR=SRSCNR+1 Q
"RTN","SROQ0",55,0)
 .I SR73="N" S SRSCNO=SRSCNO+1 Q
"RTN","SROQ0",56,0)
 .S SRSCNE=SRSCNE+1
"RTN","SROQ0",57,0)
HAIR ; process hair removal method
"RTN","SROQ0",58,0)
 S X=$P(SRVER,"^",6) I X="" S X="ZZ"
"RTN","SROQ0",59,0)
 I $D(SRHAIR(X)) S SRHAIR(X)=SRHAIR(X)+1 Q
"RTN","SROQ0",60,0)
 S SRHAIR("ZZ")=SRHAIR("ZZ")+1
"RTN","SROQ0",61,0)
 Q
"RTN","SROQ0",62,0)
HDR ; print page header
"RTN","SROQ0",63,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SROQ0",64,0)
 I SRHDR,$E(IOST,1,2)="C-" W !!,"Press RETURN to continue, or '^' to quit: " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROQ0",65,0)
 S SRHDR=1 I $E(IOST)'="P" W @IOF Q
"RTN","SROQ0",66,0)
 S SRPAGE=SRPAGE+1 I 'SRFLG D HDR1 Q
"RTN","SROQ0",67,0)
 W:$Y @IOF W !,?23,"QUARTERLY REPORT - SURGICAL SERVICE",?76,"PAGE",!,?35,"VERSION 3.0",?78,SRPAGE
"RTN","SROQ0",68,0)
 I SRINST["ALL DIV" W !!,?(80-$L("Hospital: "_SRINST)\2),"Hospital: ",SRINST,!,?30,"Station Number: ",SRSTATN
"RTN","SROQ0",69,0)
 I SRINST'["ALL DIV" W !!,?3,"Hospital: ",SRINST,?55,"Station Number: ",SRSTATN
"RTN","SROQ0",70,0)
 W !,?3,"For Dates: ",SRSD,?32,"to: ",SRED,?55,"Fiscal Year: ",SRYR,! F I=1:1:80 W "="
"RTN","SROQ0",71,0)
 Q
"RTN","SROQ0",72,0)
HDR1 ; print header if not quarterly report
"RTN","SROQ0",73,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SROQ0",74,0)
 W:$Y @IOF W !,?24,"SUMMARY REPORT - SURGICAL SERVICE",?76,"PAGE",!,?35,"VERSION 3.0",?78,SRPAGE
"RTN","SROQ0",75,0)
 W !!,?(80-$L("Hospital: "_SRINST)\2),"Hospital: ",SRINST,!,?30,"Station Number: ",SRSTATN
"RTN","SROQ0",76,0)
 W !,?20,"For Dates: ",SRSD,"  to: ",SRED I $E(IOST)="P" W ! F I=1:1:80 W "="
"RTN","SROQ0",77,0)
 Q
"RTN","SROQ1")
0^77^B34164530^B26613314
"RTN","SROQ1",1,0)
SROQ1 ;BIR/ADM - QUARTERLY REPORT (CONTINUED) ;04/03/06
"RTN","SROQ1",2,0)
 ;;3.0; Surgery ;**38,62,70,50,95,123,126,129,153**;24 Jun 93;Build 11
"RTN","SROQ1",3,0)
 ;** NOTICE: This routine is part of an implementation of a nationally
"RTN","SROQ1",4,0)
 ;**         controlled procedure. Local modifications to this routine
"RTN","SROQ1",5,0)
 ;**         are prohibited.
"RTN","SROQ1",6,0)
 ;
"RTN","SROQ1",7,0)
 Q:SRSOUT  U IO S (SRHDR,SRPAGE)=0 D HDR^SROQ0 Q:SRSOUT
"RTN","SROQ1",8,0)
TOT W !!,?35,"Total Cases",?55,"% of Total",!,?35,"-----------",?55,"----------"
"RTN","SROQ1",9,0)
 W !,?5,"Surgical Cases",?37,$J(SRCASES,6) W:SRCASES ?57,"100.0" S SRALL=SRCASES I 'SRALL S SRALL=1
"RTN","SROQ1",10,0)
 W !,?5,"Major Procedures",?37,$J(SRMAJOR,6),?57,$J(((SRMAJOR/SRALL)*100),5,1) S SRMAJ=SRMAJOR I 'SRMAJOR S SRMAJ=1
"RTN","SROQ1",11,0)
ASA F I=1:1:6 W !,?9,"ASA Class ("_I_")",?37,$J(SRASA(I),6),?57,$J(((SRASA(I)/SRMAJ)*100),5,1)
"RTN","SROQ1",12,0)
 I SRASA(7) W !,?9,"ASA Class (Not Entered)",?37,$J(SRASA(7),6),?57,$J(((SRASA(7)/SRMAJ)*100),5,1)
"RTN","SROQ1",13,0)
 W !,?5,"Postoperative Deaths",?37,$J(SRMORT,6),?57,$J(((SRMORT/SRALL)*100),5,1),!,?9,"Ambulatory: "_SROPD
"RTN","SROQ1",14,0)
 W !,?5,"Postoperative Occurrences",?37,$J(SRCOMP,6),?57,$J(((SRCOMP/SRALL)*100),5,1)
"RTN","SROQ1",15,0)
 W !,?5,"Ambulatory Procedures",?37,$J((SRCASES-SRINPAT),6),?57,$J((((SRCASES-SRINPAT)/SRALL)*100),5,1)
"RTN","SROQ1",16,0)
 W !,?9,"Admitted Within 14 Days: "_SRADMT
"RTN","SROQ1",17,0)
 W !,?9,"Invasive Diagnostic: "_SRINV("O")
"RTN","SROQ1",18,0)
 W !,?5,"Inpatient Procedures",?37,$J(SRINPAT,6),?57,$J(((SRINPAT/SRALL)*100),5,1)
"RTN","SROQ1",19,0)
 W !,?5,"Emergency Procedures",?37,$J(SREMERG,6),?57,$J(((SREMERG/SRALL)*100),5,1)
"RTN","SROQ1",20,0)
 W !,?5,"Age>60 Years",?37,$J(SR60,6),?57,$J(((SR60/SRALL)*100),5,1)
"RTN","SROQ1",21,0)
SP D:$E(IOST,1,2)="C-" HDR^SROQ0 Q:SRSOUT  W:$E(IOST,1,2)'="C-" !
"RTN","SROQ1",22,0)
 W !!,?30,"SPECIALTY PROCEDURES",!,?30,"--------------------",!,?66,"---DEATHS---"
"RTN","SROQ1",23,0)
 W !,?27,"PATIENTS   CASES    MAJOR    MINOR     TOTAL    %"
"RTN","SROQ1",24,0)
 W !,?27,"--------   -----    -----    -----     -----   ----"
"RTN","SROQ1",25,0)
SRSS ; print data for each specialty
"RTN","SROQ1",26,0)
 S SRPTF=50,SRSP="GENERAL" D SPOUT
"RTN","SROQ1",27,0)
 S SRPTF=51,SRSP="GYNECOLOGY" D SPOUT
"RTN","SROQ1",28,0)
 S SRPTF=52,SRSP="NEUROSURGERY" D SPOUT
"RTN","SROQ1",29,0)
 S SRPTF=53,SRSP="OPHTHALMOLOGY" D SPOUT
"RTN","SROQ1",30,0)
 S SRPTF=54,SRSP="ORTHOPEDICS" D SPOUT
"RTN","SROQ1",31,0)
 S SRPTF=55,SRSP="OTORHINOLARYNGOLOGY" D SPOUT
"RTN","SROQ1",32,0)
 S SRPTF=56,SRSP="PLASTIC SURGERY" D SPOUT
"RTN","SROQ1",33,0)
 S SRPTF=57,SRSP="PROCTOLOGY" D SPOUT
"RTN","SROQ1",34,0)
 S SRPTF=58,SRSP="THORACIC SURGERY" D SPOUT
"RTN","SROQ1",35,0)
 S SRPTF=59,SRSP="UROLOGY" D SPOUT
"RTN","SROQ1",36,0)
 S SRPTF=60,SRSP="ORAL SURGERY" D SPOUT
"RTN","SROQ1",37,0)
 S SRPTF=61,SRSP="PODIATRY" D SPOUT
"RTN","SROQ1",38,0)
 S SRPTF=62,SRSP="PERIPHERAL VASCULAR" D SPOUT
"RTN","SROQ1",39,0)
 S SRPTF=500,SRSP="CARDIAC SURGERY" D SPOUT
"RTN","SROQ1",40,0)
 S SRPTF=501,SRSP="TRANSPLANTATION" D SPOUT
"RTN","SROQ1",41,0)
 S SRPTF=502,SRSP="ANESTHESIOLOGY" D SPOUT
"RTN","SROQ1",42,0)
 I +^TMP("SRSS",$J,"ZZ") S SRPTF="ZZ",SRSP="SPECIALTY NOT ENTERED" D SPOUT
"RTN","SROQ1",43,0)
RES ; resident supervision
"RTN","SROQ1",44,0)
 I $E(IOST,1,2)="C-" D HDR^SROQ0 Q:SRSOUT
"RTN","SROQ1",45,0)
 W !!!,?24,"LEVEL OF RESIDENT SUPERVISION (%)",!,?24,"---------------------------------",!,?42,"MAJOR     MINOR"
"RTN","SROQ1",46,0)
 S SRIX=SRCASES-SRMAJOR,SRMAJ=SRMAJOR S:'SRIX SRIX=1 S:'SRMAJ SRMAJ=1
"RTN","SROQ1",47,0)
 S I=0 F  S I=$O(SRATT("J",I)) Q:'I  D
"RTN","SROQ1",48,0)
 .S SRL=$S(I=9:"A",I=10:"B",I=11:"C",I=12:"D",I=13:"E",I=14:"F",I=1:"0 (Old)",I=2:"1 (Old)",I=3:"2 (Old)",I=4:"3 (Old)",I=5:"0",I=6:"1",I=7:"2",I=8:"3",1:"Not Entered")
"RTN","SROQ1",49,0)
 .W !,?24,"Level ",SRL,?42,$J(((SRATT("J",I)/SRMAJ)*100),5,1),?52,$J(((SRATT("N",I)/SRIX)*100),5,1)
"RTN","SROQ1",50,0)
NDEX ; print data for index procedures
"RTN","SROQ1",51,0)
 D HDR^SROQ0 Q:SRSOUT
"RTN","SROQ1",52,0)
 W !!,?32,"INDEX PROCEDURES",!,?32,"----------------"
"RTN","SROQ1",53,0)
 W !,?54,"CASES WITH",!,?30,"CASES        DEATHS     OCCURRENCES"
"RTN","SROQ1",54,0)
 W !,?30,"-----        -------    -----------"
"RTN","SROQ1",55,0)
 F J=1:1:12 D IX
"RTN","SROQ1",56,0)
 D ^SROQ1A
"RTN","SROQ1",57,0)
ENSURE ; ensuring correct surgery compliance
"RTN","SROQ1",58,0)
 D HDR^SROQ0 Q:SRSOUT
"RTN","SROQ1",59,0)
 W !!,?17,"ENSURING CORRECT SURGERY - COMPLIANCE SUMMARY",!,?17,"---------------------------------------------"
"RTN","SROQ1",60,0)
 W !!,?42,"CASES    % OF TOTAL",!,?42,"-----    ----------"
"RTN","SROQ1",61,0)
 W !,?18,"TOTAL CASES PERFORMED:"_$J(SRCASES,6) W:SRCASES ?53,"100.0"
"RTN","SROQ1",62,0)
 W !!,?22,"TIME OUT VERIFIED",!,?36,"YES:"_$J(SRTOV,6) W:SRCASES ?53,$J(((SRTOV/SRCASES)*100),5,1)
"RTN","SROQ1",63,0)
 W !,?37,"NO:"_$J(SRTONO,6) W:SRCASES ?53,$J(((SRTONO/SRCASES)*100),5,1)
"RTN","SROQ1",64,0)
 W !,?28,"NOT ENTERED:"_$J(SRTONE,6) W:SRCASES ?53,$J(((SRTONE/SRCASES)*100),5,1)
"RTN","SROQ1",65,0)
 W !!,?9,"PREOPERATIVE IMAGING CONFIRMED",!,?36,"YES:"_$J(SRICY,6) W:SRCASES ?53,$J(((SRICY/SRCASES)*100),5,1)
"RTN","SROQ1",66,0)
 W !,?19,"IMAGING NOT REQUIRED:"_$J(SRICNR,6) W:SRCASES ?53,$J(((SRICNR/SRCASES)*100),5,1)
"RTN","SROQ1",67,0)
 W !,?37,"NO:"_$J(SRICNO,6) W:SRCASES ?53,$J(((SRICNO/SRCASES)*100),5,1)
"RTN","SROQ1",68,0)
 W !,?28,"NOT ENTERED:"_$J(SRICNE,6) W:SRCASES ?53,$J(((SRICNE/SRCASES)*100),5,1)
"RTN","SROQ1",69,0)
 I $E(IOST,1,2)="C-" D HDR^SROQ0 Q:SRSOUT  W !,?17,"ENSURING CORRECT SURGERY - COMPLIANCE SUMMARY (Continued)"
"RTN","SROQ1",70,0)
 W !!,?8,"MARK ON SURGICAL SITE CONFIRMED",!,?36,"YES:"_$J(SRSCY,6) W:SRCASES ?53,$J(((SRSCY/SRCASES)*100),5,1)
"RTN","SROQ1",71,0)
 W !,?19,"MARKING NOT REQUIRED:"_$J(SRSCNR,6) W:SRCASES ?53,$J(((SRSCNR/SRCASES)*100),5,1)
"RTN","SROQ1",72,0)
 W !,?37,"NO:"_$J(SRSCNO,6) W:SRCASES ?53,$J(((SRSCNO/SRCASES)*100),5,1)
"RTN","SROQ1",73,0)
 W !,?28,"NOT ENTERED:"_$J(SRSCNE,6) W:SRCASES ?53,$J(((SRSCNE/SRCASES)*100),5,1)
"RTN","SROQ1",74,0)
 W !!,?20,"OVERALL COMPLIANCE FOR THIS DATE RANGE",!,?20,"--------------------------------------"
"RTN","SROQ1",75,0)
 W !,?34,"TIME OUT VERIFIED: " W:SRCASES $J(((SRTOV/SRCASES)*100),5,1),"%"
"RTN","SROQ1",76,0)
 W !,?21,"PREOPERATIVE IMAGING CONFIRMED: " W:SRCASES $J((((SRICY+SRICNR)/SRCASES)*100),5,1),"%"
"RTN","SROQ1",77,0)
 W !,?20,"MARK ON SURGICAL SITE CONFIRMED: " W:SRCASES $J((((SRSCY+SRSCNR)/SRCASES)*100),5,1),"%"
"RTN","SROQ1",78,0)
HAIR ; print hair removal methods
"RTN","SROQ1",79,0)
 D:$E(IOST,1,2)="C-" HDR^SROQ0 Q:SRSOUT  W:$E(IOST,1,2)'="C-" !
"RTN","SROQ1",80,0)
 W !!,?19,"PREOPERATIVE HAIR REMOVAL METHODS SUMMARY",!,?19,"-----------------------------------------"
"RTN","SROQ1",81,0)
 W !!,?42,"CASES    % OF TOTAL",!,?42,"-----    ----------"
"RTN","SROQ1",82,0)
 W !,?18,"TOTAL CASES PERFORMED:"_$J(SRCASES,6) W:SRCASES ?53,"100.0"
"RTN","SROQ1",83,0)
 W !!,?32,"CLIPPER:"_$J(SRHAIR("C"),6) W:SRCASES ?53,$J(((SRHAIR("C")/SRCASES)*100),5,1)
"RTN","SROQ1",84,0)
 W !,?29,"DEPILATORY:"_$J(SRHAIR("D"),6) W:SRCASES ?53,$J(((SRHAIR("D")/SRCASES)*100),5,1)
"RTN","SROQ1",85,0)
 W !,?24,"NO HAIR REMOVED:"_$J(SRHAIR("N"),6) W:SRCASES ?53,$J(((SRHAIR("N")/SRCASES)*100),5,1)
"RTN","SROQ1",86,0)
 W !,?15,"PATIENT REMOVED OWN HAIR:"_$J(SRHAIR("P"),6) W:SRCASES ?53,$J(((SRHAIR("P")/SRCASES)*100),5,1)
"RTN","SROQ1",87,0)
 W !,?32,"SHAVING:"_$J(SRHAIR("S"),6) W:SRCASES ?53,$J(((SRHAIR("S")/SRCASES)*100),5,1)
"RTN","SROQ1",88,0)
 N SRNDOC S SRNDOC=SRHAIR("U")+SRHAIR("ZZ")
"RTN","SROQ1",89,0)
 W !,?25,"NOT DOCUMENTED:"_$J(SRNDOC,6) W:SRCASES ?53,$J(((SRNDOC/SRCASES)*100),5,1)
"RTN","SROQ1",90,0)
 W !,?34,"OTHER:"_$J(SRHAIR("O"),6) W:SRCASES ?53,$J(((SRHAIR("O")/SRCASES)*100),5,1)
"RTN","SROQ1",91,0)
 Q
"RTN","SROQ1",92,0)
IX ; break out index procedure data from ^TMP
"RTN","SROQ1",93,0)
 F K=1:1:3 S SRP(K)=$P(^TMP("SRPROC",$J,J),"^",K)
"RTN","SROQ1",94,0)
 D IXOUT^SROQ0A D
"RTN","SROQ1",95,0)
 .I SROP["," W:J=7 !,?5,$P(SROP,",") S SROP=$P(SROP,",",2)
"RTN","SROQ1",96,0)
 .W !,?5,SROP,?29,$J(SRP(1),6),?42,$J(SRP(3),6),?55,$J(SRP(2),6)
"RTN","SROQ1",97,0)
 Q
"RTN","SROQ1",98,0)
SPOUT ; break out data for each specialty from ^TMP
"RTN","SROQ1",99,0)
 F K=1:1:5 S SRP(K)=$P(^TMP("SRSS",$J,SRPTF),"^",K)
"RTN","SROQ1",100,0)
 I SRPTF="ZZ" S SRPTF=""
"RTN","SROQ1",101,0)
 W !,$J(SRPTF,3),?6,SRSP,?27,$J(SRP(1),6),?37,$J(SRP(2),6),?46,$J(SRP(3),6),?55,$J(SRP(4),6),?64,$J(SRP(5),6),?73,$J(((SRP(5)/$S(SRP(2):SRP(2),1:1))*100),5,1)
"RTN","SROQ1",102,0)
 Q
"RTN","SROQ1A")
0^100^B30905519^B30428909
"RTN","SROQ1A",1,0)
SROQ1A ;BIR/ADM - QUARTERLY REPORT (CONTINUED) ;03/29/06
"RTN","SROQ1A",2,0)
 ;;3.0; Surgery ;**38,62,50,129,153**;24 Jun 93;Build 11
"RTN","SROQ1A",3,0)
 ;** NOTICE: This routine is part of an implementation of a nationally
"RTN","SROQ1A",4,0)
 ;**         controlled procedure. Local modifications to this routine
"RTN","SROQ1A",5,0)
 ;**         are prohibited.
"RTN","SROQ1A",6,0)
 ;
"RTN","SROQ1A",7,0)
 ; Reference to ^DIC(45.3 supported by DBIA #218
"RTN","SROQ1A",8,0)
 ;
"RTN","SROQ1A",9,0)
CC ; occurrence categories
"RTN","SROQ1A",10,0)
 I $E(IOST,1,2)="C-" D HDR^SROQ0 Q:SRSOUT
"RTN","SROQ1A",11,0)
 W !!!,?21,"PERIOPERATIVE OCCURRENCE CATEGORIES",!,?21,"-----------------------------------",!
"RTN","SROQ1A",12,0)
WC W !,?2,"Wound Occurrences",?31,"Total",?42,"Urinary Occurrences",?71,"Total"
"RTN","SROQ1A",13,0)
 W !,?2,"A. Superficial Incisional SSI",?31,$J(SRC(1),5),?42,"A. Renal Insufficiency",?71,$J(SRC(8),5)
"RTN","SROQ1A",14,0)
 W !,?2,"B. Deep Incisional SSI",?31,$J(SRC(2),5),?42,"B. Acute Renal Failure",?71,$J(SRC(9),5)
"RTN","SROQ1A",15,0)
 W !,?2,"C. Wound Disruption",?31,$J(SRC(22),5),?42,"C. Urinary Tract Infection",?71,$J(SRC(10),5)
"RTN","SROQ1A",16,0)
 W !,?2,"D. Other",?31,$J(SRC(36),5),?42,"D. Other",?71,$J(SRC(31),5),!
"RTN","SROQ1A",17,0)
RC W !,?2,"Respiratory Occurrences",?31,"Total",?42,"CNS Occurrences",?71,"Total"
"RTN","SROQ1A",18,0)
 W !,?2,"A. Pneumonia",?31,$J(SRC(4),5),?42,"A. CVA/Stroke",?71,$J((SRC(12)+SRC(28)),5)
"RTN","SROQ1A",19,0)
 W !,?2,"B. Unplanned Intubation",?31,$J((SRC(7)+SRC(11)),5),?42,"B. Coma >24 Hours",?71,$J(SRC(13),5)
"RTN","SROQ1A",20,0)
 W !,?2,"C. Pulmonary Embolism",?31,$J(SRC(5),5),?42,"C. Peripheral Nerve Injury",?71,$J(SRC(14),5)
"RTN","SROQ1A",21,0)
 W !,?2,"D. On Ventilator >48 Hours",?31,$J(SRC(6),5),?42,"D. Other",?71,$J(SRC(30),5)
"RTN","SROQ1A",22,0)
 W !,?2,"E. Tracheostomy",?31,$J(SRC(33),5),!,?2,"F. Repeat Vent w/in 30 Days",?31,$J(SRC(37),5)
"RTN","SROQ1A",23,0)
 W !,?2,"G. Other",?31,$J(SRC(29),5),!
"RTN","SROQ1A",24,0)
 I $E(IOST,1,2)="C-" D HDR^SROQ0 Q:SRSOUT  W !,?15,"PERIOPERATIVE OCCURRENCE CATEGORIES (Continued)",!
"RTN","SROQ1A",25,0)
CARD W !,?2,"Cardiac Occurrences",?31,"Total",?42,"Other Occurrences",?71,"Total"
"RTN","SROQ1A",26,0)
 W !,?2,"A. Cardiac Arrest Req. CPR",?31,$J(SRC(16),5),?42,"A. Organ/Space SSI",?71,$J(SRC(35),5)
"RTN","SROQ1A",27,0)
 W !,?2,"B. Myocardial Infarction",?31,$J(SRC(17),5),?42,"B. Bleeding/Transfusions",?71,$J(SRC(15),5)
"RTN","SROQ1A",28,0)
 W !,?2,"C. Endocarditis",?31,$J(SRC(23),5),?42,"C. Graft/Prosthesis/Flap"
"RTN","SROQ1A",29,0)
 W !,?2,"D. Low Cardiac Output >6 Hrs.",?31,$J(SRC(24),5),?62,"Failure",?71,$J(SRC(19),5)
"RTN","SROQ1A",30,0)
 W !,?2,"E. Mediastinitis",?31,$J(SRC(25),5),?42,"D. DVT/Thrombophlebitis",?71,$J(SRC(20),5)
"RTN","SROQ1A",31,0)
 W !,?2,"F. Repeat Card Surg Proc",?31,$J(SRC(27),5),?42,"E. Systemic Sepsis",?71,$J(SRC(3),5)
"RTN","SROQ1A",32,0)
 W !,?2,"G. New Mech Circulatory Sup",?31,$J(SRC(34),5),?42,"F. Reoperation for Bleeding",?71,$J(SRC(26),5)
"RTN","SROQ1A",33,0)
 W !,?2,"H. Other",?31,$J(SRC(32),5),?42,"G. Other",?71,$J(SRC(21),5)
"RTN","SROQ1A",34,0)
CLEAN ; clean wounds
"RTN","SROQ1A",35,0)
 S:'SRWC SRWC=1 W !!,?2,"Clean Wound Infection Rate: ",$J((SRIN/SRWC*100),5,1),"%"
"RTN","SROQ1A",36,0)
 Q
"RTN","SROQ1A",37,0)
BORD W !,?14 F I=1:1:51 W "*"
"RTN","SROQ1A",38,0)
 Q
"RTN","SROQ1A",39,0)
ACTION ; alert action
"RTN","SROQ1A",40,0)
 D CURRENT^SROQT W @IOF D BORD W !,?14,"*",?64,"*",!,?14,"*    The Surgical Service Quarterly Report for    *",!,?14,"*    quarter #"_SRQTR_" of fiscal year "_(SRYR+1700)_" is now due.   *",!,?14,"*",?64,"*" D BORD
"RTN","SROQ1A",41,0)
 W !!,"NOTE: The report will be transmitted automatically on "_$S(SRQTR=1:"February 14",SRQTR=2:"May 15",SRQTR=3:"August 14",1:"November 14")_" to the",!,"      national database if not manually transmitted before then."
"RTN","SROQ1A",42,0)
 K DIR S DIR("?",1)="Choose the number matching your choice of action or press the return",DIR("?")="key to continue or '^' to exit."
"RTN","SROQ1A",43,0)
 S DIR(0)="SO^1:Print report only;2:Transmit report only;3:Both print and transmit report" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT)!'Y D ^SRSKILL Q
"RTN","SROQ1A",44,0)
 I Y=2 S DIR("A")="Do you want to transmit the Quarterly Report now ? ",DIR("B")="YES",DIR(0)="YA" D ^DIR K DIR Q:$D(DTOUT)!$D(DUOUT)!'Y  D AUTO^SROQT Q
"RTN","SROQ1A",45,0)
 I Y S SRT=$S(Y=3:1,1:0) D VAR^SROQT,IO^SROQ
"RTN","SROQ1A",46,0)
 Q
"RTN","SROQ1A",47,0)
ALERT ; send alert to SR-QUARTERLY mailgroup
"RTN","SROQ1A",48,0)
 S XQAID="SRQTR-"_SRFQ,XQAKILL=0 D DELETEA^XQALERT
"RTN","SROQ1A",49,0)
 S XQA("G.SR-QUARTERLY")="",XQAMSG="The Quarterly Report to VHA HQ for fiscal quarter #"_SRQTR_" is now due.",XQAROU="ACTION^SROQ1A",XQAID="SRQTR-"_SRFQ D SETUP^XQALERT
"RTN","SROQ1A",50,0)
 Q
"RTN","SROQ1A",51,0)
MORT ; look for operations in next quarter
"RTN","SROQ1A",52,0)
 S X1=SRSTART,X2=-30 D C^%DTC S SRSD1=9999999.999999-(X-.0001),X1=SREND,X2=30 D C^%DTC S SRED1=9999999.999999-(X+.9999)
"RTN","SROQ1A",53,0)
 S DFN=0 F  S DFN=$O(^TMP("SRDTH",$J,DFN)) Q:'DFN  D DEM^VADPT S X1=$P(VADM(6),"^"),SRD=9999999.999999-X1,X2=-30 D C^%DTC S SRD1=(9999999.999999-X) D LATER
"RTN","SROQ1A",54,0)
 Q
"RTN","SROQ1A",55,0)
LATER ; gather cases performed within 30 days of death on death patients
"RTN","SROQ1A",56,0)
 K ^TMP("SRTN",$J) S SRINV=SRED1 F  S SRINV=$O(^SRF("ADT",DFN,SRINV)) Q:'SRINV  I SRINV<SRSD1,SRINV<SRD1,SRINV>SRD S SRTN=0 F  S SRTN=$O(^SRF("ADT",DFN,SRINV,SRTN)) Q:'SRTN  D
"RTN","SROQ1A",57,0)
 .Q:$P($G(^SRF(SRTN,30)),"^")!'$P($G(^SRF(SRTN,.2)),"^",12)!($P($G(^SRF(SRTN,"NON")),"^")="Y")
"RTN","SROQ1A",58,0)
 .S ^TMP("SRTN",$J,$P(^SRF(SRTN,0),"^",9),SRTN)=""
"RTN","SROQ1A",59,0)
 S SRDT=0 F  S SRDT=$O(^TMP("SRTN",$J,SRDT)) Q:'SRDT  S SRTN=0 F  S SRTN=$O(^TMP("SRTN",$J,SRDT,SRTN)) Q:'SRTN  D CASE
"RTN","SROQ1A",60,0)
 Q
"RTN","SROQ1A",61,0)
CASE ; examine each case on death patients performed within 30 days of death
"RTN","SROQ1A",62,0)
 S SR(0)=^SRF(SRTN,0),SRSS=$P(SR(0),"^",4) S SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^",2),1:"ZZ")
"RTN","SROQ1A",63,0)
 S SR(0)=^SRF(SRTN,0),X=$P(SR(0),"^",4),Y=$S(X:$P(^SRO(137.45,X,0),"^",2),1:"ZZ") S SRSS=$S(Y:$P(^DIC(45.3,Y,0),"^"),1:"ZZ") I '$D(SRSPEC(SRSS)) S SRSS="ZZ"
"RTN","SROQ1A",64,0)
 S SRIOSTAT=$P(SR(0),"^",12) I SRIOSTAT'="I"&(SRIOSTAT'="O") S VAIP("D")=SRDT D IN5^VADPT S SRIOSTAT=$S(VAIP(13):"I",1:"O") K VAIP
"RTN","SROQ1A",65,0)
 S SRREL=$P($G(^SRF(SRTN,.4)),"^",7) I SRREL="R" S ^TMP("SRSP",$J,DFN,(9999999-SRDT))=SRSS,^TMP("SRINOUT",$J,DFN,(9999999-SRDT))=SRIOSTAT
"RTN","SROQ1A",66,0)
 S ^TMP("SREXP",$J,DFN)=SRTN_"^"_SRSS,^TMP("SRIOD",$J,DFN)=SRTN_"^"_SRIOSTAT
"RTN","SROQ1A",67,0)
 S SRFLAG=0 D NDEX^SROQ0A
"RTN","SROQ1A",68,0)
 Q
"RTN","SROQ2")
0^78^B33278747^B32844306
"RTN","SROQ2",1,0)
SROQ2 ;BIR/ADM - SUMMARY REPORT ;03/29/06
"RTN","SROQ2",2,0)
 ;;3.0; Surgery ;**38,62,70,50,95,123,129,134,153**;24 Jun 93;Build 11
"RTN","SROQ2",3,0)
 ;** NOTICE: This routine is part of an implementation of a nationally
"RTN","SROQ2",4,0)
 ;**         controlled procedure. Local modifications to this routine
"RTN","SROQ2",5,0)
 ;**         are prohibited.
"RTN","SROQ2",6,0)
 ;
"RTN","SROQ2",7,0)
 S SRSOUT=0 W @IOF,!,"SUMMARY REPORT FOR SURGICAL SERVICE"
"RTN","SROQ2",8,0)
 W !!,"Enter date range for data to be included on report."
"RTN","SROQ2",9,0)
SDATE ; enter starting date
"RTN","SROQ2",10,0)
 W !,"Start with date:  " R X:DTIME I '$T!(X["^")!(X="") S SRSOUT=1 G END
"RTN","SROQ2",11,0)
 I X["?" W !,"Enter the EARLIEST date for data to be included in this report." S X="?",%DT="EX" D ^%DT G SDATE
"RTN","SROQ2",12,0)
 S %DT="EXP" D ^%DT G SDATE:Y<1 S SRSTART=Y
"RTN","SROQ2",13,0)
 I SRSTART>DT W !!,"Cannot report on operations for future dates !",! G SDATE
"RTN","SROQ2",14,0)
 S SRAC=$O(^SRF("AC",0)) I SRSTART<SRAC S Y=SRAC D DD^%DT S SRAC1=$E(Y,1,12) W !!,"NOTE: ",$S(SRAC:"No surgical case data exists before "_SRAC1_".",1:"There are no surgical cases on record !")
"RTN","SROQ2",15,0)
EDATE ; enter ending date
"RTN","SROQ2",16,0)
 W !!,"End with date:  " R X:DTIME I '$T!(X["^")!(X="") S SRSOUT=1 G END
"RTN","SROQ2",17,0)
 I X["?" W !,"Enter the LATEST date for data to be included in this report." S X="?",%DT="EX" D ^%DT G EDATE
"RTN","SROQ2",18,0)
 S %DT="EXP" D ^%DT G EDATE:Y<1 S SREND=Y
"RTN","SROQ2",19,0)
 I SRSTART>SREND W !!,"The ENDING date must be later than the BEGINNING date.  Please try again.",! G SDATE
"RTN","SROQ2",20,0)
 I SREND>DT W !!,"Cannot report on operations for future dates !",! G EDATE
"RTN","SROQ2",21,0)
 S SRFLG=0
"RTN","SROQ2",22,0)
 N SRINSTP S SRINST=$$INST^SROUTL0() G:SRINST="^" END S SRINSTP=$P(SRINST,U),SRINST=$S(SRINST["ALL DIVISIONS":SRINST,1:$P(SRINST,U,2))
"RTN","SROQ2",23,0)
IO W ! K %ZIS,IO("Q"),POP S %ZIS("A")="Print report on which Device: ",%ZIS="Q" D ^%ZIS I POP S SRSOUT=1 G END
"RTN","SROQ2",24,0)
 I $D(IO("Q")) K IO("Q") S ZTDESC="Summary Report - Surgical Service",(ZTSAVE("SRSTART"),ZTSAVE("SRINSTP"),ZTSAVE("SREND"),ZTSAVE("SRFLG"))="",ZTRTN="EN^SROQ2" D ^%ZTLOAD S SRSOUT=1 G END
"RTN","SROQ2",25,0)
EN ; entry point when queued
"RTN","SROQ2",26,0)
 D SET,^SROQ1,END
"RTN","SROQ2",27,0)
 Q
"RTN","SROQ2",28,0)
SET ; collect data
"RTN","SROQ2",29,0)
 S SRSD=SRSTART-.0001,SRED=SREND+.9999 D ZERO
"RTN","SROQ2",30,0)
 N SRXX S SRXX=$$SITE^SROVAR
"RTN","SROQ2",31,0)
 I SRFLG=1 D
"RTN","SROQ2",32,0)
 .I SRMULT D  Q
"RTN","SROQ2",33,0)
 ..S:'SRIEN SRINST=$P(SRXX,"^",2),SRSTATN=$P(SRXX,"^",3)
"RTN","SROQ2",34,0)
 ..S:'$D(SRINSTP) SRINSTP="ALL DIVISIONS",SRINST=SRINST_" - ALL DIVISIONS"
"RTN","SROQ2",35,0)
 .S SRINSTP=$P(SRXX,"^"),SRINST=$P(SRXX,"^",2),SRSTATN=+$P(SRXX,"^",3)
"RTN","SROQ2",36,0)
 I 'SRFLG D
"RTN","SROQ2",37,0)
 .I SRINSTP["ALL DIV" S SRINST=$P(SRXX,"^",2)_" - ALL DIVISIONS",SRSTATN=$P(SRXX,"^",3) Q
"RTN","SROQ2",38,0)
 .S SRINST=$$GET1^DIQ(4,SRINSTP,.01),SRSTATN=$$GET1^DIQ(4,SRINSTP,99)
"RTN","SROQ2",39,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:SRSD>SRED!('SRSD)  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN  I $D(^SRF(SRTN,0)),$$MANDIV^SROUTL0(SRINSTP,SRTN) D CASE
"RTN","SROQ2",40,0)
 D MORT^SROQ1A,DEATH S Y=SRSTART D DD^%DT S SRSD=$E(Y,1,12) S Y=SREND D DD^%DT S SRED=$E(Y,1,12),SRYR=$E(Y,9,12) I SRFLG,$E(SRSTART,4,5)=10 S SRYR=SRYR+1
"RTN","SROQ2",41,0)
 Q
"RTN","SROQ2",42,0)
END W ! I 'SRSOUT,$E(IOST,1,2)="C-" W !!,"Press <RET> to continue  " R X:DTIME
"RTN","SROQ2",43,0)
 D KTMP W:$E(IOST)="P" @IOF I $D(ZTQUEUED) Q:$G(ZTSTOP)  S ZTREQ="@" Q
"RTN","SROQ2",44,0)
 D ^SRSKILL
"RTN","SROQ2",45,0)
 K SR14,SR71,SR72,SR73,SRADMT,SRHAIR,SRHOSP,SRICNR,SRICNE,SRICNO,SRICY,SRIDP,SRINSTP,SRINV,SRIOSTAT,SRTN,SRTONE,SRTONO,SRTOV,SRVER,SRSCY,SRSCNR,SRSCNO,SRSCNE
"RTN","SROQ2",46,0)
 D ^%ZISC W @IOF
"RTN","SROQ2",47,0)
 Q
"RTN","SROQ2",48,0)
KTMP F I="SRDEATH","SRDPT","SRDREL","SRDTH","SREXP","SRINOUT","SRIOD","SRP","SRPROC","SRREL","SRSP","SRSS","SRTN" K ^TMP(I,$J)
"RTN","SROQ2",49,0)
 Q
"RTN","SROQ2",50,0)
CASE ;  examine case
"RTN","SROQ2",51,0)
 Q:$P($G(^SRF(SRTN,30)),"^")!'$P($G(^SRF(SRTN,.2)),"^",12)!($P($G(^SRF(SRTN,"NON")),"^")="Y")
"RTN","SROQ2",52,0)
 S SRCASES=SRCASES+1 D ^SROQ0
"RTN","SROQ2",53,0)
 Q
"RTN","SROQ2",54,0)
ZERO ; set counters to 0
"RTN","SROQ2",55,0)
 S (SRTOV,SRTONO,SRTONE,SRICY,SRICNO,SRICNR,SRICNE,SRSCY,SRSCNR,SRSCNO,SRSCNE)=0
"RTN","SROQ2",56,0)
 D KTMP S (SR60,SRADMT,SRCASES,SRCOMP,SRDPT,SREMERG,SRIN,SRINPAT,SRIX,SRMAJOR,SRMORT,SROPD,SRSOUT,SRWC)=0 F I=1:1:7 S SRASA(I)=0
"RTN","SROQ2",57,0)
 S SRSS=0 F I=50:1:62,500,501,502 S SRSPEC(I)=I,^TMP("SRSS",$J,I)="0^0^0^0",SREXP(I)=0
"RTN","SROQ2",58,0)
 S ^TMP("SRSS",$J,"ZZ")="0^0^0^0",SREXP("ZZ")=0
"RTN","SROQ2",59,0)
 K SRATT F I=9:1:14,99 S (SRATT(I),SRATT("J",I),SRATT("N",I))=0
"RTN","SROQ2",60,0)
 F SRPROC=1:1:12 S ^TMP("SRPROC",$J,SRPROC)="0^0",SRDEATH(SRPROC)=0
"RTN","SROQ2",61,0)
 S (SRINV("I"),SRINV("O"))=0 F I=1:1:37 S SRC(I)=0
"RTN","SROQ2",62,0)
 F I="C","D","N","P","S","U","O","ZZ" S SRHAIR(I)=0
"RTN","SROQ2",63,0)
 Q
"RTN","SROQ2",64,0)
DEATH ; tabulate deaths
"RTN","SROQ2",65,0)
 S SRED=SREND+.9999,SRSD=SRSTART-.0001,DFN=0 F  S DFN=$O(^TMP("SREXP",$J,DFN)) Q:'DFN  D SPEC
"RTN","SROQ2",66,0)
 S SRSS=0 F  S SRSS=$O(SREXP(SRSS)) Q:SRSS=""  S ^TMP("SRSS",$J,SRSS)=^TMP("SRSS",$J,SRSS)_"^"_SREXP(SRSS)
"RTN","SROQ2",67,0)
 S DFN=0 F  S DFN=$O(^TMP("SRDEATH",$J,DFN)) Q:'DFN  D IP
"RTN","SROQ2",68,0)
 F J=1:1:12 S ^TMP("SRPROC",$J,J)=^TMP("SRPROC",$J,J)_"^"_SRDEATH(J)
"RTN","SROQ2",69,0)
 S DFN=0 F  S DFN=$O(^TMP("SRIOD",$J,DFN)) Q:'DFN  D INOUT
"RTN","SROQ2",70,0)
 Q
"RTN","SROQ2",71,0)
SPEC ; determine related specialty
"RTN","SROQ2",72,0)
 I $O(^TMP("SRSP",$J,DFN,0))="" S Y=^TMP("SREXP",$J,DFN),SRTN=$P(Y,"^"),SRSS=$P(Y,"^",2),SRDT=$P(^SRF(SRTN,0),"^",9) Q:SRDT>SRED!(SRDT<SRSD)  S SREXP(SRSS)=SREXP(SRSS)+1,SRMORT=SRMORT+1 Q
"RTN","SROQ2",73,0)
 S SRDT=$O(^TMP("SRSP",$J,DFN,0)) I (9999999-SRDT)'>SRED&((9999999-SRDT)'<SRSD) S SRSS=^TMP("SRSP",$J,DFN,SRDT),SREXP(SRSS)=SREXP(SRSS)+1,SRMORT=SRMORT+1
"RTN","SROQ2",74,0)
 Q
"RTN","SROQ2",75,0)
IP ; determine related index procedure (if any)
"RTN","SROQ2",76,0)
 I $O(^TMP("SRP",$J,DFN,0))="" S Y=^TMP("SRDEATH",$J,DFN),SRTN=$P(Y,"^"),SRPROC=$P(Y,"^",2),SRDT=$P(^SRF(SRTN,0),"^",9) Q:SRDT>SRED!(SRDT<SRSD)  S SRDEATH(SRPROC)=SRDEATH(SRPROC)+1 Q
"RTN","SROQ2",77,0)
 S SRDT=$O(^TMP("SRP",$J,DFN,0)) I (9999999-SRDT)'>SRED&((9999999-SRDT)'<SRSD) S SRPROC=^TMP("SRP",$J,DFN,SRDT),SRDEATH(SRPROC)=SRDEATH(SRPROC)+1
"RTN","SROQ2",78,0)
 Q
"RTN","SROQ2",79,0)
INOUT ; decide if death is in or out-pat surgery death
"RTN","SROQ2",80,0)
 S SRIOSTAT="" I $O(^TMP("SRINOUT",$J,DFN,0))="" S Y=^TMP("SRIOD",$J,DFN),SRTN=$P(Y,"^"),SRIOSTAT=$P(Y,"^",2),SRDT=$P(^SRF(SRTN,0),"^",9) Q:SRDT>SRED!(SRDT<SRSD)!(SRIOSTAT'="O")  S SROPD=SROPD+1 Q
"RTN","SROQ2",81,0)
 S SRDT=$O(^TMP("SRINOUT",$J,DFN,0)) S SRIOSTAT=^TMP("SRINOUT",$J,DFN,SRDT) I (9999999-SRDT)'>SRED&((9999999-SRDT)'<SRSD)&(SRIOSTAT="O") S SROPD=SROPD+1
"RTN","SROQ2",82,0)
 Q
"RTN","SROQM")
0^97^B18303106^B18105122
"RTN","SROQM",1,0)
SROQM ;BIR/ADM - QUARTERLY REPORT (CONTINUED) ;03/22/06
"RTN","SROQM",2,0)
 ;;3.0; Surgery ;**62,82,95,123,126,129,153**; Jun 93;Build 11
"RTN","SROQM",3,0)
 ;** NOTICE: This routine is part of an implementation of a nationally
"RTN","SROQM",4,0)
 ;**         controlled procedure. Local modifications to this routine
"RTN","SROQM",5,0)
 ;**         are prohibited.
"RTN","SROQM",6,0)
 ;
"RTN","SROQM",7,0)
 S (SRCNT,SRPAGE)=1 K ^TMP("SRMSG",$J) D HDR Q:SRSOUT  D ^SROQM0,HDR Q:SRSOUT  D ^SROQM1 Q:SRSOUT  F I=1:1:3 D BLANK
"RTN","SROQM",8,0)
 D HDR,ENSURE,HAIR^SROQM1 K XMY
"RTN","SROQM",9,0)
 S X=$$ACTIVE^XUSER(DUZ) I '+X S XMDUZ=.5
"RTN","SROQM",10,0)
 S XMSUB="QUARTERLY REPORT - SURGICAL SERVICE"
"RTN","SROQM",11,0)
 S XMY("G.SR-QUARTERLY@"_SRD)=""
"RTN","SROQM",12,0)
 S XMTEXT="^TMP(""SRMSG"",$J," N I D ^XMD
"RTN","SROQM",13,0)
 K XMDUZ,XMY,^TMP("SRMSG",$J)
"RTN","SROQM",14,0)
 Q
"RTN","SROQM",15,0)
HDR ; write page header
"RTN","SROQM",16,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SROQM",17,0)
 S SRBLANK="" F I=1:1:22 S SRBLANK=SRBLANK_" "
"RTN","SROQM",18,0)
 S SRLINE=SRBLANK_"QUARTERLY REPORT - SURGICAL SERVICE",SRBLANK="" F I=1:1:(75-$L(SRLINE)) S SRBLANK=SRBLANK_" "
"RTN","SROQM",19,0)
 S SRLINE=SRLINE_SRBLANK_"PAGE" D LINE
"RTN","SROQM",20,0)
 S SRBLANK="" F I=1:1:34 S SRBLANK=SRBLANK_" "
"RTN","SROQM",21,0)
 S SRLINE=SRBLANK_"VERSION 3.0",SRBLANK="" F I=1:1:(77-$L(SRLINE)) S SRBLANK=SRBLANK_" "
"RTN","SROQM",22,0)
 S SRLINE=SRLINE_SRBLANK_SRPAGE D LINE
"RTN","SROQM",23,0)
 D BLANK S SRLINE=" Hospital: "_$E(SRINST,1,44),SRBLANK="" F I=1:1:(57-$L(SRLINE)) S SRBLANK=SRBLANK_" "
"RTN","SROQM",24,0)
 S SRLINE=SRLINE_SRBLANK_"Station Number: "_SRSTATN D LINE
"RTN","SROQM",25,0)
 S SRLINE=" For Dates: "_SRSD_"     to: "_SRED_"            Fiscal Year: "_SRYR D LINE
"RTN","SROQM",26,0)
 S SRLINE="" F I=1:1:79 S SRLINE=SRLINE_"="
"RTN","SROQM",27,0)
 D LINE S SRPAGE=SRPAGE+1
"RTN","SROQM",28,0)
 Q
"RTN","SROQM",29,0)
BLANK ; blank line
"RTN","SROQM",30,0)
 S ^TMP("SRMSG",$J,SRCNT)="",SRCNT=SRCNT+1
"RTN","SROQM",31,0)
 Q
"RTN","SROQM",32,0)
LINE ; store line in ^TMP
"RTN","SROQM",33,0)
 S ^TMP("SRMSG",$J,SRCNT)=SRLINE,SRCNT=SRCNT+1
"RTN","SROQM",34,0)
 Q
"RTN","SROQM",35,0)
ENSURE ; ensure correct surgery cpmpliance
"RTN","SROQM",36,0)
 D BLANK S SRBLANK="" F I=1:1:17 S SRBLANK=SRBLANK_" "
"RTN","SROQM",37,0)
 S SRLINE=SRBLANK_"ENSURING CORRECT SURGERY - COMPLIANCE SUMMARY" D LINE
"RTN","SROQM",38,0)
 S SRLINE=SRBLANK_"---------------------------------------------" D LINE
"RTN","SROQM",39,0)
 D BLANK F I=1:1:25 S SRBLANK=SRBLANK_" "
"RTN","SROQM",40,0)
 S SRLINE=SRBLANK_"CASES    % OF TOTAL" D LINE
"RTN","SROQM",41,0)
 S SRLINE=SRBLANK_"-----    ----------" D LINE
"RTN","SROQM",42,0)
 S SRBLANK="" F I=1:1:18 S SRBLANK=SRBLANK_" "
"RTN","SROQM",43,0)
 S SRLINE=SRBLANK_"TOTAL CASES PERFORMED:"_$J(SRCASES,6)_"       "
"RTN","SROQM",44,0)
 S:SRCASES SRLINE=SRLINE_"100.0" D LINE,BLANK
"RTN","SROQM",45,0)
ETOV S SRLINE=SRBLANK_"    TIME OUT VERIFIED" D LINE
"RTN","SROQM",46,0)
 S SRLINE=SRBLANK_SRBLANK_"YES:"_$J(SRTOV,6)_"       "
"RTN","SROQM",47,0)
 S:SRCASES SRLINE=SRLINE_$J(((SRTOV/SRCASES)*100),5,1) D LINE
"RTN","SROQM",48,0)
 S SRLINE=SRBLANK_SRBLANK_" NO:"_$J(SRTONO,6)_"       "
"RTN","SROQM",49,0)
 S:SRCASES SRLINE=SRLINE_$J(((SRTONO/SRCASES)*100),5,1) D LINE
"RTN","SROQM",50,0)
 S SRLINE=SRBLANK_"          NOT ENTERED:"_$J(SRTONE,6)_"       "
"RTN","SROQM",51,0)
 S:SRCASES SRLINE=SRLINE_$J(((SRTONE/SRCASES)*100),5,1) D LINE,BLANK
"RTN","SROQM",52,0)
EPRE S SRLINE="         PREOPERATIVE IMAGING CONFIRMED" D LINE
"RTN","SROQM",53,0)
 S SRLINE=SRBLANK_SRBLANK_"YES:"_$J(SRICY,6)_"       "
"RTN","SROQM",54,0)
 S:SRCASES SRLINE=SRLINE_$J(((SRICY/SRCASES)*100),5,1) D LINE
"RTN","SROQM",55,0)
 S SRLINE=SRBLANK_" IMAGING NOT REQUIRED:"_$J(SRICNR,6)_"       "
"RTN","SROQM",56,0)
 S:SRCASES SRLINE=SRLINE_$J(((SRICNR/SRCASES)*100),5,1) D LINE
"RTN","SROQM",57,0)
 S SRLINE=SRBLANK_SRBLANK_" NO:"_$J(SRICNO,6)_"       "
"RTN","SROQM",58,0)
 S:SRCASES SRLINE=SRLINE_$J(((SRICNO/SRCASES)*100),5,1) D LINE
"RTN","SROQM",59,0)
 S SRLINE=SRBLANK_"          NOT ENTERED:"_$J(SRICNE,6)_"       "
"RTN","SROQM",60,0)
 S:SRCASES SRLINE=SRLINE_$J(((SRICNE/SRCASES)*100),5,1) D LINE,BLANK
"RTN","SROQM",61,0)
EMRK S SRLINE="        MARK ON SURGICAL SITE CONFIRMED" D LINE
"RTN","SROQM",62,0)
 S SRLINE=SRBLANK_SRBLANK_"YES:"_$J(SRSCY,6)_"       "
"RTN","SROQM",63,0)
 S:SRCASES SRLINE=SRLINE_$J(((SRSCY/SRCASES)*100),5,1) D LINE
"RTN","SROQM",64,0)
 S SRLINE=SRBLANK_" MARKING NOT REQUIRED:"_$J(SRSCNR,6)_"       "
"RTN","SROQM",65,0)
 S:SRCASES SRLINE=SRLINE_$J(((SRSCNR/SRCASES)*100),5,1) D LINE
"RTN","SROQM",66,0)
 S SRLINE=SRBLANK_SRBLANK_" NO:"_$J(SRSCNO,6)_"       "
"RTN","SROQM",67,0)
 S:SRCASES SRLINE=SRLINE_$J(((SRSCNO/SRCASES)*100),5,1) D LINE
"RTN","SROQM",68,0)
 S SRLINE=SRBLANK_"          NOT ENTERED:"_$J(SRSCNE,6)_"       "
"RTN","SROQM",69,0)
 S:SRCASES SRLINE=SRLINE_$J(((SRSCNE/SRCASES)*100),5,1) D LINE D BLANK
"RTN","SROQM",70,0)
 ;
"RTN","SROQM",71,0)
 S SRLINE=SRBLANK_"  OVERALL COMPLIANCE FOR THIS DATE RANGE" D LINE
"RTN","SROQM",72,0)
 S SRLINE=SRBLANK_"  --------------------------------------" D LINE
"RTN","SROQM",73,0)
 S SRBLANK="" F I=1:1:17 S SRBLANK=SRBLANK_" "
"RTN","SROQM",74,0)
 S SRLINE=SRBLANK_SRBLANK_"TIME OUT VERIFIED: "
"RTN","SROQM",75,0)
 S:SRCASES SRLINE=SRLINE_$J(((SRTOV/SRCASES)*100),5,1)_"%" D LINE
"RTN","SROQM",76,0)
 S SRLINE=SRBLANK_"    PREOPERATIVE IMAGING CONFIRMED: "
"RTN","SROQM",77,0)
 S:SRCASES SRLINE=SRLINE_$J((((SRICY+SRICNR)/SRCASES)*100),5,1)_"%" D LINE
"RTN","SROQM",78,0)
 S SRLINE=SRBLANK_"   MARK ON SURGICAL SITE CONFIRMED: "
"RTN","SROQM",79,0)
 S:SRCASES SRLINE=SRLINE_$J((((SRSCY+SRSCNR)/SRCASES)*100),5,1)_"%" D LINE
"RTN","SROQM",80,0)
 Q
"RTN","SROQM1")
0^98^B25626718^B16158115
"RTN","SROQM1",1,0)
SROQM1 ;BIR/ADM - QUARTERLY REPORT (CONTINUED) ;04/03/06
"RTN","SROQM1",2,0)
 ;;3.0; Surgery ;**38,62,70,129,153**;24 Jun 93;Build 11
"RTN","SROQM1",3,0)
 ;** NOTICE: This routine is part of an implementation of a nationally
"RTN","SROQM1",4,0)
 ;**         controlled procedure. Local modifications to this routine
"RTN","SROQM1",5,0)
 ;**         are prohibited.
"RTN","SROQM1",6,0)
 ;
"RTN","SROQM1",7,0)
NDEX ; index procedures
"RTN","SROQM1",8,0)
 D BLANK S SRBLANK="" F I=1:1:31 S SRBLANK=SRBLANK_" "
"RTN","SROQM1",9,0)
 S SRLINE=SRBLANK_"INDEX PROCEDURES" D LINE S SRLINE=SRBLANK_"----------------" D LINE
"RTN","SROQM1",10,0)
 F I=1:1:22 S SRBLANK=SRBLANK_" "
"RTN","SROQM1",11,0)
 S SRLINE=SRBLANK_"CASES WITH" D LINE S SRBLANK="" F I=1:1:29 S SRBLANK=SRBLANK_" "
"RTN","SROQM1",12,0)
 S SRLINE=SRBLANK_"CASES        DEATHS     OCCURRENCES" D LINE
"RTN","SROQM1",13,0)
 S SRLINE=SRBLANK_"-----        ------     -----------" D LINE
"RTN","SROQM1",14,0)
 F J=1:1:12 D IXUT
"RTN","SROQM1",15,0)
CC ; occurrence categories
"RTN","SROQM1",16,0)
 D BLANK S SRBLANK="" F I=1:1:21 S SRBLANK=SRBLANK_" "
"RTN","SROQM1",17,0)
 S SRLINE=SRBLANK_"PERIOPERATIVE OCCURRENCE CATEGORIES" D LINE S SRLINE=SRBLANK_"-----------------------------------" D LINE
"RTN","SROQM1",18,0)
WC D BLANK S SRLINE=" Wound Occurrences            Total      Urinary Occurrences          Total" D LINE
"RTN","SROQM1",19,0)
 S SRLINE=" A. Superficial Incisional SSI"_$J(SRC(1),5)_"      A. Renal Insufficiency       "_$J(SRC(8),5) D LINE
"RTN","SROQM1",20,0)
 S SRLINE=" B. Deep Incisional SSI       "_$J(SRC(2),5)_"      B. Acute Renal Failure       "_$J(SRC(9),5) D LINE
"RTN","SROQM1",21,0)
 S SRLINE=" C. Wound Disruption          "_$J(SRC(22),5)_"      C. Urinary Tract Infection   "_$J(SRC(10),5) D LINE
"RTN","SROQM1",22,0)
 S SRLINE=" D. Other                     "_$J(SRC(36),5)_"      D. Other                     "_$J(SRC(31),5) D LINE,BLANK
"RTN","SROQM1",23,0)
RC S SRLINE=" Respiratory Occurrences      Total      CNS Occurrences              Total" D LINE
"RTN","SROQM1",24,0)
 S SRLINE=" A. Pneumonia                 "_$J(SRC(4),5)_"      A. CVA/Stroke                "_$J((SRC(12)+SRC(28)),5) D LINE
"RTN","SROQM1",25,0)
 S SRLINE=" B. Unplanned Intubation      "_$J((SRC(7)+SRC(11)),5)_"      B. Coma >24 Hours            "_$J(SRC(13),5) D LINE
"RTN","SROQM1",26,0)
 S SRLINE=" C. Pulmonary Embolism        "_$J(SRC(5),5)_"      C. Peripheral Nerve Injury   "_$J(SRC(14),5) D LINE
"RTN","SROQM1",27,0)
 S SRLINE=" D. On Ventilator >48 Hours   "_$J(SRC(6),5)_"      D. Other                     "_$J(SRC(30),5) D LINE
"RTN","SROQM1",28,0)
 S SRLINE=" E. Tracheostomy              "_$J(SRC(33),5) D LINE
"RTN","SROQM1",29,0)
 S SRLINE=" F. Repeat Vent w/in 30 Days  "_$J(SRC(37),5) D LINE
"RTN","SROQM1",30,0)
 S SRLINE=" G. Other                     "_$J(SRC(29),5) D LINE
"RTN","SROQM1",31,0)
CARD D BLANK S SRLINE=" Cardiac Occurrences          Total      Other Occurrences            Total" D LINE
"RTN","SROQM1",32,0)
 S SRLINE=" A. Cardiac Arrest Req. CPR   "_$J(SRC(16),5)_"      A. Organ/Space SSI           "_$J(SRC(35),5) D LINE
"RTN","SROQM1",33,0)
 S SRLINE=" B. Myocardial Infarction     "_$J(SRC(17),5)_"      B. Bleeding/Transfusions     "_$J(SRC(15),5) D LINE
"RTN","SROQM1",34,0)
 S SRLINE=" C. Endocarditis              "_$J(SRC(23),5)_"      C. Graft/Prosthesis/Flap" D LINE
"RTN","SROQM1",35,0)
 S SRLINE=" D. Low Cardiac Output >6 Hrs."_$J(SRC(24),5)_"                          Failure  "_$J(SRC(19),5) D LINE
"RTN","SROQM1",36,0)
 S SRLINE=" E. Mediastinitis             "_$J(SRC(25),5)_"      D. DVT/Thrombophlebitis      "_$J(SRC(20),5) D LINE
"RTN","SROQM1",37,0)
 S SRLINE=" F. Repeat Card Surg Proc     "_$J(SRC(27),5)_"      E. Systemic Sepsis           "_$J(SRC(3),5) D LINE
"RTN","SROQM1",38,0)
 S SRLINE=" G. New Mech Circulatory Sup  "_$J(SRC(34),5)_"      F. Reoperation for Bleeding  "_$J(SRC(26),5) D LINE
"RTN","SROQM1",39,0)
 S SRLINE=" H. Other                     "_$J(SRC(32),5)_"      G. Other                     "_$J(SRC(21),5) D LINE,BLANK
"RTN","SROQM1",40,0)
 S:'SRWC SRWC=1 S SRLINE=" Clean Wound Infection Rate: "_$J((SRIN/SRWC*100),5,1)_"%" D LINE
"RTN","SROQM1",41,0)
 Q
"RTN","SROQM1",42,0)
IXUT ; get index procedure data from ^TMP
"RTN","SROQM1",43,0)
 F K=1:1:3 S SRP(K)=$P(^TMP("SRPROC",$J,J),"^",K)
"RTN","SROQM1",44,0)
 D IXOUT^SROQ0A D
"RTN","SROQM1",45,0)
 .I SROP["," D  S SROP=$P(SROP,",",2)
"RTN","SROQM1",46,0)
 ..I J=7 S SRLINE="    "_$P(SROP,",") D LINE
"RTN","SROQM1",47,0)
 .S SRLINE="    "_SROP S SRBLANK="" F I=1:1:(28-$L(SRLINE)) S SRBLANK=SRBLANK_" "
"RTN","SROQM1",48,0)
 S SRLINE=SRLINE_SRBLANK_$J(SRP(1),6)_"       "_$J(SRP(3),6)_"       "_$J(SRP(2),6) D LINE
"RTN","SROQM1",49,0)
 Q
"RTN","SROQM1",50,0)
BLANK ; blank line
"RTN","SROQM1",51,0)
 S ^TMP("SRMSG",$J,SRCNT)="",SRCNT=SRCNT+1
"RTN","SROQM1",52,0)
 Q
"RTN","SROQM1",53,0)
LINE ; store line in ^TMP
"RTN","SROQM1",54,0)
 S ^TMP("SRMSG",$J,SRCNT)=SRLINE,SRCNT=SRCNT+1
"RTN","SROQM1",55,0)
 Q
"RTN","SROQM1",56,0)
HAIR ; hair removal methods
"RTN","SROQM1",57,0)
 D BLANK,BLANK S SRBLANK="" F I=1:1:19 S SRBLANK=SRBLANK_" "
"RTN","SROQM1",58,0)
 S SRLINE=SRBLANK_"PREOPERATIVE HAIR REMOVAL METHODS SUMMARY" D LINE
"RTN","SROQM1",59,0)
 S SRLINE=SRBLANK_"-----------------------------------------" D LINE
"RTN","SROQM1",60,0)
 D BLANK F I=1:1:23 S SRBLANK=SRBLANK_" "
"RTN","SROQM1",61,0)
 S SRLINE=SRBLANK_"CASES    % OF TOTAL" D LINE
"RTN","SROQM1",62,0)
 S SRLINE=SRBLANK_"-----    ----------" D LINE
"RTN","SROQM1",63,0)
 S SRBLANK="" F I=1:1:15 S SRBLANK=SRBLANK_" "
"RTN","SROQM1",64,0)
 S SRLINE=SRBLANK_"   TOTAL CASES PERFORMED:"_$J(SRCASES,6)_"       "
"RTN","SROQM1",65,0)
 S:SRCASES SRLINE=SRLINE_"100.0" D LINE,BLANK
"RTN","SROQM1",66,0)
 S SRLINE=SRBLANK_SRBLANK_"  CLIPPER:"_$J(SRHAIR("C"),6)_"       "
"RTN","SROQM1",67,0)
 S:SRCASES SRLINE=SRLINE_$J(((SRHAIR("C")/SRCASES)*100),5,1) D LINE
"RTN","SROQM1",68,0)
 S SRLINE=SRBLANK_"              DEPILATORY:"_$J(SRHAIR("D"),6)_"       "
"RTN","SROQM1",69,0)
 S:SRCASES SRLINE=SRLINE_$J(((SRHAIR("D")/SRCASES)*100),5,1) D LINE
"RTN","SROQM1",70,0)
 S SRLINE=SRBLANK_"         NO HAIR REMOVED:"_$J(SRHAIR("N"),6)_"       "
"RTN","SROQM1",71,0)
 S:SRCASES SRLINE=SRLINE_$J(((SRHAIR("N")/SRCASES)*100),5,1) D LINE
"RTN","SROQM1",72,0)
 S SRLINE=SRBLANK_"PATIENT REMOVED OWN HAIR:"_$J(SRHAIR("P"),6)_"       "
"RTN","SROQM1",73,0)
 S:SRCASES SRLINE=SRLINE_$J(((SRHAIR("P")/SRCASES)*100),5,1) D LINE
"RTN","SROQM1",74,0)
 S SRLINE=SRBLANK_SRBLANK_"  SHAVING:"_$J(SRHAIR("S"),6)_"       "
"RTN","SROQM1",75,0)
 S:SRCASES SRLINE=SRLINE_$J(((SRHAIR("S")/SRCASES)*100),5,1) D LINE
"RTN","SROQM1",76,0)
 N SRNDOC S SRNDOC=SRHAIR("U")+SRHAIR("ZZ")
"RTN","SROQM1",77,0)
 S SRLINE=SRBLANK_"          NOT DOCUMENTED:"_$J(SRNDOC,6)_"       "
"RTN","SROQM1",78,0)
 S:SRCASES SRLINE=SRLINE_$J(((SRNDOC/SRCASES)*100),5,1) D LINE
"RTN","SROQM1",79,0)
 S SRLINE=SRBLANK_SRBLANK_"    OTHER:"_$J(SRHAIR("O"),6)_"       "
"RTN","SROQM1",80,0)
 S:SRCASES SRLINE=SRLINE_$J(((SRHAIR("O")/SRCASES)*100),5,1) D LINE
"RTN","SROQM1",81,0)
 Q
"RTN","SROQT")
0^65^B29470128^B28873374
"RTN","SROQT",1,0)
SROQT ;BIR/ADM - QTRLY RPT MESSAGE TO SERVER ;03/29/06
"RTN","SROQT",2,0)
 ;;3.0; Surgery ;**38,43,62,67,70,77,50,95,123,126,129,153**;24 Jun 93;Build 11
"RTN","SROQT",3,0)
 ;** NOTICE: This routine is part of an implementation of a nationally
"RTN","SROQT",4,0)
 ;**         controlled procedure. Local modifications to this routine
"RTN","SROQT",5,0)
 ;**         are prohibited.
"RTN","SROQT",6,0)
 ;
"RTN","SROQT",7,0)
 S SRD=^XMB("NETNAME"),ISC=0 I $E(SRD,1,3)="FO-"!(SRD["ISC-")!(SRD["ISC.")!(SRD["FORUM")!(SRD["TST")!(SRD[".FO-") S ISC=1
"RTN","SROQT",8,0)
 K ^TMP("SRQTR",$J),^TMP("SRATT",$J) N SRDIV S SRDIV=$P($$SITE^SROVAR,"^",3)_$S(SRIEN:"-"_SRIEN,1:"")
"RTN","SROQT",9,0)
 S SRSMO=$E(SRSTART,4,5),SRQTR=$S(SRSMO=10:1,SRSMO="01":2,SRSMO="04":3,1:4),SRFYR=$S(SRQTR=1:$E(SRSTART,1,3)+1,1:$E(SRSTART,1,3))+1700,SRFQ=SRFYR_SRQTR
"RTN","SROQT",10,0)
 S SRNODE=SRDIV_"^1^"_SRFQ_"^"_DT_"^"_SRCASES_"^"_SRMAJOR_"^"_SRMORT_"^"_SRCOMP_"^"_SRINPAT_"^"_SREMERG_"^"_SR60 F I=1:1:7 S SRNODE=SRNODE_"^"_SRASA(I)
"RTN","SROQT",11,0)
 S SRNODE=SRNODE_"^"_SROPD_"^"_SRINV("O")_"^"_SRINV("I")_"^"_SRADMT
"RTN","SROQT",12,0)
 I SRIEN S SRNODE=SRNODE_"^"_SRINST_"^"_SRSTATN
"RTN","SROQT",13,0)
 S ^TMP("SRQTR",$J,1)=SRNODE
"RTN","SROQT",14,0)
SP S SRNODE=SRDIV_"^2" F SRSS=50:1:55 S SRNODE=SRNODE_"^"_^TMP("SRSS",$J,SRSS)
"RTN","SROQT",15,0)
 S ^TMP("SRQTR",$J,2)=SRNODE
"RTN","SROQT",16,0)
 S SRNODE=SRDIV_"^3" F SRSS=56:1:61 S SRNODE=SRNODE_"^"_^TMP("SRSS",$J,SRSS)
"RTN","SROQT",17,0)
 S ^TMP("SRQTR",$J,3)=SRNODE
"RTN","SROQT",18,0)
 S SRNODE=SRDIV_"^4" F SRSS=62,500,501,502,"ZZ" S SRNODE=SRNODE_"^"_^TMP("SRSS",$J,SRSS)
"RTN","SROQT",19,0)
 S ^TMP("SRQTR",$J,4)=SRNODE
"RTN","SROQT",20,0)
IX S SRNODE=SRDIV_"^5" F J=1:1:6 D PROC
"RTN","SROQT",21,0)
 S SRNODE=SRNODE_"^^^" F J=9:1:12 D PROC
"RTN","SROQT",22,0)
 S ^TMP("SRQTR",$J,5)=SRNODE
"RTN","SROQT",23,0)
COMP S SRNODE=SRDIV_"^6" F I=1:1:37 S SRNODE=SRNODE_"^"_SRC(I)
"RTN","SROQT",24,0)
 S ^TMP("SRQTR",$J,6)=SRNODE
"RTN","SROQT",25,0)
RES S X="" F I=1:1:14,99 S X=X_$G(SRATT(I))_"^"
"RTN","SROQT",26,0)
 S ^TMP("SRATT",$J,"TOTAL")=X
"RTN","SROQT",27,0)
 F K="J","N" S X="" D
"RTN","SROQT",28,0)
 .F I=1:1:14,99 S X=X_$G(SRATT(K,I))_"^"
"RTN","SROQT",29,0)
 .S ^TMP("SRATT",$J,K)=X
"RTN","SROQT",30,0)
 S SRNODE=SRDIV_"^7^"_SRWC_"^"_$P(^TMP("SRATT",$J,"TOTAL"),"^",1,4)_"^"_$P(^TMP("SRATT",$J,"TOTAL"),"^",15)
"RTN","SROQT",31,0)
 S SRNODE=SRNODE_"^"_SRIN_"^"_$P(^TMP("SRATT",$J,"J"),"^",1,4)_"^"_$P(^TMP("SRATT",$J,"J"),"^",15)_"^"_$P(^TMP("SRATT",$J,"N"),"^",1,4)_"^"_$P(^TMP("SRATT",$J,"N"),"^",15)
"RTN","SROQT",32,0)
 S SRNODE=SRNODE_"^"_$P(^TMP("SRATT",$J,"TOTAL"),"^",5,8)_"^"_$P(^TMP("SRATT",$J,"J"),"^",5,8)_"^"_$P(^TMP("SRATT",$J,"N"),"^",5,8)
"RTN","SROQT",33,0)
 S ^TMP("SRQTR",$J,7)=SRNODE
"RTN","SROQT",34,0)
HIP S SRNODE=SRDIV_"^8" F J=7,8 D PROC
"RTN","SROQT",35,0)
 S SRNODE=SRNODE_"^"_SRTOV_"^"_SRTONO_"^"_SRTONE_"^"_SRICY_"^"_SRICNO_"^"_SRICNR_"^"_SRICNE_"^"_SRSCY_"^"_SRSCNO_"^"_SRSCNR_"^"_SRSCNE
"RTN","SROQT",36,0)
 F I="C","D","N","P","S","U","O","ZZ" S SRNODE=SRNODE_"^"_SRHAIR(I)
"RTN","SROQT",37,0)
 S ^TMP("SRQTR",$J,8)=SRNODE
"RTN","SROQT",38,0)
 S SRNODE=SRDIV_"^9^"_$P(^TMP("SRATT",$J,"TOTAL"),"^",9,14)_"^"_$P(^TMP("SRATT",$J,"J"),"^",9,14)_"^"_$P(^TMP("SRATT",$J,"N"),"^",9,14)
"RTN","SROQT",39,0)
 S ^TMP("SRQTR",$J,9)=SRNODE
"RTN","SROQT",40,0)
MSG ; create mail message to server
"RTN","SROQT",41,0)
 S X=$$ACTIVE^XUSER(DUZ) I '+X S XMDUZ=.5
"RTN","SROQT",42,0)
 S XMSUB="QUARTERLY REPORT - SURGICAL SERVICE"
"RTN","SROQT",43,0)
 K XMY I 'ISC S (XMY("S.SRCOSERV@FO-HINES.MED.VA.GOV"),XMY("G.SRCOSERV@FO-HINES.MED.VA.GOV"))=""
"RTN","SROQT",44,0)
 I ISC S XMY("G.SR-QUARTERLY@"_SRD)=""
"RTN","SROQT",45,0)
 S XMTEXT="^TMP(""SRQTR"",$J," N I D ^XMD K ^TMP("SRQTR",$J),XMY,XMTEXT
"RTN","SROQT",46,0)
 Q:SRIEN
"RTN","SROQT",47,0)
MSG1 S XMY("G.SR-QUARTERLY@"_SRD)="",XMSUB="QUARTERLY REPORT TRANSMISSION"
"RTN","SROQT",48,0)
 S SRMSG(1)="The Quarterly Report for quarter #"_$E(SRFQ,5)_" of fiscal year "_$E(SRFQ,1,4)_" has been"
"RTN","SROQT",49,0)
 S SRMSG(2)="transmitted to the central database of Surgical Service, VHA Headquarters."
"RTN","SROQT",50,0)
 S XMTEXT="SRMSG(" N I D ^XMD K XMY,XMTEXT
"RTN","SROQT",51,0)
 D ^SROQM,SITE
"RTN","SROQT",52,0)
 Q
"RTN","SROQT",53,0)
PROC S X=^TMP("SRPROC",$J,J),SRNODE=SRNODE_"^"_$P(X,"^")_"^"_$P(X,"^",3)_"^"_$P(X,"^",2)
"RTN","SROQT",54,0)
 Q
"RTN","SROQT",55,0)
QUE ; queue creation of report to central database
"RTN","SROQT",56,0)
 W ! K %DT S %DT("A")="Queue report to run at what date/time ? ",%DT(0)="NOW",%DT("B")="NOW",%DT="AEFXT" D ^%DT I Y=-1 S SRSOUT=1 G END^SROQ
"RTN","SROQT",57,0)
 D TSK G END^SROQ
"RTN","SROQT",58,0)
TSK S ZTDTH=Y,ZTIO="",ZTDESC="Surgery Quarterly Report",(ZTSAVE("SRSTART"),ZTSAVE("SREND"),ZTSAVE("SRFLG"),ZTSAVE("SRT"))="",ZTRTN="EN^SROQT" D ^%ZTLOAD
"RTN","SROQT",59,0)
 Q
"RTN","SROQT",60,0)
EN ; entry point when queued to generate mail report only
"RTN","SROQT",61,0)
 K SRINSTP N SRDVSN,SRIEN,SRMULT S SRDVSN="",(SRCOUNT,SRIEN,SRMULT,X)=0 D
"RTN","SROQT",62,0)
 .F  S X=$O(^SRO(133,X)) Q:'X  I '$P($G(^SRO(133,X,0)),"^",21) S SRCOUNT=SRCOUNT+1,SRDVSN(X)=$P(^SRO(133,X,0),"^")
"RTN","SROQT",63,0)
 .I SRCOUNT>1 S SRMULT=1
"RTN","SROQT",64,0)
 D SET^SROQ2,SROQT I SRMULT D
"RTN","SROQT",65,0)
 .S SRIEN=0 F  S SRIEN=$O(SRDVSN(SRIEN)) Q:'SRIEN  D
"RTN","SROQT",66,0)
 ..S SRINSTP=SRDVSN(SRIEN),SRINST=$$GET1^DIQ(4,SRINSTP,.01),SRSTATN=$$GET1^DIQ(4,SRINSTP,99)
"RTN","SROQT",67,0)
 ..D SET^SROQ2,SROQT
"RTN","SROQT",68,0)
 F I="SRATT","SRDEATH","SRDPT","SRDREL","SRDTH","SREXP","SRINOUT","SRIOD","SRP","SRPROC","SRREL","SRSP","SRSS","SRTN" K ^TMP(I,$J)
"RTN","SROQT",69,0)
 S ZTREQ="@"
"RTN","SROQT",70,0)
 Q
"RTN","SROQT",71,0)
SITE ; update site parameters file
"RTN","SROQT",72,0)
 S X=$E(SRSTART,4,7),Y=$S(X="1001":1,X="0101":2,X="0401":3,1:4),SRLATE=SRYR_Y
"RTN","SROQT",73,0)
 S SRE=0 F  S SRE=$O(^SRO(133,SRE)) Q:'SRE  I $P(^SRO(133,SRE,0),"^",18)<SRLATE S $P(^(0),"^",18)=SRLATE
"RTN","SROQT",74,0)
DALERT ; delete alert
"RTN","SROQT",75,0)
 S XQAID="SRQTR-"_SRLATE,XQAKILL=0 D DELETEA^XQALERT
"RTN","SROQT",76,0)
 Q
"RTN","SROQT",77,0)
NIGHT ; determine if current quarterly report has been transmitted
"RTN","SROQT",78,0)
 D CURRENT S SRYR=SRYR+1700,SRFQ=SRYR_SRQTR,SRE=0 S SRE=$O(^SRO(133,SRE)) I $P(^SRO(133,SRE,0),"^",18)'<SRFQ Q
"RTN","SROQT",79,0)
 S SRALERT=0 I SRDAY>206&(SRDAY<214)!(SRDAY>507&(SRDAY<515))!(SRDAY>806&(SRDAY<814))!(SRDAY>1106&(SRDAY<1114)) S SRALERT=1
"RTN","SROQT",80,0)
 D:SRALERT ALERT^SROQ1A D:'SRALERT AUTO
"RTN","SROQT",81,0)
 Q
"RTN","SROQT",82,0)
CURRENT ; get current reporting quarter
"RTN","SROQT",83,0)
 S SRYR=$E(DT,1,3),SRDAY=$E(DT,4,7),SRQTR=4 I SRDAY>206 S SRQTR=$S(SRDAY<508:1,SRDAY<807:2,SRDAY<1107:3,1:4)
"RTN","SROQT",84,0)
 I SRQTR=4,SRDAY<207 S SRYR=SRYR-1
"RTN","SROQT",85,0)
 Q
"RTN","SROQT",86,0)
DATES ; get start and end dates
"RTN","SROQT",87,0)
 S SRSMO=$S(SRQTR=1:"1001",SRQTR=2:"0101",SRQTR=3:"0401",1:"0701"),SREMO=$S(SRQTR=1:"1231",SRQTR=2:"0331",SRQTR=3:"0630",1:"0930"),SRSTART=$S(SRQTR=1:SRYR-1,1:SRYR)_SRSMO,SREND=$S(SRQTR=1:SRYR-1,1:SRYR)_SREMO
"RTN","SROQT",88,0)
 Q
"RTN","SROQT",89,0)
VAR ; set report variables for non-interactive calls     
"RTN","SROQT",90,0)
 D CURRENT,DATES S SRFLG=1
"RTN","SROQT",91,0)
 Q
"RTN","SROQT",92,0)
AUTO ; automatic transmission of report
"RTN","SROQT",93,0)
 D VAR S (SRT,SRSOUT)=1 D NOW^%DTC S Y=$E(%,1,12) D TSK
"RTN","SROQT",94,0)
 Q
"RTN","SROUTC")
0^59^B16240379^B17003115
"RTN","SROUTC",1,0)
SROUTC ;BIR/SJA - OUTCOMES DATA ;03/13/06
"RTN","SROUTC",2,0)
 ;;3.0; Surgery ;**125,135,153**;24 Jun 93;Build 11
"RTN","SROUTC",3,0)
 D UPDT490,EN^SROCCAT
"RTN","SROUTC",4,0)
 F I=205,206,208,209 S SRA(I)=$G(^SRF(SRTN,I))
"RTN","SROUTC",5,0)
 S NYUK=$P(SRA(208),"^",2) D YN S SRAO(1)=SHEMP_"^385",NYUK=$P(SRA(208),"^",7) D YN S SRAO(8)=SHEMP_"^391"
"RTN","SROUTC",6,0)
 S NYUK=$P(SRA(208),"^",3) D YN S SRAO(2)=SHEMP_"^386",NYUK=$P(SRA(206),"^",39) D YN S SRAO(9)=SHEMP_"^466"
"RTN","SROUTC",7,0)
 S NYUK=$P(SRA(205),"^",17) D YN S SRAO(3)=SHEMP_"^254",NYUK=$P(SRA(209),"^",12) D YN S SRAO(10)=SHEMP_"^490"
"RTN","SROUTC",8,0)
 S NYUK=$P(SRA(208),"^",5) D YN S SRAO(4)=SHEMP_"^388",NYUK=$P(SRA(205),"^",21) D YN S SRAO(11)=SHEMP_"^256"
"RTN","SROUTC",9,0)
 S NYUK=$P(SRA(205),"^",26) D YN S SRAO(5)=SHEMP_"^411",NYUK=$P(SRA(205),"^",22) D YN S SRAO(12)=SHEMP_"^410"
"RTN","SROUTC",10,0)
 S NYUK=$P(SRA(208),"^",6) D YN S SRAO(6)=SHEMP_"^389",NYUK=$P(SRA(206),"^",40) D YN S SRAO(13)=SHEMP_"^467"
"RTN","SROUTC",11,0)
 S NYUK=$P(SRA(205),"^",13) D YN S SRAO(7)=SHEMP_"^285",NYUK=$P(SRA(208),"^") D YN S SRAO(0)=SHEMP_"^384"
"RTN","SROUTC",12,0)
 ;
"RTN","SROUTC",13,0)
DISP S SRPAGE="PAGE: 1",SRHDR(.5)="OUTCOMES INFORMATION" D HDR^SROAUTL
"RTN","SROUTC",14,0)
 W !,"0. Operative Death: ",?35,$P(SRAO(0),"^")
"RTN","SROUTC",15,0)
 W !!,"Perioperative (30 day) Occurrences:",!,"-----------------------------------"
"RTN","SROUTC",16,0)
 W !,"1. Perioperative MI: ",?35,$P(SRAO(1),"^"),?40," 8. Repeat cardiac surg procedure: ",?76,$P(SRAO(8),"^")
"RTN","SROUTC",17,0)
 W !,"2. Endocarditis: ",?35,$P(SRAO(2),"^"),?40," 9. Tracheostomy: ",?76,$P(SRAO(9),"^")
"RTN","SROUTC",18,0)
 W !,"3. Renal failure require dialysis: ",$P(SRAO(3),"^"),?40,"10. Repeat ventilator w/in 30 days: ",?76,$P(SRAO(10),"^")
"RTN","SROUTC",19,0)
 W !,"4. Mediastinitis: ",?35,$P(SRAO(4),"^"),?40,"11. Stroke: ",?76,$P(SRAO(11),"^")
"RTN","SROUTC",20,0)
 W !,"5. Cardiac arrest requiring CPR: ",?35,$P(SRAO(5),"^"),?40,"12. Coma >= 24 hr: ",?76,$P(SRAO(12),"^")
"RTN","SROUTC",21,0)
 W !,"6. Reoperation for bleeding: ",?35,$P(SRAO(6),"^"),?40,"13. New Mech Circ Support: ",?76,$P(SRAO(13),"^")
"RTN","SROUTC",22,0)
 W !,"7. On ventilator >= 48 hr: ",?35,$P(SRAO(7),"^")
"RTN","SROUTC",23,0)
 W !! F MOE=1:1:80 W "-"
"RTN","SROUTC",24,0)
 Q
"RTN","SROUTC",25,0)
YN ; store answer
"RTN","SROUTC",26,0)
 S SHEMP=$S(NYUK="NS":"NS",NYUK="N":"NO",NYUK="Y":"YES",1:"")
"RTN","SROUTC",27,0)
 Q
"RTN","SROUTC",28,0)
UPDT490 ; update field 490
"RTN","SROUTC",29,0)
 N SRX S SRX=$P($G(^SRF(SRTN,209)),"^",12) S:SRX="" SRX="N"
"RTN","SROUTC",30,0)
 K DA,DIE,DR S DIE=130,DA=SRTN,DR="490////"_SRX D ^DIE K DA,DIE,DR
"RTN","SROUTC",31,0)
 Q
"RTN","SROUTC",32,0)
UPDATE N SRCMP,SROC,SRI,SRIF,SRQ,SRY D MAP
"RTN","SROUTC",33,0)
 I EMILY=5!(EMILY=13) D IP Q
"RTN","SROUTC",34,0)
 S X=$P(^SRO(136.5,SROC,0),"^"),DIC(0)="L",DLAYGO="130.22",DA(1)=SRTN,DIC="^SRF("_SRTN_",16," D FILE^DICN
"RTN","SROUTC",35,0)
 S $P(^SRF(SRTN,16,+Y,0),"^",2)=SROC,SRY=+Y
"RTN","SROUTC",36,0)
EM8 I EMILY=8 K DIR S DIR(0)="130.22,8",DIR("A")="Cardiopulmonary Bypass Status" D ^DIR G:X="" EM8 D  K DR,DA,DIE
"RTN","SROUTC",37,0)
 .K DA,DR,DIE,DIR I X["^"!(X="@")!(Y=0) D DEL S DA=SRTN,DIE=130,DR="391////N" D ^DIE Q
"RTN","SROUTC",38,0)
 .S DA=SRY,DR="8///"_Y,DA(1)=SRTN,DIE="^SRF(SRTN,16," D ^DIE
"RTN","SROUTC",39,0)
 Q
"RTN","SROUTC",40,0)
IP K DIR S DIR("A")="Is this an Intraoperative occurrence? ",DIR("B")="YES",DIR(0)="YA" D ^DIR K DIR Q:$D(DTOUT)!$D(DUOUT)
"RTN","SROUTC",41,0)
 S SRIF=Y
"RTN","SROUTC",42,0)
 I SRIF=1 S X=$P(^SRO(136.5,SROC,0),"^"),DIC(0)="L",DLAYGO="130.14",DA(1)=SRTN,DIC="^SRF("_SRTN_",10," D FILE^DICN S $P(^SRF(SRTN,10,+Y,0),"^",2)=SROC Q
"RTN","SROUTC",43,0)
 ;
"RTN","SROUTC",44,0)
 I SRIF=0 S X=$P(^SRO(136.5,SROC,0),"^"),DIC(0)="L",DLAYGO="130.22",DA(1)=SRTN,DIC="^SRF("_SRTN_",16," D FILE^DICN S $P(^SRF(SRTN,16,+Y,0),"^",2)=SROC
"RTN","SROUTC",45,0)
 Q
"RTN","SROUTC",46,0)
DEL ; delete existing Post/Intraoperative occurrences.
"RTN","SROUTC",47,0)
 N II,SRII,SROC D MAP
"RTN","SROUTC",48,0)
 S II=0 F  S II=$O(^SRF(SRTN,16,II)) Q:'II  S SRII=$G(^(II,0)) I $P(SRII,"^",2)=SROC D  Q
"RTN","SROUTC",49,0)
 .S DA(1)=SRTN,DA=II,DIK="^SRF("_SRTN_",16," D ^DIK I '$O(^SRF(SRTN,16,0)) K ^SRF(SRTN,16,0)
"RTN","SROUTC",50,0)
 ;
"RTN","SROUTC",51,0)
 S II=0 F  S II=$O(^SRF(SRTN,10,II)) Q:'II  S SRII=$G(^(II,0)) I $P(SRII,"^",2)=SROC D  Q
"RTN","SROUTC",52,0)
 .S DA(1)=SRTN,DA=II,DIK="^SRF("_SRTN_",10," D ^DIK I '$O(^SRF(SRTN,10,0)) K ^SRF(SRTN,10,0)
"RTN","SROUTC",53,0)
 Q
"RTN","SROUTC",54,0)
MAP S SROC=$S(EMILY=1:17,EMILY=2:23,EMILY=3:9,EMILY=4:25,EMILY=5:16,EMILY=6:26,EMILY=7:6,EMILY=8:27,EMILY=9:33,EMILY=10:37,EMILY=11:12,EMILY=12:13,1:34)
"RTN","SROUTC",55,0)
 Q
"RTN","SROXR4")
0^13^B6379114^B6069696
"RTN","SROXR4",1,0)
SROXR4 ;BIR/MAM - CROSS REFERENCES ;03/15/06
"RTN","SROXR4",2,0)
 ;;3.0; Surgery ;**62,83,100,153**;24 Jun 93;Build 11
"RTN","SROXR4",3,0)
 Q
"RTN","SROXR4",4,0)
PRO ; stuff default prosthesis info
"RTN","SROXR4",5,0)
 I '$D(SRTN) Q
"RTN","SROXR4",6,0)
 S ^SRF(SRTN,1,DA,0)=^SRF(SRTN,1,DA,0)_"^"_$P(^SRO(131.9,X,0),"^",2,99)
"RTN","SROXR4",7,0)
 I $D(^SRO(131.9,X,1)) S ^SRF(SRTN,1,DA,1)=^(1)
"RTN","SROXR4",8,0)
 Q
"RTN","SROXR4",9,0)
CAN ; 'SET' logic of the 'ACAN' x-ref on the 'CANCEL REASON'
"RTN","SROXR4",10,0)
 ; field in the SURGERY file (130)
"RTN","SROXR4",11,0)
 S $P(^SRF(DA,30),"^",2)=$P(^SRO(135,X,0),"^",3) I $P(^SRO(135,X,0),"^",3)="" S $P(^SRF(DA,30),"^",2)="Y"
"RTN","SROXR4",12,0)
 I $P(^SRF(DA,30),"^",3)="" S $P(^SRF(DA,30),"^",3)=DUZ
"RTN","SROXR4",13,0)
 S SHEMP=$P($G(^SRF(DA,.2)),"^",10) I SHEMP,$D(^SRF(DA,"RA")) S ZTDESC="Clean up Risk Assessment Information, Canceled Case",ZTRTN="RISK^SROXR4",ZTDTH=$H,ZTSAVE("DA")="" D ^%ZTLOAD
"RTN","SROXR4",14,0)
 Q
"RTN","SROXR4",15,0)
KCAN ; 'KILL' logic of the 'ACAN' x-ref on the 'CANCEL REASON'
"RTN","SROXR4",16,0)
 ; field in the SURGERY file (130)
"RTN","SROXR4",17,0)
 S $P(^SRF(DA,30),"^",2)="" I '$P($G(^SRF(DA,30)),"^") S $P(^SRF(DA,30),"^",3)=""
"RTN","SROXR4",18,0)
 Q
"RTN","SROXR4",19,0)
AS ; 'SET' logic of the 'AS' x-ref on the SCHEDULED START TIME
"RTN","SROXR4",20,0)
 ; field in the SURGERY file (130)
"RTN","SROXR4",21,0)
 S OR=$P(^SRF(DA,0),"^",2) I 'OR Q
"RTN","SROXR4",22,0)
 S ^SRF("AS",OR,X,DA)=""
"RTN","SROXR4",23,0)
 Q
"RTN","SROXR4",24,0)
KAS ; 'KILL' logic of the 'AS' x-ref on the SCHEDULED FINISH TIME
"RTN","SROXR4",25,0)
 ; field in the SURGERY file (130)
"RTN","SROXR4",26,0)
 S OR=$P(^SRF(DA,0),"^",2) I 'OR Q
"RTN","SROXR4",27,0)
 K ^SRF("AS",OR,X,DA)
"RTN","SROXR4",28,0)
 Q
"RTN","SROXR4",29,0)
SCH ; 'SET' logic of the 'AC' x-ref of the REQUIRED FIELDS FOR SCHEDULING
"RTN","SROXR4",30,0)
 ; field in the SURGERY SITE PARAMETERS file (133)
"RTN","SROXR4",31,0)
 S MM=$O(^DD(130,"B",X,0)),$P(^SRO(133,DA(1),4,DA,0),"^",2)=MM K MM
"RTN","SROXR4",32,0)
 Q
"RTN","SROXR4",33,0)
KSCH ; 'KILL' logic of the 'AC' x-ref of the REQUIRED FIELDS FOR SCHEDULING
"RTN","SROXR4",34,0)
 ; field in the SURGERY SITE PARAMETERS file (133)
"RTN","SROXR4",35,0)
 S $P(^SRO(133,DA(1),4,DA,0),"^",2)=""
"RTN","SROXR4",36,0)
 Q
"RTN","SROXR4",37,0)
RISK ; clean up risk data for canceled cases
"RTN","SROXR4",38,0)
 S DIE=130,DR="102///@;235///@;284///@;323///@" D ^DIE K DR,DA S ZTREQ="@"
"RTN","SROXR4",39,0)
 Q
"RTN","SROXR4",40,0)
AQ ; set logic for AQ x-ref
"RTN","SROXR4",41,0)
 N SRTD,SRLO D AQDT I SRTD'<SRLO S $P(^SRF(DA,.4),"^",2)="R",^SRF("AQ",SRTD,DA)=""
"RTN","SROXR4",42,0)
 Q
"RTN","SROXR4",43,0)
KAQ ; kill logic for AQ x-ref
"RTN","SROXR4",44,0)
 N SRTD,SRLO D AQDT S $P(^SRF(DA,.4),"^",2)="" K ^SRF("AQ",SRTD,DA)
"RTN","SROXR4",45,0)
 Q
"RTN","SROXR4",46,0)
AQDT ; get quarterly transmission date
"RTN","SROXR4",47,0)
 N SRDAY,SRSDATE,SRQTR,SRX,SRYR S SRSDATE=$E($P(^SRF(DA,0),"^",9),1,7)
"RTN","SROXR4",48,0)
 S SRYR=$E(SRSDATE,1,3),SRDAY=$E(SRSDATE,4,7),SRQTR=$S(SRDAY<401:2,SRDAY<701:3,SRDAY<1001:4,1:1) I SRQTR=1 S SRYR=SRYR+1
"RTN","SROXR4",49,0)
 S SRTD=SRYR_$S(SRQTR=1:"0214",SRQTR=2:"0515",SRQTR=3:"0814",1:"1114")
"RTN","SROXR4",50,0)
 S SRX=$E(DT,1,3),SRLO=SRX-1_"0214"
"RTN","SROXR4",51,0)
 Q
"RTN","SROXR4",52,0)
AQ1 ; set logic for AQ1 x-ref
"RTN","SROXR4",53,0)
 I X="R" N SRTD,SRLO D AQDT I SRTD'<SRLO S ^SRF("AQ",SRTD,DA)=""
"RTN","SROXR4",54,0)
 Q
"RTN","SROXR4",55,0)
KAQ1 ; kill logic for AQ1 x-ref
"RTN","SROXR4",56,0)
 N SRTD,SRLO D AQDT K ^SRF("AQ",SRTD,DA)
"RTN","SROXR4",57,0)
 Q
"UP",130,130.0508,-1)
130^49
"UP",130,130.0508,0)
130.0508
"UP",130,130.22,-1)
130^16
"UP",130,130.22,0)
130.22
"VER")
8.0^22.0
"^DD",130,130,.12,0)
HAIR REMOVAL BY^*P200'^VA(200,^.1;2^S DIC("S")="S RESTRICT=""130,.12"" D KEY^SROXPR I $D(SROK)" D ^DIC K DIC S DIC=$G(DIE),X=+Y K:Y<0 X
"^DD",130,130,.12,.1)
Preop Surgical Site Hair Removal by
"^DD",130,130,.12,3)
If the patient had hair removed for the procedure, enter the name of the person responsible for removing the patient's hair. This field may be restricted based on locally defined keys.
"^DD",130,130,.12,12)
This field may be restricted based on locally defined keys.
"^DD",130,130,.12,12.1)
S DIC("S")="S RESTRICT=""130,.12"" D KEY^SROXPR I $D(SROK)"
"^DD",130,130,.12,21,0)
^^2^2^3060328^^
"^DD",130,130,.12,21,1,0)
This is the person responsible for removing the patient's hair in 
"^DD",130,130,.12,21,2,0)
preparation for the operative procedure (if necessary).
"^DD",130,130,.12,"DT")
3060403
"^DD",130,130,1.09,0)
WOUND CLASSIFICATION^SX^C:CLEAN;CC:CLEAN/CONTAMINATED;D:CONTAMINATED;I:DIRTY/INFECTED;^1.0;8^I $D(^SRF(DA,"CON")),$P(^("CON"),"^") S SRFLD=1.09 D ^SROCON Q
"^DD",130,130,1.09,.1)
Wound Classification
"^DD",130,130,1.09,3)
Enter the code corresponding to the classification of the wound in relationship to the contamination and increasing risk of infection at the time of completion of the surgical procedure.
"^DD",130,130,1.09,21,0)
^^105^105^3060421^
"^DD",130,130,1.09,21,1,0)
NSQIP Definition (2006):
"^DD",130,130,1.09,21,2,0)
Indicate whether the wound has been classified by the primary surgeon 
"^DD",130,130,1.09,21,3,0)
as:
"^DD",130,130,1.09,21,4,0)
 
"^DD",130,130,1.09,21,5,0)
>> Class 1 - Clean (C): 
"^DD",130,130,1.09,21,6,0)
An uninfected operative wound in which no inflammation is encountered
"^DD",130,130,1.09,21,7,0)
and the respiratory, alimentary, genital, or uninfected urinary tract 
"^DD",130,130,1.09,21,8,0)
is not entered. In addition, clean wounds are primarily closed and, if
"^DD",130,130,1.09,21,9,0)
necessary, drained with closed drainage. Surgical incisional wounds 
"^DD",130,130,1.09,21,10,0)
that occur with nonpenetrating (blunt) trauma should be included in
"^DD",130,130,1.09,21,11,0)
this category if they meet the criteria.
"^DD",130,130,1.09,21,12,0)
 
"^DD",130,130,1.09,21,13,0)
[No hollow organ (e.g. bladder, stomach, vagina, lung, etc.) is 
"^DD",130,130,1.09,21,14,0)
entered; no breaks in aseptic technique.]
"^DD",130,130,1.09,21,15,0)
 
"^DD",130,130,1.09,21,16,0)
Examples:
"^DD",130,130,1.09,21,17,0)
 - Exploratory laparotomy 
"^DD",130,130,1.09,21,18,0)
 - Mastectomy or breast reduction 
"^DD",130,130,1.09,21,19,0)
 - Neck dissection
"^DD",130,130,1.09,21,20,0)
 - Nonpenetrating blunt trauma
"^DD",130,130,1.09,21,21,0)
 - Thyroidectomy
"^DD",130,130,1.09,21,22,0)
 - Total hip replacement
"^DD",130,130,1.09,21,23,0)
 - Vascular operations (e.g. AAA, AV fistula, TEA, aortoiliac bypass)
"^DD",130,130,1.09,21,24,0)
 - Hernia repair
"^DD",130,130,1.09,21,25,0)
 - CABG, AVR
"^DD",130,130,1.09,21,26,0)
 - Craniotomy, majority neurosurgery
"^DD",130,130,1.09,21,27,0)
 - Pleura biopsy
"^DD",130,130,1.09,21,28,0)
 - Sternotomy
"^DD",130,130,1.09,21,29,0)
 - Abdominoplasty, 
"^DD",130,130,1.09,21,30,0)
 - Bone anchored hearing aids (BAHA)
"^DD",130,130,1.09,21,31,0)
 - Penile prosthesis placement
"^DD",130,130,1.09,21,32,0)
 - Dupuytren's release, finger
"^DD",130,130,1.09,21,33,0)
 - Liposuction
"^DD",130,130,1.09,21,34,0)
 - Carpal tunnel release
"^DD",130,130,1.09,21,35,0)
 - Hydrocele repair
"^DD",130,130,1.09,21,36,0)
 
"^DD",130,130,1.09,21,37,0)
>> Class 2 - Clean/Contaminated (CC): 
"^DD",130,130,1.09,21,38,0)
An operative wound in which the respiratory, alimentary, genital, or
"^DD",130,130,1.09,21,39,0)
urinary tracts are entered under controlled conditions and without
"^DD",130,130,1.09,21,40,0)
unusual contamination. Specifically, procedures involving the biliary
"^DD",130,130,1.09,21,41,0)
tract, appendix, vagina, and oropharynx are included in this category,
"^DD",130,130,1.09,21,42,0)
provided no evidence of infection or major break in technique is
"^DD",130,130,1.09,21,43,0)
encountered.
"^DD",130,130,1.09,21,44,0)
 
"^DD",130,130,1.09,21,45,0)
[Hollow organ entered but controlled; no inflammation; primary wound 
"^DD",130,130,1.09,21,46,0)
closure; minor break in aseptic technique; mechanical drain used.]
"^DD",130,130,1.09,21,47,0)
 
"^DD",130,130,1.09,21,48,0)
Examples:
"^DD",130,130,1.09,21,49,0)
 - Bronchoscopy
"^DD",130,130,1.09,21,50,0)
 - Routine appendectomy
"^DD",130,130,1.09,21,51,0)
 - Cholecystectomy (e.g., any approach)
"^DD",130,130,1.09,21,52,0)
 - Laryngectomy
"^DD",130,130,1.09,21,53,0)
 - Small bowel resection
"^DD",130,130,1.09,21,54,0)
 - Oropharynx entered
"^DD",130,130,1.09,21,55,0)
 - GYN procedures
"^DD",130,130,1.09,21,56,0)
 - Vagina entered
"^DD",130,130,1.09,21,57,0)
 - Whipple pancreaticoduodenectomy
"^DD",130,130,1.09,21,58,0)
 - Pulmonary resection
"^DD",130,130,1.09,21,59,0)
 - Transurethral resection of prostate
"^DD",130,130,1.09,21,60,0)
 - Head & Neck cancer operations (e.g., oropharynx)
"^DD",130,130,1.09,21,61,0)
 - Sigmoid colectomy
"^DD",130,130,1.09,21,62,0)
 - Minor break in technique
"^DD",130,130,1.09,21,63,0)
 - Gastrointestinal or respiratory tract entered without significant
"^DD",130,130,1.09,21,64,0)
   spillage
"^DD",130,130,1.09,21,65,0)
 - Genitourinary tract entered in absence of infected urine
"^DD",130,130,1.09,21,66,0)
 
"^DD",130,130,1.09,21,67,0)
>> Class 3 - Contaminated (D): 
"^DD",130,130,1.09,21,68,0)
Open, fresh, accidental (e.g., traumatic) wounds. In addition, 
"^DD",130,130,1.09,21,69,0)
procedures that have major breaks in sterile technique (e.g., open 
"^DD",130,130,1.09,21,70,0)
cardiac massage) or gross spillage from the gastrointestinal tract, and
"^DD",130,130,1.09,21,71,0)
incisions in which acute, nonpurulent inflammation is encountered,
"^DD",130,130,1.09,21,72,0)
including necrotic tissue without evidence of purulent drainage (e.g.
"^DD",130,130,1.09,21,73,0)
dry gangrene) are included in this category.
"^DD",130,130,1.09,21,74,0)
 
"^DD",130,130,1.09,21,75,0)
Examples:
"^DD",130,130,1.09,21,76,0)
 - Appendectomy for gangrenous appendicitis
"^DD",130,130,1.09,21,77,0)
 - Bile spillage during cholecystectomy
"^DD",130,130,1.09,21,78,0)
 - Diverticulitis
"^DD",130,130,1.09,21,79,0)
 - Laparotomy for penetrating injury with intestinal spillage
"^DD",130,130,1.09,21,80,0)
 - Entrance of genitourinary or biliary tracts in presence of infected
"^DD",130,130,1.09,21,81,0)
   urine or bile
"^DD",130,130,1.09,21,82,0)
 
"^DD",130,130,1.09,21,83,0)
>> Class 4 - Dirty/Infected (I): 
"^DD",130,130,1.09,21,84,0)
Old traumatic wounds that have retained devitalized tissue and those 
"^DD",130,130,1.09,21,85,0)
that involve existing clinical infection or perforated viscera. This
"^DD",130,130,1.09,21,86,0)
definition suggests that the organisms causing postoperative infection
"^DD",130,130,1.09,21,87,0)
were present in the operative field before the operation.
"^DD",130,130,1.09,21,88,0)
 
"^DD",130,130,1.09,21,89,0)
[Untreated, uncontrolled spillage from an internal organ; pus in
"^DD",130,130,1.09,21,90,0)
operative wound; open suppurative wound; severe inflammation.]
"^DD",130,130,1.09,21,91,0)
 
"^DD",130,130,1.09,21,92,0)
Examples:
"^DD",130,130,1.09,21,93,0)
 - Excision and drainage of abscess 
"^DD",130,130,1.09,21,94,0)
 - Myringotomy for otitismedia 
"^DD",130,130,1.09,21,95,0)
 - Perforated bowel 
"^DD",130,130,1.09,21,96,0)
 - Peritonitis (abdominal exploration for acute bacterial peritonitis)
"^DD",130,130,1.09,21,97,0)
 - Acute bacterial inflammation, without pus 
"^DD",130,130,1.09,21,98,0)
 - Transection of 'clean' tissue for the purpose of surgical access to a
"^DD",130,130,1.09,21,99,0)
   collection of pus
"^DD",130,130,1.09,21,100,0)
 - Traumatic wound with foreign bodies, fecal contamination, or delayed
"^DD",130,130,1.09,21,101,0)
   treatment, or all of these; or from dirty source
"^DD",130,130,1.09,21,102,0)
 
"^DD",130,130,1.09,21,103,0)
This field should be verified and, if need be, edited postoperatively 
"^DD",130,130,1.09,21,104,0)
by the nurse reviewer in accordance with the official operating room 
"^DD",130,130,1.09,21,105,0)
log.
"^DD",130,130,1.09,"DT")
3060421
"^DD",130,130,102,0)
REASON FOR NO ASSESSMENT^*S^0:NON-SURGEON CASE;1:ANESTHESIA TYPE;2:EXCEEDS MAX ASSMNTS;3:EXCEEDS MAX TURPS;4:STUDY CRITERIA;5:PREVIOUS CASE;6:SCNR ON A/L;7:PRIOR INDEX PROC;8:CONCURRENT CASE;9:EXCEEDS MAX HERNIAS;^RA;7^Q
"^DD",130,130,102,.1)
Reason for not Creating an Assessment
"^DD",130,130,102,3)
Enter the reason why no assessment was done on this surgical case.
"^DD",130,130,102,12)
Screen prevents selection of pre-Phase III items.
"^DD",130,130,102,12.1)
S DIC("S")="I ""57""'[Y"
"^DD",130,130,102,21,0)
^.001^14^14^3060126^^
"^DD",130,130,102,21,1,0)
This is the reason why no assessment was entered for this particular
"^DD",130,130,102,21,2,0)
surgical case. It should be entered if any major procedure was excluded
"^DD",130,130,102,21,3,0)
from the risk assessment module.
"^DD",130,130,102,21,4,0)
 
"^DD",130,130,102,21,5,0)
 0 - Non-surgeon performed the procedure
"^DD",130,130,102,21,6,0)
 1 - Patient did NOT receive general, spinal, or epidural anesthesia
"^DD",130,130,102,21,7,0)
 2 - Number of surgical cases entered into the Surgical Risk Study 
"^DD",130,130,102,21,8,0)
     exceeded 36 over an 8 day time frame
"^DD",130,130,102,21,9,0)
 3 - Number of TURPs or TURBTs exceeded 5 cases over an 8 day time
"^DD",130,130,102,21,10,0)
     frame
"^DD",130,130,102,21,11,0)
 4 - Study exclusion criteria prohibits patient entry
"^DD",130,130,102,21,12,0)
 6 - Surgical Clinical Nurse Reviewer was on Annual Leave
"^DD",130,130,102,21,13,0)
 8 - Case was a concurrent case, secondary to an assessed primary case
"^DD",130,130,102,21,14,0)
 9 - Number of hernias exceeded 5 cases over an 8 day time frame
"^DD",130,130,102,"DT")
3060126
"^DD",130,130,202,0)
CURRENT SMOKER^S^Y:YES;N:NO;^200;3^Q
"^DD",130,130,202,.1)
Current Smoker
"^DD",130,130,202,3)
Enter the code (YES or NO) describing the patient's status as a smoker prior to surgery.
"^DD",130,130,202,21,0)
^^4^4^3060328^
"^DD",130,130,202,21,1,0)
NSQIP Definition (2006):
"^DD",130,130,202,21,2,0)
If the patient has smoked cigarettes in the year prior to admission for
"^DD",130,130,202,21,3,0)
surgery enter YES. Do not include patients who smoke cigars or pipes or
"^DD",130,130,202,21,4,0)
use chewing tobacco.
"^DD",130,130,202,"DT")
3060328
"^DD",130,130,211,0)
CURRENTLY ON DIALYSIS^S^Y:YES;N:NO;NS:NO STUDY;^200;39^Q
"^DD",130,130,211,.1)
Currently Requiring or On Dialysis (Y/N)
"^DD",130,130,211,3)
Enter YES if the patient is currently on dialysis.
"^DD",130,130,211,21,0)
^^4^4^3060117^
"^DD",130,130,211,21,1,0)
NSQIP Definition (2006):
"^DD",130,130,211,21,2,0)
Acute or chronic renal failure requiring periodic peritoneal dialysis, 
"^DD",130,130,211,21,3,0)
hemodialysis, hemofiltration, hemodiafiltration, or ultrafiltration 
"^DD",130,130,211,21,4,0)
within 2 weeks prior to surgery.
"^DD",130,130,211,"DT")
3060117
"^DD",130,130,216,0)
BLEEDING DISORDERS^S^Y:YES;N:NO;NS:NO STUDY;^200;49^Q
"^DD",130,130,216,.1)
History of Bleeding Disorders (Y/N)
"^DD",130,130,216,3)
Enter YES if the patient has a history of a bleeding disorder.
"^DD",130,130,216,21,0)
^^27^27^3060509^
"^DD",130,130,216,21,1,0)
NSQIP Definition (2006):
"^DD",130,130,216,21,2,0)
Any condition that places the patient at risk for excessive bleeding 
"^DD",130,130,216,21,3,0)
requiring hospitalization due to a deficiency of blood clotting 
"^DD",130,130,216,21,4,0)
elements (e.g., vitamin K deficiency, hemophilias, von Willebrands,
"^DD",130,130,216,21,5,0)
thrombocytopenia, chronic anticoagulation therapy that has not been 
"^DD",130,130,216,21,6,0)
discontinued). Do not include the patient on chronic aspirin therapy.
"^DD",130,130,216,21,7,0)
 
"^DD",130,130,216,21,8,0)
The time frame is 'up to and including' the day/hour written. If not 
"^DD",130,130,216,21,9,0)
documented, then assume it was not discontinued and answer 'yes' for 
"^DD",130,130,216,21,10,0)
bleeding disorder.
"^DD",130,130,216,21,11,0)
 
"^DD",130,130,216,21,12,0)
Following is a list of medications that impact the patient's risk for 
"^DD",130,130,216,21,13,0)
bleeding.  Please utilize the associated time frames for discontinuation
"^DD",130,130,216,21,14,0)
of medication to determine your answer to this variable.
"^DD",130,130,216,21,15,0)
 
"^DD",130,130,216,21,16,0)
      Medication           Time Frame
"^DD",130,130,216,21,17,0)
      ----------           ----------
"^DD",130,130,216,21,18,0)
 Coumadin (Warfarin)         4 days
"^DD",130,130,216,21,19,0)
 Heparin (IV only)           4 hours
"^DD",130,130,216,21,20,0)
 Plavix (Clopidogrel)        7 days
"^DD",130,130,216,21,21,0)
 Lovenox (Enoxaparin)       12 hours
"^DD",130,130,216,21,22,0)
 Reopro (Abciximab)          9 days
"^DD",130,130,216,21,23,0)
 Integrilin (Eptifibatide)   2 days
"^DD",130,130,216,21,24,0)
 Agrylin (Anagrelide)        3 days
"^DD",130,130,216,21,25,0)
 Fragmin (Dalteparin)       24 hours
"^DD",130,130,216,21,26,0)
 Aggrastat (Tirofiban)       4 hours
"^DD",130,130,216,21,27,0)
 Ticlopidine HCl (Ticlid)   10 days
"^DD",130,130,216,"DT")
3040317
"^DD",130,130,218.1,0)
PREOPERATIVE SEPSIS^*S^Y:YES;N:NONE;1:SIRS;2:SEPSIS;3:SEPTIC SHOCK;NS:NO STUDY;^206;8^Q
"^DD",130,130,218.1,.1)
Preoperative Sepsis in the 48 Hours Prior to Surgery
"^DD",130,130,218.1,3)
Enter the patient's septic status in the 48 hours prior to surgery.
"^DD",130,130,218.1,12)
Screen prevents selection of retired codes.
"^DD",130,130,218.1,12.1)
S DIC("S")="I Y'=""Y"""
"^DD",130,130,218.1,21,0)
^^35^35^3060717^
"^DD",130,130,218.1,21,1,0)
NSQIP Definition (2006):
"^DD",130,130,218.1,21,2,0)
Sepsis is a vast clinical entity that takes a variety of forms. The 
"^DD",130,130,218.1,21,3,0)
spectrum of disorders spans from relatively mild physiologic 
"^DD",130,130,218.1,21,4,0)
abnormalities to septic shock. Please report the most significant level
"^DD",130,130,218.1,21,5,0)
using the criteria below:
"^DD",130,130,218.1,21,6,0)
 
"^DD",130,130,218.1,21,7,0)
1. SIRS (Systemic Inflammatory Response Syndrome): SIRS is a widespread 
"^DD",130,130,218.1,21,8,0)
   inflammatory response to a variety of severe clinical insults. This 
"^DD",130,130,218.1,21,9,0)
   syndrome is clinically recognized by the presence of two or more of 
"^DD",130,130,218.1,21,10,0)
   the following:
"^DD",130,130,218.1,21,11,0)
 
"^DD",130,130,218.1,21,12,0)
      - Temp >38 degrees C or <36 degrees C
"^DD",130,130,218.1,21,13,0)
      - HR >90 bpm
"^DD",130,130,218.1,21,14,0)
      - RR >20 breaths/min or PaCO2 <32 mmHg(<4.3 kPa)
"^DD",130,130,218.1,21,15,0)
      - WBC >12,000 cell/mm3, <4000 cells/mm3, or >10% immature (band) 
"^DD",130,130,218.1,21,16,0)
        forms
"^DD",130,130,218.1,21,17,0)
      - Anion gap acidosis (this is defined by [sodium + potassium] - 
"^DD",130,130,218.1,21,18,0)
        [chloride + CO2]. If this number is greater than 12, then an 
"^DD",130,130,218.1,21,19,0)
        anion gap acidosis is present.
"^DD",130,130,218.1,21,20,0)
 
"^DD",130,130,218.1,21,21,0)
2. Sepsis: Sepsis is the systemic response to infection. Report this 
"^DD",130,130,218.1,21,22,0)
   variable if the patient has clinical signs and symptoms of SIRS 
"^DD",130,130,218.1,21,23,0)
   listed above and one of the following:
"^DD",130,130,218.1,21,24,0)
      - positive blood culture
"^DD",130,130,218.1,21,25,0)
      - clinical documentation of purulence or positive culture from 
"^DD",130,130,218.1,21,26,0)
        any site thought to be causative
"^DD",130,130,218.1,21,27,0)
 
"^DD",130,130,218.1,21,28,0)
3. Severe Sepsis/Septic Shock: Sepsis is considered severe when it is
"^DD",130,130,218.1,21,29,0)
   associated with organ and/or circulatory dysfunction. Report this 
"^DD",130,130,218.1,21,30,0)
   variable if the patient has the clinical signs and symptoms of SIRS 
"^DD",130,130,218.1,21,31,0)
   or sepsis AND documented organ and/or circulatory dysfunction.
"^DD",130,130,218.1,21,32,0)
   Examples of organ dysfunction include: oliguria, acute alteration in
"^DD",130,130,218.1,21,33,0)
   mental status, acute respiratory distress. Examples of circulatory
"^DD",130,130,218.1,21,34,0)
   dysfunction include: hypotension, requirement of inotropic or
"^DD",130,130,218.1,21,35,0)
   vasopressor agents.  
"^DD",130,130,218.1,"DT")
3040323
"^DD",130,130,220,0)
PREVIOUS PCI^S^Y:YES;N:NO;NS:NO STUDY;^200;32^Q
"^DD",130,130,220,.1)
Previous PCI (Y/N)
"^DD",130,130,220,3)
Enter 'Y' if this patient has undergone a percutaneous coronary intervention (PCI).
"^DD",130,130,220,21,0)
^.001^5^5^3060411^^
"^DD",130,130,220,21,1,0)
NSQIP Definition (2006):
"^DD",130,130,220,21,2,0)
The patient has undergone a percutaneous coronary intervention (PCI) 
"^DD",130,130,220,21,3,0)
at any time or a PCI was attempted at any time. This includes either
"^DD",130,130,220,21,4,0)
balloon dilatation or stent placement. This does not include 
"^DD",130,130,220,21,5,0)
valvuloplasty procedures. 
"^DD",130,130,220,"DT")
3060117
"^DD",130,130,250,0)
SYSTEMIC SEPSIS^S^Y:YES;N:NO;NS:NO STUDY;^205;35^Q
"^DD",130,130,250,.1)
Systemic Sepsis
"^DD",130,130,250,3)
Enter YES if the patient has been diagnosed as having postoperative systemic sepsis.
"^DD",130,130,250,21,0)
^^62^62^3060717^
"^DD",130,130,250,21,1,0)
NSQIP Definition (2006):
"^DD",130,130,250,21,2,0)
Sepsis is a vast clinical entity that takes a variety of forms. The 
"^DD",130,130,250,21,3,0)
spectrum of disorders spans from relatively mild physiologic 
"^DD",130,130,250,21,4,0)
abnormalities to septic shock. Please report the most significant level
"^DD",130,130,250,21,5,0)
using the criteria below:
"^DD",130,130,250,21,6,0)
 
"^DD",130,130,250,21,7,0)
1. Sepsis: Sepsis is the systemic response to infection. Report this 
"^DD",130,130,250,21,8,0)
variable if the patient has clinical signs and symptoms of SIRS. SIRS 
"^DD",130,130,250,21,9,0)
is a widespread inflammatory response to a variety of severe clinical
"^DD",130,130,250,21,10,0)
insults. This syndrome is clinically recognized by the presence of two 
"^DD",130,130,250,21,11,0)
or more of the following:
"^DD",130,130,250,21,12,0)
   - Temp >38 degrees C or <36 degrees C
"^DD",130,130,250,21,13,0)
   - HR >90 bpm
"^DD",130,130,250,21,14,0)
   - RR >20 breaths/min or PaCO2 <32 mmHg(<4.3 kPa)
"^DD",130,130,250,21,15,0)
   - WBC >12,000 cell/mm3, <4000 cells/mm3, or >10% immature (band) 
"^DD",130,130,250,21,16,0)
     forms
"^DD",130,130,250,21,17,0)
   - Anion gap acidosis (this is defined by [sodium + potassium] -
"^DD",130,130,250,21,18,0)
     [chloride + CO2]. If this number is greater than 12, then an anion
"^DD",130,130,250,21,19,0)
     gap acidosis is present.
"^DD",130,130,250,21,20,0)
 
"^DD",130,130,250,21,21,0)
 and one of the following:
"^DD",130,130,250,21,22,0)
   - positive blood culture
"^DD",130,130,250,21,23,0)
   - clinical documentation of purulence at any site thought to be 
"^DD",130,130,250,21,24,0)
     causative
"^DD",130,130,250,21,25,0)
 
"^DD",130,130,250,21,26,0)
2. Severe Sepsis/Septic Shock: Sepsis is considered severe when it is 
"^DD",130,130,250,21,27,0)
associated with organ and/or circulatory dysfunction. Report this 
"^DD",130,130,250,21,28,0)
variable if the patient has the clinical signs and symptoms of SIRS or 
"^DD",130,130,250,21,29,0)
sepsis AND documented organ and/or circulatory dysfunction. Examples of
"^DD",130,130,250,21,30,0)
organ dysfunction include: oliguria, acute alteration in mental status,
"^DD",130,130,250,21,31,0)
acute respiratory distress. Examples of circulatory dysfunction 
"^DD",130,130,250,21,32,0)
include: hypotension, requirement of inotropic or vasopressor agents.
"^DD",130,130,250,21,33,0)
 
"^DD",130,130,250,21,34,0)
* For the patient that had sepsis preoperatively, worsening of any of 
"^DD",130,130,250,21,35,0)
the above signs postoperatively would be reported as a postoperative 
"^DD",130,130,250,21,36,0)
sepsis.
"^DD",130,130,250,21,37,0)
 
"^DD",130,130,250,21,38,0)
Examples:
"^DD",130,130,250,21,39,0)
 
"^DD",130,130,250,21,40,0)
A patient comes into the emergency room with signs of sepsis - WBC 31, 
"^DD",130,130,250,21,41,0)
Temperature 104. CT shows an abdominal abscess. He is given antibiotics
"^DD",130,130,250,21,42,0)
and is then taken emergently to the OR to drain the abscess. He 
"^DD",130,130,250,21,43,0)
receives antibiotics intraoperatively. Postoperatively his WBC and
"^DD",130,130,250,21,44,0)
Temperature are trending down.
"^DD",130,130,250,21,45,0)
  POD#1 WBC 24, Temp 102 
"^DD",130,130,250,21,46,0)
  POD#2 WBC 14, Temp 100 
"^DD",130,130,250,21,47,0)
  POD#3 WBC 10, Temp 99 
"^DD",130,130,250,21,48,0)
This patient does not have postoperative sepsis as his WBC and 
"^DD",130,130,250,21,49,0)
Temperature are improving each postoperative day. 
"^DD",130,130,250,21,50,0)
 
"^DD",130,130,250,21,51,0)
Patient comes into the ER with s/s of sepsis - WBC 31, Temp 104. CT 
"^DD",130,130,250,21,52,0)
shows an abdominal abscess. He is given antibiotics and is taken 
"^DD",130,130,250,21,53,0)
emergently to the OR to drain the abscess. He receives antibiotics 
"^DD",130,130,250,21,54,0)
intraoperatively. Postoperatively his WBC and Temp are as follows:  
"^DD",130,130,250,21,55,0)
  POD#1 WBC 28, Temp 103
"^DD",130,130,250,21,56,0)
  POD#2 WBC 24, Temp 102.6 
"^DD",130,130,250,21,57,0)
  POD#3 WBC 22, Temp 102 
"^DD",130,130,250,21,58,0)
  POD#4 WBC 21, Temp 101.6
"^DD",130,130,250,21,59,0)
  POD#5 WBC 30, Temp 104  
"^DD",130,130,250,21,60,0)
This patient does have postoperative sepsis because on postoperative 
"^DD",130,130,250,21,61,0)
day #5, his WBC and Temperature increase. The patient is having
"^DD",130,130,250,21,62,0)
worsening of the defined signs of sepsis.
"^DD",130,130,250,"DT")
3040316
"^DD",130,130,254,0)
ACUTE RENAL FAILURE^*S^Y:YES;N:NO;NS:NO STUDY;^205;17^Q
"^DD",130,130,254,.1)
Acute Renal Failure Requiring Dialysis (Y/N)
"^DD",130,130,254,3)
Enter YES if the patient has renal failure requiring the initiation of dialysis postoperatively.
"^DD",130,130,254,12)
Screen prevents selection of retired code.
"^DD",130,130,254,12.1)
S DIC("S")="I Y'=""NS"""
"^DD",130,130,254,21,0)
^^17^17^3060314^
"^DD",130,130,254,21,1,0)
NSQIP Definition (2006):
"^DD",130,130,254,21,2,0)
In a patient who did not require dialysis preoperatively, worsening of
"^DD",130,130,254,21,3,0)
renal dysfunction (increase in serum creatinine to >2.0 and two times
"^DD",130,130,254,21,4,0)
most recent preoperative creatinine level) and postoperatively 
"^DD",130,130,254,21,5,0)
requiring hemodialysis, peritoneal dialysis, hemofiltration,
"^DD",130,130,254,21,6,0)
hemodiafiltration or ultrafiltration.
"^DD",130,130,254,21,7,0)
 
"^DD",130,130,254,21,8,0)
TIP: If the patient refuses dialysis the answer is YES to this 
"^DD",130,130,254,21,9,0)
variable, because he/she did require dialysis.
"^DD",130,130,254,21,10,0)
 
"^DD",130,130,254,21,11,0)
CICSP Definition (2004):
"^DD",130,130,254,21,12,0)
Indicate if the patient developed new renal failure requiring dialysis
"^DD",130,130,254,21,13,0)
or experienced an exacerbation of preoperative renal failure requiring
"^DD",130,130,254,21,14,0)
initiation of dialysis (not on dialysis preoperatively) within 30 days
"^DD",130,130,254,21,15,0)
postoperatively. (Dialysis includes continuous venous to venous 
"^DD",130,130,254,21,16,0)
hemodialysis [CVVHD], continuous venous to arterial hemodialysis 
"^DD",130,130,254,21,17,0)
[CVAHD], and peritoneal. It does not include ultrafiltration.)
"^DD",130,130,254,"DT")
3040721
"^DD",130,130,266,0)
PREVIOUS CARDIAC SURGERY^S^Y:YES;N:NO;NS:NO STUDY;^200;33^Q
"^DD",130,130,266,.1)
Previous Cardiac Surgery (Y/N)
"^DD",130,130,266,3)
Enter 'YES' if this patient has had a previous cardiac surgery.
"^DD",130,130,266,21,0)
^^8^8^3060117^
"^DD",130,130,266,21,1,0)
NSQIP Definition (2006):
"^DD",130,130,266,21,2,0)
Any major cardiac surgical procedure (performed either as an 'off-pump'
"^DD",130,130,266,21,3,0)
repair or utilizing cardiopulmonary bypass). This includes coronary
"^DD",130,130,266,21,4,0)
artery bypass graft surgery, valve replacement or repair, repair of
"^DD",130,130,266,21,5,0)
atrial or ventricular septal defects, great thoracic vessel repair,
"^DD",130,130,266,21,6,0)
cardiac transplant, left ventricular aneurysmectomy, insertion of left
"^DD",130,130,266,21,7,0)
ventricular assist devices, etc. Do not include pacemaker insertions or
"^DD",130,130,266,21,8,0)
automatic implantable cardioverter-defibrillator (AICD) insertions.
"^DD",130,130,266,"DT")
3040826
"^DD",130,130,269,0)
PREGNANCY^S^NO:NOT PREGNANT;P1:1ST TRIMESTER;P2:2ND TRIMESTER;P3:3RD TRIMESTER;PU:UNKNOWN TIME FRAME;NA:NOT APPLICABLE;U:UNKNOWN;^200.1;3^Q
"^DD",130,130,269,.1)
Pregnancy Status
"^DD",130,130,269,3)
Enter the preoperative pregnancy status of this patient.
"^DD",130,130,269,21,0)
^.001^32^32^3060208^^^^
"^DD",130,130,269,21,1,0)
NSQIP Definition (2006):
"^DD",130,130,269,21,2,0)
Pregnancy is the process by which a woman carries a developing fetus in 
"^DD",130,130,269,21,3,0)
her uterus, beginning at conception and ending in birth, miscarriage, 
"^DD",130,130,269,21,4,0)
or abortion. Pregnancy is determined by one of the following:
"^DD",130,130,269,21,5,0)
   - Administration of a blood or urine pregnancy test with a positive
"^DD",130,130,269,21,6,0)
     result
"^DD",130,130,269,21,7,0)
   - Visualization of the fetus by ultrasound
"^DD",130,130,269,21,8,0)
   - Indication of fetal heart rate by ultrasound or fetal heart 
"^DD",130,130,269,21,9,0)
     monitoring
"^DD",130,130,269,21,10,0)
Pregnancy takes approximately 40 weeks between the time of the last 
"^DD",130,130,269,21,11,0)
menstrual cycle and delivery. It is divided into three trimesters of 
"^DD",130,130,269,21,12,0)
three months duration each.
"^DD",130,130,269,21,13,0)
 
"^DD",130,130,269,21,14,0)
Please select the most appropriate response from the following 
"^DD",130,130,269,21,15,0)
categories.
"^DD",130,130,269,21,16,0)
 o Not Pregnant: Within the last two weeks prior to surgery, as defined
"^DD",130,130,269,21,17,0)
          by one of the following:
"^DD",130,130,269,21,18,0)
           - Negative Urine or Blood Pregnancy Test
"^DD",130,130,269,21,19,0)
           - Medical or Surgical Abortion
"^DD",130,130,269,21,20,0)
           - Prior Hysterectomy
"^DD",130,130,269,21,21,0)
           - Patient reports no sexual activity since last menstrual
"^DD",130,130,269,21,22,0)
             period
"^DD",130,130,269,21,23,0)
 o Pregnant - 1st trimester: Patient is pregnant and embryonic/fetal 
"^DD",130,130,269,21,24,0)
          development is between 0 and 13 weeks
"^DD",130,130,269,21,25,0)
 o Pregnant - 2nd trimester: Patient is pregnant and fetal development
"^DD",130,130,269,21,26,0)
          is between 14 and 26 weeks
"^DD",130,130,269,21,27,0)
 o Pregnant - 3rd trimester: Patient is pregnant and fetal development
"^DD",130,130,269,21,28,0)
          is between 27 weeks and birth.
"^DD",130,130,269,21,29,0)
 o Pregnant but unknown time frame: Patient is pregnant but time frame
"^DD",130,130,269,21,30,0)
          is unknown or unavailable
"^DD",130,130,269,21,31,0)
 o Not applicable: Applies to the male population
"^DD",130,130,269,21,32,0)
 o Unknown: Does not meet any of the above criteria
"^DD",130,130,269,"DT")
3060117
"^DD",130,130,285,0)
ON VENTILATOR >48 HOURS^*S^Y:YES;N:NO;NS:NO STUDY;^205;13^Q
"^DD",130,130,285,.1)
On Ventilator > or = 48 Hours (Y/N)
"^DD",130,130,285,3)
Enter YES if the total duration of ventilator-assisted respiration during the postoperative hospitalization was > or = 48 hours.
"^DD",130,130,285,12)
Screen prevents selection of retired code.
"^DD",130,130,285,12.1)
S DIC("S")="I Y'=""NS"""
"^DD",130,130,285,21,0)
^^11^11^3060118^
"^DD",130,130,285,21,1,0)
NSQIP Definition (2004):
"^DD",130,130,285,21,2,0)
Total duration of ventilator-assisted respirations during postoperative
"^DD",130,130,285,21,3,0)
hospitalization was >48 hours. This can occur at any time during the
"^DD",130,130,285,21,4,0)
30-day period postoperatively. This time assessment is CUMULATIVE, not
"^DD",130,130,285,21,5,0)
necessarily consecutive. Ventilator-assisted respirations can be via
"^DD",130,130,285,21,6,0)
endotracheal tube, nasotracheal tube, or tracheostomy tube.
"^DD",130,130,285,21,7,0)
 
"^DD",130,130,285,21,8,0)
CICSP Definition (2006):
"^DD",130,130,285,21,9,0)
Indicate if the total duration of ventilator-assisted respiration 
"^DD",130,130,285,21,10,0)
during postoperative hospitalization within 30 days was greater than 
"^DD",130,130,285,21,11,0)
or equal to 48 hours.
"^DD",130,130,285,"DT")
3060118
"^DD",130,130,352,0)
NUM OF PRIOR HEART SURGERIES^*S^Y:YES;0:NONE;1:1;2:2;3:3;>:>3;^206;15^Q
"^DD",130,130,352,.1)
Number of Prior Heart Surgeries
"^DD",130,130,352,3)
Enter number of prior heart surgeries during a separate preceding hospitalization.
"^DD",130,130,352,12)
Screen prevents selection of Y code
"^DD",130,130,352,12.1)
S DIC("S")="I ""Y""'[Y"
"^DD",130,130,352,21,0)
^^10^10^3060301^
"^DD",130,130,352,21,1,0)
CICSP Definition (2006):
"^DD",130,130,352,21,2,0)
Indicate the number of previous heart surgeries the patient has had 
"^DD",130,130,352,21,3,0)
upon current admission, by referencing the patient history. The prior
"^DD",130,130,352,21,4,0)
heart surgery/ies would have occurred during a separate hospitalization
"^DD",130,130,352,21,5,0)
(more than 30 days prior to current surgery).  Both on and off-pump
"^DD",130,130,352,21,6,0)
cardiac surgical procedures should be considered.  Count all surgical
"^DD",130,130,352,21,7,0)
procedures performed during separate hospital admissions (not the
"^DD",130,130,352,21,8,0)
number of grafts, and not additional procedures performed during the 
"^DD",130,130,352,21,9,0)
same admission due to a postoperative occurrence).  Indicate the one
"^DD",130,130,352,21,10,0)
appropriate response: 0, 1, 2, 3, >3.
"^DD",130,130,352,"DT")
3040311
"^DD",130,130,364,0)
ESTIMATE OF MORTALITY^NJ2,0X^^206;31^S NYUK=X K:+X'=X!(X>100)!(X<0)!(X?.E1"."1N.N) X S:NYUK="NS"!(NYUK="ns") X="NS" K NYUK
"^DD",130,130,364,.1)
Physician's Preoperative Estimate of Operative Mortality
"^DD",130,130,364,1,0)
^.1
"^DD",130,130,364,1,1,0)
130^AE^MUMPS
"^DD",130,130,364,1,1,1)
D NOW^SROACOP Q
"^DD",130,130,364,1,1,2)
D KNOW^SROACOP Q
"^DD",130,130,364,1,1,"%D",0)
^^3^3^2950131^
"^DD",130,130,364,1,1,"%D",1,0)
This cross reference updates the Date/Time of Estimate of Operative
"^DD",130,130,364,1,1,"%D",2,0)
Mortality field (364.1) when the Physician's Preoperative Estimate of
"^DD",130,130,364,1,1,"%D",3,0)
Operative Mortality field (364) is edited.
"^DD",130,130,364,1,1,"DT")
2950131
"^DD",130,130,364,3)
Enter the physician's preoperative estimate of operative mortality.
"^DD",130,130,364,21,0)
^^6^6^3060302^
"^DD",130,130,364,21,1,0)
CICSP Definition (2006):
"^DD",130,130,364,21,2,0)
This is the physician's (cardiologist or cardiac surgeon) subjective
"^DD",130,130,364,21,3,0)
estimate of operative mortality based on the assessment of the total
"^DD",130,130,364,21,4,0)
clinical picture. (To avoid bias introduced by knowledge of outcome,
"^DD",130,130,364,21,5,0)
this must be completed preoperatively.  Do not calculate from the
"^DD",130,130,364,21,6,0)
computer program provided to you.)
"^DD",130,130,364,"DT")
3060302
"^DD",130,130,364.1,0)
ESTIMATE OF MORTALITY, DATE^DX^^206;32^S %DT="ETXRP" D ^%DT S X=Y K:Y<1 X
"^DD",130,130,364.1,.1)
Date/Time of Estimate of Operative Mortality
"^DD",130,130,364.1,3)
Enter the date and time that the estimate of operative mortality was documented.
"^DD",130,130,364.1,21,0)
^^2^2^2950208^
"^DD",130,130,364.1,21,1,0)
This is the date and time that the estimate of mortality information was
"^DD",130,130,364.1,21,2,0)
collected.
"^DD",130,130,364.1,"DT")
3060314
"^DD",130,130,370,0)
VALVE REPAIR^*S^Y:YES;1:AORTIC;2:MITRAL;3:TRICUSPID;4:OTHER/COMBINATION;5:NONE;^207;6^Q
"^DD",130,130,370,.1)
Valve Repair
"^DD",130,130,370,3)
Indicate whether/where patient had a reparative procedure to a native valve.
"^DD",130,130,370,12)
Screen prevents selection of Y entries.
"^DD",130,130,370,12.1)
S DIC("S")="I ""Y""'[Y"
"^DD",130,130,370,21,0)
^^7^7^3060301^
"^DD",130,130,370,21,1,0)
CICSP Definition (2006):
"^DD",130,130,370,21,2,0)
Indicate if the patient has had any reparative procedure to a native
"^DD",130,130,370,21,3,0)
valve, either with or without placing the patient on cardiopulmonary
"^DD",130,130,370,21,4,0)
bypass. Valve repair is defined as a procedure performed on the native
"^DD",130,130,370,21,5,0)
valve to relieve stenosis and/or correct regurgitation (annuloplasty,
"^DD",130,130,370,21,6,0)
commissurotomy, etc.); the native valve remains in place. Indicate the
"^DD",130,130,370,21,7,0)
one appropriate response.
"^DD",130,130,370,"DT")
3060301
"^DD",130,130,372,0)
GREAT VESSEL REPAIR (Y/N)^S^Y:YES;N:NO;^207;8^Q
"^DD",130,130,372,.1)
Great Vessel Repair (Y/N)
"^DD",130,130,372,3)
Enter 'YES' if the patient had a primary procedure to repair the aorta or other great vessels.
"^DD",130,130,372,21,0)
^^6^6^3060314^
"^DD",130,130,372,21,1,0)
CICSP Definition (2006):
"^DD",130,130,372,21,2,0)
Indicate if patient had a thoracic great vessel open repair of the 
"^DD",130,130,372,21,3,0)
aorta (ascending, transverse, and/or descending) or other great 
"^DD",130,130,372,21,4,0)
vessels, with or without cardiopulmonary bypass, with or without 
"^DD",130,130,372,21,5,0)
aortic valve replacement, CABG, or other procedure but excluding an
"^DD",130,130,372,21,6,0)
endovascular repair of the descending thoracic aorta.
"^DD",130,130,372,"DT")
3060314
"^DD",130,130,373,0)
CARDIAC TRANSPLANT^S^Y:YES;N:NO;^207;9^Q
"^DD",130,130,373,.1)
Cardiac Transplant (Y/N)
"^DD",130,130,373,3)
Enter 'YES' if the patient had a cardiac transplant.
"^DD",130,130,373,21,0)
^^5^5^3060209^
"^DD",130,130,373,21,1,0)
CICSP Definition (2006):
"^DD",130,130,373,21,2,0)
Indicate if an orthotopic or heterotopic transplant was performed
"^DD",130,130,373,21,3,0)
at this procedure either with or without placing the patient on
"^DD",130,130,373,21,4,0)
cardiopulmonary bypass.  (YES/NO)  Heart-lung transplant should be
"^DD",130,130,373,21,5,0)
listed under "Other cardiac procedures."
"^DD",130,130,373,"DT")
3060209
"^DD",130,130,384,0)
OPERATIVE DEATH^S^Y:YES;N:NO;^208;1^Q
"^DD",130,130,384,.1)
Operative Death (Y/N)
"^DD",130,130,384,3)
Enter 'YES' if the patient died. Enter "??" for the complete definition of OPERATIVE DEATH.
"^DD",130,130,384,21,0)
^.001^7^7^3060323^^
"^DD",130,130,384,21,1,0)
CICSP Definition (2006):
"^DD",130,130,384,21,2,0)
Indicate if the patient died within the 30 days after surgery in or 
"^DD",130,130,384,21,3,0)
out of the hospital regardless of cause; or within the index
"^DD",130,130,384,21,4,0)
hospitalization regardless of cause; or patient died greater than 
"^DD",130,130,384,21,5,0)
30 days as a direct result of a perioperative occurrence of the 
"^DD",130,130,384,21,6,0)
surgery (e.g., mediastinitis).  ("Discharge" can be noted when the 
"^DD",130,130,384,21,7,0)
patient leaves the Acute Care arena.)
"^DD",130,130,384,"DT")
3060328
"^DD",130,130,401,0)
TUMOR INVOLVING CNS (Y/N)^S^Y:YES;N:NO;NS:NO STUDY;^200;29^Q
"^DD",130,130,401,.1)
Tumor Involving CNS (Y/N)
"^DD",130,130,401,3)
Enter YES if the patient has a tumor involving the central nervous system.
"^DD",130,130,401,21,0)
^^8^8^3060117^
"^DD",130,130,401,21,1,0)
NSQIP Definition (2006):
"^DD",130,130,401,21,2,0)
Space-occupying tumor of the brain and spinal cord, which may be benign 
"^DD",130,130,401,21,3,0)
(e.g., meningiomas, ependymoma, oligodendroglioma) or primary (e.g., 
"^DD",130,130,401,21,4,0)
astrocytoma, glioma, glioblastoma multiform) or secondary malignancies 
"^DD",130,130,401,21,5,0)
(e.g., metastatic lung, breast, malignant melanoma). Other tumors that 
"^DD",130,130,401,21,6,0)
may involve the CNS include lymphomas and sarcomas. Answer "YES" even if
"^DD",130,130,401,21,7,0)
the tumor was not treated. A patient with metastatic cancer with boney
"^DD",130,130,401,21,8,0)
mets to spine is a CNS tumor.
"^DD",130,130,401,"DT")
3040316
"^DD",130,130,410,0)
COMA > 24 HOURS POSTOP^*S^Y:YES;N:NO;NS:NO STUDY;^205;22^Q
"^DD",130,130,410,.1)
Coma Greater than 24 Hours Postop (Y/N)
"^DD",130,130,410,3)
Enter YES if the patient has significantly impaired level of consciousness > or = 24 hours postoperatively.
"^DD",130,130,410,12)
Screen prevents selection of retired code.
"^DD",130,130,410,12.1)
S DIC("S")="I Y'=""NS"""
"^DD",130,130,410,21,0)
^^12^12^3060209^
"^DD",130,130,410,21,1,0)
NSQIP Definition (2006):
"^DD",130,130,410,21,2,0)
Patient is unconscious, postures to painful stimuli, or is 
"^DD",130,130,410,21,3,0)
unresponsive to all stimuli (exclude transient disorientation or
"^DD",130,130,410,21,4,0)
psychosis) for greater than 24 hours during postoperative 
"^DD",130,130,410,21,5,0)
hospitalization. Do not include drug-induced coma (e.g. Propofol 
"^DD",130,130,410,21,6,0)
drips, etc.)
"^DD",130,130,410,21,7,0)
 
"^DD",130,130,410,21,8,0)
CICSP Definition (2006):
"^DD",130,130,410,21,9,0)
Indicate if postoperatively within 30 days of surgery there was a 
"^DD",130,130,410,21,10,0)
significantly decreased level of consciousness (exclude transient 
"^DD",130,130,410,21,11,0)
disorientation or psychosis) for greater than or equal to 24 hours
"^DD",130,130,410,21,12,0)
as evidenced by lack of response to deep, painful stimuli.
"^DD",130,130,410,"DT")
3060209
"^DD",130,130,411,0)
CARDIAC ARREST REQ CPR^*S^Y:YES;N:NO;NS:NO STUDY;^205;26^Q
"^DD",130,130,411,.1)
Cardiac Arrest Requiring CPR (Y/N)
"^DD",130,130,411,3)
Enter YES if the patient has had postoperative cardiac arrest requiring CPR.
"^DD",130,130,411,12)
Screen prevents selection of retired code.
"^DD",130,130,411,12.1)
S DIC("S")="I Y'=""NS"""
"^DD",130,130,411,21,0)
^^18^18^3060118^
"^DD",130,130,411,21,1,0)
CICSP Definition (2004):
"^DD",130,130,411,21,2,0)
Indicate if there was any cardiac arrest requiring external or open 
"^DD",130,130,411,21,3,0)
cardiopulmonary resuscitation (CPR) occurring in the operating room, 
"^DD",130,130,411,21,4,0)
ICU, ward, or out-of-hospital after the chest had been completely 
"^DD",130,130,411,21,5,0)
closed and within 30 days of surgery. (YES/NO)
"^DD",130,130,411,21,6,0)
 
"^DD",130,130,411,21,7,0)
If patient had cardiac arrest requiring CPR, indicate whether the 
"^DD",130,130,411,21,8,0)
arrest occurred intraoperatively or postoperatively. Indicate the one 
"^DD",130,130,411,21,9,0)
appropriate response: 
"^DD",130,130,411,21,10,0)
 - intraoperatively: occurring while patient was in the operating room
"^DD",130,130,411,21,11,0)
 - postoperatively:  occurring after patient left the operating room
"^DD",130,130,411,21,12,0)
 
"^DD",130,130,411,21,13,0)
NSQIP Definition (2006):
"^DD",130,130,411,21,14,0)
The absence of cardiac rhythm or presence of chaotic cardiac rhythm 
"^DD",130,130,411,21,15,0)
that results in loss of consciousness requiring the initiation of any 
"^DD",130,130,411,21,16,0)
component of basic and/or advanced cardiac life support. Patients with 
"^DD",130,130,411,21,17,0)
AICDs that fire but the patient does not lose consciousness should be 
"^DD",130,130,411,21,18,0)
excluded.
"^DD",130,130,411,"DT")
3040721
"^DD",130,130,430,0)
CARDIAC RISK PREOP COMMENTS^F^^206.1;1^K:$L(X)>130!($L(X)<1) X
"^DD",130,130,430,.1)
Preoperative Risk Summary Data
"^DD",130,130,430,3)
Answer must be 1-130 characters in length.
"^DD",130,130,430,21,0)
^^5^5^3060209^^
"^DD",130,130,430,21,1,0)
CICSP Definition (2006):
"^DD",130,130,430,21,2,0)
Indicate in the comment field any preoperative patient risk factors
"^DD",130,130,430,21,3,0)
(not previously entered above) that may contribute to this patient's 
"^DD",130,130,430,21,4,0)
risk of operative mortality. (The maximum length of this field is 
"^DD",130,130,430,21,5,0)
130 characters.)
"^DD",130,130,430,"DT")
3060209
"^DD",130,130,431,0)
CARDIAC RESOURCE DATA COMMENTS^F^^206.2;1^K:$L(X)>130!($L(X)<1) X
"^DD",130,130,431,3)
Answer must be 1-130 characters in length.
"^DD",130,130,431,21,0)
^^3^3^3060118^
"^DD",130,130,431,21,1,0)
CICSP Definition (2006):
"^DD",130,130,431,21,2,0)
Indicate additional comments related to this case prior to
"^DD",130,130,431,21,3,0)
transmission to Denver by the SCNR/Data Manager (limit 130 characters).
"^DD",130,130,431,"DT")
3060118
"^DD",130,130,443,0)
INTRAOP DISSEMINATED CANCER^S^Y:YES;N:NO;NS:NO STUDY;^200.1;4^Q
"^DD",130,130,443,.1)
Intraoperative Disseminated Cancer (Y/N)
"^DD",130,130,443,3)
Enter YES if cancer was found during the operative procedure.
"^DD",130,130,443,21,0)
^.001^37^37^3060208^^^^
"^DD",130,130,443,21,1,0)
NSQIP Definition (2006):
"^DD",130,130,443,21,2,0)
Patients who have cancer that was found during the operative procedure 
"^DD",130,130,443,21,3,0)
that:
"^DD",130,130,443,21,4,0)
 (1) Has spread to one site or more sites in addition to the primary 
"^DD",130,130,443,21,5,0)
     site
"^DD",130,130,443,21,6,0)
     
"^DD",130,130,443,21,7,0)
 AND 
"^DD",130,130,443,21,8,0)
 
"^DD",130,130,443,21,9,0)
 (2) In whom the presence of multiple metastases indicates the cancer is
"^DD",130,130,443,21,10,0)
     widespread, fulminant, or near terminal. Other terms describing
"^DD",130,130,443,21,11,0)
     disseminated cancer include "diffuse," "widely metastatic,"
"^DD",130,130,443,21,12,0)
     "widespread," or "carcinomatosis" or AJCC "Stage IV" cancer. Common
"^DD",130,130,443,21,13,0)
     sites of metastases include major organs (e.g., brain, lung, liver,
"^DD",130,130,443,21,14,0)
     meninges, abdomen, peritoneum, pleura, bone).
"^DD",130,130,443,21,15,0)
 
"^DD",130,130,443,21,16,0)
Example: A patient with a primary breast cancer with positive nodes in
"^DD",130,130,443,21,17,0)
the axilla does NOT qualify for this definition. She has spread of the
"^DD",130,130,443,21,18,0)
tumor to a site other than the primary site, but does not have
"^DD",130,130,443,21,19,0)
widespread metastases. A patient with primary breast cancer with
"^DD",130,130,443,21,20,0)
positive nodes in the axilla AND liver metastases does qualify, because
"^DD",130,130,443,21,21,0)
she has both spread of the tumor to the axilla and other major organs.
"^DD",130,130,443,21,22,0)
 
"^DD",130,130,443,21,23,0)
Example: A patient with colon cancer and no positive nodes or distant
"^DD",130,130,443,21,24,0)
metastases does NOT qualify. A patient with colon cancer and several
"^DD",130,130,443,21,25,0)
local lymph nodes positive for tumor, but no other evidence of
"^DD",130,130,443,21,26,0)
metastatic disease does NOT qualify. A patient with colon cancer with
"^DD",130,130,443,21,27,0)
liver metastases and/or peritoneal seeding with tumor does qualify.
"^DD",130,130,443,21,28,0)
 
"^DD",130,130,443,21,29,0)
Example: A patient with adenocarcinoma of the prostate confined to the
"^DD",130,130,443,21,30,0)
capsule does NOT qualify. A patient with prostate cancer that extends
"^DD",130,130,443,21,31,0)
through the capsule of the prostate only does NOT qualify. A patient
"^DD",130,130,443,21,32,0)
with prostate cancer with bony metastases DOES qualify.
"^DD",130,130,443,21,33,0)
 
"^DD",130,130,443,21,34,0)
 * Report Acute Lymphocytic Leukemia (ALL) and Acute Myelogenous
"^DD",130,130,443,21,35,0)
   Leukemia (AML) under this variable. Do not report Chronic Lymphocytic
"^DD",130,130,443,21,36,0)
   Leukemia (CLL), Chronic Myelogenous Leukemia (CML) or Stage IV
"^DD",130,130,443,21,37,0)
   lymphoma, as disseminated cancer.
"^DD",130,130,443,"DT")
3060118
"^DD",130,130,444,0)
PREOPERATIVE ANION GAP^FX^^203;15^K:$L(X)>5!($L(X)<1) X I $D(X) D NUM^SROAL21
"^DD",130,130,444,.1)
Preoperative Anion Gap
"^DD",130,130,444,3)
Answer must be 1-5 characters in length.
"^DD",130,130,444,21,0)
^.001^4^4^3060208^^^
"^DD",130,130,444,21,1,0)
This is the result of the preoperative Anion Gap calculation. Data input
"^DD",130,130,444,21,2,0)
must be 1 to 5 numeric characters in length which may include a prefix
"^DD",130,130,444,21,3,0)
of a less than or greater than sign "<" or ">". Entering "NS" for "No
"^DD",130,130,444,21,4,0)
Study" is also allowed.
"^DD",130,130,444,"DT")
3060127
"^DD",130,130,444.1,0)
PREOP ANION GAP, DATE^D^^204;15^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",130,130,444.1,.1)
Date Preoperative Anion Gap was Recorded
"^DD",130,130,444.1,3)
Enter the date the preoperative Anion Gap was recorded.
"^DD",130,130,444.1,21,0)
^.001^1^1^3060531^^^^
"^DD",130,130,444.1,21,1,0)
This is the date the preoperative Anion Gap was recorded.
"^DD",130,130,444.1,"DT")
3060127
"^DD",130,130,445,0)
HIGHEST ANION GAP^FX^^203;16^K:$L(X)>5!($L(X)<1) X I $D(X) D NUM^SROAL21
"^DD",130,130,445,.1)
Highest Postoperative Anion Gap
"^DD",130,130,445,3)
Answer must be 1-5 characters in length.
"^DD",130,130,445,21,0)
^.001^4^4^3060405^^^^
"^DD",130,130,445,21,1,0)
This is the result of the highest postoperative anion gap recorded. Data
"^DD",130,130,445,21,2,0)
input must be 1 to 5 numeric characters in length which may include a
"^DD",130,130,445,21,3,0)
prefix of a less than or greater than sign "<" or ">". Entering "NS" for
"^DD",130,130,445,21,4,0)
"No Study" is also allowed.
"^DD",130,130,445,"DT")
3060127
"^DD",130,130,445.1,0)
HIGH ANION GAP, DATE^D^^204;16^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",130,130,445.1,.1)
Date Highest Anion Gap was Recorded
"^DD",130,130,445.1,3)
Enter the date that the highest postop Anion Gap was recorded.
"^DD",130,130,445.1,21,0)
^.001^1^1^3060405^^
"^DD",130,130,445.1,21,1,0)
This is the date that the highest postoperative Anion Gap was recorded.
"^DD",130,130,445.1,"DT")
3060323
"^DD",130,130,457,0)
HDL (CARDIAC)^FX^^201;21^K:$L(X)>6!($L(X)<1) X I $D(X) D NUM^SROAL21
"^DD",130,130,457,.1)
HDL (mg/dl)
"^DD",130,130,457,3)
Answer must be 1-6 characters in length.
"^DD",130,130,457,21,0)
^^3^3^3060222^
"^DD",130,130,457,21,1,0)
CICSP Definition (2006):
"^DD",130,130,457,21,2,0)
Indicate the HDL result (mg/dl) preoperatively evaluated closest to 
"^DD",130,130,457,21,3,0)
surgery. Entering "NS" for "No Study" is allowed.
"^DD",130,130,457,"DT")
3060222
"^DD",130,130,457.1,0)
HDL, DATE^FXO^^202;21^N SRX S SRX=X,%DT="EX" D ^%DT S X=Y K:Y<1 X S:SRX="NS"!(SRX="ns") X="NS"
"^DD",130,130,457.1,.1)
HDL, Date
"^DD",130,130,457.1,2)
S Y(0)=Y S Y(0)=Y D DATE^SROAUTL
"^DD",130,130,457.1,2.1)
S Y(0)=Y D DATE^SROAUTL
"^DD",130,130,457.1,3)
This is the date that the HDL was performed and must not be more than 1000 days before surgery.
"^DD",130,130,457.1,21,0)
^^3^3^3060705^
"^DD",130,130,457.1,21,1,0)
CICSP Definition (2006):
"^DD",130,130,457.1,21,2,0)
Indicate the date that the preoperative HDL value was assessed. Enter 
"^DD",130,130,457.1,21,3,0)
"NS" for No Study if the HDL test was not performed.
"^DD",130,130,457.1,"DT")
3060705
"^DD",130,130,458,0)
SERUM TRIGLYCERIDE (CARDIAC)^FX^^201;22^S:X="NS"!(X="ns") X="NS" Q:X="NS"  K:$L(X)>6!($L(X)<1) X
"^DD",130,130,458,.1)
Serum Triglyceride (mg/dl)
"^DD",130,130,458,3)
Answer must be 1-6 characters in length
"^DD",130,130,458,21,0)
^^3^3^3060705^
"^DD",130,130,458,21,1,0)
CICSP Definition (2006):
"^DD",130,130,458,21,2,0)
Indicate the Serum Triglyceride result (mg/dl) preoperatively          
"^DD",130,130,458,21,3,0)
evaluated closest to surgery. Entering "NS" for "No Study" is allowed.
"^DD",130,130,458,"DT")
3060222
"^DD",130,130,458.1,0)
SERUM TRIGLYCERIDE, DATE (CAR)^FXO^^202;22^N SRX S SRX=X,%DT="EX" D ^%DT S X=Y K:Y<1 X S:SRX="NS"!(SRX="ns") X="NS"
"^DD",130,130,458.1,.1)
Serum Triglyceride, Date
"^DD",130,130,458.1,2)
S Y(0)=Y S Y(0)=Y D DATE^SROAUTL
"^DD",130,130,458.1,2.1)
S Y(0)=Y D DATE^SROAUTL
"^DD",130,130,458.1,3)
This is the date that the Serum Triglyceride was performed and must not be more than 1000 days before surgery.
"^DD",130,130,458.1,21,0)
^^4^4^3060705^
"^DD",130,130,458.1,21,1,0)
CICSP Definition (2006):
"^DD",130,130,458.1,21,2,0)
Indicate the date that the preoperative Serum Triglyceride value was 
"^DD",130,130,458.1,21,3,0)
assessed. Enter "NS" for No Study if the Serum Triglyceride test was
"^DD",130,130,458.1,21,4,0)
not performed.
"^DD",130,130,458.1,"DT")
3060222
"^DD",130,130,461,0)
LDL (CARDIAC)^FX^^201;25^K:$L(X)>6!($L(X)<1) X I $D(X) D NUM^SROAL21
"^DD",130,130,461,.1)
LDL (mg/dl)
"^DD",130,130,461,3)
Answer must be 1-6 characters in length.
"^DD",130,130,461,21,0)
^^3^3^3060308^
"^DD",130,130,461,21,1,0)
CICSP Definition (2006):
"^DD",130,130,461,21,2,0)
Indicate the LDL result (mg/dl) preoperatively evaluated closest to 
"^DD",130,130,461,21,3,0)
surgery. Entering "NS" for "No Study" is allowed.
"^DD",130,130,461,"DT")
3060308
"^DD",130,130,461.1,0)
LDL, DATE (CARDIAC)^FXO^^202;25^N SRX S SRX=X,%DT="EX" D ^%DT S X=Y K:Y<1 X S:SRX="NS"!(SRX="ns") X="NS"
"^DD",130,130,461.1,.1)
LDL, Date
"^DD",130,130,461.1,2)
S Y(0)=Y S Y(0)=Y D DATE^SROAUTL
"^DD",130,130,461.1,2.1)
S Y(0)=Y D DATE^SROAUTL
"^DD",130,130,461.1,3)
This is the date that the LDL was performed and must not be more than 1000 days before surgery.
"^DD",130,130,461.1,21,0)
^^3^3^3060705^
"^DD",130,130,461.1,21,1,0)
CICSP Definition (2006):
"^DD",130,130,461.1,21,2,0)
Indicate the date that the preoperative LDL value was assessed. 
"^DD",130,130,461.1,21,3,0)
Enter "NS" for No Study if the LDL test was not performed.
"^DD",130,130,461.1,"DT")
3060222
"^DD",130,130,462,0)
TOTAL CHOLESTEROL (CARDIAC)^FX^^201;26^K:$L(X)>6!($L(X)<1) X I $D(X) D NUM^SROAL21
"^DD",130,130,462,.1)
Total Cholesterol (mg/dl)
"^DD",130,130,462,3)
Answer must be 1-6 characters in length.
"^DD",130,130,462,21,0)
^^3^3^3060705^
"^DD",130,130,462,21,1,0)
CICSP Definition (2006):
"^DD",130,130,462,21,2,0)
Indicate the Total Cholesterol result (mg/dl) preoperatively evaluated 
"^DD",130,130,462,21,3,0)
closest to surgery. Entering "NS" for "No Study" is allowed.
"^DD",130,130,462,"DT")
3060222
"^DD",130,130,462.1,0)
TOTAL CHOLESTEROL, DATE^FXO^^202;26^N SRX S SRX=X,%DT="EX" D ^%DT S X=Y K:Y<1 X S:SRX="NS"!(SRX="ns") X="NS"
"^DD",130,130,462.1,.1)
Total Cholesterol, Date
"^DD",130,130,462.1,2)
S Y(0)=Y S Y(0)=Y D DATE^SROAUTL
"^DD",130,130,462.1,2.1)
S Y(0)=Y D DATE^SROAUTL
"^DD",130,130,462.1,3)
This is the date that the Total Cholesterol was performed and must not be more than 1000 days before surgery.
"^DD",130,130,462.1,21,0)
^^4^4^3060705^
"^DD",130,130,462.1,21,1,0)
CICSP Definition (2006):
"^DD",130,130,462.1,21,2,0)
Indicate the date that the preoperative Total Cholesterol value was 
"^DD",130,130,462.1,21,3,0)
assessed. Enter "NS" for No Study if the Cholesterol test was not
"^DD",130,130,462.1,21,4,0)
performed.
"^DD",130,130,462.1,"DT")
3060222
"^DD",130,130,470,0)
D/T PATIENT EXTUBATED^FXO^^208;22^N SRX S SRX=X,%DT="ERTXP" D ^%DT S X=Y K:Y<1 X S:SRX="RI"!(SRX="ri") X="RI"
"^DD",130,130,470,.1)
Date and Time Patient Extubated
"^DD",130,130,470,2)
S Y(0)=Y S Y(0)=Y D DATE^SROAUTL
"^DD",130,130,470,2.1)
S Y(0)=Y D DATE^SROAUTL
"^DD",130,130,470,3)
Enter the exact date and time that the endotracheal tube is pulled for the final time after the surgery.
"^DD",130,130,470,21,0)
^^10^10^3040721^
"^DD",130,130,470,21,1,0)
CICSP Definition (2004): 
"^DD",130,130,470,21,2,0)
Indicate the date that the endotracheal tube is pulled for the first
"^DD",130,130,470,21,3,0)
time after surgery. If a tracheostomy is performed to replace an oral
"^DD",130,130,470,21,4,0)
intubation tube, intubation is considered continuous so the patient has
"^DD",130,130,470,21,5,0)
not been extubated. If the patient dies while intubated, indicate the
"^DD",130,130,470,21,6,0)
date of death for this data element. Indicate "extubated prior to
"^DD",130,130,470,21,7,0)
leaving the OR" in the Resource Comment if patient is extubated prior
"^DD",130,130,470,21,8,0)
to leaving the OR.
"^DD",130,130,470,21,9,0)
 
"^DD",130,130,470,21,10,0)
RI - The patient remains intubated at 30 days after surgery.
"^DD",130,130,470,"DT")
3060314
"^DD",130,130,471,0)
D/T PATIENT DISCH FROM ICU^FXO^^208;23^N SRX S SRX=X,%DT="ERTXP" D ^%DT S X=Y K:Y<1 X S:SRX="RI"!(SRX="ri") X="RI"
"^DD",130,130,471,.1)
Date and Time Patient Discharged from ICU
"^DD",130,130,471,2)
S Y(0)=Y S Y(0)=Y D DATE^SROAUTL
"^DD",130,130,471,2.1)
S Y(0)=Y D DATE^SROAUTL
"^DD",130,130,471,3)
Enter the first date and time of the discharge from the intensive care unit (ICU). 
"^DD",130,130,471,21,0)
^^10^10^3040311^
"^DD",130,130,471,21,1,0)
CICSP Definition (2004):
"^DD",130,130,471,21,2,0)
This is the first date and time of the discharge from the intensive 
"^DD",130,130,471,21,3,0)
care unit (ICU). ICU is usually a surgical unit (SICU), although it 
"^DD",130,130,471,21,4,0)
may also include a post-anesthesia recovery unit off the operating room.
"^DD",130,130,471,21,5,0)
It may also be a general ICU in which medical patients are also managed
"^DD",130,130,471,21,6,0)
(MICU, CCU). This will always be the unit into which the patient goes
"^DD",130,130,471,21,7,0)
immediately after surgery and is stabilized, ventilated and ultimately
"^DD",130,130,471,21,8,0)
extubated. Do not include lower acuity units where the patient goes
"^DD",130,130,471,21,9,0)
subsequently (i.e. stepdown, transitional care, telemetry, etc.). Do 
"^DD",130,130,471,21,10,0)
not include subsequent readmissions to the ICU.
"^DD",130,130,471,"DT")
3060314
"^DD",130,130,475,0)
DIABETES (CARDIAC)^S^N:NO;D:DIET;O:ORAL;I:INSULIN;^209;3^Q
"^DD",130,130,475,.1)
Diabetes
"^DD",130,130,475,3)
Enter the patient's diabetes status.
"^DD",130,130,475,21,0)
^^16^16^3060308^
"^DD",130,130,475,21,1,0)
CICSP Definition (2006):
"^DD",130,130,475,21,2,0)
Indicate if the patient has diabetes treated with diet, oral, and/or 
"^DD",130,130,475,21,3,0)
insulin therapy. Diabetes is defined as a metabolic disorder of the 
"^DD",130,130,475,21,4,0)
pancreas whereby the individual requires daily dosages of exogenous 
"^DD",130,130,475,21,5,0)
parenteral insulin or an oral hypoglycemic agent to prevent a 
"^DD",130,130,475,21,6,0)
hyperglycemic/metabolic acidosis. If the patient is on both Oral and 
"^DD",130,130,475,21,7,0)
Insulin therapy, indicate Insulin therapy. Indicate the one most 
"^DD",130,130,475,21,8,0)
appropriate response.
"^DD",130,130,475,21,9,0)
No - no diagnosis of diabetes. 
"^DD",130,130,475,21,10,0)
Diet - a diagnosis of diabetes that is controlled by diet alone in the 
"^DD",130,130,475,21,11,0)
two weeks preceding surgery (the only prescribed treatment has been
"^DD",130,130,475,21,12,0)
diabetic relief).
"^DD",130,130,475,21,13,0)
Oral - a diagnosis of diabetes requiring therapy with an oral 
"^DD",130,130,475,21,14,0)
hypoglycemic agent in the two weeks preceding surgery.
"^DD",130,130,475,21,15,0)
Insulin - a diagnosis of diabetes requiring daily insulin therapy 
"^DD",130,130,475,21,16,0)
in the two weeks preceding surgery.
"^DD",130,130,475,"DT")
3060308
"^DD",130,130,477,0)
AORTIC STENOSIS^S^0:NONE/TRIVIAL;1:MILD;2:MODERATE;3:SEVERE;NS:NO STUDY;^209;5^Q
"^DD",130,130,477,.1)
Aortic Stenosis
"^DD",130,130,477,3)
Enter severity of aortic stenosis using LV angiogram or cardiac ultrasound.
"^DD",130,130,477,21,0)
^^30^30^3060112^
"^DD",130,130,477,21,1,0)
CICSP Definition (2006):
"^DD",130,130,477,21,2,0)
Indicate the severity of any aortic stenosis documented. This question
"^DD",130,130,477,21,3,0)
should be answered using either the left ventricular angiogram
"^DD",130,130,477,21,4,0)
(hemodynamic cath data) or the cardiac ultrasound examination. Numbers
"^DD",130,130,477,21,5,0)
may be converted to describe the severity of the aortic stenosis
"^DD",130,130,477,21,6,0)
on the cardiac cath report to the adjectives describing the severity:
"^DD",130,130,477,21,7,0)
1+ = mild, 2 or 3+ = moderate, and 4+ = severe. Both transvalvular
"^DD",130,130,477,21,8,0)
gradient and estimated valve orifice area are used to assess the 
"^DD",130,130,477,21,9,0)
severity of obstruction (stenosis) of a valve. The transvalvular
"^DD",130,130,477,21,10,0)
pressure gradient is obtained by converting the velocity of blood flow
"^DD",130,130,477,21,11,0)
across the valve measured by the Doppler principle to pressure drop 
"^DD",130,130,477,21,12,0)
using the Bernoulli equation. The pressure drop, which is dependent on
"^DD",130,130,477,21,13,0)
flow, can be converted to estimated valve orifice area if flow is 
"^DD",130,130,477,21,14,0)
known. If the echo report uses an adjective to describe the severity of
"^DD",130,130,477,21,15,0)
stenosis, indicate the corresponding adjective. Use the following to
"^DD",130,130,477,21,16,0)
convert mean (not peak) transvalvular gradients, orifice areas, or 
"^DD",130,130,477,21,17,0)
both, to the descriptive categories. Indicate the one most appropriate
"^DD",130,130,477,21,18,0)
response:
"^DD",130,130,477,21,19,0)
 
"^DD",130,130,477,21,20,0)
None/Trivial - The mean pressure gradient is < 5 mm Hg, and/or orifice 
"^DD",130,130,477,21,21,0)
    area is > 2.5 cm2, and/or the aortic valve leaflets or aortic flow 
"^DD",130,130,477,21,22,0)
    velocity is stated to be normal (< 1.0 M/sec).
"^DD",130,130,477,21,23,0)
Mild - The mean pressure gradient is 5 - 20 mm Hg and/or the orifice 
"^DD",130,130,477,21,24,0)
    area is 1.7 - 2.5 cm2
"^DD",130,130,477,21,25,0)
Moderate - The mean pressure gradient is >20 - 50 mm Hg and/or the 
"^DD",130,130,477,21,26,0)
    valve orifice area is 1.0 -1.5 cm2
"^DD",130,130,477,21,27,0)
Severe - The mean pressure gradient is > 50 mm Hg and/or the valve 
"^DD",130,130,477,21,28,0)
    orifice area is < 1.0 cm2
"^DD",130,130,477,21,29,0)
No Study - If no study was performed, entering "NS" for "No 
"^DD",130,130,477,21,30,0)
    Study/Unknown" is also allowed. 
"^DD",130,130,477,"DT")
3060112
"^DD",130,130,481,0)
BRIDGE TO TRANSPLANT/DEVICE^S^Y:YES;N:NO;^209;9^Q
"^DD",130,130,481,.1)
Device for bridge to cardiac transplant / Destination therapy
"^DD",130,130,481,3)
Enter 'YES' if patient received a mechanical support device as a bridge to cardiac transplant.
"^DD",130,130,481,21,0)
^^6^6^3060209^^
"^DD",130,130,481,21,1,0)
CICSP Definition (2006):
"^DD",130,130,481,21,2,0)
Indicate if patient received a mechanical support device 
"^DD",130,130,481,21,3,0)
(excluding IABP) as a bridge to cardiac transplant during the same
"^DD",130,130,481,21,4,0)
admission as the transplant procedure; or patient received the device
"^DD",130,130,481,21,5,0)
as destination therapy (does not intend to have a cardiac transplant),
"^DD",130,130,481,21,6,0)
either with or without placing the patient on cardiopulmonary bypass.
"^DD",130,130,481,"DT")
3060209
"^DD",130,130,482,0)
*MAZE PROCEDURE^S^Y:YES;N:NO;^209;10^Q
"^DD",130,130,482,.1)
*Maze Procedure
"^DD",130,130,482,3)
Enter Yes if Maze procedure was done.
"^DD",130,130,482,21,0)
^^7^7^3060330^
"^DD",130,130,482,21,1,0)
CICSP Definition (2004):
"^DD",130,130,482,21,2,0)
Indicate if patient had a Maze procedure either with or without
"^DD",130,130,482,21,3,0)
placing the patient on cardiopulmonary bypass. A Maze procedure is
"^DD",130,130,482,21,4,0)
a surgical intervention used to interrupt atrial conduction pathways
"^DD",130,130,482,21,5,0)
often associated with atrial fibrillation or atrial flutter. It may
"^DD",130,130,482,21,6,0)
be performed alone or in combination with other cardiac procedures.
"^DD",130,130,482,21,7,0)
(YES/NO).
"^DD",130,130,482,"DT")
3060405
"^DD",130,130,484,0)
OTHER CARDIAC PROCEDURES-LIST^FX^^209.1;1^S NYUK=X K:$L(X)>60!($L(X)<3) X S:NYUK="NS"!(NYUK="ns") X="NS" K NYUK
"^DD",130,130,484,.1)
Other cardiac procedures (specify)
"^DD",130,130,484,3)
Answer must be 3-60 characters in length.
"^DD",130,130,484,21,0)
^.001^4^4^3060705^^
"^DD",130,130,484,21,1,0)
CICSP Definition (2006):
"^DD",130,130,484,21,2,0)
Specify if any cardiac surgical procedure (not listed above) was
"^DD",130,130,484,21,3,0)
performed alone or in conjunction with the index procedure, either
"^DD",130,130,484,21,4,0)
with or without placing the patient on cardiopulmonary bypass.
"^DD",130,130,484,"DT")
3060404
"^DD",130,130,487.1,0)
PREOPERATIVE INR, DATE^DX^^202;27^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",130,130,487.1,.1)
Date Preoperative INR was Performed
"^DD",130,130,487.1,3)
Enter the date that the preoperative INR was performed.
"^DD",130,130,487.1,21,0)
^.001^1^1^3060127^^^
"^DD",130,130,487.1,21,1,0)
This is the date that the preoperative INR was performed.
"^DD",130,130,487.1,"DT")
3060127
"^DD",130,130,502,0)
OTHER CARDIAC PROCEDURES (Y/N)^S^Y:YES;N:NO;^209;13^Q
"^DD",130,130,502,.1)
Other Cardiac Procedures (Y/N)
"^DD",130,130,502,3)
Enter 'YES' if there are other cardiac procedures. 
"^DD",130,130,502,21,0)
^^4^4^3060705^
"^DD",130,130,502,21,1,0)
CICSP Definition (2006):
"^DD",130,130,502,21,2,0)
Indicate if any cardiac surgical procedure (not listed above) was
"^DD",130,130,502,21,3,0)
performed alone or in conjunction with the index procedure, either with
"^DD",130,130,502,21,4,0)
or without placing the patient on cardiopulmonary bypass (YES/NO).
"^DD",130,130,502,"DT")
3060320
"^DD",130,130,504,0)
HEMOGLOBIN A1C^FX^^201;28^S:X="NS"!(X="ns") X="NS" Q:X="NS"  K:$L(X)>6!($L(X)<1) X
"^DD",130,130,504,.1)
Hemoglobin A1c
"^DD",130,130,504,3)
Answer must be 1-6 characters in length.
"^DD",130,130,504,21,0)
^^3^3^3060705^
"^DD",130,130,504,21,1,0)
CICSP Definition (2006):
"^DD",130,130,504,21,2,0)
Indicate the Hemoglobin A1c result (%) preoperatively evaluated closest
"^DD",130,130,504,21,3,0)
to surgery. Entering "NS" for "No Study" is allowed.
"^DD",130,130,504,"DT")
3060411
"^DD",130,130,504.1,0)
HEMOGLOBIN A1C, DATE^FXO^^202.1;1^N SRX S SRX=X,%DT="EX" D ^%DT S X=Y K:Y<1 X S:SRX="NS"!(SRX="ns") X="NS"
"^DD",130,130,504.1,.1)
Hemoglobin A1c, Date
"^DD",130,130,504.1,2)
S Y(0)=Y S Y(0)=Y D DATE^SROAUTL
"^DD",130,130,504.1,2.1)
S Y(0)=Y D DATE^SROAUTL
"^DD",130,130,504.1,3)
This is the date that the Hemoglobin A1c was performed and must not be more than 1000 days before surgery.
"^DD",130,130,504.1,21,0)
^^4^4^3060705^
"^DD",130,130,504.1,21,1,0)
CICSP Definition (2006):
"^DD",130,130,504.1,21,2,0)
Indicate the date that the preoperative Hemoglobin A1c value was 
"^DD",130,130,504.1,21,3,0)
assessed. Enter "NS" for No Study if the Hemoglobin A1c test was not
"^DD",130,130,504.1,21,4,0)
performed.
"^DD",130,130,504.1,"DT")
3060705
"^DD",130,130,505,0)
ENDOVASCULAR REPAIR^S^Y:YES;N:NO;^207.1;2^Q
"^DD",130,130,505,.1)
Endovascular Repair of Descending Thoracic Aorta
"^DD",130,130,505,3)
Enter Yes if an endovascular repair of the descending thoracic aorta was done with a cardiothoracic surgeon attending.
"^DD",130,130,505,21,0)
^^12^12^3060314^
"^DD",130,130,505,21,1,0)
CICSP Definition (2006): 
"^DD",130,130,505,21,2,0)
Indicate if the patient had an endovascular repair of the descending
"^DD",130,130,505,21,3,0)
thoracic aorta (e.g., aneurysm, pseudoaneurysm, dissection, penetrating
"^DD",130,130,505,21,4,0)
ulcer, intramural hematoma, or traumatic disruption) with or without
"^DD",130,130,505,21,5,0)
involving coverage of left subclavian artery origin, initial
"^DD",130,130,505,21,6,0)
endoprosthesis plus descending thoracic aortic extension(s), if
"^DD",130,130,505,21,7,0)
required, to level of celiac artery origin, with or without
"^DD",130,130,505,21,8,0)
cardiopulmonary bypass. To include in CICSP, an attending 
"^DD",130,130,505,21,9,0)
cardiothoracic surgeon must have been present and involved in the
"^DD",130,130,505,21,10,0)
procedure. It is typically done under general anesthesia and may be 
"^DD",130,130,505,21,11,0)
performed in the operating room or interventional radiology operating 
"^DD",130,130,505,21,12,0)
area.
"^DD",130,130,505,"DT")
3060314
"^DD",130,130,506,0)
HAIR REMOVAL METHOD^S^C:CLIPPER;D:DEPILATORY;N:NO HAIR REMOVED;P:PATIENT REMOVED OWN HAIR;S:SHAVING;U:NOT DOCUMENTED;O:OTHER;^VER;6^Q
"^DD",130,130,506,.1)
Surgical Site Hair Removal Method
"^DD",130,130,506,1,0)
^.1
"^DD",130,130,506,1,1,0)
130^AN^MUMPS
"^DD",130,130,506,1,1,1)
D HR^SRENSCS
"^DD",130,130,506,1,1,2)
Q
"^DD",130,130,506,1,1,"%D",0)
^^2^2^3060315^
"^DD",130,130,506,1,1,"%D",1,0)
This MUMPS cross reference maintains the Hair Removal Comments field 
"^DD",130,130,506,1,1,"%D",2,0)
if this field is answered with "S".
"^DD",130,130,506,1,1,"DT")
3060315
"^DD",130,130,506,3)
Enter the method used to remove hair prior to Surgery.
"^DD",130,130,506,21,0)
^^5^5^3060320^
"^DD",130,130,506,21,1,0)
This is the method used to remove hair prior to surgery.  Shaving is
"^DD",130,130,506,21,2,0)
not a preferred method for hair removal. If SHAVING is selected, 
"^DD",130,130,506,21,3,0)
a comment must be entered in the HAIR REMOVAL COMMENTS field 
"^DD",130,130,506,21,4,0)
explaining why SHAVING was used. If OTHER is selected, comments must 
"^DD",130,130,506,21,5,0)
be entered explaining the method used.
"^DD",130,130,506,"DT")
3060323
"^DD",130,130,508,0)
HAIR REMOVAL COMMENTS^130.0508^^49;0
"^DD",130,130,508,21,0)
^^4^4^3060320^
"^DD",130,130,508,21,1,0)
If SHAVING is selected as the hair removal method, a comment must be 
"^DD",130,130,508,21,2,0)
entered explaining why SHAVING was used. 
"^DD",130,130,508,21,3,0)
If OTHER is selected as the hair removal method, comments must be 
"^DD",130,130,508,21,4,0)
entered explaining the method used.
"^DD",130,130,510,0)
CURRENT SMOKER (CARDIAC)^S^1:NEVER A SMOKER;2:WITHIN 2 WEEKS OF SURGERY;3:2 WEEKS TO 3 MONTHS PRIOR TO SURGERY;4:>3 MONTHS PRIOR TO SURGERY (REMOTE SMOKER);^200.1;5^Q
"^DD",130,130,510,.1)
Current Smoker
"^DD",130,130,510,3)
Enter the code describing the patient's status as a smoker prior to surgery.
"^DD",130,130,510,21,0)
^^11^11^3060328^
"^DD",130,130,510,21,1,0)
CICSP Definition (2006): 
"^DD",130,130,510,21,2,0)
Indicate the patient's smoking status from information from the
"^DD",130,130,510,21,3,0)
patient, or the chart, that best describes the patient's use of 
"^DD",130,130,510,21,4,0)
tobacco in any form (pipe, cigar, cigarette, tobacco chew). If more
"^DD",130,130,510,21,5,0)
than one representation is found, please record according to the 
"^DD",130,130,510,21,6,0)
most conservative (most recent) quit date:
"^DD",130,130,510,21,7,0)
 
"^DD",130,130,510,21,8,0)
1 = never a smoker
"^DD",130,130,510,21,9,0)
2 = smoking within two weeks prior to surgery 
"^DD",130,130,510,21,10,0)
3 = smoking within 2 weeks to 3 months prior to surgery 
"^DD",130,130,510,21,11,0)
4 = remote smoker (more than 3 months prior to surgery)
"^DD",130,130,510,"DT")
3060328
"^DD",130,130,512,0)
MAZE PROCEDURE^S^N:NO MAZE PERFORMED;F:FULL MAZE;M:MINI MAZE;^209;14^Q
"^DD",130,130,512,.1)
Maze Procedure
"^DD",130,130,512,3)
Enter NO MAZE PERFORMED, FULL MAZE or MINI MAZE.
"^DD",130,130,512,21,0)
^.001^34^34^3060628^^
"^DD",130,130,512,21,1,0)
CICSP Definition (2006):
"^DD",130,130,512,21,2,0)
Indicate if patient had a Maze procedure either with or without placing
"^DD",130,130,512,21,3,0)
the patient on cardiopulmonary bypass.  A Maze procedure is a surgical
"^DD",130,130,512,21,4,0)
intervention used to interrupt abnormal atrial conduction pathways that
"^DD",130,130,512,21,5,0)
cause atrial fibrillation or atrial flutter. It may be performed alone
"^DD",130,130,512,21,6,0)
or in combination with other cardiac procedures. (A Maze does not
"^DD",130,130,512,21,7,0)
include an amputation/resection of the atrial appendage as an isolated
"^DD",130,130,512,21,8,0)
procedure; an intraoperative electrophysiologic mapping procedure; nor
"^DD",130,130,512,21,9,0)
any surgical or ablation procedure conducted on the ventricle for
"^DD",130,130,512,21,10,0)
control of ventricular arrhythmias.) Indicate the one most appropriate
"^DD",130,130,512,21,11,0)
response:
"^DD",130,130,512,21,12,0)
 
"^DD",130,130,512,21,13,0)
No - No Maze performed
"^DD",130,130,512,21,14,0)
 
"^DD",130,130,512,21,15,0)
Full Maze - The procedure is most often performed on-bypass through
"^DD",130,130,512,21,16,0)
a median sternotomy. A combination of incisions and thermal (cryo) or
"^DD",130,130,512,21,17,0)
radiofrequency ablations of the atrial wall pathways are done,
"^DD",130,130,512,21,18,0)
typically including amputation/resection of the one or both atrial
"^DD",130,130,512,21,19,0)
appendices. The procedure thus creates a "maze" of electrical
"^DD",130,130,512,21,20,0)
propogation roots involving the entire atrial myocardium with only
"^DD",130,130,512,21,21,0)
one side of entrance (the sinus node) and one side of exit
"^DD",130,130,512,21,22,0)
(the AV node).
"^DD",130,130,512,21,23,0)
 
"^DD",130,130,512,21,24,0)
Mini-Maze - A more limited and simpler procedure than the traditional
"^DD",130,130,512,21,25,0)
full maze, the Mini-Maze is based on the finding that in most patients,
"^DD",130,130,512,21,26,0)
ectopic foci located in the pulmonary veins are responsible for the
"^DD",130,130,512,21,27,0)
initiation of atrial fib.  Radiofrequency or a cryo-ablation probe is
"^DD",130,130,512,21,28,0)
used either inside or outside of the pulmonary vein ostia to destroy
"^DD",130,130,512,21,29,0)
the foci.  It can be performed with or without resection of the atrial
"^DD",130,130,512,21,30,0)
appendage and includes no incision or minimal incisions to the left
"^DD",130,130,512,21,31,0)
atrium, rather than the extensive atrial surgical procedure conducted
"^DD",130,130,512,21,32,0)
for the full Maze.  The Mini can be performed on or off bypass through
"^DD",130,130,512,21,33,0)
a median sternotomy or performed thorascopically to the outside of the
"^DD",130,130,512,21,34,0)
pulmonary veins.
"^DD",130,130,512,"DT")
3060628
"^DD",130,130.0508,0)
HAIR REMOVAL COMMENTS SUB-FIELD^^.01^1
"^DD",130,130.0508,0,"DT")
3060314
"^DD",130,130.0508,0,"NM","HAIR REMOVAL COMMENTS")

"^DD",130,130.0508,0,"UP")
130
"^DD",130,130.0508,.01,0)
HAIR REMOVAL COMMENTS^W^^0;1
"^DD",130,130.0508,.01,.1)
Hair Removal Comments
"^DD",130,130.0508,.01,21,0)
^^4^4^3060320^
"^DD",130,130.0508,.01,21,1,0)
If SHAVING is selected as the hair removal method, a comment must be
"^DD",130,130.0508,.01,21,2,0)
entered explaining why SHAVING was used.
"^DD",130,130.0508,.01,21,3,0)
If OTHER is selected as the hair removal method, comments must be
"^DD",130,130.0508,.01,21,4,0)
entered explaining the method used.
"^DD",130,130.0508,.01,"DT")
3060320
"^DD",130,130.22,7,0)
SEPSIS CATEGORY^*S^1:SIRS;2:SEPSIS;3:SEPTIC SHOCK;^0;4^Q
"^DD",130,130.22,7,.1)
Sepsis Category
"^DD",130,130.22,7,3)
Select the appropriate category of sepsis for this occurrence.
"^DD",130,130.22,7,12)
Screen prevents selection of inactive code.
"^DD",130,130.22,7,12.1)
S DIC("S")="I Y'=1"
"^DD",130,130.22,7,21,0)
^^31^31^3060124^
"^DD",130,130.22,7,21,1,0)
NSQIP Definition (2006):
"^DD",130,130.22,7,21,2,0)
The body's response to insult can be documented as one of two levels 
"^DD",130,130.22,7,21,3,0)
with the successive level building on the previous level. You should 
"^DD",130,130.22,7,21,4,0)
only document the highest level identified using the criteria below. 
"^DD",130,130.22,7,21,5,0)
 
"^DD",130,130.22,7,21,6,0)
1. Sepsis: Sepsis is the systemic response to infection. Report this 
"^DD",130,130.22,7,21,7,0)
variable if the patient has clinical signs and symptoms of SIRS. SIRS is
"^DD",130,130.22,7,21,8,0)
a widespread inflammatory response to a variety of severe clinical 
"^DD",130,130.22,7,21,9,0)
insults. This syndrome is clinically recognized by the presence of two 
"^DD",130,130.22,7,21,10,0)
or more of the following:
"^DD",130,130.22,7,21,11,0)
   - Temp >38 degrees C or <36 degrees C
"^DD",130,130.22,7,21,12,0)
   - HR >90 bpm
"^DD",130,130.22,7,21,13,0)
   - RR >20 breaths/min or PaCO2 <32 mmHg(<4.3 kPa)
"^DD",130,130.22,7,21,14,0)
   - WBC >12,000 cell/mm3, <4000 cells/mm3, or >10% immature (band) 
"^DD",130,130.22,7,21,15,0)
     forms
"^DD",130,130.22,7,21,16,0)
   - Anion gap acidosis (this is defined by [sodium + potassium] -
"^DD",130,130.22,7,21,17,0)
     [chloride + CO2]. If this number is greater than 12, then an anion
"^DD",130,130.22,7,21,18,0)
     gap acidosis is present.
"^DD",130,130.22,7,21,19,0)
 
"^DD",130,130.22,7,21,20,0)
 and one of the following:
"^DD",130,130.22,7,21,21,0)
   - positive blood culture
"^DD",130,130.22,7,21,22,0)
   - clinical documentation of purulence at any site thought to be 
"^DD",130,130.22,7,21,23,0)
     causative
"^DD",130,130.22,7,21,24,0)
 
"^DD",130,130.22,7,21,25,0)
2. Severe Sepsis/Septic Shock: Sepsis is considered severe when it is 
"^DD",130,130.22,7,21,26,0)
associated with organ and/or circulatory dysfunction. Report this 
"^DD",130,130.22,7,21,27,0)
variable if the patient has the clinical signs and symptoms of SIRS or 
"^DD",130,130.22,7,21,28,0)
sepsis AND documented organ and/or circulatory dysfunction. Examples of
"^DD",130,130.22,7,21,29,0)
organ dysfunction include: oliguria, acute alteration in mental status,
"^DD",130,130.22,7,21,30,0)
acute respiratory distress. Examples of circulatory dysfunction include:
"^DD",130,130.22,7,21,31,0)
hypotension, requirement of inotropic or vasopressor agents.
"^DD",130,130.22,7,"DT")
3060124
"^DD",130,130.22,8,0)
CPB STATUS^S^0:None;1:On-bypass;2:Off-bypass;^0;5^Q
"^DD",130,130.22,8,.1)
Cardiopulmonary Bypass Status
"^DD",130,130.22,8,3)
Enter NONE, ON BYPASS, or OFF BYPASS.
"^DD",130,130.22,8,21,0)
^^15^15^3060316^
"^DD",130,130.22,8,21,1,0)
CICSP Definition (2006):
"^DD",130,130.22,8,21,2,0)
Indicate the CPB status if the patient underwent a repeat operation on
"^DD",130,130.22,8,21,3,0)
the heart after the patient had left the operating room from the initial
"^DD",130,130.22,8,21,4,0)
operation and within current hospitalization or within 30 days of the
"^DD",130,130.22,8,21,5,0)
initial operation. Use the same criteria to define a cardiac surgery as
"^DD",130,130.22,8,21,6,0)
listed on page 1 of the CICSP Instructions/Definitions. (Do NOT submit a
"^DD",130,130.22,8,21,7,0)
separate second form for this second cardiac procedure if it occurs
"^DD",130,130.22,8,21,8,0)
within 30 days post-operatively.) Indicate the one appropriate response:
"^DD",130,130.22,8,21,9,0)
 
"^DD",130,130.22,8,21,10,0)
None - no repeat cardiac surgical procedure post-operatively during 
"^DD",130,130.22,8,21,11,0)
      index hospitalization or within 30 days of initial operation.
"^DD",130,130.22,8,21,12,0)
On-bypass - patient underwent a repeat cardiac surgical procedure 
"^DD",130,130.22,8,21,13,0)
      utilizing CPB.
"^DD",130,130.22,8,21,14,0)
Off-bypass - patient underwent a repeat cardiac surgical procedure 
"^DD",130,130.22,8,21,15,0)
      not utilizing CPB.
"^DD",130,130.22,8,"DT")
3060301
"^DD",136.5,136.5,0)
FIELD^^5^6
"^DD",136.5,136.5,0,"DDA")
N
"^DD",136.5,136.5,0,"DT")
2950309
"^DD",136.5,136.5,0,"ID",2)
D DESC^SROCMPS
"^DD",136.5,136.5,0,"IX","B",136.5,.01)

"^DD",136.5,136.5,0,"IX","C",136.53,.01)

"^DD",136.5,136.5,0,"NM","PERIOPERATIVE OCCURRENCE CATEGORY")

"^DD",136.5,136.5,0,"PT",130.0126,5)

"^DD",136.5,136.5,0,"PT",130.053,5)

"^DD",136.5,136.5,0,"PT",130.13,3)

"^DD",136.5,136.5,0,"PT",130.22,5)

"^DD",136.5,136.5,0,"PT",139.046,.01)

"^DD",136.5,136.5,.01,0)
OCCURRENCE CATEGORY^RFI^^0;1^K:$L(X)>60!($L(X)<3)!'(X'?1P.E) X
"^DD",136.5,136.5,.01,.1)
Occurrence Category
"^DD",136.5,136.5,.01,1,0)
^.1
"^DD",136.5,136.5,.01,1,1,0)
136.5^B
"^DD",136.5,136.5,.01,1,1,1)
S ^SRO(136.5,"B",$E(X,1,30),DA)=""
"^DD",136.5,136.5,.01,1,1,2)
K ^SRO(136.5,"B",$E(X,1,30),DA)
"^DD",136.5,136.5,.01,3)
Your answer must be 3-60 characters in length.
"^DD",136.5,136.5,.01,9)
^
"^DD",136.5,136.5,.01,21,0)
^^3^3^2950427^
"^DD",136.5,136.5,.01,21,1,0)
This field contains the name of the perioperative occurrence category to
"^DD",136.5,136.5,.01,21,2,0)
be used when categorizing surgical and anesthesia perioperative
"^DD",136.5,136.5,.01,21,3,0)
occurrences.
"^DD",136.5,136.5,.01,"DT")
2950427
"^DD",136.5,136.5,.01,"LAYGO",1,0)
W !,"Adding to the Perioperative Occurrence Category file is not allowed !!",*7 I 0
"^DD",136.5,136.5,1,0)
INACTIVE?^SI^1:YES;0:NO;^0;2^Q
"^DD",136.5,136.5,1,.1)
Inactive? (Y/N)
"^DD",136.5,136.5,1,3)
Enter YES to inactivate this perioperative occurrence category.
"^DD",136.5,136.5,1,9)
^
"^DD",136.5,136.5,1,21,0)
^^2^2^2950224^
"^DD",136.5,136.5,1,21,1,0)
If this perioperative occurrence category is no longer used, enter YES to
"^DD",136.5,136.5,1,21,2,0)
flag this category as INACTIVE.
"^DD",136.5,136.5,1,"DT")
2950224
"^DD",136.5,136.5,2,0)
DESCRIPTION^136.52^^1;0
"^DD",136.5,136.5,2,9)
^
"^DD",136.5,136.5,2,20,0)
^.3LA^^0
"^DD",136.5,136.5,2,21,0)
^^2^2^2950224^
"^DD",136.5,136.5,2,21,1,0)
This is a description used to further define the perioperative occurrence
"^DD",136.5,136.5,2,21,2,0)
type.
"^DD",136.5,136.5,3,0)
SYNONYM^136.53^^2;0
"^DD",136.5,136.5,3,21,0)
^^1^1^2950315^
"^DD",136.5,136.5,3,21,1,0)
This is another name for this perioperative occurrence category.
"^DD",136.5,136.5,4,0)
INTRAOPERATIVE ALLOWED^SI^1:YES;0:NO;^0;3^Q
"^DD",136.5,136.5,4,.1)
Intraoperative Occurrence Allowed ?
"^DD",136.5,136.5,4,3)
Enter YES if this may be an intraoperative occurrence.
"^DD",136.5,136.5,4,9)
^
"^DD",136.5,136.5,4,21,0)
^^2^2^2951113^^
"^DD",136.5,136.5,4,21,1,0)
If this occurrence category may be associated with an intraoperative
"^DD",136.5,136.5,4,21,2,0)
occurrence, enter YES.
"^DD",136.5,136.5,4,"DT")
2951113
"^DD",136.5,136.5,5,0)
CARDIAC ONLY^S^Y:YES;N:NO;^0;4^Q
"^DD",136.5,136.5,5,.1)
Cardiac Only
"^DD",136.5,136.5,5,3)
Enter YES if the occurrence category is for a cardiac assessment case.
"^DD",136.5,136.5,5,9)
^
"^DD",136.5,136.5,5,21,0)
^^2^2^3000822^
"^DD",136.5,136.5,5,21,1,0)
If this occurrence category may be associated with a cardiac assessed case
"^DD",136.5,136.5,5,21,2,0)
only, enter YES.
"^DD",136.5,136.5,5,"DT")
3000713
"^DD",136.5,136.52,0)
DESCRIPTION SUB-FIELD^^.01^1
"^DD",136.5,136.52,0,"NM","DESCRIPTION")

"^DD",136.5,136.52,0,"UP")
136.5
"^DD",136.5,136.52,.01,0)
DESCRIPTION^W^^0;1^Q
"^DD",136.5,136.52,.01,.1)
Perioperative Occurrence Category Decsription
"^DD",136.5,136.52,.01,3)
Enter a brief description further defining this perioperative occurrence type.
"^DD",136.5,136.52,.01,21,0)
^^2^2^2950224^
"^DD",136.5,136.52,.01,21,1,0)
This is a description used to further define and clarify each
"^DD",136.5,136.52,.01,21,2,0)
perioperative occurrence category.
"^DD",136.5,136.52,.01,21,3,0)
 
"^DD",136.5,136.52,.01,"DT")
2950224
"^DD",136.5,136.53,0)
SYNONYM SUB-FIELD^^.01^1
"^DD",136.5,136.53,0,"DT")
2950309
"^DD",136.5,136.53,0,"IX","B",136.53,.01)

"^DD",136.5,136.53,0,"NM","SYNONYM")

"^DD",136.5,136.53,0,"UP")
136.5
"^DD",136.5,136.53,.01,0)
SYNONYM^MF^^0;1^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>60!($L(X)<3) X
"^DD",136.5,136.53,.01,.1)
Synonym
"^DD",136.5,136.53,.01,1,0)
^.1
"^DD",136.5,136.53,.01,1,1,0)
136.53^B
"^DD",136.5,136.53,.01,1,1,1)
S ^SRO(136.5,DA(1),2,"B",$E(X,1,30),DA)=""
"^DD",136.5,136.53,.01,1,1,2)
K ^SRO(136.5,DA(1),2,"B",$E(X,1,30),DA)
"^DD",136.5,136.53,.01,1,2,0)
136.5^C
"^DD",136.5,136.53,.01,1,2,1)
S ^SRO(136.5,"C",$E(X,1,30),DA(1),DA)=""
"^DD",136.5,136.53,.01,1,2,2)
K ^SRO(136.5,"C",$E(X,1,30),DA(1),DA)
"^DD",136.5,136.53,.01,1,2,"DT")
2950309
"^DD",136.5,136.53,.01,3)
Answer must be 3-60 characters in length.
"^DD",136.5,136.53,.01,21,0)
^^1^1^2950315^
"^DD",136.5,136.53,.01,21,1,0)
This is another name for this perioperative occurrence category.
"^DD",136.5,136.53,.01,"DT")
2950309
"^DIC",136.5,136.5,0)
PERIOPERATIVE OCCURRENCE CATEGORY^136.5I
"^DIC",136.5,136.5,0,"GL")
^SRO(136.5,
"^DIC",136.5,136.5,"%D",0)
^1.001^4^4^3060301^^^
"^DIC",136.5,136.5,"%D",1,0)
This file contains perioperative occurrence categories used within the
"^DIC",136.5,136.5,"%D",2,0)
DHCP Surgery package.  All perioperative occurrences entered must be
"^DIC",136.5,136.5,"%D",3,0)
grouped into one of the categories contained in this file.  The fields in
"^DIC",136.5,136.5,"%D",4,0)
this file are restricted so that entries cannot be altered.
"^DIC",136.5,136.5,"%D",5,0)
 
"^DIC",136.5,"B","PERIOPERATIVE OCCURRENCE CATEGORY",136.5)

"BLD",5583,6)
^152
**END**
**END**

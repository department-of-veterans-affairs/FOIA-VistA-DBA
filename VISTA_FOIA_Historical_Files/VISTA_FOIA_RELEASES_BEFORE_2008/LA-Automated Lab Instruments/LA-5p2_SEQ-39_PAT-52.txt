$TXT Created by MCCORMACK,JOHN at TRAIN.MILWAUKEE.VA.GOV  (KIDS) on THURSDAY, 08/03/00 at 16:02
=============================================================================
Run Date: AUG 16, 2000                     Designation: LA*5.2*52
Package : LA - AUTOMATED LAB INSTRUMENTS     Priority: Mandatory
Version : 5.2        SEQ #39                    Status: Released
=============================================================================

Associated patches: (v)LA*5.2*13   <<= must be installed BEFORE `LA*5.2*52'

Subject: FIX UNDEFINED VARIABLE IN KEYBOARD DIFF

Category: 
  - Routine

Description: 
============

 VISTA Laboratory Package patch LA*5.2*52 contains no changes to software
 controlled by VHA DIRECTIVE 99-053, titled VISTA BLOOD BANK SOFTWARE.
  
 This patch fixes several reported errors and corrects several Vista
 Programming Standards and Conventions (SAC) violations.
  
 1. This patch fixes a reported undefined variable error occurring at
 LAKDIFF3+10^LAKDIFF3.
  
 Routine LAKDIFF3 was changed to kill variable LRORD before calling
 EXPLODE^LRGP2 to build the list of tests on the work list. Users would
 encounter an undefined error when attempting to select a second or
 subsequent accession because the array LRORD was not cleaned up after
 processing the first accession.
 NOIS: CON-0899-12137, FAV-0899-71050, FRE-1099-60326, HAM-0899-20524,
       SLC-0999-50329, WAS-1299-21602
  
 2. This patch fixes a reported illegal number error at WLN^LAKDIFF.
  
 Routine LAKDIFF was changed to use a DIR call to allow the user to
 select the accession number. This call will prevent the user from
 entering a number that is outside the range of possible accession
 numbers (1-9999999) or contains a decimal.
 NOIS: MAD-1295-40263, SLC-0696-50890
  
 3. It corrects the following Vista Programming Standards and Conventions
 violations that were observed in routines LAKDIFF, LAKDIFF1, LAKDIFF2,
 and LAKDIFF3 during a software review as part of patch development:
  
  a. Removed direct global read of global ^%ZIS(2) which contains the
     TERMINAL TYPE file.  Routine LAKDIFF was retrieving code to set
     cursor positioning. Call changed to use Kernel supplied supported
     references PREP^XGF.
  
  b. Removed user input READS which were not terminated by a carriage
     return. These were converted to use the Kernel supplied supported
     references READ^XGF.
  
  c. Removed direct global references to the DD global. These were
     converted to FileMan supplied supported references ^DI
  
  d. Variable DTIME was being set but was not documented in Technical
     manual. Changed setting of DTIME to Kernel supported reference
     $$DTIME^XUP.
  
 4. Users are now allowed to select the accession date. Previously the
 software defaulted to the current date.
  
 5. When displaying the CBC profile the software previously only displayed
 verified results from FILE LAB DATA (#63). The software will now display
 any unverified results that have been entered on the work list.
 These results are preceded with an "*" to denote the status of unverified.
  
 6. When determining the number of days back for delta checking the
 software was using 60 days. This patch changes the logic to calculate the
 number of days back for delta checks by using the value the site specifies
 in FILE LABORATORY SITE (#69.9), FIELD DAYS BACK FOR DELTA CHECKS (#20).
  
 7. The user can now select if the cell differential and RBC morphology
 display updates on each key press. The user is prompted if they want the
 display updated with each key press upon entering the option. If the user
 selects NO then the display can be updated by entering a "?" during cell
 differential and RBC morphology entry. Selecting YES provides a continuously
 updating display. On systems with slow response times, selecting NO may
 improve performance. User's preferences for this function will be saved
 using Kernel's generic parameter utility. The parameter definition is named
 LA KDIFF DISPLAY UPDATE which will be added to the PARAMETER DEFINITION
 file (#8989.51) by the KIDS install.
  
  
 ASSOCIATED NOIS
 ---------------
  CON-0899-12137
  FAV-0899-71050
  FRE-1099-60326
  HAM-0899-20524
  MAD-1295-40263
  PHI-0300-21262
  SLC-0696-50890
  SLC-0999-50329
  WAS-1299-21602
  
 TEST SITES
 ----------
  Connecticut HCS
  Fresno VAMC
  Hampton VAMC
  Philadelphia VAMC
  
  
 ROUTINE SUMMARY
 ===============
  
   The following is a list of routines included in this patch.
   The second line of each routine now looks like:
  
   <tab>;;5.2;AUTOMATED LAB INSTRUMENTS;**[Patch List]**;Sep 27, 1994
  
                     CHECK^XTSUMBLD results
  
                     Checksum       Checksum
    Routine Name     Before Patch   After Patch    Patch List
    ------------     ------------   -----------    ------------
    LA52             N/A            4557885        **52**(Deleted by KIDS)
    LAKDIFF          9922081        7244730        **13,52**
    LAKDIFF1         8917764        5795474        **52**
    LAKDIFF2         9640378        2778086        **52**
    LAKDIFF3         2515859        1523847        **52**
  
 ************************************************************************
  
 Installation Instructions
 =========================
  
   The install time for this patch is less than 5 minutes. This patch
   can be installed with Laboratory users on the system.
  
   Suggested time to install: non-peak requirement hours.
   Recommend that the patch be installed when option Keypad differential
   for CRT's [LA KB DIFF] is not being used.
  
 NOTE: Kernel, MailMan and HL patches must be current on the target system
       to avoid problems loading and/or installing this patch.
  
       Patch installation needs to be coordinated with the Laboratory
       Information Manager (LIM/ADPAC). Patch will send patch installation
       alerts to Lab mail group LMI.
  
  
   1.  If any of the above routines are mapped, disable mapping for them.
  
   2.  Use the 'INSTALL/CHECK MESSAGE' option of the PackMan menu.  This
       option will load the KIDS patch onto your system.
  
   3.  The patch has now been loaded into a Transport global on your
       system.  You now need to use KIDS to install the transport global.
  
   4.  On the 'Kernel Installation & Distribution System' Menu (KIDS),
       select the 'Installation' menu.
  
   5.  Use the 'Verify Checksum in Transport Global' option and verify that
       all routines have the correct checksums.
  
   6.  On the KIDS menu, under the 'Installation' menu, use the following
       options:
         Print Transport Global
         Compare Transport Global to Current System
         Backup a Transport Global
  
       If you wish to preserve a copy of the routines exported in this patch
       prior to installation, you should use the 'Backup a Transport Global'
       option at this time.  You may also compare the routines in your
       production account to the routines in the patch by using the 'Compare
       a Transport Global to Current System' option.
  
   7.  The install will disable the following Lab option during patch
       installation.
  
       Keypad differential for CRT's [LA KB DIFF]
  
   8.  Use the 'Install Package(s)' option under the 'Installation' menu
       and select the package 'LA*5.2*52'.  When prompted 'Want to
       DISABLE Scheduled Options, Menu Options, and Protocols? YES//',
       choose 'NO'.
  
   9.  On a mapped system, rebuild your map set.
  
  10.  Routine LA52 will be deleted after successful patch installation.
  
  
  
 Post-Installation Instructions: NONE
  
 ************************************************************************
  
 Installation example:
  
  
 Select Installation Option: 6  Install Package(s)
 Select INSTALL NAME:  LA*5.2*52   Loaded from Distribution  8/1/00@16:13:41
      => LA*5.2*52
  
 This Distribution was loaded on Aug 01, 2000@16:13:41 with header of
    LA*5.2*52
    It consisted of the following Install(s):
       LA*5.2*52
 Checking Install for Package LA*5.2*52
 Will first run the Environment Check Routine, LA52
  
  
                         --- Environment Check is Ok ---
  
 Install Questions for LA*5.2*52
  
 Incoming Files:
  
  
    8989.51   PARAMETER DEFINITION  (including data)
 Note:  You already have the 'PARAMETER DEFINITION' File.
 I will OVERWRITE your data with mine.
  
 Want KIDS to Rebuild Menu Trees Upon Completion of Install? YES// NO
  
  
 Want KIDS to INHIBIT LOGONs during the install? YES// NO
 Want to DISABLE Scheduled Options, Menu Options, and Protocols? YES// NO
  
 Enter the Device you want to print the Install messages.
 You can queue the install by enter a 'Q' at the device prompt.
 Enter a '^' to abort the install.
  
 DEVICE: HOME//  TELNET VIRTUAL
  
  
  Install Started for LA*5.2*52 :
                Aug 01, 2000@16:15:36
  
 Build Distribution Date: Aug 01, 2000
  
  Installing Routines:......
                Aug 01, 2000@16:15:36
  
  Running Pre-Install Routine: PRE^LA52.
  
                Sending install started alert to mail group G.LMI
  
                           *** Pre install started ***
  
                   --- No actions required for pre install ---
  
                          *** Pre install completed ***
  
  Installing Data Dictionaries: ..
                Aug 01, 2000@16:15:36
  
  Installing Data: ..
                Aug 01, 2000@16:15:40
  
  Installing PACKAGE COMPONENTS:
  
  Installing OPTION..
                Aug 01, 2000@16:15:41
  
  Running Post-Install Routine: POST^LA52.
  
                           *** Post install started ***
  
                   --- No actions required for post install ---
  
                          *** Post install completed ***
  
               Sending install completion alert to mail group G.LMI
  
  Updating Routine file......
  
  Updating KIDS files.......
  
  LA*5.2*52 Installed.
                Aug 01, 2000@16:15:50
  
  Install Message sent #28235

Routine Information:
====================

Routine Name:
  - LA52


Routine Checksum:

Routine Name:
  - LAKDIFF


Routine Checksum:

Routine Name:
  - LAKDIFF1


Routine Checksum:

Routine Name:
  - LAKDIFF2


Routine Checksum:

Routine Name:
  - LAKDIFF3


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : MCCORMACK,JOHN                 Date Entered : DEC 21, 1999
Completed By: ELIJAH,VICKEY                 Date Completed: AUG 14, 2000
Released By : LECLAIR,RAY                   Date Released : AUG 16, 2000
=============================================================================


Packman Mail Message:
=====================

$END TXT

EMERGENCY Released SD*5.3*280 SEQ #253
Extracted from mail message
**KIDS**:SD*5.3*280^

**INSTALL NAME**
SD*5.3*280
"BLD",3900,0)
SD*5.3*280^SCHEDULING^0^3030305^y
"BLD",3900,4,0)
^9.64PA^409.32^4
"BLD",3900,4,404.51,0)
404.51
"BLD",3900,4,404.51,2,0)
^9.641^404.51^1
"BLD",3900,4,404.51,2,404.51,0)
TEAM  (File-top level)
"BLD",3900,4,404.51,2,404.51,1,0)
^9.6411^.07^1
"BLD",3900,4,404.51,2,404.51,1,.07,0)
INSTITUTION
"BLD",3900,4,404.51,222)
y^y^p^^^^n^^n
"BLD",3900,4,404.51,224)
 
"BLD",3900,4,409.3,0)
409.3
"BLD",3900,4,409.3,2,0)
^9.641^409.3^1
"BLD",3900,4,409.3,2,409.3,0)
SD WAIT LIST  (File-top level)
"BLD",3900,4,409.3,2,409.3,1,0)
^9.6411^2^1
"BLD",3900,4,409.3,2,409.3,1,2,0)
INSTITUTION
"BLD",3900,4,409.3,222)
y^y^p^^^^n^^n
"BLD",3900,4,409.3,224)
 
"BLD",3900,4,409.31,0)
409.31
"BLD",3900,4,409.31,2,0)
^9.641^409.311^1
"BLD",3900,4,409.31,2,409.311,0)
INSTITUTION  (sub-file)
"BLD",3900,4,409.31,2,409.311,1,0)
^9.6411^.01^1
"BLD",3900,4,409.31,2,409.311,1,.01,0)
INSTITUTION
"BLD",3900,4,409.31,222)
y^y^p^^^^n^^n
"BLD",3900,4,409.31,224)
 
"BLD",3900,4,409.32,0)
409.32
"BLD",3900,4,409.32,2,0)
^9.641^409.32^1
"BLD",3900,4,409.32,2,409.32,0)
SD WL CLINIC LOCATION  (File-top level)
"BLD",3900,4,409.32,2,409.32,1,0)
^9.6411^.02^1
"BLD",3900,4,409.32,2,409.32,1,.02,0)
INSTITUTION
"BLD",3900,4,409.32,222)
y^y^p^^^^n^^n
"BLD",3900,4,409.32,224)
 
"BLD",3900,4,"APDD",404.51,404.51)
 
"BLD",3900,4,"APDD",404.51,404.51,.07)
 
"BLD",3900,4,"APDD",409.3,409.3)
 
"BLD",3900,4,"APDD",409.3,409.3,2)
 
"BLD",3900,4,"APDD",409.31,409.311)
 
"BLD",3900,4,"APDD",409.31,409.311,.01)
 
"BLD",3900,4,"APDD",409.32,409.32)
 
"BLD",3900,4,"APDD",409.32,409.32,.02)
 
"BLD",3900,4,"B",404.51,404.51)
 
"BLD",3900,4,"B",409.3,409.3)
 
"BLD",3900,4,"B",409.31,409.31)
 
"BLD",3900,4,"B",409.32,409.32)
 
"BLD",3900,"INID")
^n
"BLD",3900,"INIT")
SDWLCU4
"BLD",3900,"KRN",0)
^9.67PA^8989.52^19
"BLD",3900,"KRN",.4,0)
.4
"BLD",3900,"KRN",.401,0)
.401
"BLD",3900,"KRN",.402,0)
.402
"BLD",3900,"KRN",.403,0)
.403
"BLD",3900,"KRN",.5,0)
.5
"BLD",3900,"KRN",.84,0)
.84
"BLD",3900,"KRN",3.6,0)
3.6
"BLD",3900,"KRN",3.8,0)
3.8
"BLD",3900,"KRN",9.2,0)
9.2
"BLD",3900,"KRN",9.8,0)
9.8
"BLD",3900,"KRN",9.8,"NM",0)
^9.68A^6^6
"BLD",3900,"KRN",9.8,"NM",1,0)
SDWLPE^^0^B17635808
"BLD",3900,"KRN",9.8,"NM",2,0)
SDWLE111^^0^B21608749
"BLD",3900,"KRN",9.8,"NM",3,0)
SDWLCU1^^0^B32629039
"BLD",3900,"KRN",9.8,"NM",4,0)
SDWLCU2^^0^B8135099
"BLD",3900,"KRN",9.8,"NM",5,0)
SDWLCU3^^0^B12290803
"BLD",3900,"KRN",9.8,"NM",6,0)
SDWLCU5^^0^B26277848
"BLD",3900,"KRN",9.8,"NM","B","SDWLCU1",3)
 
"BLD",3900,"KRN",9.8,"NM","B","SDWLCU2",4)
 
"BLD",3900,"KRN",9.8,"NM","B","SDWLCU3",5)
 
"BLD",3900,"KRN",9.8,"NM","B","SDWLCU5",6)
 
"BLD",3900,"KRN",9.8,"NM","B","SDWLE111",2)
 
"BLD",3900,"KRN",9.8,"NM","B","SDWLPE",1)
 
"BLD",3900,"KRN",19,0)
19
"BLD",3900,"KRN",19,"NM",0)
^9.68A^1^1
"BLD",3900,"KRN",19,"NM",1,0)
SD WAIT LIST CLEANUP^^0
"BLD",3900,"KRN",19,"NM","B","SD WAIT LIST CLEANUP",1)
 
"BLD",3900,"KRN",19.1,0)
19.1
"BLD",3900,"KRN",19.1,"NM",0)
^9.68A^^
"BLD",3900,"KRN",101,0)
101
"BLD",3900,"KRN",101,"NM",0)
^9.68A^^
"BLD",3900,"KRN",409.61,0)
409.61
"BLD",3900,"KRN",409.61,"NM",0)
^9.68A^^
"BLD",3900,"KRN",771,0)
771
"BLD",3900,"KRN",771,"NM",0)
^9.68A^^
"BLD",3900,"KRN",870,0)
870
"BLD",3900,"KRN",8989.51,0)
8989.51
"BLD",3900,"KRN",8989.52,0)
8989.52
"BLD",3900,"KRN",8994,0)
8994
"BLD",3900,"KRN","B",.4,.4)
 
"BLD",3900,"KRN","B",.401,.401)
 
"BLD",3900,"KRN","B",.402,.402)
 
"BLD",3900,"KRN","B",.403,.403)
 
"BLD",3900,"KRN","B",.5,.5)
 
"BLD",3900,"KRN","B",.84,.84)
 
"BLD",3900,"KRN","B",3.6,3.6)
 
"BLD",3900,"KRN","B",3.8,3.8)
 
"BLD",3900,"KRN","B",9.2,9.2)
 
"BLD",3900,"KRN","B",9.8,9.8)
 
"BLD",3900,"KRN","B",19,19)
 
"BLD",3900,"KRN","B",19.1,19.1)
 
"BLD",3900,"KRN","B",101,101)
 
"BLD",3900,"KRN","B",409.61,409.61)
 
"BLD",3900,"KRN","B",771,771)
 
"BLD",3900,"KRN","B",870,870)
 
"BLD",3900,"KRN","B",8989.51,8989.51)
 
"BLD",3900,"KRN","B",8989.52,8989.52)
 
"BLD",3900,"KRN","B",8994,8994)
 
"BLD",3900,"QUES",0)
^9.62^^
"BLD",3900,"REQB",0)
^9.611^4^2
"BLD",3900,"REQB",1,0)
SD*5.3*263^1
"BLD",3900,"REQB",4,0)
SD*5.3*273^1
"BLD",3900,"REQB","B","SD*5.3*263",1)
 
"BLD",3900,"REQB","B","SD*5.3*273",4)
 
"FIA",404.51)
TEAM
"FIA",404.51,0)
^SCTM(404.51,
"FIA",404.51,0,0)
404.51
"FIA",404.51,0,1)
y^y^p^^^^n^^n
"FIA",404.51,0,10)
 
"FIA",404.51,0,11)
 
"FIA",404.51,0,"RLRO")
 
"FIA",404.51,0,"VR")
5.3^SD
"FIA",404.51,404.51)
1
"FIA",404.51,404.51,.07)
 
"FIA",409.3)
SD WAIT LIST
"FIA",409.3,0)
^SDWL(409.3,
"FIA",409.3,0,0)
409.3PI
"FIA",409.3,0,1)
y^y^p^^^^n^^n
"FIA",409.3,0,10)
 
"FIA",409.3,0,11)
 
"FIA",409.3,0,"RLRO")
 
"FIA",409.3,0,"VR")
5.3^SD
"FIA",409.3,409.3)
1
"FIA",409.3,409.3,2)
 
"FIA",409.31)
SD WL SERVICE/SPECIALTY
"FIA",409.31,0)
^SDWL(409.31,
"FIA",409.31,0,0)
409.31P
"FIA",409.31,0,1)
y^y^p^^^^n^^n
"FIA",409.31,0,10)
 
"FIA",409.31,0,11)
 
"FIA",409.31,0,"RLRO")
 
"FIA",409.31,0,"VR")
5.3^SD
"FIA",409.31,409.31)
1
"FIA",409.31,409.31,1)
 
"FIA",409.31,409.311)
1
"FIA",409.31,409.311,.01)
 
"FIA",409.32)
SD WL CLINIC LOCATION
"FIA",409.32,0)
^SDWL(409.32,
"FIA",409.32,0,0)
409.32IP
"FIA",409.32,0,1)
y^y^p^^^^n^^n
"FIA",409.32,0,10)
 
"FIA",409.32,0,11)
 
"FIA",409.32,0,"RLRO")
 
"FIA",409.32,0,"VR")
5.3^SD
"FIA",409.32,409.32)
1
"FIA",409.32,409.32,.02)
 
"INIT")
SDWLCU4
"KRN",19,11416,-1)
0^1
"KRN",19,11416,0)
SD WAIT LIST CLEANUP^SD Wait List Cleanup^^R^^^^^^^^
"KRN",19,11416,1,0)
^^2^2^3030210^
"KRN",19,11416,1,1,0)
Provides the ability to remove non-national institutions from the SD Wait
"KRN",19,11416,1,2,0)
List files.
"KRN",19,11416,25)
SDWLCU1
"KRN",19,11416,99.1)
59220,35905
"KRN",19,11416,"U")
SD WAIT LIST CLEANUP
"MBREQ")
0
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",16,-1)
1^1
"PKG",16,0)
SCHEDULING^SD^APPOINTMENTS,PROFILES,LETTERS,AMIS REPORTS
"PKG",16,20,0)
^9.402P^^
"PKG",16,22,0)
^9.49I^1^1
"PKG",16,22,1,0)
5.3^2930813
"PKG",16,22,1,"PAH",1,0)
280^3030305^66486
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")
 
"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
7
"RTN","SDWLCU1")
0^3^B32629039
"RTN","SDWLCU1",1,0)
SDWLCU1 ;IOFO BAY PINES/DMR - EWL FILE 409.3 CLEANUP ;2/4/03
"RTN","SDWLCU1",2,0)
 ;;5.3;scheduling;**280**;AUG 13 1993
"RTN","SDWLCU1",3,0)
INIT ;
"RTN","SDWLCU1",4,0)
 S (IEN,REC,NUM,COUNT,TOTAL,WLTC1,WLTC2,WLTC3,WLTC4,INST,CODE,NAME,ANS)=""
"RTN","SDWLCU1",5,0)
 S (INST1,INST2,INST3,INST4,POS,POSNAM,TEAM,TEAMN,CLINIC,CLINICN,CLNAM,SER,SERN,SERNAM)=""
"RTN","SDWLCU1",6,0)
 K ^TMP($J,"SDWLCU1"),^TMP($J,"EWL"),SDWLERR
"RTN","SDWLCU1",7,0)
 D START
"RTN","SDWLCU1",8,0)
 D DISPLAY
"RTN","SDWLCU1",9,0)
 D ^SDWLCU5
"RTN","SDWLCU1",10,0)
 W !!,"Run option until list is clean.",!
"RTN","SDWLCU1",11,0)
 D MESS
"RTN","SDWLCU1",12,0)
 D EXIT
"RTN","SDWLCU1",13,0)
 Q
"RTN","SDWLCU1",14,0)
START ;
"RTN","SDWLCU1",15,0)
 F  S INST=$O(^SDWL(409.3,"C",INST)) Q:INST<1  D
"RTN","SDWLCU1",16,0)
 .S CODE=$$GET1^DIQ(4,INST_",",11,"I") D
"RTN","SDWLCU1",17,0)
 ..S IEN="" F  S IEN=$O(^SDWL(409.3,"C",INST,IEN)) Q:IEN<1  D
"RTN","SDWLCU1",18,0)
 ...S INCK="" S INCK=$$TF^XUAF4(INST)
"RTN","SDWLCU1",19,0)
 ...IF CODE'="N"!('INCK) D SAVE
"RTN","SDWLCU1",20,0)
 Q
"RTN","SDWLCU1",21,0)
SAVE ;
"RTN","SDWLCU1",22,0)
 S ^TMP($J,"EWL",$J,IEN)=^SDWL(409.3,IEN,0)
"RTN","SDWLCU1",23,0)
 IF +$P($G(^SDWL(409.3,IEN,0)),"^",5)=1 S WLTC1=WLTC1+1 D
"RTN","SDWLCU1",24,0)
 .S TEAM=+$P($G(^SDWL(409.3,IEN,0)),"^",6),TEAMN=$P(^SCTM(404.51,TEAM,0),"^",1),^TMP($J,"SDWLCU1",1,INST,TEAM,TEAMN,IEN)=""
"RTN","SDWLCU1",25,0)
 IF +$P($G(^SDWL(409.3,IEN,0)),"^",5)=2 S WLTC2=WLTC2+1 D
"RTN","SDWLCU1",26,0)
 .S POS=+$P($G(^SDWL(409.3,IEN,0)),"^",7),POSNAM=$P(^SCTM(404.57,POS,0),"^",1),^TMP($J,"SDWLCU1",2,INST,POS,POSNAM,IEN)=""
"RTN","SDWLCU1",27,0)
 IF +$P($G(^SDWL(409.3,IEN,0)),"^",5)=3 S WLTC3=WLTC3+1 D
"RTN","SDWLCU1",28,0)
 .S SER=+$P($G(^SDWL(409.3,IEN,0)),"^",8),SERN=+$P(^SDWL(409.31,SER,0),"^",1),SERNAM=$$GET1^DIQ(40.7,SERN_",",.01),^TMP($J,"SDWLCU1",3,INST,SER,IEN)=""
"RTN","SDWLCU1",29,0)
 IF +$P($G(^SDWL(409.3,IEN,0)),"^",5)=4 S WLTC4=WLTC4+1 D
"RTN","SDWLCU1",30,0)
 .S CLINIC=+$P($G(^SDWL(409.3,IEN,0)),"^",9),CLINICN=+$P(^SDWL(409.32,CLINIC,0),"^",1),CLNAM=$$GET1^DIQ(44,CLINICN_",",.01),^TMP($J,"SDWLCU1",4,INST,CLINIC,IEN)=""
"RTN","SDWLCU1",31,0)
 Q
"RTN","SDWLCU1",32,0)
DISPLAY ;
"RTN","SDWLCU1",33,0)
 S (CC,COUNT)="" F  S CC=$O(^TMP($J,"EWL",$J,CC)) Q:CC=""  S COUNT=COUNT+1
"RTN","SDWLCU1",34,0)
 Q:COUNT<1
"RTN","SDWLCU1",35,0)
 W #
"RTN","SDWLCU1",36,0)
 W !,COUNT,?10,"ENTRIES IN SD WAIT LIST POINT TO AN INSTITUTION WITH"
"RTN","SDWLCU1",37,0)
 W !,?10,"A STATUS NOT EQUAL TO NATIONAL OR ISN'T A TREATING FACILITY."
"RTN","SDWLCU1",38,0)
 IF WLTC1>.5 S (COUNT1,INST)="" D
"RTN","SDWLCU1",39,0)
 .F  S INST=$O(^TMP($J,"SDWLCU1",1,INST)) Q:INST<1  D
"RTN","SDWLCU1",40,0)
 ..S IEN="" F  S IEN=$O(^TMP($J,"SDWLCU1",1,INST,IEN)) Q:IEN=""  S COUNT1=COUNT1+1
"RTN","SDWLCU1",41,0)
 .W !!,WLTC1,?10,"ENTRIES POINT TO FILE TEAM (404.51) AND "
"RTN","SDWLCU1",42,0)
 .W !,COUNT1,?10,"INSTITUTION(S) MUST BE CORRECTED."
"RTN","SDWLCU1",43,0)
 IF WLTC2>.5 S (COUNT1,INST)="" D
"RTN","SDWLCU1",44,0)
 .F  S INST=$O(^TMP($J,"SDWLCU1",2,INST)) Q:INST<1  D
"RTN","SDWLCU1",45,0)
 ..S IEN="" F  S IEN=$O(^TMP($J,"SDWLCU1",2,INST,IEN)) Q:IEN=""  S COUNT1=COUNT1+1
"RTN","SDWLCU1",46,0)
 .W !!,WLTC2,?10,"ENTRIES POINT TO FILE TEAM POSITION (404.57) AND "
"RTN","SDWLCU1",47,0)
 .W !,COUNT1,?10,"INSTITUTION(S) MUST BE CORRECTED."
"RTN","SDWLCU1",48,0)
 IF WLTC3>.5 S (COUNT1,INST)="" D
"RTN","SDWLCU1",49,0)
 .F  S INST=$O(^TMP($J,"SDWLCU1",3,INST)) Q:INST<1  D
"RTN","SDWLCU1",50,0)
 ..S IEN="" F  S IEN=$O(^TMP($J,"SDWLCU1",3,INST,IEN)) Q:IEN=""  S COUNT1=COUNT1+1
"RTN","SDWLCU1",51,0)
 .W !!,WLTC3,?10,"ENTRIES POINT TO FILE SD WL SERVICE/SPECIALTY (409.31) AND"
"RTN","SDWLCU1",52,0)
 .W !,COUNT1,?10,"INSTITUTION(S) MUST BE CORRECTED."
"RTN","SDWLCU1",53,0)
 IF WLTC4>.5  S (COUNT1,INST)="" D
"RTN","SDWLCU1",54,0)
 .F  S INST=$O(^TMP($J,"SDWLCU1",4,INST)) Q:INST<1  D
"RTN","SDWLCU1",55,0)
 ..S IEN="" F  S IEN=$O(^TMP($J,"SDWLCU1",4,INST,IEN)) Q:IEN=""  S COUNT1=COUNT1+1
"RTN","SDWLCU1",56,0)
 .W !!,WLTC4,?10,"ENTRIES POINT TO FILE SD WL CLINIC LOCATION (409.32) AND"
"RTN","SDWLCU1",57,0)
 .W !,COUNT1,?10,"INSTITUTION(S) MUST BE CORRECTED."
"RTN","SDWLCU1",58,0)
EDIT ;
"RTN","SDWLCU1",59,0)
 I WLTC1="",WLTC2="",WLTC3="",WLTC4="" G MESS
"RTN","SDWLCU1",60,0)
 S X=""
"RTN","SDWLCU1",61,0)
 I WLTC1 S X="1:PCMM TEAM ASSIGNMENT;"
"RTN","SDWLCU1",62,0)
 I WLTC2 S X=X_"2:PCMM POSITION ASSIGNMENT;"
"RTN","SDWLCU1",63,0)
 I WLTC3 S X=X_"3:SERVICE/SPECIALTY;"
"RTN","SDWLCU1",64,0)
 I WLTC4 S X=X_"4:SPECIFIC CLINIC"
"RTN","SDWLCU1",65,0)
 S DIR(0)="SO^"_X
"RTN","SDWLCU1",66,0)
 S DIR("L",1)="      Select Wait List Type:  (or Enter '^' to EXIT)"
"RTN","SDWLCU1",67,0)
 S DIR("L",2)=""
"RTN","SDWLCU1",68,0)
 S:WLTC1 DIR("L",3)="          1. PCMM TEAM ASSIGNMENT"
"RTN","SDWLCU1",69,0)
 S:WLTC2 DIR("L",4)="          2. PCMM POSITION ASSIGNMENT"
"RTN","SDWLCU1",70,0)
 S:WLTC3 DIR("L",5)="          3. SERVICE/SPECIALTY"
"RTN","SDWLCU1",71,0)
 S:WLTC4 DIR("L",6)="          4. SPECIFIC CLINIC"
"RTN","SDWLCU1",72,0)
 S DIR("A")="Select Wait List Type:  (or Enter '^' to EXIT)"
"RTN","SDWLCU1",73,0)
 D ^DIR G EXIT:$D(DUOUT),EDIT:Y=""
"RTN","SDWLCU1",74,0)
 I Y=4!(Y=3) S SDWLTY=+Y,SDWLR=SDWLTY_"^SDWLCU3" D @SDWLR G DISPLAY
"RTN","SDWLCU1",75,0)
 I Y=1!(Y=2) S SDWLTY=+Y,SDWLR=SDWLTY_"^SDWLCU2" D @SDWLR G DISPLAY
"RTN","SDWLCU1",76,0)
MESS ;
"RTN","SDWLCU1",77,0)
 S (CC,COUNT)="" F  S CC=$O(^TMP($J,"EWL",$J,CC)) Q:CC=""  S COUNT=COUNT+1
"RTN","SDWLCU1",78,0)
 Q:COUNT>0
"RTN","SDWLCU1",79,0)
 S (IEN,PAT,HEAD)="",CC=0
"RTN","SDWLCU1",80,0)
 IF HEAD="" S ^TMP($J,"EWL",$J,.1,0)="STATION: "_DUZ(2) S HEAD=1
"RTN","SDWLCU1",81,0)
 F  S PAT=$O(^SDWL(409.3,"B",PAT)) Q:PAT=""  D
"RTN","SDWLCU1",82,0)
 .S IEN="" F  S IEN=$O(^SDWL(409.3,"B",PAT,IEN)) Q:IEN=""  D
"RTN","SDWLCU1",83,0)
 ..IF $P($G(^SDWL(409.3,IEN,0)),"^",3)="" D
"RTN","SDWLCU1",84,0)
 ...S ^TMP($J,"EWL",$J,.2,0)="The following EWL entries have no Institution field entry." S HEAD=1
"RTN","SDWLCU1",85,0)
 ...S NN="",NAME="" S NN=$P($G(^SDWL(409.3,IEN,0)),"^",1),NAME=$$GET1^DIQ(2,NN_",",.01,"E")
"RTN","SDWLCU1",86,0)
 ...S CC=CC+1 S ^TMP($J,"EWL",$J,CC,0)="NAME: "_NAME_"      IEN: "_IEN
"RTN","SDWLCU1",87,0)
 ...Q
"RTN","SDWLCU1",88,0)
 IF CC>.5 S ^TMP($J,"EWL",$J,CC+.5,0)="TOTAL null Institution entries: "_CC
"RTN","SDWLCU1",89,0)
 D CLINIC
"RTN","SDWLCU1",90,0)
 S CC=CC+1 S ^TMP($J,"EWL",$J,CC,0)=" "
"RTN","SDWLCU1",91,0)
 S CC=CC+1 S ^TMP($J,"EWL",$J,CC,0)="PATCH SD*5.3*280 EWL  CLEANUP IS COMPLETE."
"RTN","SDWLCU1",92,0)
 N XMSUB,XMY,XMTEXT,XMDUZ
"RTN","SDWLCU1",93,0)
 S XMSUB="SD*5.3*280 EWL REPORT STATION#"_DUZ(2)
"RTN","SDWLCU1",94,0)
 S XMY(DUZ)=""
"RTN","SDWLCU1",95,0)
 S XMY("G.EWL PROBLEMS@FORUM.VA.GOV")=""
"RTN","SDWLCU1",96,0)
 S XMTEXT="^TMP($J,""EWL"",$J,"
"RTN","SDWLCU1",97,0)
 S XMDUZ="POSTMASTER"
"RTN","SDWLCU1",98,0)
 D ^XMD
"RTN","SDWLCU1",99,0)
 Q
"RTN","SDWLCU1",100,0)
CLINIC ;Display all clinics in file 409.32 that need to be cleaned up in file 44 in mail message
"RTN","SDWLCU1",101,0)
 S INST="",CLINIC=0,ZCC=CC
"RTN","SDWLCU1",102,0)
 F  S CLINIC=$O(^SDWL(409.32,CLINIC)) Q:'CLINIC  D
"RTN","SDWLCU1",103,0)
 . S INST=$$GET1^DIQ(44,+$G(^SDWL(409.32,CLINIC,0))_",",3,"I")
"RTN","SDWLCU1",104,0)
 . I $$GET1^DIQ(4,INST_",",11,"I")'="N"!('$$TF^XUAF4(INST)) D
"RTN","SDWLCU1",105,0)
 .. S CC=CC+1
"RTN","SDWLCU1",106,0)
 .. S ^TMP($J,"EWL",$J,CC,0)=$$GET1^DIQ(44,+$G(^SDWL(409.32,CLINIC,0))_",",.01)
"RTN","SDWLCU1",107,0)
 I ZCC'=CC D
"RTN","SDWLCU1",108,0)
 . S ^TMP($J,"EWL",$J,ZCC+.6,0)=" "
"RTN","SDWLCU1",109,0)
 . S ^TMP($J,"EWL",$J,ZCC+.7,0)="The following list of clinics need to have the institution cleaned in file 44."
"RTN","SDWLCU1",110,0)
 Q
"RTN","SDWLCU1",111,0)
EXIT ;
"RTN","SDWLCU1",112,0)
 K ^TMP($J,"SDWLCU1"),^TMP($J,"EWL")
"RTN","SDWLCU1",113,0)
 K IEN,REC,NUM,NN,COUNT,CC,TOTAL,WLTC1,WLTC2,WLTC3,WLTC4,INST,CODE,NAME,ANS,HEAD,INCK
"RTN","SDWLCU1",114,0)
 K INST1,INST2,INST3,INST4,POS,POSNAM,TEAM,TEAMN,CLINIC,CLINICN,CLNAM,SER,SERN,SERNAM
"RTN","SDWLCU1",115,0)
 K TEAM,TEAMN,INST,SSN,SDWLERR
"RTN","SDWLCU1",116,0)
 K C,COUNT1,CS,ENTRY,PAT,SDREC,SDWLDA,SDWLI,SDWLIENS,SDWLIN,SDWLINS
"RTN","SDWLCU1",117,0)
 K SDWLINSN,SDWLINST,SDWLIX,SDWLIZ,SDWLPO,SDWLR,SDWLSC,SDWLSCX,SDWLSS
"RTN","SDWLCU1",118,0)
 K SDWLSSN,SDWLSSX,SDWLTM,SDWLTY,TAG,SDWLSSV,ZCC
"RTN","SDWLCU1",119,0)
 Q
"RTN","SDWLCU2")
0^4^B8135099
"RTN","SDWLCU2",1,0)
SDWLCU2 ;IOFO BAY PINES/DMR - EWL FILE 409.3 CLEANUP ;2/4/03
"RTN","SDWLCU2",2,0)
 ;;5.3;scheduling;**280**;AUG 13 1993
"RTN","SDWLCU2",3,0)
1 ;
"RTN","SDWLCU2",4,0)
 S (TEAM,TEAMN,INST,NAME,SDWLERR)=""
"RTN","SDWLCU2",5,0)
START ;
"RTN","SDWLCU2",6,0)
 F  S INST=$O(^TMP($J,"SDWLCU1",1,INST)) Q:INST<1  D  Q:SDWLERR=1
"RTN","SDWLCU2",7,0)
 .S TEAM="" F  S TEAM=$O(^TMP($J,"SDWLCU1",1,INST,TEAM)) Q:TEAM<1  D  Q:SDWLERR=1
"RTN","SDWLCU2",8,0)
 ..S TEAMN="" F  S TEAMN=$O(^TMP($J,"SDWLCU1",1,INST,TEAM,TEAMN)) Q:TEAMN=""  D  Q:SDWLERR=1
"RTN","SDWLCU2",9,0)
 ...S NAME=$$GET1^DIQ(4,INST_",",.01)
"RTN","SDWLCU2",10,0)
 ...W !!,"Please enter a national institution!"
"RTN","SDWLCU2",11,0)
 ...W !,"TEAM: "_TEAMN_"    "_"INSTITUTION: "_NAME
"RTN","SDWLCU2",12,0)
 ...S SDWLERR="" D EDIT Q:SDWLERR=1
"RTN","SDWLCU2",13,0)
 ...D UDWL
"RTN","SDWLCU2",14,0)
 Q
"RTN","SDWLCU2",15,0)
EDIT ;
"RTN","SDWLCU2",16,0)
 S DIC(0)="AEQMNZ",DIC=4,DIC("S")="I $P(^(0),U,11)=""N"",$$TF^XUAF4(+Y)",DIC("A")="Select Institution: " D ^DIC
"RTN","SDWLCU2",17,0)
 I X["^" S SDWLERR=1 Q
"RTN","SDWLCU2",18,0)
 I Y<1 W " Select a New National Institution or '^' to quit." G EDIT
"RTN","SDWLCU2",19,0)
CALL ;
"RTN","SDWLCU2",20,0)
 K SDTEAM S SDREC=+Y,SDWLIENS=TEAM_","
"RTN","SDWLCU2",21,0)
 S SDTEAM(404.51,SDWLIENS,.07)=SDREC
"RTN","SDWLCU2",22,0)
 D UPDATE^DIE("","SDTEAM","SDWLMSG")
"RTN","SDWLCU2",23,0)
 Q
"RTN","SDWLCU2",24,0)
UDWL ;
"RTN","SDWLCU2",25,0)
 S IEN=""
"RTN","SDWLCU2",26,0)
 F  S IEN=$O(^TMP($J,"SDWLCU1",1,INST,TEAM,TEAMN,IEN)) Q:IEN<1  D
"RTN","SDWLCU2",27,0)
 .S SDTEAM(409.3,IEN_",",2)=SDREC D UPDATE^DIE("","SDTEAM","SDWLMSG")
"RTN","SDWLCU2",28,0)
 .K ^TMP($J,"EWL",$J,IEN),^TMP($J,"SDWLCU1",1,INST,TEAM,TEAMN,IEN)
"RTN","SDWLCU2",29,0)
 S WLTC1=""
"RTN","SDWLCU2",30,0)
 Q
"RTN","SDWLCU2",31,0)
2 ;
"RTN","SDWLCU2",32,0)
 S (POS,POSNAM,INST,NAME,SDPOS,IEN,INST,SDWLERR)=""
"RTN","SDWLCU2",33,0)
 F  S INST=$O(^TMP($J,"SDWLCU1",2,INST)) Q:INST<1  D  Q:SDWLERR=1
"RTN","SDWLCU2",34,0)
 .S POS="" F  S POS=$O(^TMP($J,"SDWLCU1",2,INST,POS)) Q:POS<1  D  Q:SDWLERR=1
"RTN","SDWLCU2",35,0)
 ..S POSNAM="" F  S POSNAM=$O(^TMP($J,"SDWLCU1",2,INST,POS,POSNAM)) Q:POSNAM=""  D  Q:SDWLERR=1
"RTN","SDWLCU2",36,0)
 ...S NAME=$$GET1^DIQ(4,INST_",",.01)
"RTN","SDWLCU2",37,0)
 ...W !!,"Please enter a national institution!"
"RTN","SDWLCU2",38,0)
 ...W !,"POSITION: "_POSNAM_"     "_"INSTITUTION: "_NAME
"RTN","SDWLCU2",39,0)
 ...D EDIT2
"RTN","SDWLCU2",40,0)
 Q
"RTN","SDWLCU2",41,0)
EDIT2 ;
"RTN","SDWLCU2",42,0)
 S DIC(0)="AEQMNZ",DIC=4,DIC("S")="I $P(^(0),U,11)=""N"",$$TF^XUAF4(+Y)",DIC("A")="Select Institution: " D ^DIC
"RTN","SDWLCU2",43,0)
 I X["^" S SDWLERR=1 Q
"RTN","SDWLCU2",44,0)
 I Y<1 W " Select a New National Institution or '^' to quit." G EDIT2
"RTN","SDWLCU2",45,0)
CALL2 ;
"RTN","SDWLCU2",46,0)
 S TEAM=$$GET1^DIQ(404.57,POS_",",.02,"I")
"RTN","SDWLCU2",47,0)
 I TEAM>0 D CALL
"RTN","SDWLCU2",48,0)
 E  W !,"Team missing in file 404.51 for",POSNAM
"RTN","SDWLCU2",49,0)
 K SDPOS S SDREC=+Y,SDWLIENS=POS_","
"RTN","SDWLCU2",50,0)
 S IEN=""
"RTN","SDWLCU2",51,0)
 F  S IEN=$O(^TMP($J,"SDWLCU1",2,INST,POS,POSNAM,IEN)) Q:IEN<1  D
"RTN","SDWLCU2",52,0)
 .S SDPOS(409.3,IEN_",",2)=SDREC D UPDATE^DIE("","SDPOS","SDWLMSG")
"RTN","SDWLCU2",53,0)
 .K ^TMP($J,"EWL",$J,IEN),^TMP($J,"SDWLCU1",2,INST,POS,POSNAM,IEN)
"RTN","SDWLCU2",54,0)
 S WLTC2=""
"RTN","SDWLCU2",55,0)
 Q
"RTN","SDWLCU3")
0^5^B12290803
"RTN","SDWLCU3",1,0)
SDWLCU3 ;IOFO BAY PINES/DMR - EWL FILE 409.3 CLEANUP ;2/4/03
"RTN","SDWLCU3",2,0)
 ;;5.3;scheduling;**280**;AUG 13 1993
"RTN","SDWLCU3",3,0)
 ;
"RTN","SDWLCU3",4,0)
 ;
"RTN","SDWLCU3",5,0)
 ;
"RTN","SDWLCU3",6,0)
3 ;service specialty edit
"RTN","SDWLCU3",7,0)
 S SDWLSS="",SDWLINS="",SDWLERR=""
"RTN","SDWLCU3",8,0)
 F  S SDWLINS=$O(^TMP($J,"SDWLCU1",SDWLTY,SDWLINS)) Q:SDWLINS=""  D  Q:SDWLERR=1
"RTN","SDWLCU3",9,0)
 .F  S SDWLSS=$O(^TMP($J,"SDWLCU1",SDWLTY,SDWLINS,SDWLSS)) Q:SDWLSS=""  D  Q:SDWLERR=1
"RTN","SDWLCU3",10,0)
 ..I '$D(SDWLSSV) S SDWLSSV=SDWLSS
"RTN","SDWLCU3",11,0)
 ..S NAME=$$GET1^DIQ(4,SDWLINS_",",.01)
"RTN","SDWLCU3",12,0)
 ..S SDWLSSN=$P(^SDWL(409.31,SDWLSS,0),U,1)
"RTN","SDWLCU3",13,0)
 ..W !,"SERVICE SPECIALTY: ",$$GET1^DIQ(40.7,SDWLSSN_",",.01),"   INSTITUTION: ",NAME
"RTN","SDWLCU3",14,0)
 ..S SDWLSSX=$O(^SDWL(409.31,SDWLSS,"I","B",SDWLINS,0)) D:SDWLSSX'="" SEL
"RTN","SDWLCU3",15,0)
 S WLTC3=""
"RTN","SDWLCU3",16,0)
 Q
"RTN","SDWLCU3",17,0)
SEL ;select new Insitition
"RTN","SDWLCU3",18,0)
 N DIR
"RTN","SDWLCU3",19,0)
 S DIR("A")="Select Institution: "
"RTN","SDWLCU3",20,0)
 S DIR(0)="PAO^4:EMZ",DIR("S")="I $P(^DIC(4,+Y,0),U,11)=""N"",$$TF^XUAF4(+Y)" D ^DIR
"RTN","SDWLCU3",21,0)
 I X["^" S SDWLERR=1 Q
"RTN","SDWLCU3",22,0)
 I Y<1 W *7,"Invalid Entry" G SEL
"RTN","SDWLCU3",23,0)
 S SDWLINSN=+Y
"RTN","SDWLCU3",24,0)
 D C3,C31 K DIC,D0,D1
"RTN","SDWLCU3",25,0)
 Q
"RTN","SDWLCU3",26,0)
C3 ;
"RTN","SDWLCU3",27,0)
 ;check entry to see if it already exist
"RTN","SDWLCU3",28,0)
 S DA=SDWLSSX,DA(1)=SDWLSS
"RTN","SDWLCU3",29,0)
 I $O(^SDWL(409.31,SDWLSS,"I","B",SDWLINSN,0)) D
"RTN","SDWLCU3",30,0)
 . W !,"Institution already exists for this Specialty...deleting."
"RTN","SDWLCU3",31,0)
 . S DIK="^SDWL(409.31,"_DA(1)_","_"""I"""_"," D ^DIK
"RTN","SDWLCU3",32,0)
 E  D
"RTN","SDWLCU3",33,0)
 . W ! S DR=".01////^S X=SDWLINSN",DIE="^SDWL(409.31,"_DA(1)_","_"""I"""_"," D ^DIE
"RTN","SDWLCU3",34,0)
 K DA,DA(1),DR,DIE,DIK
"RTN","SDWLCU3",35,0)
 Q
"RTN","SDWLCU3",36,0)
C31 ;update SD WAIT LIST PATIENT file 409.3
"RTN","SDWLCU3",37,0)
 S SDWLDA="" F  S SDWLDA=$O(^TMP($J,"SDWLCU1",SDWLTY,SDWLINS,SDWLSSV,SDWLDA)) Q:SDWLDA=""  D
"RTN","SDWLCU3",38,0)
 .S DR="2////^S X=SDWLINSN",DIE="^SDWL(409.3,",DA=SDWLDA D ^DIE
"RTN","SDWLCU3",39,0)
 .K DR,DIE,DA
"RTN","SDWLCU3",40,0)
 .K ^TMP($J,"SDWLCU1",SDWLTY,SDWLINS,SDWLSSV,SDWLDA),^TMP($J,"EWL",$J,SDWLDA)
"RTN","SDWLCU3",41,0)
 Q
"RTN","SDWLCU3",42,0)
4 ;specific clinic edit
"RTN","SDWLCU3",43,0)
 S SDWLSC="",SDWLINS="",SDWLERR=""
"RTN","SDWLCU3",44,0)
 F  S SDWLINS=$O(^TMP($J,"SDWLCU1",SDWLTY,SDWLINS)) Q:SDWLINS=""  D  Q:SDWLERR=1
"RTN","SDWLCU3",45,0)
 .F  S SDWLSC=$O(^TMP($J,"SDWLCU1",SDWLTY,SDWLINS,SDWLSC)) Q:SDWLSC=""  D  Q:SDWLERR=1
"RTN","SDWLCU3",46,0)
 ..S SDWLSCX=$P(^SDWL(409.32,SDWLSC,0),U,1)
"RTN","SDWLCU3",47,0)
 ..S SDWLINSN=$P($G(^SC(SDWLSCX,0)),U,4),X=$$GET1^DIQ(4,SDWLINSN_",",11) I X'["N"!('$$TF^XUAF4(SDWLINSN)) D SEL1
"RTN","SDWLCU3",48,0)
 ..;Check 409.32
"RTN","SDWLCU3",49,0)
 ..I $P(^SDWL(409.32,SDWLSC,0),U,6)'=SDWLINSN  D
"RTN","SDWLCU3",50,0)
 ...K ^SDWL(409.32,"C",SDWLINS) S $P(^SDWL(409.32,SDWLSC,0),U,6)=SDWLINSN,^SDWL(409.32,"C",SDWLINSN,SDWLSC)=""
"RTN","SDWLCU3",51,0)
 ...S SDWLIN(44,+$P(^SDWL(409.32,SDWLSC,0),"^")_",",3)=SDWLINSN D UPDATE^DIE("","SDWLIN","SDWLMSG") K SDWLIN
"RTN","SDWLCU3",52,0)
 ..D C41
"RTN","SDWLCU3",53,0)
 S WLTC4=""
"RTN","SDWLCU3",54,0)
 K ^SDWL(409.32,"ACT") S DIK="^SDWL(409.32," D IXALL^DIK
"RTN","SDWLCU3",55,0)
 Q
"RTN","SDWLCU3",56,0)
C41 ;update wait list file
"RTN","SDWLCU3",57,0)
 S SDWLDA="" F  S SDWLDA=$O(^TMP($J,"SDWLCU1",SDWLTY,SDWLINS,SDWLSC,SDWLDA)) Q:SDWLDA=""  D 
"RTN","SDWLCU3",58,0)
 .S SDWLIN(409.3,SDWLDA_",",2)=SDWLINSN D UPDATE^DIE("","SDWLIN","SDWLMSG")
"RTN","SDWLCU3",59,0)
 .K ^TMP($J,"SDWLCU1",SDWLTY,SDWLINS,SDWLSC,SDWLDA),^TMP($J,"EWL",$J,SDWLDA),SDWLIN
"RTN","SDWLCU3",60,0)
 Q
"RTN","SDWLCU3",61,0)
SEL1 ;select valid institution
"RTN","SDWLCU3",62,0)
 N DIR
"RTN","SDWLCU3",63,0)
 W !!,"Invalid Institution. Please select a National Institution.",!
"RTN","SDWLCU3",64,0)
 W "CLINIC: ",CLNAM,"   INSTITUTION:",$$GET1^DIQ(4,SDWLINS_",",.01)
"RTN","SDWLCU3",65,0)
 S DIR("A")="Select Institution: "
"RTN","SDWLCU3",66,0)
 S DIR(0)="PAO^4:EMZ",DIR("S")="I $P(^DIC(4,+Y,0),U,11)=""N"",$$TF^XUAF4(+Y)" D ^DIR
"RTN","SDWLCU3",67,0)
 I X["^" S SDWLERR=1 Q
"RTN","SDWLCU3",68,0)
 I Y<1 W *7,"Invalid Entry" G SEL1
"RTN","SDWLCU3",69,0)
 S SDWLINSN=+Y
"RTN","SDWLCU3",70,0)
 Q
"RTN","SDWLCU4")
0^^B873886
"RTN","SDWLCU4",1,0)
SDWLCU4 ;IOFO BAY PINES/JS - EWL FILE 409.3 CLEANUP ;2/4/03
"RTN","SDWLCU4",2,0)
 ;;5.3;scheduling;**280**;AUG 13 1993
"RTN","SDWLCU4",3,0)
 I '$D(^SCTM(404.46,"B","1.2.3.2")) D
"RTN","SDWLCU4",4,0)
         .K DO S DIC(0)="LM",DIC("DR")=".02////1;.03////"_DT,DIC="^SCTM(404.46,",X="1.2.3.2" D FILE^DICN
"RTN","SDWLCU4",5,0)
         I '$D(^SCTM(404.45,"B","SD*5.3*280")) D
"RTN","SDWLCU4",6,0)
         .S ENTRY=$O(^SCTM(404.46,"B","1.2.3.2",0))
"RTN","SDWLCU4",7,0)
         .S DIC("DR")=".02////"_(+ENTRY)_";.03////"_DT_";.04////1",DIC(0)="LM"
"RTN","SDWLCU4",8,0)
         .K DO S X="SD*5.3*280",DIC="^SCTM(404.45," D FILE^DICN
"RTN","SDWLCU5")
0^6^B26277848
"RTN","SDWLCU5",1,0)
SDWLCU5 ;IOFO BAY PINES/TEH - EWL FILE 409.3 CLEANUP ;2/4/03
"RTN","SDWLCU5",2,0)
 ;;5.3;scheduling;**280**;AUG 13 1993
"RTN","SDWLCU5",3,0)
EN ;
"RTN","SDWLCU5",4,0)
 W !!,"Checking file 404.51 one last time.",!
"RTN","SDWLCU5",5,0)
 S SDWLERR="",TEAM=0 F  S TEAM=$O(^SCTM(404.51,TEAM)) Q:'TEAM  D  Q:SDWLERR=1
"RTN","SDWLCU5",6,0)
 . S INST=$$GET1^DIQ(404.51,TEAM_",",.07,"I")
"RTN","SDWLCU5",7,0)
 . S CODE=$$GET1^DIQ(4,INST_",",11,"I")
"RTN","SDWLCU5",8,0)
 . S INCK=$$TF^XUAF4(INST)
"RTN","SDWLCU5",9,0)
 . I CODE'="N"!('INCK) D
"RTN","SDWLCU5",10,0)
 .. W !!,"TEAM: ",$$GET1^DIQ(404.51,TEAM_",",.01),"    INSTITUTION: "
"RTN","SDWLCU5",11,0)
 .. W $$GET1^DIQ(4,INST_",",.01)
"RTN","SDWLCU5",12,0)
 .. D EDIT^SDWLCU2
"RTN","SDWLCU5",13,0)
 Q:SDWLERR=1
"RTN","SDWLCU5",14,0)
 ;
"RTN","SDWLCU5",15,0)
 W !!,"Checking file 409.31 one last time.",!
"RTN","SDWLCU5",16,0)
40931 S SDWLSS=0 F  S SDWLSS=$O(^SDWL(409.31,SDWLSS)) Q:'SDWLSS  D  Q:SDWLERR=1
"RTN","SDWLCU5",17,0)
 . S SDWLINS="" F  S SDWLINS=$O(^SDWL(409.31,SDWLSS,"I","B",SDWLINS)) Q:'SDWLINS  D  Q:SDWLERR=1
"RTN","SDWLCU5",18,0)
 .. S CODE=$$GET1^DIQ(4,SDWLINS_",",11,"I")
"RTN","SDWLCU5",19,0)
 .. S INCK=$$TF^XUAF4(SDWLINS)
"RTN","SDWLCU5",20,0)
 .. I CODE'="N"!('INCK) D
"RTN","SDWLCU5",21,0)
 ... W !!,"SERVICE SPECIALTY: ",$$GET1^DIQ(409.31,SDWLSS_",",.01),"    INSTITUTION: "
"RTN","SDWLCU5",22,0)
 ... W $$GET1^DIQ(4,SDWLINS_",",.01)
"RTN","SDWLCU5",23,0)
 ... D GETINS Q:SDWLERR=1
"RTN","SDWLCU5",24,0)
 ... S SDWLSSX="" F  S SDWLSSX=$O(^SDWL(409.31,SDWLSS,"I","B",SDWLINS,SDWLSSX)) Q:'SDWLSSX  D  Q:SDWLERR=1
"RTN","SDWLCU5",25,0)
 .... D C3^SDWLCU3
"RTN","SDWLCU5",26,0)
 Q:SDWLERR=1
"RTN","SDWLCU5",27,0)
40932 W !!,"Checking file 409.32 one last time.",!
"RTN","SDWLCU5",28,0)
 S SDWLSC=0 F  S SDWLSC=$O(^SDWL(409.32,SDWLSC)) Q:'SDWLSC  D  Q:SDWLERR=1
"RTN","SDWLCU5",29,0)
 . S SDWLINS=$$GET1^DIQ(409.32,SDWLSC_",",.02,"I")
"RTN","SDWLCU5",30,0)
 . S CODE=$$GET1^DIQ(4,SDWLINS_",",11,"I")
"RTN","SDWLCU5",31,0)
 . S INCK=$$TF^XUAF4(SDWLINS)
"RTN","SDWLCU5",32,0)
 . I CODE'="N"!('INCK) D
"RTN","SDWLCU5",33,0)
 .. W !!,"CLINIC: ",$$GET1^DIQ(409.32,SDWLSC_",",.01),"    INSTITUTION: "
"RTN","SDWLCU5",34,0)
 .. W $$GET1^DIQ(4,SDWLINS_",",.01)
"RTN","SDWLCU5",35,0)
 .. D GETINS Q:SDWLERR=1
"RTN","SDWLCU5",36,0)
 .. K ^SDWL(409.32,"C",+SDWLINS) S $P(^SDWL(409.32,SDWLSC,0),U,6)=SDWLINSN,^SDWL(409.32,"C",SDWLINSN,SDWLSC)=""
"RTN","SDWLCU5",37,0)
 .. S SDWLIN(44,+$P(^SDWL(409.32,SDWLSC,0),"^")_",",3)=SDWLINSN D UPDATE^DIE("","SDWLIN","SDWLMSG") K SDWLIN
"RTN","SDWLCU5",38,0)
 K ^SDWL(409.32,"ACT") S DIK="^SDWL(409.32," D IXALL^DIK
"RTN","SDWLCU5",39,0)
 Q:SDWLERR=1
"RTN","SDWLCU5",40,0)
 W !!,"Checking file 409.3 one last time.",!
"RTN","SDWLCU5",41,0)
 S SDWLERR=""
"RTN","SDWLCU5",42,0)
 S SDWLDA=0,TAG="CHK" F  S SDWLDA=$O(^SDWL(409.3,SDWLDA)) Q:SDWLDA<1  D  Q:SDWLERR=1
"RTN","SDWLCU5",43,0)
 .S X=$G(^SDWL(409.3,SDWLDA,0)),SDWLINST=$P(X,"^",3),SDWLTY=$P(X,"^",5)
"RTN","SDWLCU5",44,0)
 .Q:'SDWLTY
"RTN","SDWLCU5",45,0)
 .S TAG="CHK",TAG=TAG_SDWLTY,C=0 K ^TMP($J,"SDWLCU5",$J) D @TAG
"RTN","SDWLCU5",46,0)
 W !,"Done."
"RTN","SDWLCU5",47,0)
 Q
"RTN","SDWLCU5",48,0)
CHK1 ;CHECK FOR INSTITUTION VALIDILITY
"RTN","SDWLCU5",49,0)
 S SDWLERR=0
"RTN","SDWLCU5",50,0)
 I SDWLTY=1 S SDWLI=0 F  S SDWLI=$O(^SCTM(404.51,"AINST",SDWLI)) Q:SDWLI=""  I $D(^DIC(4,SDWLI)) S C=C+1,^TMP($J,"SDWLCU5",$J,C,SDWLI)="",^TMP($J,"SDWLCU5",$J,"B",SDWLI)=""
"RTN","SDWLCU5",51,0)
 I $D(^TMP($J,"SDWLCU5",$J,"B",SDWLINST)) Q
"RTN","SDWLCU5",52,0)
 K ^TMP($J,"SDWLCU5",$J,"B")
"RTN","SDWLCU5",53,0)
 I 'C S SDWLINSN=$S($D(DUZ(2)):DUZ(2),1:"") D CH1E Q
"RTN","SDWLCU5",54,0)
 I C=1 S SDWLINSN=$O(^TMP($J,"SDWLCU5",$J,C,0)) D CH1E Q
"RTN","SDWLCU5",55,0)
 W !,"Please select a valid Institution for this record from the following list for",!
"RTN","SDWLCU5",56,0)
 D DIS
"RTN","SDWLCU5",57,0)
 S C=0,SDWLI="" F  S C=$O(^TMP($J,"SDWLCU5",$J,C)) Q:C<1  D
"RTN","SDWLCU5",58,0)
 .F  S SDWLI=$O(^TMP($J,"SDWLCU5",$J,C,SDWLI)) Q:SDWLI=""  W !,?20,C,". ",$$GET1^DIQ(4,SDWLI_",",.01) S CS=C
"RTN","SDWLCU5",59,0)
CHK10 W ! S DIR(0)="NO^1:"_CS D ^DIR
"RTN","SDWLCU5",60,0)
 I Y<1!($D(DUOUT)) W !,"Response Required." S SDWLERR=1 Q
"RTN","SDWLCU5",61,0)
 S SDWLINSN=$O(^TMP($J,"SDWLCU5",$J,+Y,0))
"RTN","SDWLCU5",62,0)
CH1E S SDWLINS(409.3,SDWLDA_",",2)=SDWLINSN D UPDATE^DIE("","SDWLINS","SDWLMSG")
"RTN","SDWLCU5",63,0)
 S TAG="CHK"
"RTN","SDWLCU5",64,0)
 Q
"RTN","SDWLCU5",65,0)
CHK3 ;
"RTN","SDWLCU5",66,0)
 S SDWLERR=""
"RTN","SDWLCU5",67,0)
 S SDWLI=$P(^SDWL(409.3,SDWLDA,0),U,8) I '$D(^SDWL(409.31,SDWLI,"I","B",SDWLINST)) D  Q:SDWLERR=1
"RTN","SDWLCU5",68,0)
 .S SDWLIX="",C=0 F  S SDWLIX=$O(^SDWL(409.31,SDWLI,"I","B",SDWLIX)) Q:SDWLIX=""  S C=C+1,^TMP($J,"SDWLCU5",$J,C,SDWLIX)="",^TMP($J,"SDWLCU5",$J,"B",SDWLIX)=""
"RTN","SDWLCU5",69,0)
 .I 'C S SDWLINSN=$S($D(DUZ(2)):DUZ(2),1:""),Y=1 D CHE3 Q
"RTN","SDWLCU5",70,0)
 .I C=1 S SDWLINSN=$O(^TMP($J,"SDWLCU5",$J,C,0)),Y=1 D CHE3 Q
"RTN","SDWLCU5",71,0)
 .W !,"Please select a valid Institution for this record from the following list for",!
"RTN","SDWLCU5",72,0)
 .D DIS
"RTN","SDWLCU5",73,0)
 .S C=0,SDWLIZ=0 F  S SDWLIZ=$O(^SDWL(409.31,SDWLI,"I","B",SDWLIZ)) Q:SDWLIZ=""  D
"RTN","SDWLCU5",74,0)
 ..Q:$$GET1^DIQ(4,SDWLIZ_",",11,"I")'="N"!('$$TF^XUAF4(SDWLIZ))
"RTN","SDWLCU5",75,0)
 ..S C=C+1 W !,?20,C,". ",$$GET1^DIQ(4,SDWLIZ_",",.01)
"RTN","SDWLCU5",76,0)
 .W ! S DIR(0)="NO^1:"_C D ^DIR
"RTN","SDWLCU5",77,0)
 .I $D(DUOUT)!(Y="") S SDWLERR=1 Q
"RTN","SDWLCU5",78,0)
 .S SDWLINSN=$O(^TMP($J,"SDWLCU5",$J,+Y,0))
"RTN","SDWLCU5",79,0)
 .D CHE3
"RTN","SDWLCU5",80,0)
 Q
"RTN","SDWLCU5",81,0)
CHE3 ;
"RTN","SDWLCU5",82,0)
 G CHK3:Y<0
"RTN","SDWLCU5",83,0)
 S SDWLINS(409.3,SDWLDA_",",2)=SDWLINSN D UPDATE^DIE("","SDWLINS","SDWLMSG")
"RTN","SDWLCU5",84,0)
 S TAG="CHK"
"RTN","SDWLCU5",85,0)
 Q
"RTN","SDWLCU5",86,0)
CHK4 ;
"RTN","SDWLCU5",87,0)
 S SDWLI=$P(^SDWL(409.3,SDWLDA,0),U,9) I $P(^SDWL(409.32,SDWLI,0),U,6)'=SDWLINST D
"RTN","SDWLCU5",88,0)
 .D DIS
"RTN","SDWLCU5",89,0)
 .S SDWLINSN=$P(^SDWL(409.32,SDWLI,0),U,6),SDWLINS(409.3,SDWLDA_",",2)=SDWLINSN D UPDATE^DIE("","SDWLINS","SDWLMSG")
"RTN","SDWLCU5",90,0)
 Q
"RTN","SDWLCU5",91,0)
CHK2 ;
"RTN","SDWLCU5",92,0)
 S SDWLPO=$P($G(^SDWL(409.3,SDWLDA,0)),U,7),SDWLTM=$P($G(^SCTM(404.57,SDWLPO,0)),U,2),SDWLINSN=$P($G(^SCTM(404.51,SDWLTM,0)),U,7)
"RTN","SDWLCU5",93,0)
 I SDWLINST'=SDWLINSN D
"RTN","SDWLCU5",94,0)
 .S SDWLINS(409.3,SDWLDA_",",2)=SDWLINSN D UPDATE^DIE("","SDWLINS","SDWLMSG")
"RTN","SDWLCU5",95,0)
 S TAG="CHK"
"RTN","SDWLCU5",96,0)
 Q
"RTN","SDWLCU5",97,0)
DIS ;display record
"RTN","SDWLCU5",98,0)
 S NN=$P($G(^SDWL(409.3,SDWLDA,0)),"^"),NAME=$$GET1^DIQ(2,NN_",",.01,"E")
"RTN","SDWLCU5",99,0)
 S SSN=$$GET1^DIQ(2,NN_",",.09)
"RTN","SDWLCU5",100,0)
 W !,"Record#: ",SDWLDA,"  Patient: ",NAME," (",SSN,")",!!
"RTN","SDWLCU5",101,0)
 Q
"RTN","SDWLCU5",102,0)
GETINS ;Get institution
"RTN","SDWLCU5",103,0)
 N DIR
"RTN","SDWLCU5",104,0)
 S DIR("A")="Select Institution: "
"RTN","SDWLCU5",105,0)
        S DIR(0)="PAO^4:EMZ",DIR("S")="I $P(^DIC(4,+Y,0),U,11)=""N"",$$TF^XUAF4(+Y)" D ^DIR
"RTN","SDWLCU5",106,0)
        I X["^" S SDWLERR=1 Q
"RTN","SDWLCU5",107,0)
 I Y<1 W *7,"Invalid Entry" G GETINS
"RTN","SDWLCU5",108,0)
        S SDWLINSN=+Y
"RTN","SDWLCU5",109,0)
        Q
"RTN","SDWLE111")
0^2^B21608749
"RTN","SDWLE111",1,0)
SDWLE111 ;IOFO BAY PINES/TEH - WAITING LIST-ENTER/EDIT - WAIT LIST TYPE/INSTUTITION ;20 Aug 2002
"RTN","SDWLE111",2,0)
 ;;5.3;scheduling;**263,273,280**;AUG 13 1993
"RTN","SDWLE111",3,0)
 ;
"RTN","SDWLE111",4,0)
 ;
"RTN","SDWLE111",5,0)
 ;******************************************************************
"RTN","SDWLE111",6,0)
 ;                             CHANGE LOG
"RTN","SDWLE111",7,0)
 ;                                               
"RTN","SDWLE111",8,0)
 ;   DATE                        PATCH                   DESCRIPTION
"RTN","SDWLE111",9,0)
 ;   ----                        -----                   -----------
"RTN","SDWLE111",10,0)
 ;10/01/2002                                             263                                             Logical Order Change   
"RTN","SDWLE111",11,0)
 ;12/02/2002                      273                    line EN2+19 add '/' 
"RTN","SDWLE111",12,0)
 ;   
"RTN","SDWLE111",13,0)
 ;      
"RTN","SDWLE111",14,0)
 ;
"RTN","SDWLE111",15,0)
 ;ASK WAIT LIST TYPE
"RTN","SDWLE111",16,0)
 ;
"RTN","SDWLE111",17,0)
EN ;
"RTN","SDWLE111",18,0)
 S SDWLFLG=0
"RTN","SDWLE111",19,0)
 I $D(SDWLTY) W !,"Wait List Type: ",$$EXTERNAL^DILFD(409.3,4,,SDWLTY) W "//  (No Editing)" S SDWLTYE=SDWLTY G EN2
"RTN","SDWLE111",20,0)
 ;10/01/2002 - TEH
"RTN","SDWLE111",21,0)
 G ENS:$D(SDWLOPT)
"RTN","SDWLE111",22,0)
 G EN0:SDWLTEM
"RTN","SDWLE111",23,0)
 S DIR(0)="SO^1:PCMM TEAM ASSIGMENT;2:PCMM POSITION ASSIGNMENT;3:SERVICE/SPECIALTY;4:SPECIFIC CLINIC"
"RTN","SDWLE111",24,0)
 I SDWLCP5'="" S DIR(0)="SO^1:PCMM TEAM ASSIGMENT;2:SERVICE/SPECIALTY;3:SPECIFIC CLINIC" D 
"RTN","SDWLE111",25,0)
 .S DIR("L",1)="      Select Wait List Type: ",DIR("L",2)="",DIR("L",3)="          1. PCMM TEAM ASSIGMENT"
"RTN","SDWLE111",26,0)
 .S DIR("L",4)="             2. SERVICE/SPECIALTY",DIR("L",5)="             3. SPECIFIC CLINIC",SDWLFLG=1
"RTN","SDWLE111",27,0)
 G EN0:SDWLFLG
"RTN","SDWLE111",28,0)
ENS I $D(SDWLOPT),SDWLOPT S DIR(0)="SO^;1:SERVICE/SPECIALTY;2:SPECIFIC CLINIC" D 
"RTN","SDWLE111",29,0)
 .S DIR("L",1)="      Select Wait List Type: ",DIR("L",2)=""
"RTN","SDWLE111",30,0)
 .S DIR("L",3)="             1. SERVICE/SPECIALTY",DIR("L")="             2. SPECIFIC CLINIC",SDWLFLG=1
"RTN","SDWLE111",31,0)
 G EN1:SDWLFLG
"RTN","SDWLE111",32,0)
EN0 I SDWLTEM,SDWLPOS D 
"RTN","SDWLE111",33,0)
 .S DIR(0)="SO^;1:SERVICE/SPECIALTY;2:SPECIFIC CLINIC" D 
"RTN","SDWLE111",34,0)
 .S DIR("L",1)="      Select Wait List Type: ",DIR("L",2)=""
"RTN","SDWLE111",35,0)
 .S DIR("L",3)="             1. SERVICE/SPECIALTY",DIR("L")="             2. SPECIFIC CLINIC",SDWLFLG=1
"RTN","SDWLE111",36,0)
 G EN1:SDWLFLG
"RTN","SDWLE111",37,0)
 I SDWLWTE D 
"RTN","SDWLE111",38,0)
 .S DIR(0)="SO^;1:SERVICE/SPECIALTY;2:SPECIFIC CLINIC" D 
"RTN","SDWLE111",39,0)
 .S DIR("L",1)="      Select Wait List Type: ",DIR("L",2)=""
"RTN","SDWLE111",40,0)
 .S DIR("L",3)="             1. SERVICE/SPECIALTY",DIR("L")="             2. SPECIFIC CLINIC",SDWLFLG=1
"RTN","SDWLE111",41,0)
 G EN1:SDWLFLG
"RTN","SDWLE111",42,0)
 I 'SDWLTEM D 
"RTN","SDWLE111",43,0)
 .S DIR(0)="SO^1:PCMM TEAM ASSIGNMENT;2:SERVICE/SPECIALTY;3:SPECIFIC CLINIC" D 
"RTN","SDWLE111",44,0)
 .S DIR("L",1)="      Select Wait List Type: ",DIR("L",2)=""
"RTN","SDWLE111",45,0)
 .S DIR("L",2)=""
"RTN","SDWLE111",46,0)
 .S DIR("L",3)="             1. PCMM TEAM ASSIGNMENT"
"RTN","SDWLE111",47,0)
 .S DIR("L",4)="             2. SERVICE/SPECIALTY"
"RTN","SDWLE111",48,0)
 .S DIR("L")="             3. SPECIFIC CLINIC",SDWLFLG=1
"RTN","SDWLE111",49,0)
 G EN1:SDWLFLG
"RTN","SDWLE111",50,0)
 I SDWLTEM D
"RTN","SDWLE111",51,0)
 .S DIR(0)="SO^1:PCMM POSITION ASSIGNMENT;2:SERVICE/SPECIALTY;3:SPECIFIC CLINIC"
"RTN","SDWLE111",52,0)
 .S DIR("L",1)="     Select Wait List Type: "
"RTN","SDWLE111",53,0)
 .S DIR("L",2)=""
"RTN","SDWLE111",54,0)
 .S DIR("L",3)="           1. PCMM POSITION ASSIGNMENT"
"RTN","SDWLE111",55,0)
 .S DIR("L",4)="           2. SERVICE/SPECIALTY"
"RTN","SDWLE111",56,0)
 .S DIR("L")="           3. SPECIFIC CLINIC",SDWLFLG=1
"RTN","SDWLE111",57,0)
 G EN1:SDWLFLG
"RTN","SDWLE111",58,0)
 S DIR("L",1)="     Select Wait List Type: "
"RTN","SDWLE111",59,0)
 S DIR("L",2)=""
"RTN","SDWLE111",60,0)
 S DIR("L",3)="           1. PCMM TEAM ASSIGMENT"
"RTN","SDWLE111",61,0)
 S DIR("L",4)="           2. PCMM POSITION ASSIGNMENT"
"RTN","SDWLE111",62,0)
 S DIR("L",5)="           3. SERVICE/SPECIALTY"
"RTN","SDWLE111",63,0)
 S DIR("L")="           4. SPECIFIC CLINIC"
"RTN","SDWLE111",64,0)
EN1 D ^DIR I X="" W " Required or '^' to Quit" G EN
"RTN","SDWLE111",65,0)
 I $D(DUOUT) S SDWLERR=1 G END
"RTN","SDWLE111",66,0)
 I 'SDWLTEM,'SDWLWTE S SDWLTYE=$S(Y=1:1,Y=2:3,Y=3:4)
"RTN","SDWLE111",67,0)
 I SDWLPOS S SDWLTYE=$S(Y=1:1,Y=2:3,Y=3:4)
"RTN","SDWLE111",68,0)
 I SDWLTEM S SDWLTYE=$S(Y=1:2,Y=2:3,Y=3:4)
"RTN","SDWLE111",69,0)
 I SDWLPOS,SDWLTEM S SDWLTYE=$S(Y=1:3,Y=2:4)
"RTN","SDWLE111",70,0)
 I SDWLWTE S SDWLTYE=$S(Y=1:3,Y=2:4)
"RTN","SDWLE111",71,0)
 I $D(SDWLOPT),SDWLOPT S SDWLTYE=$S(Y=1:3,Y=2:4)
"RTN","SDWLE111",72,0)
 S DIE="^SDWL(409.3,",DR="4///^S X=SDWLTYE" D ^DIE
"RTN","SDWLE111",73,0)
 ;
"RTN","SDWLE111",74,0)
EN2 ;ASK INSTITUTION (FILE 4)
"RTN","SDWLE111",75,0)
 ;
"RTN","SDWLE111",76,0)
 I SDWLTYE=2,$D(SDWLCPT),SDWLCPT S (SDWLINE,SDWLIN)=$P($G(^SCTM(404.51,+SDWLCPT,0)),U,7) G END
"RTN","SDWLE111",77,0)
 I SDWLTYE=2,'SDWLCP3 S SDWLI=0 F  S SDWLI=$O(^SCTM(404.57,SDWLI)) Q:SDWLI<1  D
"RTN","SDWLE111",78,0)
 .S SDWLL=+$P($G(^SCTM(404.57,SDWLI,0)),U,2),SDWLINL=+$P($G(^SCTM(404.51,+SDWLL,0)),U,7),SDWLINL(+SDWLINL)=""
"RTN","SDWLE111",79,0)
 K DUOUT S SDWLERR=0 W !
"RTN","SDWLE111",80,0)
 I $D(SDWLIN) D
"RTN","SDWLE111",81,0)
 .S X=$S($D(SDWLIN):$$EXTERNAL^DILFD(409.32,.02,,SDWLIN),1:""),DIC(0)="Q",DIC=4,SDWLINE=SDWLIN D ^DIC D
"RTN","SDWLE111",82,0)
 ..W !,"Select Institution: ",$P(Y,U,2)," //  (No Editing)" S SDWLERR=1
"RTN","SDWLE111",83,0)
 I SDWLERR S SDWLERR=0 G END
"RTN","SDWLE111",84,0)
 I SDWLTYE=1 S DIC("S")="I $D(^SCTM(404.51,""AINST"",+Y))"
"RTN","SDWLE111",85,0)
 I SDWLTYE=2 S DIC("S")="I $D(SDWLINL(+Y))"
"RTN","SDWLE111",86,0)
 I SDWLTYE=4 S DIC("S")="I $D(^SDWL(409.32,""ACT"",+Y))"
"RTN","SDWLE111",87,0)
 I SDWLTYE=3 S DIC("S")="I $D(^SDWL(409.31,""E"",+Y))"
"RTN","SDWLE111",88,0)
 S DIC("S")=DIC("S")_",$$GET1^DIQ(4,+Y_"","",11,""I"")=""N"",$$TF^XUAF4(+Y)"
"RTN","SDWLE111",89,0)
 S DIC(0)="AEQNM",DIC="4",DIC("A")="Select Institution: " D ^DIC I Y<0,'$D(DUOUT) S SDWLERR=1 W "Required or '^' to Quit."
"RTN","SDWLE111",90,0)
 I $D(DUOUT) S SDWLERR=1 Q
"RTN","SDWLE111",91,0)
 G EN2:SDWLERR
"RTN","SDWLE111",92,0)
 I Y>0 D 
"RTN","SDWLE111",93,0)
 .K DIC,DIC("A"),DIC("S"),DIC(0),DIC("B") S (SDWLIN,SDWLINE)=+Y,DIE="^SDWL(409.3,"
"RTN","SDWLE111",94,0)
 .I '$D(DUOUT),Y>0 S DR="2////^S X=SDWLIN",DIE="^SDWL(409.3,",DA=SDWLDA D ^DIE
"RTN","SDWLE111",95,0)
 I $D(DUOUT) S SDWLERR=1
"RTN","SDWLE111",96,0)
END Q
"RTN","SDWLPE")
0^1^B17635808
"RTN","SDWLPE",1,0)
SDWLPE ;IOFO BAY PINES/TEH - WAIT LIST - PARAMETER WAIT LIST ENTER/EDIT ;20 Aug 2002
"RTN","SDWLPE",2,0)
 ;;5.3;scheduling;**263,280**;AUG 13 1993
"RTN","SDWLPE",3,0)
 ;
"RTN","SDWLPE",4,0)
 ;
"RTN","SDWLPE",5,0)
EN ;
"RTN","SDWLPE",6,0)
 ;OPTION HEADER
"RTN","SDWLPE",7,0)
 ;
"RTN","SDWLPE",8,0)
 D HD
"RTN","SDWLPE",9,0)
 ;
"RTN","SDWLPE",10,0)
 ;SELECT FILE TO EDIT
"RTN","SDWLPE",11,0)
 ;
"RTN","SDWLPE",12,0)
EN1 D SEL G END:X["^",END:X=""
"RTN","SDWLPE",13,0)
 ;
"RTN","SDWLPE",14,0)
 ;EDIT PARAMETER FILE
"RTN","SDWLPE",15,0)
 ;
"RTN","SDWLPE",16,0)
 D EDIT G EN:'$D(Y)
"RTN","SDWLPE",17,0)
 G END
"RTN","SDWLPE",18,0)
 Q
"RTN","SDWLPE",19,0)
 ;
"RTN","SDWLPE",20,0)
SEL ;SELECT PARAMETER FILE
"RTN","SDWLPE",21,0)
 S DIR(0)="SO^1:Wait List Service/Specialty File;2:Wait List Clinic Location"
"RTN","SDWLPE",22,0)
 S DIR("L",1)="Select one of the following:"
"RTN","SDWLPE",23,0)
 S DIR("L",2)=""
"RTN","SDWLPE",24,0)
 S DIR("L",3)="    1. Wait List Service/Specialty (409.31)"
"RTN","SDWLPE",25,0)
 S DIR("L")="    2. Wait List Clinic Location (409.32)"
"RTN","SDWLPE",26,0)
 D ^DIR S SDWLF=X
"RTN","SDWLPE",27,0)
 K DIR,DILN,DINDEX
"RTN","SDWLPE",28,0)
 Q
"RTN","SDWLPE",29,0)
EDIT ;EDIT FILE PARAMETERS
"RTN","SDWLPE",30,0)
 I SDWLF=1 D SB1 Q:$D(DUOUT)
"RTN","SDWLPE",31,0)
 I SDWLF=2 D SB2 Q:$D(DUOUT)
"RTN","SDWLPE",32,0)
 Q
"RTN","SDWLPE",33,0)
SB1 S DIC(0)="AEQMZ",DIC("A")="Select DSS ID: ",DIC="^DIC(40.7,",DIC("S")="I '$P(^DIC(40.7,+Y,0),U,3)"
"RTN","SDWLPE",34,0)
 D ^DIC
"RTN","SDWLPE",35,0)
 I X["^" I $D(DA),'$D(^SDWL(409.31,DA,"I")) S DIK="^SDWL(409.31," D ^DIK S DUOUT=1 Q
"RTN","SDWLPE",36,0)
 Q:Y<0  Q:$D(DUOUT)  S SDWLDSS=+Y
"RTN","SDWLPE",37,0)
 I '$D(^SDWL(409.31,"B",SDWLDSS)) D
"RTN","SDWLPE",38,0)
 .S DIC(0)="LX",X=SDWLDSS,DIC="^SDWL(409.31," K DO D FILE^DICN
"RTN","SDWLPE",39,0)
 S DA=$O(^SDWL(409.31,"B",SDWLDSS,""))
"RTN","SDWLPE",40,0)
 S DIR(0)="PAO^4:EMZ" D ^DIR
"RTN","SDWLPE",41,0)
 I X["^" S DIK="^SDWL(409.31," D ^DIK S DUOUT=1 Q
"RTN","SDWLPE",42,0)
 S X=$$GET1^DIQ(4,+Y_",",11)
"RTN","SDWLPE",43,0)
 I X'["N"!'$$TF^XUAF4(+Y) W !,*7,"Invalid Entry. Must be 'National' Institution." G SB1
"RTN","SDWLPE",44,0)
 I X="" D  W *7," Required" G SB1
"RTN","SDWLPE",45,0)
 .I '$D(^SDWL(409.31,DA,"I")) S DIK="^SDWL(409.31," D ^DIK
"RTN","SDWLPE",46,0)
 I '$D(^SDWL(409.31,DA,"I","B",+Y)) D
"RTN","SDWLPE",47,0)
 .S DA(1)=DA,DIC="^SDWL(409.31,"_DA(1)_","_"""I"""_",",DIC("P")=409.311,X=+Y K D0 D FILE^DICN I +Y S DA=+Y
"RTN","SDWLPE",48,0)
 I $D(^SDWL(409.31,DA,"I","B",+Y)) S DA(1)=DA,DA=$O(^(+Y,0))
"RTN","SDWLPE",49,0)
 K DIC,DIE,DIR,DR
"RTN","SDWLPE",50,0)
 W ! S DR="1;3",DIE="^SDWL(409.31,"_DA(1)_","_"""I"""_"," D ^DIE
"RTN","SDWLPE",51,0)
 I $P(^SDWL(409.31,DA(1),"I",DA,0),U,2)="" D
"RTN","SDWLPE",52,0)
 .W *7," This ENTRY requires an ACTIVATION DATE. ENTRY deleted."
"RTN","SDWLPE",53,0)
 .S DIK="^SDWL(409.31,"_DA(1)_","_"""I"""_"," D ^DIK I '$P(^SDWL(409.31,DA(1),"I",0),U,3) D
"RTN","SDWLPE",54,0)
 ..S DIK="^SDWL(409.31,",DA=DA(1) D ^DIK
"RTN","SDWLPE",55,0)
 K DA,DA(1),SDWLDSS,DIC,DR,DIE,DI,DIEDA,DIG,DIH,DIIENS,DIR,DIU,DIV
"RTN","SDWLPE",56,0)
 Q
"RTN","SDWLPE",57,0)
SB2 S SDWLSTOP=0
"RTN","SDWLPE",58,0)
 W ! S DIC(0)="AEQMNZ",DIC("A")="Select Clinic: ",DIC=44
"RTN","SDWLPE",59,0)
 S DIC("S")="S SDWLX=$G(^SC(+Y,0)),SDWLY=$G(^(""I"")) I $P(SDWLX,U,3)=""C"",$P(SDWLY,U,1)'>$P(SDWLY,U,2) I $P(^SC(+Y,0),U,4)"
"RTN","SDWLPE",60,0)
 S DIC("W")="I $P(^SC(+Y,0),U,4) W ?50,""- "",$E($P(^DIC(4,$P(^SC(+Y,0),U,4),0),U,1),1,25)"
"RTN","SDWLPE",61,0)
 D ^DIC Q:Y<1  Q:$D(DUOUT)  S SDWLSC=+Y
"RTN","SDWLPE",62,0)
 S X=$$GET1^DIQ(4,+Y_",",11) I X'["N"!$$TF^XUAF4(+Y) W !,*7,"Invalid Entry. Must be 'National' Institution." G SB2
"RTN","SDWLPE",63,0)
 I '$D(^SDWL(409.32,"B",SDWLSC)) D
"RTN","SDWLPE",64,0)
 .S DIC(0)="LX",X=SDWLSC,DIC="^SDWL(409.32," D FILE^DICN
"RTN","SDWLPE",65,0)
 S DA=$O(^SDWL(409.32,"B",SDWLSC,""))
"RTN","SDWLPE",66,0)
 K DIC,DIC(0)
"RTN","SDWLPE",67,0)
 S SDWLSCN=$P($G(^SDWL(409.32,DA,0)),U,1) D
"RTN","SDWLPE",68,0)
 .I $D(^SDWL(409.3,"C",SDWLSCN)) D
"RTN","SDWLPE",69,0)
 ..S SDWLN="",SDWLCNT=0 F  S SDWLN=$O(^SDWL(409.3,"C",SDWLSCN,SDWLN)) Q:SDWLN=""  D
"RTN","SDWLPE",70,0)
 ...S X=$G(^SDWL(409.3,SDWLN,0)) I '$D(^SDWL(409.3,SDWLN,"DIS")) S SDWLCNT=SDWLCNT+1,^TMP("SDWLPE",$J,"DIS",SDWLN,SDWLCNT)=X,SDWLSTOP=1
"RTN","SDWLPE",71,0)
 W ! I SDWLSTOP W "This Clinic has Patients on the Wait List and can not be inactivated." Q
"RTN","SDWLPE",72,0)
 S DR="1",DIE="^SDWL(409.32," D ^DIE I X S DR="2////^S X=DUZ" D ^DIE
"RTN","SDWLPE",73,0)
 S DR="3",DIE="^SDWL(409.32," D ^DIE I X S DR="4////^S X=DUZ" D ^DIE
"RTN","SDWLPE",74,0)
 K DR,DIE,DIC,Y,X,SDWLY,DIC(0),DO,DA,DI,DIW,SDWLX,SDWLSCN,SDWLF
"RTN","SDWLPE",75,0)
 Q
"RTN","SDWLPE",76,0)
SWT ;SWITCH FOR INACTIVIATION OF PARAMETER FILE
"RTN","SDWLPE",77,0)
 Q
"RTN","SDWLPE",78,0)
HD ;HEADER
"RTN","SDWLPE",79,0)
 W:$D(IOF) @IOF W !!,?80-$L("Wait List Parameter Enter/Edit")\2,"Wait List Parameter Enter/Edit",!
"RTN","SDWLPE",80,0)
 W !,?80-$L("------------------------------")\2,"------------------------------",!
"RTN","SDWLPE",81,0)
END K SDWLSTOP,DIR,DIC,DR,DIK,SDWLX,SDWLSCN,SDWLF,SDWLY,SDWLSC,SDWLN,SDWLCNT,SDWLDSS,DUOUT,X,Y
"RTN","SDWLPE",82,0)
 Q
"UP",409.31,409.311,-1)
409.31^I
"UP",409.31,409.311,0)
409.311
"VER")
8.0^22.0
"^DD",404.51,404.51,.07,0)
INSTITUTION^R*P4'^DIC(4,^0;7^S DIC("S")="I $P(^(0),U,11)=""N"",$$TF^XUAF4(+Y)" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",404.51,404.51,.07,1,0)
^.1
"^DD",404.51,404.51,.07,1,1,0)
404.51^AINST
"^DD",404.51,404.51,.07,1,1,1)
S ^SCTM(404.51,"AINST",$E(X,1,30),DA)=""
"^DD",404.51,404.51,.07,1,1,2)
K ^SCTM(404.51,"AINST",$E(X,1,30),DA)
"^DD",404.51,404.51,.07,1,1,"%D",0)
^^1^1^2950703^
"^DD",404.51,404.51,.07,1,1,"%D",1,0)
This sorts by institution - can be used for multi-divisional sites.
"^DD",404.51,404.51,.07,1,1,"DT")
2950703
"^DD",404.51,404.51,.07,3)
This is the entry for the site in the INSTITUTION File.
"^DD",404.51,404.51,.07,12)
SCREEN FOR NATIONAL ENTRY
"^DD",404.51,404.51,.07,12.1)
S DIC("S")="I $P(^(0),U,11)=""N"",$$TF^XUAF4(+Y)"
"^DD",404.51,404.51,.07,21,0)
1^.001^1^1^3030213^^^^
"^DD",404.51,404.51,.07,21,1,0)
This is the entry for the site in the INSTITUTION File.
"^DD",404.51,404.51,.07,"DT")
3030225
"^DD",409.3,409.3,2,0)
INSTITUTION^R*P4'^DIC(4,^0;3^S DIC("S")="I $P(^(0),U,11)=""N"",$$TF^XUAF4(+Y)" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",409.3,409.3,2,1,0)
^.1
"^DD",409.3,409.3,2,1,1,0)
409.3^C
"^DD",409.3,409.3,2,1,1,1)
S ^SDWL(409.3,"C",$E(X,1,30),DA)=""
"^DD",409.3,409.3,2,1,1,2)
K ^SDWL(409.3,"C",$E(X,1,30),DA)
"^DD",409.3,409.3,2,1,1,"DT")
3020716
"^DD",409.3,409.3,2,3)
Enter the INSTITUTION that the patient is to be placed for the waiting list.  INSTITUTION must be NATIONAL and a treating facility.
"^DD",409.3,409.3,2,12)
Enter a National/Medical Institution
"^DD",409.3,409.3,2,12.1)
S DIC("S")="I $P(^(0),U,11)=""N"",$$TF^XUAF4(+Y)"
"^DD",409.3,409.3,2,21,0)
^.001^1^1^3030224^^^^
"^DD",409.3,409.3,2,21,1,0)
The Institution the patient is on the Wait List (Sch/PCMM)
"^DD",409.3,409.3,2,"AUDIT")
 
"^DD",409.3,409.3,2,"DT")
3030304
"^DD",409.31,409.31,1,0)
INSTITUTION^409.311P^^I;0
"^DD",409.31,409.311,0)
INSTITUTION SUB-FIELD^^4^5
"^DD",409.31,409.311,0,"NM","INSTITUTION")
 
"^DD",409.31,409.311,.01,0)
INSTITUTION^R*P4^DIC(4,^0;1^S DIC("S")="I $P(^(0),U,11)=""N"",$$TF^XUAF4(+Y)" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",409.31,409.311,.01,1,0)
^.1
"^DD",409.31,409.311,.01,1,1,0)
409.311^B
"^DD",409.31,409.311,.01,1,1,1)
S ^SDWL(409.31,DA(1),"I","B",$E(X,1,30),DA)=""
"^DD",409.31,409.311,.01,1,1,2)
K ^SDWL(409.31,DA(1),"I","B",$E(X,1,30),DA)
"^DD",409.31,409.311,.01,1,2,0)
409.31^C^MUMPS
"^DD",409.31,409.311,.01,1,2,1)
I $D(X) S ^SDWL(409.31,"C",DA(1),DA)=""
"^DD",409.31,409.311,.01,1,2,2)
K ^SDWL(409.31,"C",DA(1),DA)
"^DD",409.31,409.311,.01,1,2,"DT")
3020715
"^DD",409.31,409.311,.01,1,3,0)
409.31^D^MUMPS
"^DD",409.31,409.311,.01,1,3,1)
I $D(X) S ^SDWL(409.31,"D",DA(1),X)=""
"^DD",409.31,409.311,.01,1,3,2)
K ^SDWL(409.31,"D",DA(1),X)
"^DD",409.31,409.311,.01,1,3,"DT")
3020725
"^DD",409.31,409.311,.01,1,4,0)
409.31^E^MUMPS
"^DD",409.31,409.311,.01,1,4,1)
I $D(X) S ^SDWL(409.31,"E",X,DA(1))=""
"^DD",409.31,409.311,.01,1,4,2)
K ^SDWL(409.31,"E",X,DA(1))
"^DD",409.31,409.311,.01,1,4,"DT")
3020810
"^DD",409.31,409.311,.01,3)
ENTER INSTITUTION FOR THIS SERVICE/SPECIALTY.  INSTITUTION MUST BE NATIONAL AND A TREATING FACILITY.
"^DD",409.31,409.311,.01,12)
Institution must be NATIONAL and a TREATING FACILITY
"^DD",409.31,409.311,.01,12.1)
S DIC("S")="I $P(^(0),U,11)=""N"",$$TF^XUAF4(+Y)"
"^DD",409.31,409.311,.01,21,0)
^.001^1^1^3020913^^^
"^DD",409.31,409.311,.01,21,1,0)
The institution that allows the DSS ID as a wait list selection.
"^DD",409.31,409.311,.01,"DT")
3030304
"^DD",409.32,409.32,.02,0)
INSTITUTION^*P4'^DIC(4,^0;6^S DIC("S")="I $P(^(0),U,11)=""N"",$$TF^XUAF4(+Y)" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",409.32,409.32,.02,1,0)
^.1
"^DD",409.32,409.32,.02,1,1,0)
409.32^C
"^DD",409.32,409.32,.02,1,1,1)
S ^SDWL(409.32,"C",$E(X,1,30),DA)=""
"^DD",409.32,409.32,.02,1,1,2)
K ^SDWL(409.32,"C",$E(X,1,30),DA)
"^DD",409.32,409.32,.02,1,1,"DT")
3020702
"^DD",409.32,409.32,.02,5,1,0)
409.32^.01^2
"^DD",409.32,409.32,.02,12)
INSTITUTION must be NATIONAL and a treating facility.
"^DD",409.32,409.32,.02,12.1)
S DIC("S")="I $P(^(0),U,11)=""N"",$$TF^XUAF4(+Y)"
"^DD",409.32,409.32,.02,21,0)
^.001^1^1^3020913^^^^
"^DD",409.32,409.32,.02,21,1,0)
Institution of the clinic in the .01 field
"^DD",409.32,409.32,.02,"DT")
3030304
**END**
**END**

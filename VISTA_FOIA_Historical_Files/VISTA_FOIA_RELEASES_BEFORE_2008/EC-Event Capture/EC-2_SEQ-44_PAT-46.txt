$TXT Created by MORRISON,JENNIFER at MNTVBB.FO-ALBANY.MED.VA.GOV  (KIDS) on Tuesday, 03/11/03 at 09:44
=============================================================================
Run Date: APR 24, 2003                     Designation: EC*2*46
Package : EC - EVENT CAPTURE                  Priority: Mandatory
Version : 2        SEQ #44                      Status: Released
                  Compliance Date: MAY 25, 2003
=============================================================================

Associated patches: (v)EC*2*42     <<= must be installed BEFORE `EC*2*46'

Subject: ECS GUI FIX FOR CPRS INTERFACE, ETC.

Category: 
  - Routine

Description: 
============

 This patch addresses fixes to NOISes related to EC GUI/CPRS Interface and
 other issues. 
   
    
 NOIS
 1. CHY-0103-52096  GUI ERROR
    Site reported receiving a list index out of bounds error when accessing 
    Event Capture Interface from the CPRS Tool Menu.  The problem was 
    traced to the user selecting a CPRS Visit, then launching the 'Event
    Capture Interface' from the CPRS Tools menu.  Two problems were found
    when the Locations were being populated in this scenario.  A loop was 
    being executed one time too many therefore producing the List Index out 
    of bounds error.  Additionally, the Location IEN value that CPRS was 
    passing to Event Capture was erroneously being used as Location IEN in 
    Event Capture, instead of the IEN for the Associated Clinic.  Delphi 
    form UfrmPatientProcDE was modified.
   
 2. PUG-0103-51955  Errors with using EC GUI Interface
    LOM-0103-61015  List index out of bounds (6) or (0)
    CLA-0103-20931  Error EC GETVISITINFO
    LOM-0103-60602  RPC error after patch 39 and 42
    ALB-1202-51655  ECS Interface With CPRS
    CLA-0103-20793  XUS GET TOKEN - RPC NOT REGISTERED
    Several sites reported receiving the following errors when trying to 
    access 'Event Capture Interface' from the CPRS Tools Menu.
        Broker RPC Error:
        RPC: EC GETVISITINFO
        Param[0]=Literal
  
        List index out of bounds (0)
 
     Found that RPC: EC GETVISITINFO was not added as part of the EC GUI 
     CONTEXT.
    
 3. AUG-0103-31525  Error in Test Account, CAPI+6~XWEBBRK@
    Site reported receiving errors when following the steps below:-
       a) Remove the ECALLU key from a user.
       b) On the EC GUI Report Menu select, Procedure Reason Report.
       c) Fill in the Date range, Location, Reason and for DSS Units select 
          'ALL'.
       d) Click on Preview.
    The above results in a long delay, then the message, "The Procedure 
    Reason Report could not be generated".  If at this point another report
    is run, then the error CAPI+6~XWEBBRK@ is received. 
  
    Found that when ECALLU key is removed from a user and the Procedure 
    Reason Report is selected (for example), if the user has no DSS Units 
    listed, s/he is still allowed to make a selection (example 'All').
    If this is done and the Preview button is clicked the error is 
    generated.  The GUI application was modified to display a message 
    when no DSS Units are present.  The reports affected by this are:- 
    Ordering Section Summary Report and Procedure Reason Report.  Delphi 
    form UfrmSelectReport was modified.
 
 4. ATG-1202-31584  ECS GUI Installer stores patch# in software references
    Modification was made to the GUI installer to exclude the patch number.
   
 5. LIT-1202-70733  PROVIDER USING ECS GUI
    Site reported that in the GUI data entry there is no way to distinguish 
    between providers that have the exact same name.  The occupation, 
    specialty and subspecialty from the Person Class file #8932.1 were 
    added to the provider's name.  Routines ECUERPC,ECUERPC1 and ECUMRPC2 
    were modified along with Delphi forms UfrmSelectReport, UfrmEditPatientProc, 
    and UfrmEditProcPatients2.  Report 'Provider (1 - 3) Summary Report' 
    was also modified to show these added fields. 
     
 6. ANN-1102-40780  scroll bars 
    Site reported that the scroll bar in the DSS Unit Status field of the 
    DSS Unit option under the Management Menu is not working. Routine 
    ECUERPC and Delphi form UfrmDSSUnit were modified to address this 
    problem.
   
 7. ATG-0902-32112  ECS GUI- Location displays include Name but not Station Numb
    The Location option under the GUI Management Menu was modified to 
    display the facility type and station # fields.  The grid was also 
    changed to display the state abbreviation rather than the state's 
    name.  Routine ECUMRPC2 and Delphi form UfrmECMgmtMenu were modified 
    to accomplish this.
   
 8. In the GUI main entry screen, when the user clicks the Help icon 
    (circle with question mark inside), only a partial display of the 
    help text is shown.  This was corrected on Delphi form UFrmECMain.
    Additionally, topic specific help will be displayed on the Management 
    Menu by modifying Delphi form UfrmECMgmtMenu.
    
     
 CLIENT FILES
 ============
 The following Client PC software is exported as part of this patch and
 MUST be installed with the patch.
  
   File Name              Contents                Retrieval Format
   ---------              --------                ----------------
   EC2_0P46.EXE           EC GUI Executable       BINARY
  
 The EC GUI executable 'ec2_0p46.exe' for patch EC*2.0*46 can be found at
 the following locations.
    Albany            10.1.19.5         anonymous.software
    Hines             10.3.29.201       anonymous.software
    Salt Lake City    10.5.21.65        anonymous.software
  or
    Albany               ftp.fo-albany.med.va.gov
    Hines                ftp.fo-hines.med.va.gov
    Salt Lake City       ftp.fo-slc.med.va.gov
    
    
 ROUTINE SUMMARY:
 ================
 The following is a list of the routine(s) included in this patch.  The
 second line of each of these routine(s) will look like:
    
      <tab>;;2.0; EVENT CAPTURE ;**[patch list]**;8 May 96
     
                            CHECK^XTSUMBLD results
 Routine name      Before Patch          After Patch         Patch List
 ============      ============          ===========         ==========
 ECUERPC                6919631              7053566         25,32,33,46
 ECUERPC1               8417687              8542504         25,33,42,46
 ECUMRPC2               5204215              5513820         25,30,42,46
    
   
 INSTALLATION INSTRUCTIONS:
 ==========================
 This patch can be loaded with users on the system.
  
 Installation will take less than 5 minutes.
  
 1.  Use the INSTALL/CHECK MESSAGE option on the PackMan menu to unload
     the KIDS distribution included with this message.
  
 2.  Review your mapped set. If any of the routines listed in the ROUTINE
     SUMMARY section are mapped, they should be removed from the mapped set
     at this time.
  
 3.  From the Kernel Installation and Distribution System Menu, select
     the Installation menu.
  
 4.  From this menu, you may elect to use the following options
     (when prompted for INSTALL NAME, enter EC*2.0*46):
     a.  Compare Transport Global to Current System  - this option will
         allow you to view all changes that will be made when the patch
         is installed.  It compares all components of the patch (routines,
         DDs, templates, etc.).
     b.  Verify Checksums in Transport Global - this option will
         allow you to ensure the integrity of the routines that are in
         the transport global.
     c.  Print Transport Global - this option will allow you to view the
         components of the KIDS build.
  
 5.  Use the Install Package(s) option and select the package EC*2.0*46.
  
 6.  When prompted 'Want to DISABLE Scheduled Options, Menu Options, and
     Protocols? YES//', respond YES.  When prompted to select the options
     you would like to place out of order, enter the following:
         EC GUI Context ... [EC GUI CONTEXT]
   
 7.  If a routine was unmapped as part of step 2, it should be returned
     to the mapped set once the installation has run to completion.

Routine Information:
====================

Routine Name:
  - ECUERPC


Routine Checksum:

Routine Name:
  - ECUMRPC2


Routine Checksum:

Routine Name:
  - ECUERPC1


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : MORRISON,JENNIFER              Date Entered : JAN 28, 2003
Completed By: LAVERTY,TIM                   Date Completed: APR 23, 2003
Released By : STRICKLAND,JOAN C            Date Released : APR 24, 2003
=============================================================================


Packman Mail Message:
=====================

$END TXT
